var IF=Object.defineProperty;var LF=(e,t,r)=>t in e?IF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ye=(e,t,r)=>LF(e,typeof t!="symbol"?t+"":t,r);function RF(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function Vn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var CM={exports:{}},ux={},_M={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf=Symbol.for("react.element"),BF=Symbol.for("react.portal"),zF=Symbol.for("react.fragment"),FF=Symbol.for("react.strict_mode"),HF=Symbol.for("react.profiler"),UF=Symbol.for("react.provider"),WF=Symbol.for("react.context"),VF=Symbol.for("react.forward_ref"),qF=Symbol.for("react.suspense"),GF=Symbol.for("react.memo"),KF=Symbol.for("react.lazy"),l_=Symbol.iterator;function YF(e){return e===null||typeof e!="object"?null:(e=l_&&e[l_]||e["@@iterator"],typeof e=="function"?e:null)}var EM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AM=Object.assign,TM={};function Pd(e,t,r){this.props=e,this.context=t,this.refs=TM,this.updater=r||EM}Pd.prototype.isReactComponent={};Pd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Pd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function PM(){}PM.prototype=Pd.prototype;function pj(e,t,r){this.props=e,this.context=t,this.refs=TM,this.updater=r||EM}var mj=pj.prototype=new PM;mj.constructor=pj;AM(mj,Pd.prototype);mj.isPureReactComponent=!0;var c_=Array.isArray,MM=Object.prototype.hasOwnProperty,gj={current:null},OM={key:!0,ref:!0,__self:!0,__source:!0};function $M(e,t,r){var n,s={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)MM.call(t,n)&&!OM.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:xf,type:e,key:a,ref:o,props:s,_owner:gj.current}}function XF(e,t){return{$$typeof:xf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xj(e){return typeof e=="object"&&e!==null&&e.$$typeof===xf}function JF(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var d_=/\/+/g;function yy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?JF(""+e.key):t.toString(36)}function bm(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case xf:case BF:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+yy(o,0):n,c_(s)?(r="",e!=null&&(r=e.replace(d_,"$&/")+"/"),bm(s,t,r,"",function(d){return d})):s!=null&&(xj(s)&&(s=XF(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(d_,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",c_(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+yy(a,l);o+=bm(a,t,r,c,s)}else if(c=YF(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+yy(a,l++),o+=bm(a,t,r,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function pp(e,t,r){if(e==null)return e;var n=[],s=0;return bm(e,n,"","",function(a){return t.call(r,a,s++)}),n}function ZF(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Cn={current:null},ym={transition:null},QF={ReactCurrentDispatcher:Cn,ReactCurrentBatchConfig:ym,ReactCurrentOwner:gj};function DM(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:pp,forEach:function(e,t,r){pp(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return pp(e,function(){t++}),t},toArray:function(e){return pp(e,function(t){return t})||[]},only:function(e){if(!xj(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};tt.Component=Pd;tt.Fragment=zF;tt.Profiler=HF;tt.PureComponent=pj;tt.StrictMode=FF;tt.Suspense=qF;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QF;tt.act=DM;tt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=AM({},e.props),s=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=gj.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)MM.call(t,c)&&!OM.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:xf,type:e.type,key:s,ref:a,props:n,_owner:o}};tt.createContext=function(e){return e={$$typeof:WF,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:UF,_context:e},e.Consumer=e};tt.createElement=$M;tt.createFactory=function(e){var t=$M.bind(null,e);return t.type=e,t};tt.createRef=function(){return{current:null}};tt.forwardRef=function(e){return{$$typeof:VF,render:e}};tt.isValidElement=xj;tt.lazy=function(e){return{$$typeof:KF,_payload:{_status:-1,_result:e},_init:ZF}};tt.memo=function(e,t){return{$$typeof:GF,type:e,compare:t===void 0?null:t}};tt.startTransition=function(e){var t=ym.transition;ym.transition={};try{e()}finally{ym.transition=t}};tt.unstable_act=DM;tt.useCallback=function(e,t){return Cn.current.useCallback(e,t)};tt.useContext=function(e){return Cn.current.useContext(e)};tt.useDebugValue=function(){};tt.useDeferredValue=function(e){return Cn.current.useDeferredValue(e)};tt.useEffect=function(e,t){return Cn.current.useEffect(e,t)};tt.useId=function(){return Cn.current.useId()};tt.useImperativeHandle=function(e,t,r){return Cn.current.useImperativeHandle(e,t,r)};tt.useInsertionEffect=function(e,t){return Cn.current.useInsertionEffect(e,t)};tt.useLayoutEffect=function(e,t){return Cn.current.useLayoutEffect(e,t)};tt.useMemo=function(e,t){return Cn.current.useMemo(e,t)};tt.useReducer=function(e,t,r){return Cn.current.useReducer(e,t,r)};tt.useRef=function(e){return Cn.current.useRef(e)};tt.useState=function(e){return Cn.current.useState(e)};tt.useSyncExternalStore=function(e,t,r){return Cn.current.useSyncExternalStore(e,t,r)};tt.useTransition=function(){return Cn.current.useTransition()};tt.version="18.3.1";_M.exports=tt;var g=_M.exports;const Ge=Vn(g),IM=RF({__proto__:null,default:Ge},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e9=g,t9=Symbol.for("react.element"),r9=Symbol.for("react.fragment"),n9=Object.prototype.hasOwnProperty,s9=e9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a9={key:!0,ref:!0,__self:!0,__source:!0};function LM(e,t,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)n9.call(t,n)&&!a9.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:t9,type:e,key:a,ref:o,props:s,_owner:s9.current}}ux.Fragment=r9;ux.jsx=LM;ux.jsxs=LM;CM.exports=ux;var i=CM.exports,RM={exports:{}},us={},BM={exports:{}},zM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,T){var G=M.length;M.push(T);e:for(;0<G;){var Y=G-1>>>1,ee=M[Y];if(0<s(ee,T))M[Y]=T,M[G]=ee,G=Y;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var T=M[0],G=M.pop();if(G!==T){M[0]=G;e:for(var Y=0,ee=M.length,R=ee>>>1;Y<R;){var B=2*(Y+1)-1,q=M[B],X=B+1,ue=M[X];if(0>s(q,G))X<ee&&0>s(ue,q)?(M[Y]=ue,M[X]=G,Y=X):(M[Y]=q,M[B]=G,Y=B);else if(X<ee&&0>s(ue,G))M[Y]=ue,M[X]=G,Y=X;else break e}}return T}function s(M,T){var G=M.sortIndex-T.sortIndex;return G!==0?G:M.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,p=!1,m=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(M){for(var T=r(d);T!==null;){if(T.callback===null)n(d);else if(T.startTime<=M)n(d),T.sortIndex=T.expirationTime,t(c,T);else break;T=r(d)}}function j(M){if(x=!1,w(M),!m)if(r(c)!==null)m=!0,$(N);else{var T=r(d);T!==null&&L(j,T.startTime-M)}}function N(M,T){m=!1,x&&(x=!1,y(C),C=-1),p=!0;var G=f;try{for(w(T),h=r(c);h!==null&&(!(h.expirationTime>T)||M&&!O());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,f=h.priorityLevel;var ee=Y(h.expirationTime<=T);T=e.unstable_now(),typeof ee=="function"?h.callback=ee:h===r(c)&&n(c),w(T)}else n(c);h=r(c)}if(h!==null)var R=!0;else{var B=r(d);B!==null&&L(j,B.startTime-T),R=!1}return R}finally{h=null,f=G,p=!1}}var k=!1,S=null,C=-1,P=5,E=-1;function O(){return!(e.unstable_now()-E<P)}function A(){if(S!==null){var M=e.unstable_now();E=M;var T=!0;try{T=S(!0,M)}finally{T?_():(k=!1,S=null)}}else k=!1}var _;if(typeof v=="function")_=function(){v(A)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,D=I.port2;I.port1.onmessage=A,_=function(){D.postMessage(null)}}else _=function(){b(A,0)};function $(M){S=M,k||(k=!0,_())}function L(M,T){C=b(function(){M(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,$(N))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(M){switch(f){case 1:case 2:case 3:var T=3;break;default:T=f}var G=f;f=T;try{return M()}finally{f=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,T){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=f;f=M;try{return T()}finally{f=G}},e.unstable_scheduleCallback=function(M,T,G){var Y=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Y+G:Y):G=Y,M){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=G+ee,M={id:u++,callback:T,priorityLevel:M,startTime:G,expirationTime:ee,sortIndex:-1},G>Y?(M.sortIndex=G,t(d,M),r(c)===null&&M===r(d)&&(x?(y(C),C=-1):x=!0,L(j,G-Y))):(M.sortIndex=ee,t(c,M),m||p||(m=!0,$(N))),M},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(M){var T=f;return function(){var G=f;f=T;try{return M.apply(this,arguments)}finally{f=G}}}})(zM);BM.exports=zM;var i9=BM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o9=g,ls=i9;function pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FM=new Set,vh={};function tc(e,t){Qc(e,t),Qc(e+"Capture",t)}function Qc(e,t){for(vh[e]=t,e=0;e<t.length;e++)FM.add(t[e])}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kw=Object.prototype.hasOwnProperty,l9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u_={},h_={};function c9(e){return kw.call(h_,e)?!0:kw.call(u_,e)?!1:l9.test(e)?h_[e]=!0:(u_[e]=!0,!1)}function d9(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function u9(e,t,r,n){if(t===null||typeof t>"u"||d9(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _n(e,t,r,n,s,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Kr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Kr[e]=new _n(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Kr[t]=new _n(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Kr[e]=new _n(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Kr[e]=new _n(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Kr[e]=new _n(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Kr[e]=new _n(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Kr[e]=new _n(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Kr[e]=new _n(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Kr[e]=new _n(e,5,!1,e.toLowerCase(),null,!1,!1)});var bj=/[\-:]([a-z])/g;function yj(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bj,yj);Kr[t]=new _n(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bj,yj);Kr[t]=new _n(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bj,yj);Kr[t]=new _n(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Kr[e]=new _n(e,1,!1,e.toLowerCase(),null,!1,!1)});Kr.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Kr[e]=new _n(e,1,!1,e.toLowerCase(),null,!0,!0)});function vj(e,t,r,n){var s=Kr.hasOwnProperty(t)?Kr[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(u9(t,r,s,n)&&(r=null),n||s===null?c9(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ki=o9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mp=Symbol.for("react.element"),_c=Symbol.for("react.portal"),Ec=Symbol.for("react.fragment"),wj=Symbol.for("react.strict_mode"),jw=Symbol.for("react.profiler"),HM=Symbol.for("react.provider"),UM=Symbol.for("react.context"),kj=Symbol.for("react.forward_ref"),Nw=Symbol.for("react.suspense"),Sw=Symbol.for("react.suspense_list"),jj=Symbol.for("react.memo"),Hi=Symbol.for("react.lazy"),WM=Symbol.for("react.offscreen"),f_=Symbol.iterator;function su(e){return e===null||typeof e!="object"?null:(e=f_&&e[f_]||e["@@iterator"],typeof e=="function"?e:null)}var Ut=Object.assign,vy;function Ru(e){if(vy===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);vy=t&&t[1]||""}return`
`+vy+e}var wy=!1;function ky(e,t){if(!e||wy)return"";wy=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{wy=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ru(e):""}function h9(e){switch(e.tag){case 5:return Ru(e.type);case 16:return Ru("Lazy");case 13:return Ru("Suspense");case 19:return Ru("SuspenseList");case 0:case 2:case 15:return e=ky(e.type,!1),e;case 11:return e=ky(e.type.render,!1),e;case 1:return e=ky(e.type,!0),e;default:return""}}function Cw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ec:return"Fragment";case _c:return"Portal";case jw:return"Profiler";case wj:return"StrictMode";case Nw:return"Suspense";case Sw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case UM:return(e.displayName||"Context")+".Consumer";case HM:return(e._context.displayName||"Context")+".Provider";case kj:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jj:return t=e.displayName||null,t!==null?t:Cw(e.type)||"Memo";case Hi:t=e._payload,e=e._init;try{return Cw(e(t))}catch{}}return null}function f9(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cw(t);case 8:return t===wj?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _o(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function VM(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function p9(e){var t=VM(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gp(e){e._valueTracker||(e._valueTracker=p9(e))}function qM(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=VM(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Vm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _w(e,t){var r=t.checked;return Ut({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function p_(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=_o(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function GM(e,t){t=t.checked,t!=null&&vj(e,"checked",t,!1)}function Ew(e,t){GM(e,t);var r=_o(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Aw(e,t.type,r):t.hasOwnProperty("defaultValue")&&Aw(e,t.type,_o(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function m_(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Aw(e,t,r){(t!=="number"||Vm(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Bu=Array.isArray;function Fc(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+_o(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Tw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(pe(91));return Ut({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function g_(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(pe(92));if(Bu(r)){if(1<r.length)throw Error(pe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:_o(r)}}function KM(e,t){var r=_o(t.value),n=_o(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function x_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function YM(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?YM(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xp,XM=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xp=xp||document.createElement("div"),xp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wh(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Yu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m9=["Webkit","ms","Moz","O"];Object.keys(Yu).forEach(function(e){m9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yu[t]=Yu[e]})});function JM(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Yu.hasOwnProperty(e)&&Yu[e]?(""+t).trim():t+"px"}function ZM(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=JM(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var g9=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mw(e,t){if(t){if(g9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(pe(62))}}function Ow(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $w=null;function Nj(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Dw=null,Hc=null,Uc=null;function b_(e){if(e=vf(e)){if(typeof Dw!="function")throw Error(pe(280));var t=e.stateNode;t&&(t=gx(t),Dw(e.stateNode,e.type,t))}}function QM(e){Hc?Uc?Uc.push(e):Uc=[e]:Hc=e}function eO(){if(Hc){var e=Hc,t=Uc;if(Uc=Hc=null,b_(e),t)for(e=0;e<t.length;e++)b_(t[e])}}function tO(e,t){return e(t)}function rO(){}var jy=!1;function nO(e,t,r){if(jy)return e(t,r);jy=!0;try{return tO(e,t,r)}finally{jy=!1,(Hc!==null||Uc!==null)&&(rO(),eO())}}function kh(e,t){var r=e.stateNode;if(r===null)return null;var n=gx(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(pe(231,t,typeof r));return r}var Iw=!1;if(hi)try{var au={};Object.defineProperty(au,"passive",{get:function(){Iw=!0}}),window.addEventListener("test",au,au),window.removeEventListener("test",au,au)}catch{Iw=!1}function x9(e,t,r,n,s,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Xu=!1,qm=null,Gm=!1,Lw=null,b9={onError:function(e){Xu=!0,qm=e}};function y9(e,t,r,n,s,a,o,l,c){Xu=!1,qm=null,x9.apply(b9,arguments)}function v9(e,t,r,n,s,a,o,l,c){if(y9.apply(this,arguments),Xu){if(Xu){var d=qm;Xu=!1,qm=null}else throw Error(pe(198));Gm||(Gm=!0,Lw=d)}}function rc(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function sO(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y_(e){if(rc(e)!==e)throw Error(pe(188))}function w9(e){var t=e.alternate;if(!t){if(t=rc(e),t===null)throw Error(pe(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return y_(s),e;if(a===n)return y_(s),t;a=a.sibling}throw Error(pe(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(pe(189))}}if(r.alternate!==n)throw Error(pe(190))}if(r.tag!==3)throw Error(pe(188));return r.stateNode.current===r?e:t}function aO(e){return e=w9(e),e!==null?iO(e):null}function iO(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=iO(e);if(t!==null)return t;e=e.sibling}return null}var oO=ls.unstable_scheduleCallback,v_=ls.unstable_cancelCallback,k9=ls.unstable_shouldYield,j9=ls.unstable_requestPaint,rr=ls.unstable_now,N9=ls.unstable_getCurrentPriorityLevel,Sj=ls.unstable_ImmediatePriority,lO=ls.unstable_UserBlockingPriority,Km=ls.unstable_NormalPriority,S9=ls.unstable_LowPriority,cO=ls.unstable_IdlePriority,hx=null,Pa=null;function C9(e){if(Pa&&typeof Pa.onCommitFiberRoot=="function")try{Pa.onCommitFiberRoot(hx,e,void 0,(e.current.flags&128)===128)}catch{}}var oa=Math.clz32?Math.clz32:A9,_9=Math.log,E9=Math.LN2;function A9(e){return e>>>=0,e===0?32:31-(_9(e)/E9|0)|0}var bp=64,yp=4194304;function zu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ym(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=zu(l):(a&=o,a!==0&&(n=zu(a)))}else o=r&~s,o!==0?n=zu(o):a!==0&&(n=zu(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-oa(t),s=1<<r,n|=e[r],t&=~s;return n}function T9(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P9(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-oa(a),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=T9(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Rw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dO(){var e=bp;return bp<<=1,!(bp&4194240)&&(bp=64),e}function Ny(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-oa(t),e[t]=r}function M9(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-oa(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function Cj(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-oa(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var xt=0;function uO(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hO,_j,fO,pO,mO,Bw=!1,vp=[],co=null,uo=null,ho=null,jh=new Map,Nh=new Map,Xi=[],O9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function w_(e,t){switch(e){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":jh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nh.delete(t.pointerId)}}function iu(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=vf(t),t!==null&&_j(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function $9(e,t,r,n,s){switch(t){case"focusin":return co=iu(co,e,t,r,n,s),!0;case"dragenter":return uo=iu(uo,e,t,r,n,s),!0;case"mouseover":return ho=iu(ho,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return jh.set(a,iu(jh.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Nh.set(a,iu(Nh.get(a)||null,e,t,r,n,s)),!0}return!1}function gO(e){var t=ll(e.target);if(t!==null){var r=rc(t);if(r!==null){if(t=r.tag,t===13){if(t=sO(r),t!==null){e.blockedOn=t,mO(e.priority,function(){fO(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=zw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);$w=n,r.target.dispatchEvent(n),$w=null}else return t=vf(r),t!==null&&_j(t),e.blockedOn=r,!1;t.shift()}return!0}function k_(e,t,r){vm(e)&&r.delete(t)}function D9(){Bw=!1,co!==null&&vm(co)&&(co=null),uo!==null&&vm(uo)&&(uo=null),ho!==null&&vm(ho)&&(ho=null),jh.forEach(k_),Nh.forEach(k_)}function ou(e,t){e.blockedOn===t&&(e.blockedOn=null,Bw||(Bw=!0,ls.unstable_scheduleCallback(ls.unstable_NormalPriority,D9)))}function Sh(e){function t(s){return ou(s,e)}if(0<vp.length){ou(vp[0],e);for(var r=1;r<vp.length;r++){var n=vp[r];n.blockedOn===e&&(n.blockedOn=null)}}for(co!==null&&ou(co,e),uo!==null&&ou(uo,e),ho!==null&&ou(ho,e),jh.forEach(t),Nh.forEach(t),r=0;r<Xi.length;r++)n=Xi[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Xi.length&&(r=Xi[0],r.blockedOn===null);)gO(r),r.blockedOn===null&&Xi.shift()}var Wc=ki.ReactCurrentBatchConfig,Xm=!0;function I9(e,t,r,n){var s=xt,a=Wc.transition;Wc.transition=null;try{xt=1,Ej(e,t,r,n)}finally{xt=s,Wc.transition=a}}function L9(e,t,r,n){var s=xt,a=Wc.transition;Wc.transition=null;try{xt=4,Ej(e,t,r,n)}finally{xt=s,Wc.transition=a}}function Ej(e,t,r,n){if(Xm){var s=zw(e,t,r,n);if(s===null)$y(e,t,n,Jm,r),w_(e,n);else if($9(s,e,t,r,n))n.stopPropagation();else if(w_(e,n),t&4&&-1<O9.indexOf(e)){for(;s!==null;){var a=vf(s);if(a!==null&&hO(a),a=zw(e,t,r,n),a===null&&$y(e,t,n,Jm,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else $y(e,t,n,null,r)}}var Jm=null;function zw(e,t,r,n){if(Jm=null,e=Nj(n),e=ll(e),e!==null)if(t=rc(e),t===null)e=null;else if(r=t.tag,r===13){if(e=sO(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jm=e,null}function xO(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(N9()){case Sj:return 1;case lO:return 4;case Km:case S9:return 16;case cO:return 536870912;default:return 16}default:return 16}}var to=null,Aj=null,wm=null;function bO(){if(wm)return wm;var e,t=Aj,r=t.length,n,s="value"in to?to.value:to.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[a-n];n++);return wm=s.slice(e,1<n?1-n:void 0)}function km(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wp(){return!0}function j_(){return!1}function hs(e){function t(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?wp:j_,this.isPropagationStopped=j_,this}return Ut(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=wp)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=wp)},persist:function(){},isPersistent:wp}),t}var Md={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tj=hs(Md),yf=Ut({},Md,{view:0,detail:0}),R9=hs(yf),Sy,Cy,lu,fx=Ut({},yf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pj,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lu&&(lu&&e.type==="mousemove"?(Sy=e.screenX-lu.screenX,Cy=e.screenY-lu.screenY):Cy=Sy=0,lu=e),Sy)},movementY:function(e){return"movementY"in e?e.movementY:Cy}}),N_=hs(fx),B9=Ut({},fx,{dataTransfer:0}),z9=hs(B9),F9=Ut({},yf,{relatedTarget:0}),_y=hs(F9),H9=Ut({},Md,{animationName:0,elapsedTime:0,pseudoElement:0}),U9=hs(H9),W9=Ut({},Md,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),V9=hs(W9),q9=Ut({},Md,{data:0}),S_=hs(q9),G9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Y9[e])?!!t[e]:!1}function Pj(){return X9}var J9=Ut({},yf,{key:function(e){if(e.key){var t=G9[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=km(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?K9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pj,charCode:function(e){return e.type==="keypress"?km(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?km(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Z9=hs(J9),Q9=Ut({},fx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C_=hs(Q9),eH=Ut({},yf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pj}),tH=hs(eH),rH=Ut({},Md,{propertyName:0,elapsedTime:0,pseudoElement:0}),nH=hs(rH),sH=Ut({},fx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),aH=hs(sH),iH=[9,13,27,32],Mj=hi&&"CompositionEvent"in window,Ju=null;hi&&"documentMode"in document&&(Ju=document.documentMode);var oH=hi&&"TextEvent"in window&&!Ju,yO=hi&&(!Mj||Ju&&8<Ju&&11>=Ju),__=" ",E_=!1;function vO(e,t){switch(e){case"keyup":return iH.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ac=!1;function lH(e,t){switch(e){case"compositionend":return wO(t);case"keypress":return t.which!==32?null:(E_=!0,__);case"textInput":return e=t.data,e===__&&E_?null:e;default:return null}}function cH(e,t){if(Ac)return e==="compositionend"||!Mj&&vO(e,t)?(e=bO(),wm=Aj=to=null,Ac=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yO&&t.locale!=="ko"?null:t.data;default:return null}}var dH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dH[e.type]:t==="textarea"}function kO(e,t,r,n){QM(n),t=Zm(t,"onChange"),0<t.length&&(r=new Tj("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Zu=null,Ch=null;function uH(e){OO(e,0)}function px(e){var t=Mc(e);if(qM(t))return e}function hH(e,t){if(e==="change")return t}var jO=!1;if(hi){var Ey;if(hi){var Ay="oninput"in document;if(!Ay){var T_=document.createElement("div");T_.setAttribute("oninput","return;"),Ay=typeof T_.oninput=="function"}Ey=Ay}else Ey=!1;jO=Ey&&(!document.documentMode||9<document.documentMode)}function P_(){Zu&&(Zu.detachEvent("onpropertychange",NO),Ch=Zu=null)}function NO(e){if(e.propertyName==="value"&&px(Ch)){var t=[];kO(t,Ch,e,Nj(e)),nO(uH,t)}}function fH(e,t,r){e==="focusin"?(P_(),Zu=t,Ch=r,Zu.attachEvent("onpropertychange",NO)):e==="focusout"&&P_()}function pH(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return px(Ch)}function mH(e,t){if(e==="click")return px(t)}function gH(e,t){if(e==="input"||e==="change")return px(t)}function xH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fa=typeof Object.is=="function"?Object.is:xH;function _h(e,t){if(fa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!kw.call(t,s)||!fa(e[s],t[s]))return!1}return!0}function M_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function O_(e,t){var r=M_(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=M_(r)}}function SO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?SO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function CO(){for(var e=window,t=Vm();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Vm(e.document)}return t}function Oj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bH(e){var t=CO(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&SO(r.ownerDocument.documentElement,r)){if(n!==null&&Oj(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=O_(r,a);var o=O_(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yH=hi&&"documentMode"in document&&11>=document.documentMode,Tc=null,Fw=null,Qu=null,Hw=!1;function $_(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Hw||Tc==null||Tc!==Vm(n)||(n=Tc,"selectionStart"in n&&Oj(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Qu&&_h(Qu,n)||(Qu=n,n=Zm(Fw,"onSelect"),0<n.length&&(t=new Tj("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Tc)))}function kp(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Pc={animationend:kp("Animation","AnimationEnd"),animationiteration:kp("Animation","AnimationIteration"),animationstart:kp("Animation","AnimationStart"),transitionend:kp("Transition","TransitionEnd")},Ty={},_O={};hi&&(_O=document.createElement("div").style,"AnimationEvent"in window||(delete Pc.animationend.animation,delete Pc.animationiteration.animation,delete Pc.animationstart.animation),"TransitionEvent"in window||delete Pc.transitionend.transition);function mx(e){if(Ty[e])return Ty[e];if(!Pc[e])return e;var t=Pc[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in _O)return Ty[e]=t[r];return e}var EO=mx("animationend"),AO=mx("animationiteration"),TO=mx("animationstart"),PO=mx("transitionend"),MO=new Map,D_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lo(e,t){MO.set(e,t),tc(t,[e])}for(var Py=0;Py<D_.length;Py++){var My=D_[Py],vH=My.toLowerCase(),wH=My[0].toUpperCase()+My.slice(1);Lo(vH,"on"+wH)}Lo(EO,"onAnimationEnd");Lo(AO,"onAnimationIteration");Lo(TO,"onAnimationStart");Lo("dblclick","onDoubleClick");Lo("focusin","onFocus");Lo("focusout","onBlur");Lo(PO,"onTransitionEnd");Qc("onMouseEnter",["mouseout","mouseover"]);Qc("onMouseLeave",["mouseout","mouseover"]);Qc("onPointerEnter",["pointerout","pointerover"]);Qc("onPointerLeave",["pointerout","pointerover"]);tc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tc("onBeforeInput",["compositionend","keypress","textInput","paste"]);tc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fu));function I_(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,v9(n,t,void 0,e),e.currentTarget=null}function OO(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;I_(s,l,d),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;I_(s,l,d),a=c}}}if(Gm)throw e=Lw,Gm=!1,Lw=null,e}function _t(e,t){var r=t[Gw];r===void 0&&(r=t[Gw]=new Set);var n=e+"__bubble";r.has(n)||($O(t,e,2,!1),r.add(n))}function Oy(e,t,r){var n=0;t&&(n|=4),$O(r,e,n,t)}var jp="_reactListening"+Math.random().toString(36).slice(2);function Eh(e){if(!e[jp]){e[jp]=!0,FM.forEach(function(r){r!=="selectionchange"&&(kH.has(r)||Oy(r,!1,e),Oy(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[jp]||(t[jp]=!0,Oy("selectionchange",!1,t))}}function $O(e,t,r,n){switch(xO(t)){case 1:var s=I9;break;case 4:s=L9;break;default:s=Ej}r=s.bind(null,t,r,e),s=void 0,!Iw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function $y(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ll(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}nO(function(){var d=a,u=Nj(r),h=[];e:{var f=MO.get(e);if(f!==void 0){var p=Tj,m=e;switch(e){case"keypress":if(km(r)===0)break e;case"keydown":case"keyup":p=Z9;break;case"focusin":m="focus",p=_y;break;case"focusout":m="blur",p=_y;break;case"beforeblur":case"afterblur":p=_y;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=N_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=z9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=tH;break;case EO:case AO:case TO:p=U9;break;case PO:p=nH;break;case"scroll":p=R9;break;case"wheel":p=aH;break;case"copy":case"cut":case"paste":p=V9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=C_}var x=(t&4)!==0,b=!x&&e==="scroll",y=x?f!==null?f+"Capture":null:f;x=[];for(var v=d,w;v!==null;){w=v;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,y!==null&&(j=kh(v,y),j!=null&&x.push(Ah(v,j,w)))),b)break;v=v.return}0<x.length&&(f=new p(f,m,null,r,u),h.push({event:f,listeners:x}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==$w&&(m=r.relatedTarget||r.fromElement)&&(ll(m)||m[fi]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=d,m=m?ll(m):null,m!==null&&(b=rc(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=d),p!==m)){if(x=N_,j="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(x=C_,j="onPointerLeave",y="onPointerEnter",v="pointer"),b=p==null?f:Mc(p),w=m==null?f:Mc(m),f=new x(j,v+"leave",p,r,u),f.target=b,f.relatedTarget=w,j=null,ll(u)===d&&(x=new x(y,v+"enter",m,r,u),x.target=w,x.relatedTarget=b,j=x),b=j,p&&m)t:{for(x=p,y=m,v=0,w=x;w;w=pc(w))v++;for(w=0,j=y;j;j=pc(j))w++;for(;0<v-w;)x=pc(x),v--;for(;0<w-v;)y=pc(y),w--;for(;v--;){if(x===y||y!==null&&x===y.alternate)break t;x=pc(x),y=pc(y)}x=null}else x=null;p!==null&&L_(h,f,p,x,!1),m!==null&&b!==null&&L_(h,b,m,x,!0)}}e:{if(f=d?Mc(d):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var N=hH;else if(A_(f))if(jO)N=gH;else{N=pH;var k=fH}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=mH);if(N&&(N=N(e,d))){kO(h,N,r,u);break e}k&&k(e,f,d),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Aw(f,"number",f.value)}switch(k=d?Mc(d):window,e){case"focusin":(A_(k)||k.contentEditable==="true")&&(Tc=k,Fw=d,Qu=null);break;case"focusout":Qu=Fw=Tc=null;break;case"mousedown":Hw=!0;break;case"contextmenu":case"mouseup":case"dragend":Hw=!1,$_(h,r,u);break;case"selectionchange":if(yH)break;case"keydown":case"keyup":$_(h,r,u)}var S;if(Mj)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ac?vO(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(yO&&r.locale!=="ko"&&(Ac||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ac&&(S=bO()):(to=u,Aj="value"in to?to.value:to.textContent,Ac=!0)),k=Zm(d,C),0<k.length&&(C=new S_(C,e,null,r,u),h.push({event:C,listeners:k}),S?C.data=S:(S=wO(r),S!==null&&(C.data=S)))),(S=oH?lH(e,r):cH(e,r))&&(d=Zm(d,"onBeforeInput"),0<d.length&&(u=new S_("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=S))}OO(h,t)})}function Ah(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Zm(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=kh(e,r),a!=null&&n.unshift(Ah(e,a,s)),a=kh(e,t),a!=null&&n.push(Ah(e,a,s))),e=e.return}return n}function pc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function L_(e,t,r,n,s){for(var a=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,s?(c=kh(r,a),c!=null&&o.unshift(Ah(r,c,l))):s||(c=kh(r,a),c!=null&&o.push(Ah(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var jH=/\r\n?/g,NH=/\u0000|\uFFFD/g;function R_(e){return(typeof e=="string"?e:""+e).replace(jH,`
`).replace(NH,"")}function Np(e,t,r){if(t=R_(t),R_(e)!==t&&r)throw Error(pe(425))}function Qm(){}var Uw=null,Ww=null;function Vw(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qw=typeof setTimeout=="function"?setTimeout:void 0,SH=typeof clearTimeout=="function"?clearTimeout:void 0,B_=typeof Promise=="function"?Promise:void 0,CH=typeof queueMicrotask=="function"?queueMicrotask:typeof B_<"u"?function(e){return B_.resolve(null).then(e).catch(_H)}:qw;function _H(e){setTimeout(function(){throw e})}function Dy(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Sh(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Sh(t)}function fo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function z_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Od=Math.random().toString(36).slice(2),Aa="__reactFiber$"+Od,Th="__reactProps$"+Od,fi="__reactContainer$"+Od,Gw="__reactEvents$"+Od,EH="__reactListeners$"+Od,AH="__reactHandles$"+Od;function ll(e){var t=e[Aa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fi]||r[Aa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=z_(e);e!==null;){if(r=e[Aa])return r;e=z_(e)}return t}e=r,r=e.parentNode}return null}function vf(e){return e=e[Aa]||e[fi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(pe(33))}function gx(e){return e[Th]||null}var Kw=[],Oc=-1;function Ro(e){return{current:e}}function Pt(e){0>Oc||(e.current=Kw[Oc],Kw[Oc]=null,Oc--)}function St(e,t){Oc++,Kw[Oc]=e.current,e.current=t}var Eo={},on=Ro(Eo),Fn=Ro(!1),Ml=Eo;function ed(e,t){var r=e.type.contextTypes;if(!r)return Eo;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Hn(e){return e=e.childContextTypes,e!=null}function eg(){Pt(Fn),Pt(on)}function F_(e,t,r){if(on.current!==Eo)throw Error(pe(168));St(on,t),St(Fn,r)}function DO(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(pe(108,f9(e)||"Unknown",s));return Ut({},r,n)}function tg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Eo,Ml=on.current,St(on,e),St(Fn,Fn.current),!0}function H_(e,t,r){var n=e.stateNode;if(!n)throw Error(pe(169));r?(e=DO(e,t,Ml),n.__reactInternalMemoizedMergedChildContext=e,Pt(Fn),Pt(on),St(on,e)):Pt(Fn),St(Fn,r)}var Xa=null,xx=!1,Iy=!1;function IO(e){Xa===null?Xa=[e]:Xa.push(e)}function TH(e){xx=!0,IO(e)}function Bo(){if(!Iy&&Xa!==null){Iy=!0;var e=0,t=xt;try{var r=Xa;for(xt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Xa=null,xx=!1}catch(s){throw Xa!==null&&(Xa=Xa.slice(e+1)),oO(Sj,Bo),s}finally{xt=t,Iy=!1}}return null}var $c=[],Dc=0,rg=null,ng=0,Cs=[],_s=0,Ol=null,Qa=1,ei="";function tl(e,t){$c[Dc++]=ng,$c[Dc++]=rg,rg=e,ng=t}function LO(e,t,r){Cs[_s++]=Qa,Cs[_s++]=ei,Cs[_s++]=Ol,Ol=e;var n=Qa;e=ei;var s=32-oa(n)-1;n&=~(1<<s),r+=1;var a=32-oa(t)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Qa=1<<32-oa(t)+s|r<<s|n,ei=a+e}else Qa=1<<a|r<<s|n,ei=e}function $j(e){e.return!==null&&(tl(e,1),LO(e,1,0))}function Dj(e){for(;e===rg;)rg=$c[--Dc],$c[Dc]=null,ng=$c[--Dc],$c[Dc]=null;for(;e===Ol;)Ol=Cs[--_s],Cs[_s]=null,ei=Cs[--_s],Cs[_s]=null,Qa=Cs[--_s],Cs[_s]=null}var rs=null,es=null,$t=!1,ea=null;function RO(e,t){var r=Ts(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function U_(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rs=e,es=fo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rs=e,es=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ol!==null?{id:Qa,overflow:ei}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ts(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,rs=e,es=null,!0):!1;default:return!1}}function Yw(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xw(e){if($t){var t=es;if(t){var r=t;if(!U_(e,t)){if(Yw(e))throw Error(pe(418));t=fo(r.nextSibling);var n=rs;t&&U_(e,t)?RO(n,r):(e.flags=e.flags&-4097|2,$t=!1,rs=e)}}else{if(Yw(e))throw Error(pe(418));e.flags=e.flags&-4097|2,$t=!1,rs=e}}}function W_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rs=e}function Sp(e){if(e!==rs)return!1;if(!$t)return W_(e),$t=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Vw(e.type,e.memoizedProps)),t&&(t=es)){if(Yw(e))throw BO(),Error(pe(418));for(;t;)RO(e,t),t=fo(t.nextSibling)}if(W_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){es=fo(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}es=null}}else es=rs?fo(e.stateNode.nextSibling):null;return!0}function BO(){for(var e=es;e;)e=fo(e.nextSibling)}function td(){es=rs=null,$t=!1}function Ij(e){ea===null?ea=[e]:ea.push(e)}var PH=ki.ReactCurrentBatchConfig;function cu(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(pe(309));var n=r.stateNode}if(!n)throw Error(pe(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(pe(284));if(!r._owner)throw Error(pe(290,e))}return e}function Cp(e,t){throw e=Object.prototype.toString.call(t),Error(pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function V_(e){var t=e._init;return t(e._payload)}function zO(e){function t(y,v){if(e){var w=y.deletions;w===null?(y.deletions=[v],y.flags|=16):w.push(v)}}function r(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function n(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function s(y,v){return y=xo(y,v),y.index=0,y.sibling=null,y}function a(y,v,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<v?(y.flags|=2,v):w):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,v,w,j){return v===null||v.tag!==6?(v=Uy(w,y.mode,j),v.return=y,v):(v=s(v,w),v.return=y,v)}function c(y,v,w,j){var N=w.type;return N===Ec?u(y,v,w.props.children,j,w.key):v!==null&&(v.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Hi&&V_(N)===v.type)?(j=s(v,w.props),j.ref=cu(y,v,w),j.return=y,j):(j=Am(w.type,w.key,w.props,null,y.mode,j),j.ref=cu(y,v,w),j.return=y,j)}function d(y,v,w,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Wy(w,y.mode,j),v.return=y,v):(v=s(v,w.children||[]),v.return=y,v)}function u(y,v,w,j,N){return v===null||v.tag!==7?(v=vl(w,y.mode,j,N),v.return=y,v):(v=s(v,w),v.return=y,v)}function h(y,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Uy(""+v,y.mode,w),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case mp:return w=Am(v.type,v.key,v.props,null,y.mode,w),w.ref=cu(y,null,v),w.return=y,w;case _c:return v=Wy(v,y.mode,w),v.return=y,v;case Hi:var j=v._init;return h(y,j(v._payload),w)}if(Bu(v)||su(v))return v=vl(v,y.mode,w,null),v.return=y,v;Cp(y,v)}return null}function f(y,v,w,j){var N=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:l(y,v,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case mp:return w.key===N?c(y,v,w,j):null;case _c:return w.key===N?d(y,v,w,j):null;case Hi:return N=w._init,f(y,v,N(w._payload),j)}if(Bu(w)||su(w))return N!==null?null:u(y,v,w,j,null);Cp(y,w)}return null}function p(y,v,w,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return y=y.get(w)||null,l(v,y,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case mp:return y=y.get(j.key===null?w:j.key)||null,c(v,y,j,N);case _c:return y=y.get(j.key===null?w:j.key)||null,d(v,y,j,N);case Hi:var k=j._init;return p(y,v,w,k(j._payload),N)}if(Bu(j)||su(j))return y=y.get(w)||null,u(v,y,j,N,null);Cp(v,j)}return null}function m(y,v,w,j){for(var N=null,k=null,S=v,C=v=0,P=null;S!==null&&C<w.length;C++){S.index>C?(P=S,S=null):P=S.sibling;var E=f(y,S,w[C],j);if(E===null){S===null&&(S=P);break}e&&S&&E.alternate===null&&t(y,S),v=a(E,v,C),k===null?N=E:k.sibling=E,k=E,S=P}if(C===w.length)return r(y,S),$t&&tl(y,C),N;if(S===null){for(;C<w.length;C++)S=h(y,w[C],j),S!==null&&(v=a(S,v,C),k===null?N=S:k.sibling=S,k=S);return $t&&tl(y,C),N}for(S=n(y,S);C<w.length;C++)P=p(S,y,C,w[C],j),P!==null&&(e&&P.alternate!==null&&S.delete(P.key===null?C:P.key),v=a(P,v,C),k===null?N=P:k.sibling=P,k=P);return e&&S.forEach(function(O){return t(y,O)}),$t&&tl(y,C),N}function x(y,v,w,j){var N=su(w);if(typeof N!="function")throw Error(pe(150));if(w=N.call(w),w==null)throw Error(pe(151));for(var k=N=null,S=v,C=v=0,P=null,E=w.next();S!==null&&!E.done;C++,E=w.next()){S.index>C?(P=S,S=null):P=S.sibling;var O=f(y,S,E.value,j);if(O===null){S===null&&(S=P);break}e&&S&&O.alternate===null&&t(y,S),v=a(O,v,C),k===null?N=O:k.sibling=O,k=O,S=P}if(E.done)return r(y,S),$t&&tl(y,C),N;if(S===null){for(;!E.done;C++,E=w.next())E=h(y,E.value,j),E!==null&&(v=a(E,v,C),k===null?N=E:k.sibling=E,k=E);return $t&&tl(y,C),N}for(S=n(y,S);!E.done;C++,E=w.next())E=p(S,y,C,E.value,j),E!==null&&(e&&E.alternate!==null&&S.delete(E.key===null?C:E.key),v=a(E,v,C),k===null?N=E:k.sibling=E,k=E);return e&&S.forEach(function(A){return t(y,A)}),$t&&tl(y,C),N}function b(y,v,w,j){if(typeof w=="object"&&w!==null&&w.type===Ec&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case mp:e:{for(var N=w.key,k=v;k!==null;){if(k.key===N){if(N=w.type,N===Ec){if(k.tag===7){r(y,k.sibling),v=s(k,w.props.children),v.return=y,y=v;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Hi&&V_(N)===k.type){r(y,k.sibling),v=s(k,w.props),v.ref=cu(y,k,w),v.return=y,y=v;break e}r(y,k);break}else t(y,k);k=k.sibling}w.type===Ec?(v=vl(w.props.children,y.mode,j,w.key),v.return=y,y=v):(j=Am(w.type,w.key,w.props,null,y.mode,j),j.ref=cu(y,v,w),j.return=y,y=j)}return o(y);case _c:e:{for(k=w.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){r(y,v.sibling),v=s(v,w.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else t(y,v);v=v.sibling}v=Wy(w,y.mode,j),v.return=y,y=v}return o(y);case Hi:return k=w._init,b(y,v,k(w._payload),j)}if(Bu(w))return m(y,v,w,j);if(su(w))return x(y,v,w,j);Cp(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(r(y,v.sibling),v=s(v,w),v.return=y,y=v):(r(y,v),v=Uy(w,y.mode,j),v.return=y,y=v),o(y)):r(y,v)}return b}var rd=zO(!0),FO=zO(!1),sg=Ro(null),ag=null,Ic=null,Lj=null;function Rj(){Lj=Ic=ag=null}function Bj(e){var t=sg.current;Pt(sg),e._currentValue=t}function Jw(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Vc(e,t){ag=e,Lj=Ic=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rn=!0),e.firstContext=null)}function Ls(e){var t=e._currentValue;if(Lj!==e)if(e={context:e,memoizedValue:t,next:null},Ic===null){if(ag===null)throw Error(pe(308));Ic=e,ag.dependencies={lanes:0,firstContext:e}}else Ic=Ic.next=e;return t}var cl=null;function zj(e){cl===null?cl=[e]:cl.push(e)}function HO(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,zj(t)):(r.next=s.next,s.next=r),t.interleaved=r,pi(e,n)}function pi(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ui=!1;function Fj(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UO(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ii(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function po(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,lt&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,pi(e,r)}return s=n.interleaved,s===null?(t.next=t,zj(n)):(t.next=s.next,s.next=t),n.interleaved=t,pi(e,r)}function jm(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Cj(e,r)}}function q_(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ig(e,t,r,n){var s=e.updateQueue;Ui=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;o=0,u=d=c=null,l=a;do{var f=l.lane,p=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,x=l;switch(f=t,p=r,x.tag){case 1:if(m=x.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=x.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Ut({},h,f);break e;case 2:Ui=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=h):u=u.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(c=h),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Dl|=o,e.lanes=o,e.memoizedState=h}}function G_(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(pe(191,s));s.call(n)}}}var wf={},Ma=Ro(wf),Ph=Ro(wf),Mh=Ro(wf);function dl(e){if(e===wf)throw Error(pe(174));return e}function Hj(e,t){switch(St(Mh,t),St(Ph,e),St(Ma,wf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pw(t,e)}Pt(Ma),St(Ma,t)}function nd(){Pt(Ma),Pt(Ph),Pt(Mh)}function WO(e){dl(Mh.current);var t=dl(Ma.current),r=Pw(t,e.type);t!==r&&(St(Ph,e),St(Ma,r))}function Uj(e){Ph.current===e&&(Pt(Ma),Pt(Ph))}var zt=Ro(0);function og(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ly=[];function Wj(){for(var e=0;e<Ly.length;e++)Ly[e]._workInProgressVersionPrimary=null;Ly.length=0}var Nm=ki.ReactCurrentDispatcher,Ry=ki.ReactCurrentBatchConfig,$l=0,Ht=null,mr=null,Sr=null,lg=!1,eh=!1,Oh=0,MH=0;function Zr(){throw Error(pe(321))}function Vj(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!fa(e[r],t[r]))return!1;return!0}function qj(e,t,r,n,s,a){if($l=a,Ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Nm.current=e===null||e.memoizedState===null?IH:LH,e=r(n,s),eh){a=0;do{if(eh=!1,Oh=0,25<=a)throw Error(pe(301));a+=1,Sr=mr=null,t.updateQueue=null,Nm.current=RH,e=r(n,s)}while(eh)}if(Nm.current=cg,t=mr!==null&&mr.next!==null,$l=0,Sr=mr=Ht=null,lg=!1,t)throw Error(pe(300));return e}function Gj(){var e=Oh!==0;return Oh=0,e}function Na(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sr===null?Ht.memoizedState=Sr=e:Sr=Sr.next=e,Sr}function Rs(){if(mr===null){var e=Ht.alternate;e=e!==null?e.memoizedState:null}else e=mr.next;var t=Sr===null?Ht.memoizedState:Sr.next;if(t!==null)Sr=t,mr=e;else{if(e===null)throw Error(pe(310));mr=e,e={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},Sr===null?Ht.memoizedState=Sr=e:Sr=Sr.next=e}return Sr}function $h(e,t){return typeof t=="function"?t(e):t}function By(e){var t=Rs(),r=t.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=e;var n=mr,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if(($l&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Ht.lanes|=u,Dl|=u}d=d.next}while(d!==null&&d!==a);c===null?o=n:c.next=l,fa(n,t.memoizedState)||(Rn=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,Ht.lanes|=a,Dl|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function zy(e){var t=Rs(),r=t.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=e(a,o.action),o=o.next;while(o!==s);fa(a,t.memoizedState)||(Rn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function VO(){}function qO(e,t){var r=Ht,n=Rs(),s=t(),a=!fa(n.memoizedState,s);if(a&&(n.memoizedState=s,Rn=!0),n=n.queue,Kj(YO.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||Sr!==null&&Sr.memoizedState.tag&1){if(r.flags|=2048,Dh(9,KO.bind(null,r,n,s,t),void 0,null),Ar===null)throw Error(pe(349));$l&30||GO(r,t,s)}return s}function GO(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ht.updateQueue,t===null?(t={lastEffect:null,stores:null},Ht.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function KO(e,t,r,n){t.value=r,t.getSnapshot=n,XO(t)&&JO(e)}function YO(e,t,r){return r(function(){XO(t)&&JO(e)})}function XO(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!fa(e,r)}catch{return!0}}function JO(e){var t=pi(e,1);t!==null&&la(t,e,1,-1)}function K_(e){var t=Na();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$h,lastRenderedState:e},t.queue=e,e=e.dispatch=DH.bind(null,Ht,e),[t.memoizedState,e]}function Dh(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ht.updateQueue,t===null?(t={lastEffect:null,stores:null},Ht.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function ZO(){return Rs().memoizedState}function Sm(e,t,r,n){var s=Na();Ht.flags|=e,s.memoizedState=Dh(1|t,r,void 0,n===void 0?null:n)}function bx(e,t,r,n){var s=Rs();n=n===void 0?null:n;var a=void 0;if(mr!==null){var o=mr.memoizedState;if(a=o.destroy,n!==null&&Vj(n,o.deps)){s.memoizedState=Dh(t,r,a,n);return}}Ht.flags|=e,s.memoizedState=Dh(1|t,r,a,n)}function Y_(e,t){return Sm(8390656,8,e,t)}function Kj(e,t){return bx(2048,8,e,t)}function QO(e,t){return bx(4,2,e,t)}function e5(e,t){return bx(4,4,e,t)}function t5(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function r5(e,t,r){return r=r!=null?r.concat([e]):null,bx(4,4,t5.bind(null,t,e),r)}function Yj(){}function n5(e,t){var r=Rs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Vj(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function s5(e,t){var r=Rs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Vj(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function a5(e,t,r){return $l&21?(fa(r,t)||(r=dO(),Ht.lanes|=r,Dl|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Rn=!0),e.memoizedState=r)}function OH(e,t){var r=xt;xt=r!==0&&4>r?r:4,e(!0);var n=Ry.transition;Ry.transition={};try{e(!1),t()}finally{xt=r,Ry.transition=n}}function i5(){return Rs().memoizedState}function $H(e,t,r){var n=go(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},o5(e))l5(t,r);else if(r=HO(e,t,r,n),r!==null){var s=vn();la(r,e,n,s),c5(r,t,n)}}function DH(e,t,r){var n=go(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(o5(e))l5(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,fa(l,o)){var c=t.interleaved;c===null?(s.next=s,zj(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=HO(e,t,s,n),r!==null&&(s=vn(),la(r,e,n,s),c5(r,t,n))}}function o5(e){var t=e.alternate;return e===Ht||t!==null&&t===Ht}function l5(e,t){eh=lg=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function c5(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Cj(e,r)}}var cg={readContext:Ls,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useInsertionEffect:Zr,useLayoutEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useMutableSource:Zr,useSyncExternalStore:Zr,useId:Zr,unstable_isNewReconciler:!1},IH={readContext:Ls,useCallback:function(e,t){return Na().memoizedState=[e,t===void 0?null:t],e},useContext:Ls,useEffect:Y_,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Sm(4194308,4,t5.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Sm(4194308,4,e,t)},useInsertionEffect:function(e,t){return Sm(4,2,e,t)},useMemo:function(e,t){var r=Na();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Na();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=$H.bind(null,Ht,e),[n.memoizedState,e]},useRef:function(e){var t=Na();return e={current:e},t.memoizedState=e},useState:K_,useDebugValue:Yj,useDeferredValue:function(e){return Na().memoizedState=e},useTransition:function(){var e=K_(!1),t=e[0];return e=OH.bind(null,e[1]),Na().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ht,s=Na();if($t){if(r===void 0)throw Error(pe(407));r=r()}else{if(r=t(),Ar===null)throw Error(pe(349));$l&30||GO(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,Y_(YO.bind(null,n,a,e),[e]),n.flags|=2048,Dh(9,KO.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=Na(),t=Ar.identifierPrefix;if($t){var r=ei,n=Qa;r=(n&~(1<<32-oa(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Oh++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=MH++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},LH={readContext:Ls,useCallback:n5,useContext:Ls,useEffect:Kj,useImperativeHandle:r5,useInsertionEffect:QO,useLayoutEffect:e5,useMemo:s5,useReducer:By,useRef:ZO,useState:function(){return By($h)},useDebugValue:Yj,useDeferredValue:function(e){var t=Rs();return a5(t,mr.memoizedState,e)},useTransition:function(){var e=By($h)[0],t=Rs().memoizedState;return[e,t]},useMutableSource:VO,useSyncExternalStore:qO,useId:i5,unstable_isNewReconciler:!1},RH={readContext:Ls,useCallback:n5,useContext:Ls,useEffect:Kj,useImperativeHandle:r5,useInsertionEffect:QO,useLayoutEffect:e5,useMemo:s5,useReducer:zy,useRef:ZO,useState:function(){return zy($h)},useDebugValue:Yj,useDeferredValue:function(e){var t=Rs();return mr===null?t.memoizedState=e:a5(t,mr.memoizedState,e)},useTransition:function(){var e=zy($h)[0],t=Rs().memoizedState;return[e,t]},useMutableSource:VO,useSyncExternalStore:qO,useId:i5,unstable_isNewReconciler:!1};function Zs(e,t){if(e&&e.defaultProps){t=Ut({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Zw(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ut({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var yx={isMounted:function(e){return(e=e._reactInternals)?rc(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=vn(),s=go(e),a=ii(n,s);a.payload=t,r!=null&&(a.callback=r),t=po(e,a,s),t!==null&&(la(t,e,s,n),jm(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=vn(),s=go(e),a=ii(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=po(e,a,s),t!==null&&(la(t,e,s,n),jm(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=vn(),n=go(e),s=ii(r,n);s.tag=2,t!=null&&(s.callback=t),t=po(e,s,n),t!==null&&(la(t,e,n,r),jm(t,e,n))}};function X_(e,t,r,n,s,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!_h(r,n)||!_h(s,a):!0}function d5(e,t,r){var n=!1,s=Eo,a=t.contextType;return typeof a=="object"&&a!==null?a=Ls(a):(s=Hn(t)?Ml:on.current,n=t.contextTypes,a=(n=n!=null)?ed(e,s):Eo),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yx,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function J_(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&yx.enqueueReplaceState(t,t.state,null)}function Qw(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Fj(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Ls(a):(a=Hn(t)?Ml:on.current,s.context=ed(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Zw(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&yx.enqueueReplaceState(s,s.state,null),ig(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function sd(e,t){try{var r="",n=t;do r+=h9(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Fy(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function e1(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var BH=typeof WeakMap=="function"?WeakMap:Map;function u5(e,t,r){r=ii(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){ug||(ug=!0,d1=n),e1(e,t)},r}function h5(e,t,r){r=ii(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){e1(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){e1(e,t),typeof n!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Z_(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new BH;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=QH.bind(null,e,t,r),t.then(e,e))}function Q_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function eE(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ii(-1,1),t.tag=2,po(r,t,1))),r.lanes|=1),e)}var zH=ki.ReactCurrentOwner,Rn=!1;function pn(e,t,r,n){t.child=e===null?FO(t,null,r,n):rd(t,e.child,r,n)}function tE(e,t,r,n,s){r=r.render;var a=t.ref;return Vc(t,s),n=qj(e,t,r,n,a,s),r=Gj(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mi(e,t,s)):($t&&r&&$j(t),t.flags|=1,pn(e,t,n,s),t.child)}function rE(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!nN(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,f5(e,t,a,n,s)):(e=Am(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:_h,r(o,n)&&e.ref===t.ref)return mi(e,t,s)}return t.flags|=1,e=xo(a,n),e.ref=t.ref,e.return=t,t.child=e}function f5(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(_h(a,n)&&e.ref===t.ref)if(Rn=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(Rn=!0);else return t.lanes=e.lanes,mi(e,t,s)}return t1(e,t,r,n,s)}function p5(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(Rc,Yn),Yn|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,St(Rc,Yn),Yn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,St(Rc,Yn),Yn|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,St(Rc,Yn),Yn|=n;return pn(e,t,s,r),t.child}function m5(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function t1(e,t,r,n,s){var a=Hn(r)?Ml:on.current;return a=ed(t,a),Vc(t,s),r=qj(e,t,r,n,a,s),n=Gj(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mi(e,t,s)):($t&&n&&$j(t),t.flags|=1,pn(e,t,r,s),t.child)}function nE(e,t,r,n,s){if(Hn(r)){var a=!0;tg(t)}else a=!1;if(Vc(t,s),t.stateNode===null)Cm(e,t),d5(t,r,n),Qw(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Ls(d):(d=Hn(r)?Ml:on.current,d=ed(t,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&J_(t,o,n,d),Ui=!1;var f=t.memoizedState;o.state=f,ig(t,n,o,s),c=t.memoizedState,l!==n||f!==c||Fn.current||Ui?(typeof u=="function"&&(Zw(t,r,u,n),c=t.memoizedState),(l=Ui||X_(t,r,l,n,f,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,UO(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Zs(t.type,l),o.props=d,h=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ls(c):(c=Hn(r)?Ml:on.current,c=ed(t,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&J_(t,o,n,c),Ui=!1,f=t.memoizedState,o.state=f,ig(t,n,o,s);var m=t.memoizedState;l!==h||f!==m||Fn.current||Ui?(typeof p=="function"&&(Zw(t,r,p,n),m=t.memoizedState),(d=Ui||X_(t,r,d,n,f,m,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),o.props=n,o.state=m,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return r1(e,t,r,n,a,s)}function r1(e,t,r,n,s,a){m5(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&H_(t,r,!1),mi(e,t,a);n=t.stateNode,zH.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=rd(t,e.child,null,a),t.child=rd(t,null,l,a)):pn(e,t,l,a),t.memoizedState=n.state,s&&H_(t,r,!0),t.child}function g5(e){var t=e.stateNode;t.pendingContext?F_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&F_(e,t.context,!1),Hj(e,t.containerInfo)}function sE(e,t,r,n,s){return td(),Ij(s),t.flags|=256,pn(e,t,r,n),t.child}var n1={dehydrated:null,treeContext:null,retryLane:0};function s1(e){return{baseLanes:e,cachePool:null,transitions:null}}function x5(e,t,r){var n=t.pendingProps,s=zt.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),St(zt,s&1),e===null)return Xw(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=kx(o,n,0,null),e=vl(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=s1(r),t.memoizedState=n1,e):Xj(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return FH(e,t,o,n,l,s,r);if(a){a=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=xo(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=xo(l,a):(a=vl(a,o,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?s1(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=n1,n}return a=e.child,e=a.sibling,n=xo(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Xj(e,t){return t=kx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _p(e,t,r,n){return n!==null&&Ij(n),rd(t,e.child,null,r),e=Xj(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function FH(e,t,r,n,s,a,o){if(r)return t.flags&256?(t.flags&=-257,n=Fy(Error(pe(422))),_p(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=kx({mode:"visible",children:n.children},s,0,null),a=vl(a,s,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&rd(t,e.child,null,o),t.child.memoizedState=s1(o),t.memoizedState=n1,a);if(!(t.mode&1))return _p(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(pe(419)),n=Fy(a,n,void 0),_p(e,t,o,n)}if(l=(o&e.childLanes)!==0,Rn||l){if(n=Ar,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,pi(e,s),la(n,e,s,-1))}return rN(),n=Fy(Error(pe(421))),_p(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=eU.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,es=fo(s.nextSibling),rs=t,$t=!0,ea=null,e!==null&&(Cs[_s++]=Qa,Cs[_s++]=ei,Cs[_s++]=Ol,Qa=e.id,ei=e.overflow,Ol=t),t=Xj(t,n.children),t.flags|=4096,t)}function aE(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Jw(e.return,t,r)}function Hy(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function b5(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(pn(e,t,n.children,r),n=zt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&aE(e,r,t);else if(e.tag===19)aE(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(St(zt,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&og(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Hy(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&og(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Hy(t,!0,r,null,a);break;case"together":Hy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mi(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Dl|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(pe(153));if(t.child!==null){for(e=t.child,r=xo(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=xo(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function HH(e,t,r){switch(t.tag){case 3:g5(t),td();break;case 5:WO(t);break;case 1:Hn(t.type)&&tg(t);break;case 4:Hj(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;St(sg,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(St(zt,zt.current&1),t.flags|=128,null):r&t.child.childLanes?x5(e,t,r):(St(zt,zt.current&1),e=mi(e,t,r),e!==null?e.sibling:null);St(zt,zt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return b5(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),St(zt,zt.current),n)break;return null;case 22:case 23:return t.lanes=0,p5(e,t,r)}return mi(e,t,r)}var y5,a1,v5,w5;y5=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};a1=function(){};v5=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,dl(Ma.current);var a=null;switch(r){case"input":s=_w(e,s),n=_w(e,n),a=[];break;case"select":s=Ut({},s,{value:void 0}),n=Ut({},n,{value:void 0}),a=[];break;case"textarea":s=Tw(e,s),n=Tw(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Qm)}Mw(r,n);var o;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(vh.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(vh.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&_t("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};w5=function(e,t,r,n){r!==n&&(t.flags|=4)};function du(e,t){if(!$t)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Qr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function UH(e,t,r){var n=t.pendingProps;switch(Dj(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qr(t),null;case 1:return Hn(t.type)&&eg(),Qr(t),null;case 3:return n=t.stateNode,nd(),Pt(Fn),Pt(on),Wj(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Sp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ea!==null&&(f1(ea),ea=null))),a1(e,t),Qr(t),null;case 5:Uj(t);var s=dl(Mh.current);if(r=t.type,e!==null&&t.stateNode!=null)v5(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(pe(166));return Qr(t),null}if(e=dl(Ma.current),Sp(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Aa]=t,n[Th]=a,e=(t.mode&1)!==0,r){case"dialog":_t("cancel",n),_t("close",n);break;case"iframe":case"object":case"embed":_t("load",n);break;case"video":case"audio":for(s=0;s<Fu.length;s++)_t(Fu[s],n);break;case"source":_t("error",n);break;case"img":case"image":case"link":_t("error",n),_t("load",n);break;case"details":_t("toggle",n);break;case"input":p_(n,a),_t("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},_t("invalid",n);break;case"textarea":g_(n,a),_t("invalid",n)}Mw(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Np(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Np(n.textContent,l,e),s=["children",""+l]):vh.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&_t("scroll",n)}switch(r){case"input":gp(n),m_(n,a,!0);break;case"textarea":gp(n),x_(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Qm)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=YM(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Aa]=t,e[Th]=n,y5(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ow(r,n),r){case"dialog":_t("cancel",e),_t("close",e),s=n;break;case"iframe":case"object":case"embed":_t("load",e),s=n;break;case"video":case"audio":for(s=0;s<Fu.length;s++)_t(Fu[s],e);s=n;break;case"source":_t("error",e),s=n;break;case"img":case"image":case"link":_t("error",e),_t("load",e),s=n;break;case"details":_t("toggle",e),s=n;break;case"input":p_(e,n),s=_w(e,n),_t("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Ut({},n,{value:void 0}),_t("invalid",e);break;case"textarea":g_(e,n),s=Tw(e,n),_t("invalid",e);break;default:s=n}Mw(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?ZM(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&XM(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&wh(e,c):typeof c=="number"&&wh(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(vh.hasOwnProperty(a)?c!=null&&a==="onScroll"&&_t("scroll",e):c!=null&&vj(e,a,c,o))}switch(r){case"input":gp(e),m_(e,n,!1);break;case"textarea":gp(e),x_(e);break;case"option":n.value!=null&&e.setAttribute("value",""+_o(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Fc(e,!!n.multiple,a,!1):n.defaultValue!=null&&Fc(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Qm)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qr(t),null;case 6:if(e&&t.stateNode!=null)w5(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(pe(166));if(r=dl(Mh.current),dl(Ma.current),Sp(t)){if(n=t.stateNode,r=t.memoizedProps,n[Aa]=t,(a=n.nodeValue!==r)&&(e=rs,e!==null))switch(e.tag){case 3:Np(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Np(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Aa]=t,t.stateNode=n}return Qr(t),null;case 13:if(Pt(zt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($t&&es!==null&&t.mode&1&&!(t.flags&128))BO(),td(),t.flags|=98560,a=!1;else if(a=Sp(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(pe(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(pe(317));a[Aa]=t}else td(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qr(t),a=!1}else ea!==null&&(f1(ea),ea=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||zt.current&1?xr===0&&(xr=3):rN())),t.updateQueue!==null&&(t.flags|=4),Qr(t),null);case 4:return nd(),a1(e,t),e===null&&Eh(t.stateNode.containerInfo),Qr(t),null;case 10:return Bj(t.type._context),Qr(t),null;case 17:return Hn(t.type)&&eg(),Qr(t),null;case 19:if(Pt(zt),a=t.memoizedState,a===null)return Qr(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)du(a,!1);else{if(xr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=og(e),o!==null){for(t.flags|=128,du(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return St(zt,zt.current&1|2),t.child}e=e.sibling}a.tail!==null&&rr()>ad&&(t.flags|=128,n=!0,du(a,!1),t.lanes=4194304)}else{if(!n)if(e=og(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),du(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!$t)return Qr(t),null}else 2*rr()-a.renderingStartTime>ad&&r!==1073741824&&(t.flags|=128,n=!0,du(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(r=a.last,r!==null?r.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=rr(),t.sibling=null,r=zt.current,St(zt,n?r&1|2:r&1),t):(Qr(t),null);case 22:case 23:return tN(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Yn&1073741824&&(Qr(t),t.subtreeFlags&6&&(t.flags|=8192)):Qr(t),null;case 24:return null;case 25:return null}throw Error(pe(156,t.tag))}function WH(e,t){switch(Dj(t),t.tag){case 1:return Hn(t.type)&&eg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return nd(),Pt(Fn),Pt(on),Wj(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Uj(t),null;case 13:if(Pt(zt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(pe(340));td()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pt(zt),null;case 4:return nd(),null;case 10:return Bj(t.type._context),null;case 22:case 23:return tN(),null;case 24:return null;default:return null}}var Ep=!1,nn=!1,VH=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Lc(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Xt(e,t,n)}else r.current=null}function i1(e,t,r){try{r()}catch(n){Xt(e,t,n)}}var iE=!1;function qH(e,t){if(Uw=Xm,e=CO(),Oj(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==a||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++d===s&&(l=o),f===a&&++u===n&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ww={focusedElem:e,selectionRange:r},Xm=!1,Ee=t;Ee!==null;)if(t=Ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ee=e;else for(;Ee!==null;){t=Ee;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var x=m.memoizedProps,b=m.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:Zs(t.type,x),b);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(j){Xt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Ee=e;break}Ee=t.return}return m=iE,iE=!1,m}function th(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&i1(t,r,a)}s=s.next}while(s!==n)}}function vx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function o1(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function k5(e){var t=e.alternate;t!==null&&(e.alternate=null,k5(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Aa],delete t[Th],delete t[Gw],delete t[EH],delete t[AH])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function j5(e){return e.tag===5||e.tag===3||e.tag===4}function oE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||j5(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function l1(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Qm));else if(n!==4&&(e=e.child,e!==null))for(l1(e,t,r),e=e.sibling;e!==null;)l1(e,t,r),e=e.sibling}function c1(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(c1(e,t,r),e=e.sibling;e!==null;)c1(e,t,r),e=e.sibling}var Fr=null,Qs=!1;function Li(e,t,r){for(r=r.child;r!==null;)N5(e,t,r),r=r.sibling}function N5(e,t,r){if(Pa&&typeof Pa.onCommitFiberUnmount=="function")try{Pa.onCommitFiberUnmount(hx,r)}catch{}switch(r.tag){case 5:nn||Lc(r,t);case 6:var n=Fr,s=Qs;Fr=null,Li(e,t,r),Fr=n,Qs=s,Fr!==null&&(Qs?(e=Fr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Fr.removeChild(r.stateNode));break;case 18:Fr!==null&&(Qs?(e=Fr,r=r.stateNode,e.nodeType===8?Dy(e.parentNode,r):e.nodeType===1&&Dy(e,r),Sh(e)):Dy(Fr,r.stateNode));break;case 4:n=Fr,s=Qs,Fr=r.stateNode.containerInfo,Qs=!0,Li(e,t,r),Fr=n,Qs=s;break;case 0:case 11:case 14:case 15:if(!nn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&i1(r,t,o),s=s.next}while(s!==n)}Li(e,t,r);break;case 1:if(!nn&&(Lc(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Xt(r,t,l)}Li(e,t,r);break;case 21:Li(e,t,r);break;case 22:r.mode&1?(nn=(n=nn)||r.memoizedState!==null,Li(e,t,r),nn=n):Li(e,t,r);break;default:Li(e,t,r)}}function lE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new VH),t.forEach(function(n){var s=tU.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ks(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Fr=l.stateNode,Qs=!1;break e;case 3:Fr=l.stateNode.containerInfo,Qs=!0;break e;case 4:Fr=l.stateNode.containerInfo,Qs=!0;break e}l=l.return}if(Fr===null)throw Error(pe(160));N5(a,o,s),Fr=null,Qs=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Xt(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)S5(t,e),t=t.sibling}function S5(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ks(t,e),ya(e),n&4){try{th(3,e,e.return),vx(3,e)}catch(x){Xt(e,e.return,x)}try{th(5,e,e.return)}catch(x){Xt(e,e.return,x)}}break;case 1:Ks(t,e),ya(e),n&512&&r!==null&&Lc(r,r.return);break;case 5:if(Ks(t,e),ya(e),n&512&&r!==null&&Lc(r,r.return),e.flags&32){var s=e.stateNode;try{wh(s,"")}catch(x){Xt(e,e.return,x)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,o=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&GM(s,a),Ow(l,o);var d=Ow(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?ZM(s,h):u==="dangerouslySetInnerHTML"?XM(s,h):u==="children"?wh(s,h):vj(s,u,h,d)}switch(l){case"input":Ew(s,a);break;case"textarea":KM(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Fc(s,!!a.multiple,p,!1):f!==!!a.multiple&&(a.defaultValue!=null?Fc(s,!!a.multiple,a.defaultValue,!0):Fc(s,!!a.multiple,a.multiple?[]:"",!1))}s[Th]=a}catch(x){Xt(e,e.return,x)}}break;case 6:if(Ks(t,e),ya(e),n&4){if(e.stateNode===null)throw Error(pe(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(x){Xt(e,e.return,x)}}break;case 3:if(Ks(t,e),ya(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Sh(t.containerInfo)}catch(x){Xt(e,e.return,x)}break;case 4:Ks(t,e),ya(e);break;case 13:Ks(t,e),ya(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Qj=rr())),n&4&&lE(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(nn=(d=nn)||u,Ks(t,e),nn=d):Ks(t,e),ya(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Ee=e,u=e.child;u!==null;){for(h=Ee=u;Ee!==null;){switch(f=Ee,p=f.child,f.tag){case 0:case 11:case 14:case 15:th(4,f,f.return);break;case 1:Lc(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(x){Xt(n,r,x)}}break;case 5:Lc(f,f.return);break;case 22:if(f.memoizedState!==null){dE(h);continue}}p!==null?(p.return=f,Ee=p):dE(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=JM("display",o))}catch(x){Xt(e,e.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){Xt(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ks(t,e),ya(e),n&4&&lE(e);break;case 21:break;default:Ks(t,e),ya(e)}}function ya(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(j5(r)){var n=r;break e}r=r.return}throw Error(pe(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(wh(s,""),n.flags&=-33);var a=oE(e);c1(e,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=oE(e);l1(e,l,o);break;default:throw Error(pe(161))}}catch(c){Xt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function GH(e,t,r){Ee=e,C5(e)}function C5(e,t,r){for(var n=(e.mode&1)!==0;Ee!==null;){var s=Ee,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Ep;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||nn;l=Ep;var d=nn;if(Ep=o,(nn=c)&&!d)for(Ee=s;Ee!==null;)o=Ee,c=o.child,o.tag===22&&o.memoizedState!==null?uE(s):c!==null?(c.return=o,Ee=c):uE(s);for(;a!==null;)Ee=a,C5(a),a=a.sibling;Ee=s,Ep=l,nn=d}cE(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Ee=a):cE(e)}}function cE(e){for(;Ee!==null;){var t=Ee;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nn||vx(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!nn)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Zs(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&G_(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}G_(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Sh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}nn||t.flags&512&&o1(t)}catch(f){Xt(t,t.return,f)}}if(t===e){Ee=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ee=r;break}Ee=t.return}}function dE(e){for(;Ee!==null;){var t=Ee;if(t===e){Ee=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ee=r;break}Ee=t.return}}function uE(e){for(;Ee!==null;){var t=Ee;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{vx(4,t)}catch(c){Xt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Xt(t,s,c)}}var a=t.return;try{o1(t)}catch(c){Xt(t,a,c)}break;case 5:var o=t.return;try{o1(t)}catch(c){Xt(t,o,c)}}}catch(c){Xt(t,t.return,c)}if(t===e){Ee=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ee=l;break}Ee=t.return}}var KH=Math.ceil,dg=ki.ReactCurrentDispatcher,Jj=ki.ReactCurrentOwner,Os=ki.ReactCurrentBatchConfig,lt=0,Ar=null,lr=null,Gr=0,Yn=0,Rc=Ro(0),xr=0,Ih=null,Dl=0,wx=0,Zj=0,rh=null,In=null,Qj=0,ad=1/0,Ka=null,ug=!1,d1=null,mo=null,Ap=!1,ro=null,hg=0,nh=0,u1=null,_m=-1,Em=0;function vn(){return lt&6?rr():_m!==-1?_m:_m=rr()}function go(e){return e.mode&1?lt&2&&Gr!==0?Gr&-Gr:PH.transition!==null?(Em===0&&(Em=dO()),Em):(e=xt,e!==0||(e=window.event,e=e===void 0?16:xO(e.type)),e):1}function la(e,t,r,n){if(50<nh)throw nh=0,u1=null,Error(pe(185));bf(e,r,n),(!(lt&2)||e!==Ar)&&(e===Ar&&(!(lt&2)&&(wx|=r),xr===4&&Ji(e,Gr)),Un(e,n),r===1&&lt===0&&!(t.mode&1)&&(ad=rr()+500,xx&&Bo()))}function Un(e,t){var r=e.callbackNode;P9(e,t);var n=Ym(e,e===Ar?Gr:0);if(n===0)r!==null&&v_(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&v_(r),t===1)e.tag===0?TH(hE.bind(null,e)):IO(hE.bind(null,e)),CH(function(){!(lt&6)&&Bo()}),r=null;else{switch(uO(n)){case 1:r=Sj;break;case 4:r=lO;break;case 16:r=Km;break;case 536870912:r=cO;break;default:r=Km}r=$5(r,_5.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function _5(e,t){if(_m=-1,Em=0,lt&6)throw Error(pe(327));var r=e.callbackNode;if(qc()&&e.callbackNode!==r)return null;var n=Ym(e,e===Ar?Gr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=fg(e,n);else{t=n;var s=lt;lt|=2;var a=A5();(Ar!==e||Gr!==t)&&(Ka=null,ad=rr()+500,yl(e,t));do try{JH();break}catch(l){E5(e,l)}while(!0);Rj(),dg.current=a,lt=s,lr!==null?t=0:(Ar=null,Gr=0,t=xr)}if(t!==0){if(t===2&&(s=Rw(e),s!==0&&(n=s,t=h1(e,s))),t===1)throw r=Ih,yl(e,0),Ji(e,n),Un(e,rr()),r;if(t===6)Ji(e,n);else{if(s=e.current.alternate,!(n&30)&&!YH(s)&&(t=fg(e,n),t===2&&(a=Rw(e),a!==0&&(n=a,t=h1(e,a))),t===1))throw r=Ih,yl(e,0),Ji(e,n),Un(e,rr()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(pe(345));case 2:rl(e,In,Ka);break;case 3:if(Ji(e,n),(n&130023424)===n&&(t=Qj+500-rr(),10<t)){if(Ym(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){vn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=qw(rl.bind(null,e,In,Ka),t);break}rl(e,In,Ka);break;case 4:if(Ji(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-oa(n);a=1<<o,o=t[o],o>s&&(s=o),n&=~a}if(n=s,n=rr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*KH(n/1960))-n,10<n){e.timeoutHandle=qw(rl.bind(null,e,In,Ka),n);break}rl(e,In,Ka);break;case 5:rl(e,In,Ka);break;default:throw Error(pe(329))}}}return Un(e,rr()),e.callbackNode===r?_5.bind(null,e):null}function h1(e,t){var r=rh;return e.current.memoizedState.isDehydrated&&(yl(e,t).flags|=256),e=fg(e,t),e!==2&&(t=In,In=r,t!==null&&f1(t)),e}function f1(e){In===null?In=e:In.push.apply(In,e)}function YH(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!fa(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ji(e,t){for(t&=~Zj,t&=~wx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-oa(t),n=1<<r;e[r]=-1,t&=~n}}function hE(e){if(lt&6)throw Error(pe(327));qc();var t=Ym(e,0);if(!(t&1))return Un(e,rr()),null;var r=fg(e,t);if(e.tag!==0&&r===2){var n=Rw(e);n!==0&&(t=n,r=h1(e,n))}if(r===1)throw r=Ih,yl(e,0),Ji(e,t),Un(e,rr()),r;if(r===6)throw Error(pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,rl(e,In,Ka),Un(e,rr()),null}function eN(e,t){var r=lt;lt|=1;try{return e(t)}finally{lt=r,lt===0&&(ad=rr()+500,xx&&Bo())}}function Il(e){ro!==null&&ro.tag===0&&!(lt&6)&&qc();var t=lt;lt|=1;var r=Os.transition,n=xt;try{if(Os.transition=null,xt=1,e)return e()}finally{xt=n,Os.transition=r,lt=t,!(lt&6)&&Bo()}}function tN(){Yn=Rc.current,Pt(Rc)}function yl(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,SH(r)),lr!==null)for(r=lr.return;r!==null;){var n=r;switch(Dj(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&eg();break;case 3:nd(),Pt(Fn),Pt(on),Wj();break;case 5:Uj(n);break;case 4:nd();break;case 13:Pt(zt);break;case 19:Pt(zt);break;case 10:Bj(n.type._context);break;case 22:case 23:tN()}r=r.return}if(Ar=e,lr=e=xo(e.current,null),Gr=Yn=t,xr=0,Ih=null,Zj=wx=Dl=0,In=rh=null,cl!==null){for(t=0;t<cl.length;t++)if(r=cl[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}cl=null}return e}function E5(e,t){do{var r=lr;try{if(Rj(),Nm.current=cg,lg){for(var n=Ht.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}lg=!1}if($l=0,Sr=mr=Ht=null,eh=!1,Oh=0,Jj.current=null,r===null||r.return===null){xr=1,Ih=t,lr=null;break}e:{var a=e,o=r.return,l=r,c=t;if(t=Gr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Q_(o);if(p!==null){p.flags&=-257,eE(p,o,l,a,t),p.mode&1&&Z_(a,d,t),t=p,c=d;var m=t.updateQueue;if(m===null){var x=new Set;x.add(c),t.updateQueue=x}else m.add(c);break e}else{if(!(t&1)){Z_(a,d,t),rN();break e}c=Error(pe(426))}}else if($t&&l.mode&1){var b=Q_(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),eE(b,o,l,a,t),Ij(sd(c,l));break e}}a=c=sd(c,l),xr!==4&&(xr=2),rh===null?rh=[a]:rh.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=u5(a,c,t);q_(a,y);break e;case 1:l=c;var v=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(mo===null||!mo.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=h5(a,l,t);q_(a,j);break e}}a=a.return}while(a!==null)}P5(r)}catch(N){t=N,lr===r&&r!==null&&(lr=r=r.return);continue}break}while(!0)}function A5(){var e=dg.current;return dg.current=cg,e===null?cg:e}function rN(){(xr===0||xr===3||xr===2)&&(xr=4),Ar===null||!(Dl&268435455)&&!(wx&268435455)||Ji(Ar,Gr)}function fg(e,t){var r=lt;lt|=2;var n=A5();(Ar!==e||Gr!==t)&&(Ka=null,yl(e,t));do try{XH();break}catch(s){E5(e,s)}while(!0);if(Rj(),lt=r,dg.current=n,lr!==null)throw Error(pe(261));return Ar=null,Gr=0,xr}function XH(){for(;lr!==null;)T5(lr)}function JH(){for(;lr!==null&&!k9();)T5(lr)}function T5(e){var t=O5(e.alternate,e,Yn);e.memoizedProps=e.pendingProps,t===null?P5(e):lr=t,Jj.current=null}function P5(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=WH(r,t),r!==null){r.flags&=32767,lr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xr=6,lr=null;return}}else if(r=UH(r,t,Yn),r!==null){lr=r;return}if(t=t.sibling,t!==null){lr=t;return}lr=t=e}while(t!==null);xr===0&&(xr=5)}function rl(e,t,r){var n=xt,s=Os.transition;try{Os.transition=null,xt=1,ZH(e,t,r,n)}finally{Os.transition=s,xt=n}return null}function ZH(e,t,r,n){do qc();while(ro!==null);if(lt&6)throw Error(pe(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(pe(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(M9(e,a),e===Ar&&(lr=Ar=null,Gr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ap||(Ap=!0,$5(Km,function(){return qc(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Os.transition,Os.transition=null;var o=xt;xt=1;var l=lt;lt|=4,Jj.current=null,qH(e,r),S5(r,e),bH(Ww),Xm=!!Uw,Ww=Uw=null,e.current=r,GH(r),j9(),lt=l,xt=o,Os.transition=a}else e.current=r;if(Ap&&(Ap=!1,ro=e,hg=s),a=e.pendingLanes,a===0&&(mo=null),C9(r.stateNode),Un(e,rr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(ug)throw ug=!1,e=d1,d1=null,e;return hg&1&&e.tag!==0&&qc(),a=e.pendingLanes,a&1?e===u1?nh++:(nh=0,u1=e):nh=0,Bo(),null}function qc(){if(ro!==null){var e=uO(hg),t=Os.transition,r=xt;try{if(Os.transition=null,xt=16>e?16:e,ro===null)var n=!1;else{if(e=ro,ro=null,hg=0,lt&6)throw Error(pe(331));var s=lt;for(lt|=4,Ee=e.current;Ee!==null;){var a=Ee,o=a.child;if(Ee.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ee=d;Ee!==null;){var u=Ee;switch(u.tag){case 0:case 11:case 15:th(8,u,a)}var h=u.child;if(h!==null)h.return=u,Ee=h;else for(;Ee!==null;){u=Ee;var f=u.sibling,p=u.return;if(k5(u),u===d){Ee=null;break}if(f!==null){f.return=p,Ee=f;break}Ee=p}}}var m=a.alternate;if(m!==null){var x=m.child;if(x!==null){m.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}Ee=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Ee=o;else e:for(;Ee!==null;){if(a=Ee,a.flags&2048)switch(a.tag){case 0:case 11:case 15:th(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,Ee=y;break e}Ee=a.return}}var v=e.current;for(Ee=v;Ee!==null;){o=Ee;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ee=w;else e:for(o=v;Ee!==null;){if(l=Ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vx(9,l)}}catch(N){Xt(l,l.return,N)}if(l===o){Ee=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Ee=j;break e}Ee=l.return}}if(lt=s,Bo(),Pa&&typeof Pa.onPostCommitFiberRoot=="function")try{Pa.onPostCommitFiberRoot(hx,e)}catch{}n=!0}return n}finally{xt=r,Os.transition=t}}return!1}function fE(e,t,r){t=sd(r,t),t=u5(e,t,1),e=po(e,t,1),t=vn(),e!==null&&(bf(e,1,t),Un(e,t))}function Xt(e,t,r){if(e.tag===3)fE(e,e,r);else for(;t!==null;){if(t.tag===3){fE(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(mo===null||!mo.has(n))){e=sd(r,e),e=h5(t,e,1),t=po(t,e,1),e=vn(),t!==null&&(bf(t,1,e),Un(t,e));break}}t=t.return}}function QH(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=vn(),e.pingedLanes|=e.suspendedLanes&r,Ar===e&&(Gr&r)===r&&(xr===4||xr===3&&(Gr&130023424)===Gr&&500>rr()-Qj?yl(e,0):Zj|=r),Un(e,t)}function M5(e,t){t===0&&(e.mode&1?(t=yp,yp<<=1,!(yp&130023424)&&(yp=4194304)):t=1);var r=vn();e=pi(e,t),e!==null&&(bf(e,t,r),Un(e,r))}function eU(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),M5(e,r)}function tU(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(pe(314))}n!==null&&n.delete(t),M5(e,r)}var O5;O5=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Fn.current)Rn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Rn=!1,HH(e,t,r);Rn=!!(e.flags&131072)}else Rn=!1,$t&&t.flags&1048576&&LO(t,ng,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Cm(e,t),e=t.pendingProps;var s=ed(t,on.current);Vc(t,r),s=qj(null,t,n,e,s,r);var a=Gj();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Hn(n)?(a=!0,tg(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Fj(t),s.updater=yx,t.stateNode=s,s._reactInternals=t,Qw(t,n,e,r),t=r1(null,t,n,!0,a,r)):(t.tag=0,$t&&a&&$j(t),pn(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Cm(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=nU(n),e=Zs(n,e),s){case 0:t=t1(null,t,n,e,r);break e;case 1:t=nE(null,t,n,e,r);break e;case 11:t=tE(null,t,n,e,r);break e;case 14:t=rE(null,t,n,Zs(n.type,e),r);break e}throw Error(pe(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Zs(n,s),t1(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Zs(n,s),nE(e,t,n,s,r);case 3:e:{if(g5(t),e===null)throw Error(pe(387));n=t.pendingProps,a=t.memoizedState,s=a.element,UO(e,t),ig(t,n,null,r);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=sd(Error(pe(423)),t),t=sE(e,t,n,r,s);break e}else if(n!==s){s=sd(Error(pe(424)),t),t=sE(e,t,n,r,s);break e}else for(es=fo(t.stateNode.containerInfo.firstChild),rs=t,$t=!0,ea=null,r=FO(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(td(),n===s){t=mi(e,t,r);break e}pn(e,t,n,r)}t=t.child}return t;case 5:return WO(t),e===null&&Xw(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,o=s.children,Vw(n,s)?o=null:a!==null&&Vw(n,a)&&(t.flags|=32),m5(e,t),pn(e,t,o,r),t.child;case 6:return e===null&&Xw(t),null;case 13:return x5(e,t,r);case 4:return Hj(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=rd(t,null,n,r):pn(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Zs(n,s),tE(e,t,n,s,r);case 7:return pn(e,t,t.pendingProps,r),t.child;case 8:return pn(e,t,t.pendingProps.children,r),t.child;case 12:return pn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,St(sg,n._currentValue),n._currentValue=o,a!==null)if(fa(a.value,o)){if(a.children===s.children&&!Fn.current){t=mi(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=ii(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Jw(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(pe(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Jw(o,r,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}pn(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Vc(t,r),s=Ls(s),n=n(s),t.flags|=1,pn(e,t,n,r),t.child;case 14:return n=t.type,s=Zs(n,t.pendingProps),s=Zs(n.type,s),rE(e,t,n,s,r);case 15:return f5(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Zs(n,s),Cm(e,t),t.tag=1,Hn(n)?(e=!0,tg(t)):e=!1,Vc(t,r),d5(t,n,s),Qw(t,n,s,r),r1(null,t,n,!0,e,r);case 19:return b5(e,t,r);case 22:return p5(e,t,r)}throw Error(pe(156,t.tag))};function $5(e,t){return oO(e,t)}function rU(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(e,t,r,n){return new rU(e,t,r,n)}function nN(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nU(e){if(typeof e=="function")return nN(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kj)return 11;if(e===jj)return 14}return 2}function xo(e,t){var r=e.alternate;return r===null?(r=Ts(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Am(e,t,r,n,s,a){var o=2;if(n=e,typeof e=="function")nN(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ec:return vl(r.children,s,a,t);case wj:o=8,s|=8;break;case jw:return e=Ts(12,r,t,s|2),e.elementType=jw,e.lanes=a,e;case Nw:return e=Ts(13,r,t,s),e.elementType=Nw,e.lanes=a,e;case Sw:return e=Ts(19,r,t,s),e.elementType=Sw,e.lanes=a,e;case WM:return kx(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case HM:o=10;break e;case UM:o=9;break e;case kj:o=11;break e;case jj:o=14;break e;case Hi:o=16,n=null;break e}throw Error(pe(130,e==null?e:typeof e,""))}return t=Ts(o,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function vl(e,t,r,n){return e=Ts(7,e,n,t),e.lanes=r,e}function kx(e,t,r,n){return e=Ts(22,e,n,t),e.elementType=WM,e.lanes=r,e.stateNode={isHidden:!1},e}function Uy(e,t,r){return e=Ts(6,e,null,t),e.lanes=r,e}function Wy(e,t,r){return t=Ts(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function sU(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ny(0),this.expirationTimes=Ny(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ny(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sN(e,t,r,n,s,a,o,l,c){return e=new sU(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ts(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fj(a),e}function aU(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_c,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function D5(e){if(!e)return Eo;e=e._reactInternals;e:{if(rc(e)!==e||e.tag!==1)throw Error(pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Hn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(pe(171))}if(e.tag===1){var r=e.type;if(Hn(r))return DO(e,r,t)}return t}function I5(e,t,r,n,s,a,o,l,c){return e=sN(r,n,!0,e,s,a,o,l,c),e.context=D5(null),r=e.current,n=vn(),s=go(r),a=ii(n,s),a.callback=t??null,po(r,a,s),e.current.lanes=s,bf(e,s,n),Un(e,n),e}function jx(e,t,r,n){var s=t.current,a=vn(),o=go(s);return r=D5(r),t.context===null?t.context=r:t.pendingContext=r,t=ii(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=po(s,t,o),e!==null&&(la(e,s,o,a),jm(e,s,o)),o}function pg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function aN(e,t){pE(e,t),(e=e.alternate)&&pE(e,t)}function iU(){return null}var L5=typeof reportError=="function"?reportError:function(e){console.error(e)};function iN(e){this._internalRoot=e}Nx.prototype.render=iN.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(pe(409));jx(e,t,null,null)};Nx.prototype.unmount=iN.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Il(function(){jx(null,e,null,null)}),t[fi]=null}};function Nx(e){this._internalRoot=e}Nx.prototype.unstable_scheduleHydration=function(e){if(e){var t=pO();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Xi.length&&t!==0&&t<Xi[r].priority;r++);Xi.splice(r,0,e),r===0&&gO(e)}};function oN(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mE(){}function oU(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var d=pg(o);a.call(d)}}var o=I5(t,n,e,0,null,!1,!1,"",mE);return e._reactRootContainer=o,e[fi]=o.current,Eh(e.nodeType===8?e.parentNode:e),Il(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=pg(c);l.call(d)}}var c=sN(e,0,!1,null,null,!1,!1,"",mE);return e._reactRootContainer=c,e[fi]=c.current,Eh(e.nodeType===8?e.parentNode:e),Il(function(){jx(t,c,r,n)}),c}function Cx(e,t,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=pg(o);l.call(c)}}jx(t,o,e,s)}else o=oU(r,t,e,s,n);return pg(o)}hO=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=zu(t.pendingLanes);r!==0&&(Cj(t,r|1),Un(t,rr()),!(lt&6)&&(ad=rr()+500,Bo()))}break;case 13:Il(function(){var n=pi(e,1);if(n!==null){var s=vn();la(n,e,1,s)}}),aN(e,1)}};_j=function(e){if(e.tag===13){var t=pi(e,134217728);if(t!==null){var r=vn();la(t,e,134217728,r)}aN(e,134217728)}};fO=function(e){if(e.tag===13){var t=go(e),r=pi(e,t);if(r!==null){var n=vn();la(r,e,t,n)}aN(e,t)}};pO=function(){return xt};mO=function(e,t){var r=xt;try{return xt=e,t()}finally{xt=r}};Dw=function(e,t,r){switch(t){case"input":if(Ew(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=gx(n);if(!s)throw Error(pe(90));qM(n),Ew(n,s)}}}break;case"textarea":KM(e,r);break;case"select":t=r.value,t!=null&&Fc(e,!!r.multiple,t,!1)}};tO=eN;rO=Il;var lU={usingClientEntryPoint:!1,Events:[vf,Mc,gx,QM,eO,eN]},uu={findFiberByHostInstance:ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cU={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ki.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=aO(e),e===null?null:e.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||iU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tp.isDisabled&&Tp.supportsFiber)try{hx=Tp.inject(cU),Pa=Tp}catch{}}us.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lU;us.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oN(t))throw Error(pe(200));return aU(e,t,null,r)};us.createRoot=function(e,t){if(!oN(e))throw Error(pe(299));var r=!1,n="",s=L5;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=sN(e,1,!1,null,null,r,!1,n,s),e[fi]=t.current,Eh(e.nodeType===8?e.parentNode:e),new iN(t)};us.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(pe(188)):(e=Object.keys(e).join(","),Error(pe(268,e)));return e=aO(t),e=e===null?null:e.stateNode,e};us.flushSync=function(e){return Il(e)};us.hydrate=function(e,t,r){if(!Sx(t))throw Error(pe(200));return Cx(null,e,t,!0,r)};us.hydrateRoot=function(e,t,r){if(!oN(e))throw Error(pe(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=L5;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=I5(t,null,e,1,r??null,s,!1,a,o),e[fi]=t.current,Eh(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Nx(t)};us.render=function(e,t,r){if(!Sx(t))throw Error(pe(200));return Cx(null,e,t,!1,r)};us.unmountComponentAtNode=function(e){if(!Sx(e))throw Error(pe(40));return e._reactRootContainer?(Il(function(){Cx(null,null,e,!1,function(){e._reactRootContainer=null,e[fi]=null})}),!0):!1};us.unstable_batchedUpdates=eN;us.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Sx(r))throw Error(pe(200));if(e==null||e._reactInternals===void 0)throw Error(pe(38));return Cx(e,t,r,!1,n)};us.version="18.3.1-next-f1338f8080-20240426";function R5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R5)}catch(e){console.error(e)}}R5(),RM.exports=us;var kf=RM.exports;const B5=Vn(kf);var z5,gE=kf;z5=gE.createRoot,gE.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lh(){return Lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lh.apply(this,arguments)}var no;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(no||(no={}));const xE="popstate";function dU(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:o,hash:l}=n.location;return p1("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:mg(s)}return hU(t,r,null,e)}function sr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function F5(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function uU(){return Math.random().toString(36).substr(2,8)}function bE(e,t){return{usr:e.state,key:e.key,idx:t}}function p1(e,t,r,n){return r===void 0&&(r=null),Lh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?$d(t):t,{state:r,key:t&&t.key||n||uU()})}function mg(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function $d(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function hU(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,l=no.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Lh({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=no.Pop;let b=u(),y=b==null?null:b-d;d=b,c&&c({action:l,location:x.location,delta:y})}function f(b,y){l=no.Push;let v=p1(x.location,b,y);d=u()+1;let w=bE(v,d),j=x.createHref(v);try{o.pushState(w,"",j)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(j)}a&&c&&c({action:l,location:x.location,delta:1})}function p(b,y){l=no.Replace;let v=p1(x.location,b,y);d=u();let w=bE(v,d),j=x.createHref(v);o.replaceState(w,"",j),a&&c&&c({action:l,location:x.location,delta:0})}function m(b){let y=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof b=="string"?b:mg(b);return v=v.replace(/ $/,"%20"),sr(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let x={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(xE,h),c=b,()=>{s.removeEventListener(xE,h),c=null}},createHref(b){return t(s,b)},createURL:m,encodeLocation(b){let y=m(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(b){return o.go(b)}};return x}var yE;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(yE||(yE={}));function fU(e,t,r){return r===void 0&&(r="/"),pU(e,t,r)}function pU(e,t,r,n){let s=typeof t=="string"?$d(t):t,a=lN(s.pathname||"/",r);if(a==null)return null;let o=H5(e);mU(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=_U(a);l=NU(o[c],d)}return l}function H5(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(sr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=bo([n,c.relativePath]),u=r.concat(c);a.children&&a.children.length>0&&(sr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),H5(a.children,t,u,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:kU(d,a.index),routesMeta:u})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of U5(a.path))s(a,o,c)}),t}function U5(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let o=U5(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function mU(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:jU(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const gU=/^:[\w-]+$/,xU=3,bU=2,yU=1,vU=10,wU=-2,vE=e=>e==="*";function kU(e,t){let r=e.split("/"),n=r.length;return r.some(vE)&&(n+=wU),t&&(n+=bU),r.filter(s=>!vE(s)).reduce((s,a)=>s+(gU.test(a)?xU:a===""?yU:vU),n)}function jU(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function NU(e,t,r){let{routesMeta:n}=e,s={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=a==="/"?t:t.slice(a.length)||"/",h=SU({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:bo([a,h.pathname]),pathnameBase:PU(bo([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=bo([a,h.pathnameBase]))}return o}function SU(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=CU(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let x=l[h]||"";o=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const m=l[h];return p&&!m?d[f]=void 0:d[f]=(m||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:e}}function CU(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),F5(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function _U(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return F5(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function lN(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function EU(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?$d(e):e;return{pathname:r?r.startsWith("/")?r:AU(r,t):t,search:MU(n),hash:OU(s)}}function AU(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Vy(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function TU(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function cN(e,t){let r=TU(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function dN(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=$d(e):(s=Lh({},e),sr(!s.pathname||!s.pathname.includes("?"),Vy("?","pathname","search",s)),sr(!s.pathname||!s.pathname.includes("#"),Vy("#","pathname","hash",s)),sr(!s.search||!s.search.includes("#"),Vy("#","search","hash",s)));let a=e===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=EU(s,l),d=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const bo=e=>e.join("/").replace(/\/\/+/g,"/"),PU=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),MU=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,OU=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function $U(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const W5=["post","put","patch","delete"];new Set(W5);const DU=["get",...W5];new Set(DU);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rh(){return Rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rh.apply(this,arguments)}const uN=g.createContext(null),IU=g.createContext(null),zo=g.createContext(null),_x=g.createContext(null),ji=g.createContext({outlet:null,matches:[],isDataRoute:!1}),V5=g.createContext(null);function LU(e,t){let{relative:r}=t===void 0?{}:t;Dd()||sr(!1);let{basename:n,navigator:s}=g.useContext(zo),{hash:a,pathname:o,search:l}=G5(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:bo([n,o])),s.createHref({pathname:c,search:l,hash:a})}function Dd(){return g.useContext(_x)!=null}function Ba(){return Dd()||sr(!1),g.useContext(_x).location}function q5(e){g.useContext(zo).static||g.useLayoutEffect(e)}function Fo(){let{isDataRoute:e}=g.useContext(ji);return e?XU():RU()}function RU(){Dd()||sr(!1);let e=g.useContext(uN),{basename:t,future:r,navigator:n}=g.useContext(zo),{matches:s}=g.useContext(ji),{pathname:a}=Ba(),o=JSON.stringify(cN(s,r.v7_relativeSplatPath)),l=g.useRef(!1);return q5(()=>{l.current=!0}),g.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let h=dN(d,JSON.parse(o),a,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:bo([t,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[t,n,o,a,e])}function Id(){let{matches:e}=g.useContext(ji),t=e[e.length-1];return t?t.params:{}}function G5(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=g.useContext(zo),{matches:s}=g.useContext(ji),{pathname:a}=Ba(),o=JSON.stringify(cN(s,n.v7_relativeSplatPath));return g.useMemo(()=>dN(e,JSON.parse(o),a,r==="path"),[e,o,a,r])}function BU(e,t){return zU(e,t)}function zU(e,t,r,n){Dd()||sr(!1);let{navigator:s}=g.useContext(zo),{matches:a}=g.useContext(ji),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Ba(),u;if(t){var h;let b=typeof t=="string"?$d(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||sr(!1),u=b}else u=d;let f=u.pathname||"/",p=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=fU(e,{pathname:p}),x=VU(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:bo([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:bo([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,r,n);return t&&x?g.createElement(_x.Provider,{value:{location:Rh({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:no.Pop}},x):x}function FU(){let e=YU(),t=$U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:s},r):null,null)}const HU=g.createElement(FU,null);class UU extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?g.createElement(ji.Provider,{value:this.props.routeContext},g.createElement(V5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WU(e){let{routeContext:t,match:r,children:n}=e,s=g.useContext(uN);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(ji.Provider,{value:t},n)}function VU(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||sr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let p,m=!1,x=null,b=null;r&&(p=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||HU,c&&(d<0&&f===0?(JU("route-fallback"),m=!0,b=null):d===f&&(m=!0,b=h.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,f+1)),v=()=>{let w;return p?w=x:m?w=b:h.route.Component?w=g.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=u,g.createElement(WU,{match:h,routeContext:{outlet:u,matches:y,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?g.createElement(UU,{location:r.location,revalidation:r.revalidation,component:x,error:p,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var K5=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(K5||{}),Y5=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Y5||{});function qU(e){let t=g.useContext(uN);return t||sr(!1),t}function GU(e){let t=g.useContext(IU);return t||sr(!1),t}function KU(e){let t=g.useContext(ji);return t||sr(!1),t}function X5(e){let t=KU(),r=t.matches[t.matches.length-1];return r.route.id||sr(!1),r.route.id}function YU(){var e;let t=g.useContext(V5),r=GU(),n=X5();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function XU(){let{router:e}=qU(K5.UseNavigateStable),t=X5(Y5.UseNavigateStable),r=g.useRef(!1);return q5(()=>{r.current=!0}),g.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Rh({fromRouteId:t},a)))},[e,t])}const wE={};function JU(e,t,r){wE[e]||(wE[e]=!0)}function ZU(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function QU(e){let{to:t,replace:r,state:n,relative:s}=e;Dd()||sr(!1);let{future:a,static:o}=g.useContext(zo),{matches:l}=g.useContext(ji),{pathname:c}=Ba(),d=Fo(),u=dN(t,cN(l,a.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(u);return g.useEffect(()=>d(JSON.parse(h),{replace:r,state:n,relative:s}),[d,h,s,r,n]),null}function Ve(e){sr(!1)}function eW(e){let{basename:t="/",children:r=null,location:n,navigationType:s=no.Pop,navigator:a,static:o=!1,future:l}=e;Dd()&&sr(!1);let c=t.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:c,navigator:a,static:o,future:Rh({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof n=="string"&&(n=$d(n));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,x=g.useMemo(()=>{let b=lN(u,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:p,key:m},navigationType:s}},[c,u,h,f,p,m,s]);return x==null?null:g.createElement(zo.Provider,{value:d},g.createElement(_x.Provider,{children:r,value:x}))}function Ld(e){let{children:t,location:r}=e;return BU(m1(t),r)}new Promise(()=>{});function m1(e,t){t===void 0&&(t=[]);let r=[];return g.Children.forEach(e,(n,s)=>{if(!g.isValidElement(n))return;let a=[...t,s];if(n.type===g.Fragment){r.push.apply(r,m1(n.props.children,a));return}n.type!==Ve&&sr(!1),!n.props.index||!n.props.children||sr(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=m1(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function g1(){return g1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g1.apply(this,arguments)}function tW(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function rW(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function nW(e,t){return e.button===0&&(!t||t==="_self")&&!rW(e)}function x1(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function sW(e,t){let r=x1(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(a=>{r.append(s,a)})}),r}const aW=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],iW="6";try{window.__reactRouterVersion=iW}catch{}const oW="startTransition",kE=IM[oW];function lW(e){let{basename:t,children:r,future:n,window:s}=e,a=g.useRef();a.current==null&&(a.current=dU({window:s,v5Compat:!0}));let o=a.current,[l,c]=g.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=g.useCallback(h=>{d&&kE?kE(()=>c(h)):c(h)},[c,d]);return g.useLayoutEffect(()=>o.listen(u),[o,u]),g.useEffect(()=>ZU(n),[n]),g.createElement(eW,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const cW=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dW=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Me=g.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,f=tW(t,aW),{basename:p}=g.useContext(zo),m,x=!1;if(typeof d=="string"&&dW.test(d)&&(m=d,cW))try{let w=new URL(window.location.href),j=d.startsWith("//")?new URL(w.protocol+d):new URL(d),N=lN(j.pathname,p);j.origin===w.origin&&N!=null?d=N+j.search+j.hash:x=!0}catch{}let b=LU(d,{relative:s}),y=uW(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:s,viewTransition:h});function v(w){n&&n(w),w.defaultPrevented||y(w)}return g.createElement("a",g1({},f,{href:m||b,onClick:x||a?n:v,ref:r,target:c}))});var jE;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(jE||(jE={}));var NE;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(NE||(NE={}));function uW(e,t){let{target:r,replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l}=t===void 0?{}:t,c=Fo(),d=Ba(),u=G5(e,{relative:o});return g.useCallback(h=>{if(nW(h,r)){h.preventDefault();let f=n!==void 0?n:mg(d)===mg(u);c(e,{replace:f,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[d,c,u,n,s,r,e,a,o,l])}function hW(e){let t=g.useRef(x1(e)),r=g.useRef(!1),n=Ba(),s=g.useMemo(()=>sW(n.search,r.current?null:t.current),[n.search]),a=Fo(),o=g.useCallback((l,c)=>{const d=x1(typeof l=="function"?l(s):l);r.current=!0,a("?"+d,c)},[a,s]);return[s,o]}var fW=typeof Element<"u",pW=typeof Map=="function",mW=typeof Set=="function",gW=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Tm(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!Tm(e[n],t[n]))return!1;return!0}var a;if(pW&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;for(a=e.entries();!(n=a.next()).done;)if(!Tm(n.value[1],t.get(n.value[0])))return!1;return!0}if(mW&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(gW&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[n]))return!1;if(fW&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((s[n]==="_owner"||s[n]==="__v"||s[n]==="__o")&&e.$$typeof)&&!Tm(e[s[n]],t[s[n]]))return!1;return!0}return e!==e&&t!==t}var xW=function(t,r){try{return Tm(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const bW=Vn(xW);var yW=function(e,t,r,n,s,a,o,l){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,n,s,a,o,l],u=0;c=new Error(t.replace(/%s/g,function(){return d[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},vW=yW;const SE=Vn(vW);var wW=function(t,r,n,s){var a=n?n.call(s,t,r):void 0;if(a!==void 0)return!!a;if(t===r)return!0;if(typeof t!="object"||!t||typeof r!="object"||!r)return!1;var o=Object.keys(t),l=Object.keys(r);if(o.length!==l.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(r),d=0;d<o.length;d++){var u=o[d];if(!c(u))return!1;var h=t[u],f=r[u];if(a=n?n.call(s,h,f,u):void 0,a===!1||a===void 0&&h!==f)return!1}return!0};const kW=Vn(wW);var J5=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(J5||{}),qy={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},CE=Object.values(J5),hN={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},jW=Object.entries(hN).reduce((e,[t,r])=>(e[r]=t,e),{}),sa="data-rh",Gc={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Kc=(e,t)=>{for(let r=e.length-1;r>=0;r-=1){const n=e[r];if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}return null},NW=e=>{let t=Kc(e,"title");const r=Kc(e,Gc.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,()=>t);const n=Kc(e,Gc.DEFAULT_TITLE);return t||n||void 0},SW=e=>Kc(e,Gc.ON_CHANGE_CLIENT_STATE)||(()=>{}),Gy=(e,t)=>t.filter(r=>typeof r[e]<"u").map(r=>r[e]).reduce((r,n)=>({...r,...n}),{}),CW=(e,t)=>t.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,n)=>{if(!r.length){const s=Object.keys(n);for(let a=0;a<s.length;a+=1){const l=s[a].toLowerCase();if(e.indexOf(l)!==-1&&n[l])return r.concat(n)}}return r},[]),_W=e=>console&&typeof console.warn=="function"&&console.warn(e),hu=(e,t,r)=>{const n={};return r.filter(s=>Array.isArray(s[e])?!0:(typeof s[e]<"u"&&_W(`Helmet: ${e} should be of type "Array". Instead found type "${typeof s[e]}"`),!1)).map(s=>s[e]).reverse().reduce((s,a)=>{const o={};a.filter(c=>{let d;const u=Object.keys(c);for(let f=0;f<u.length;f+=1){const p=u[f],m=p.toLowerCase();t.indexOf(m)!==-1&&!(d==="rel"&&c[d].toLowerCase()==="canonical")&&!(m==="rel"&&c[m].toLowerCase()==="stylesheet")&&(d=m),t.indexOf(p)!==-1&&(p==="innerHTML"||p==="cssText"||p==="itemprop")&&(d=p)}if(!d||!c[d])return!1;const h=c[d].toLowerCase();return n[d]||(n[d]={}),o[d]||(o[d]={}),n[d][h]?!1:(o[d][h]=!0,!0)}).reverse().forEach(c=>s.push(c));const l=Object.keys(o);for(let c=0;c<l.length;c+=1){const d=l[c],u={...n[d],...o[d]};n[d]=u}return s},[]).reverse()},EW=(e,t)=>{if(Array.isArray(e)&&e.length){for(let r=0;r<e.length;r+=1)if(e[r][t])return!0}return!1},AW=e=>({baseTag:CW(["href"],e),bodyAttributes:Gy("bodyAttributes",e),defer:Kc(e,Gc.DEFER),encode:Kc(e,Gc.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Gy("htmlAttributes",e),linkTags:hu("link",["rel","href"],e),metaTags:hu("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:hu("noscript",["innerHTML"],e),onChangeClientState:SW(e),scriptTags:hu("script",["src","innerHTML"],e),styleTags:hu("style",["cssText"],e),title:NW(e),titleAttributes:Gy("titleAttributes",e),prioritizeSeoTags:EW(e,Gc.PRIORITIZE_SEO_TAGS)}),Z5=e=>Array.isArray(e)?e.join(""):e,TW=(e,t)=>{const r=Object.keys(e);for(let n=0;n<r.length;n+=1)if(t[r[n]]&&t[r[n]].includes(e[r[n]]))return!0;return!1},Ky=(e,t)=>Array.isArray(e)?e.reduce((r,n)=>(TW(n,t)?r.priority.push(n):r.default.push(n),r),{priority:[],default:[]}):{default:e,priority:[]},_E=(e,t)=>({...e,[t]:void 0}),PW=["noscript","script","style"],b1=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Q5=e=>Object.keys(e).reduce((t,r)=>{const n=typeof e[r]<"u"?`${r}="${e[r]}"`:`${r}`;return t?`${t} ${n}`:n},""),MW=(e,t,r,n)=>{const s=Q5(r),a=Z5(t);return s?`<${e} ${sa}="true" ${s}>${b1(a,n)}</${e}>`:`<${e} ${sa}="true">${b1(a,n)}</${e}>`},OW=(e,t,r=!0)=>t.reduce((n,s)=>{const a=s,o=Object.keys(a).filter(d=>!(d==="innerHTML"||d==="cssText")).reduce((d,u)=>{const h=typeof a[u]>"u"?u:`${u}="${b1(a[u],r)}"`;return d?`${d} ${h}`:h},""),l=a.innerHTML||a.cssText||"",c=PW.indexOf(e)===-1;return`${n}<${e} ${sa}="true" ${o}${c?"/>":`>${l}</${e}>`}`},""),e$=(e,t={})=>Object.keys(e).reduce((r,n)=>{const s=hN[n];return r[s||n]=e[n],r},t),$W=(e,t,r)=>{const n={key:t,[sa]:!0},s=e$(r,n);return[Ge.createElement("title",s,t)]},Pm=(e,t)=>t.map((r,n)=>{const s={key:n,[sa]:!0};return Object.keys(r).forEach(a=>{const l=hN[a]||a;if(l==="innerHTML"||l==="cssText"){const c=r.innerHTML||r.cssText;s.dangerouslySetInnerHTML={__html:c}}else s[l]=r[a]}),Ge.createElement(e,s)}),Ns=(e,t,r=!0)=>{switch(e){case"title":return{toComponent:()=>$W(e,t.title,t.titleAttributes),toString:()=>MW(e,t.title,t.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>e$(t),toString:()=>Q5(t)};default:return{toComponent:()=>Pm(e,t),toString:()=>OW(e,t,r)}}},DW=({metaTags:e,linkTags:t,scriptTags:r,encode:n})=>{const s=Ky(e,qy.meta),a=Ky(t,qy.link),o=Ky(r,qy.script);return{priorityMethods:{toComponent:()=>[...Pm("meta",s.priority),...Pm("link",a.priority),...Pm("script",o.priority)],toString:()=>`${Ns("meta",s.priority,n)} ${Ns("link",a.priority,n)} ${Ns("script",o.priority,n)}`},metaTags:s.default,linkTags:a.default,scriptTags:o.default}},IW=e=>{const{baseTag:t,bodyAttributes:r,encode:n=!0,htmlAttributes:s,noscriptTags:a,styleTags:o,title:l="",titleAttributes:c,prioritizeSeoTags:d}=e;let{linkTags:u,metaTags:h,scriptTags:f}=e,p={toComponent:()=>{},toString:()=>""};return d&&({priorityMethods:p,linkTags:u,metaTags:h,scriptTags:f}=DW(e)),{priority:p,base:Ns("base",t,n),bodyAttributes:Ns("bodyAttributes",r,n),htmlAttributes:Ns("htmlAttributes",s,n),link:Ns("link",u,n),meta:Ns("meta",h,n),noscript:Ns("noscript",a,n),script:Ns("script",f,n),style:Ns("style",o,n),title:Ns("title",{title:l,titleAttributes:c},n)}},y1=IW,Pp=[],t$=!!(typeof window<"u"&&window.document&&window.document.createElement),v1=class{constructor(e,t){Ye(this,"instances",[]);Ye(this,"canUseDOM",t$);Ye(this,"context");Ye(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Pp:this.instances,add:e=>{(this.canUseDOM?Pp:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?Pp:this.instances).indexOf(e);(this.canUseDOM?Pp:this.instances).splice(t,1)}}});this.context=e,this.canUseDOM=t||!1,t||(e.helmet=y1({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},LW={},r$=Ge.createContext(LW),bl,n$=(bl=class extends g.Component{constructor(r){super(r);Ye(this,"helmetData");this.helmetData=new v1(this.props.context||{},bl.canUseDOM)}render(){return Ge.createElement(r$.Provider,{value:this.helmetData.value},this.props.children)}},Ye(bl,"canUseDOM",t$),bl),mc=(e,t)=>{const r=document.head||document.querySelector("head"),n=r.querySelectorAll(`${e}[${sa}]`),s=[].slice.call(n),a=[];let o;return t&&t.length&&t.forEach(l=>{const c=document.createElement(e);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d))if(d==="innerHTML")c.innerHTML=l.innerHTML;else if(d==="cssText")c.styleSheet?c.styleSheet.cssText=l.cssText:c.appendChild(document.createTextNode(l.cssText));else{const u=d,h=typeof l[u]>"u"?"":l[u];c.setAttribute(d,h)}c.setAttribute(sa,"true"),s.some((d,u)=>(o=u,c.isEqualNode(d)))?s.splice(o,1):a.push(c)}),s.forEach(l=>{var c;return(c=l.parentNode)==null?void 0:c.removeChild(l)}),a.forEach(l=>r.appendChild(l)),{oldTags:s,newTags:a}},w1=(e,t)=>{const r=document.getElementsByTagName(e)[0];if(!r)return;const n=r.getAttribute(sa),s=n?n.split(","):[],a=[...s],o=Object.keys(t);for(const l of o){const c=t[l]||"";r.getAttribute(l)!==c&&r.setAttribute(l,c),s.indexOf(l)===-1&&s.push(l);const d=a.indexOf(l);d!==-1&&a.splice(d,1)}for(let l=a.length-1;l>=0;l-=1)r.removeAttribute(a[l]);s.length===a.length?r.removeAttribute(sa):r.getAttribute(sa)!==o.join(",")&&r.setAttribute(sa,o.join(","))},RW=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=Z5(e)),w1("title",t)},EE=(e,t)=>{const{baseTag:r,bodyAttributes:n,htmlAttributes:s,linkTags:a,metaTags:o,noscriptTags:l,onChangeClientState:c,scriptTags:d,styleTags:u,title:h,titleAttributes:f}=e;w1("body",n),w1("html",s),RW(h,f);const p={baseTag:mc("base",r),linkTags:mc("link",a),metaTags:mc("meta",o),noscriptTags:mc("noscript",l),scriptTags:mc("script",d),styleTags:mc("style",u)},m={},x={};Object.keys(p).forEach(b=>{const{newTags:y,oldTags:v}=p[b];y.length&&(m[b]=y),v.length&&(x[b]=p[b].oldTags)}),t&&t(),c(e,m,x)},fu=null,BW=e=>{fu&&cancelAnimationFrame(fu),e.defer?fu=requestAnimationFrame(()=>{EE(e,()=>{fu=null})}):(EE(e),fu=null)},zW=BW,AE=class extends g.Component{constructor(){super(...arguments);Ye(this,"rendered",!1)}shouldComponentUpdate(t){return!kW(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:r}=this.props.context;let n=null;const s=AW(t.get().map(a=>{const o={...a.props};return delete o.context,o}));n$.canUseDOM?zW(s):y1&&(n=y1(s)),r(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},vw,En=(vw=class extends g.Component{shouldComponentUpdate(e){return!bW(_E(this.props,"helmetData"),_E(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,r,n){return{...t,[e.type]:[...t[e.type]||[],{...r,...this.mapNestedChildrenToProps(e,n)}]}}mapObjectTypeChildren(e,t,r,n){switch(e.type){case"title":return{...t,[e.type]:n,titleAttributes:{...r}};case"body":return{...t,bodyAttributes:{...r}};case"html":return{...t,htmlAttributes:{...r}};default:return{...t,[e.type]:{...r}}}}mapArrayTypeChildrenToProps(e,t){let r={...t};return Object.keys(e).forEach(n=>{r={...r,[n]:e[n]}}),r}warnOnInvalidChildren(e,t){return SE(CE.some(r=>e.type===r),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${CE.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),SE(!t||typeof t=="string"||Array.isArray(t)&&!t.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let r={};return Ge.Children.forEach(e,n=>{if(!n||!n.props)return;const{children:s,...a}=n.props,o=Object.keys(a).reduce((c,d)=>(c[jW[d]||d]=a[d],c),{});let{type:l}=n;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(n,s),l){case"Symbol(react.fragment)":t=this.mapChildrenToProps(s,t);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(n,r,o,s);break;default:t=this.mapObjectTypeChildren(n,t,o,s);break}}),this.mapArrayTypeChildrenToProps(r,t)}render(){const{children:e,...t}=this.props;let r={...t},{helmetData:n}=t;if(e&&(r=this.mapChildrenToProps(e,r)),n&&!(n instanceof v1)){const s=n;n=new v1(s.context,!0),delete r.helmetData}return n?Ge.createElement(AE,{...r,context:n.value}):Ge.createElement(r$.Consumer,null,s=>Ge.createElement(AE,{...r,context:s}))}},Ye(vw,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),vw);const s$=g.createContext(void 0),Wt=()=>{const e=g.useContext(s$);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},FW=({children:e})=>{const[t,r]=g.useState(()=>localStorage.getItem("theme")||"dark");g.useEffect(()=>{localStorage.setItem("theme",t),t==="dark"?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")):(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark"))},[t]);const n=()=>{r(s=>s==="dark"?"light":"dark")};return i.jsx(s$.Provider,{value:{theme:t,toggleTheme:n},children:e})},Ce="/api",a$=g.createContext(void 0);function HW({children:e}){const[t,r]=g.useState(null),[n,s]=g.useState(!0),[a,o]=g.useState(null),l=async()=>{try{o(null);const f=await fetch(`${Ce}/auth/me.php`,{credentials:"same-origin"});if(f.ok){const p=await f.json();p.user?r(p.user):r(null)}else if(f.status===401)r(null);else throw new Error(`Auth check failed: ${f.status}`)}catch(f){console.error("Auth check failed:",f),o(f instanceof Error?f.message:"Auth check failed"),r(null)}finally{s(!1)}},c=async()=>{s(!0),await l()},d=async(f,p)=>{try{o(null);const x=await(await fetch(`${Ce}/auth/login.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({username:f,password:p})})).json();return x.success&&x.user?(r(x.user),{success:!0}):{success:!1,error:x.error||"Login failed"}}catch(m){return{success:!1,error:m instanceof Error?m.message:"Network error"}}},u=async()=>{try{await fetch(`${Ce}/auth/logout.php`,{method:"POST",credentials:"same-origin"})}catch(f){console.error("Logout error:",f)}finally{r(null)}};g.useEffect(()=>{l()},[]);const h={user:t,loading:n,error:a,refresh:c,login:d,logout:u};return i.jsx(a$.Provider,{value:h,children:e})}function za(){const e=g.useContext(a$);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function UW(e){return e?["admin","author","mod"].includes(e.role.toLowerCase()):!1}function WW({children:e}){return i.jsx(HW,{children:i.jsx(FW,{children:e})})}const i$=["website","twitter","instagram","facebook","youtube","vimeo","discord","patreon","tiktok","github","linkedin"],k1={website:"Website",twitter:"Twitter/X",instagram:"Instagram",facebook:"Facebook",youtube:"YouTube",vimeo:"Vimeo",discord:"Discord",patreon:"Patreon",tiktok:"TikTok",github:"GitHub",linkedin:"LinkedIn"},VW={website:"https://yoursite.com",twitter:"https://x.com/username",instagram:"https://instagram.com/username",facebook:"https://facebook.com/username",youtube:"https://youtube.com/@username",vimeo:"https://vimeo.com/username",discord:"https://discord.gg/invite",patreon:"https://patreon.com/username",tiktok:"https://tiktok.com/@username",github:"https://github.com/username",linkedin:"https://www.linkedin.com/in/your_profile/"},TE={twitter:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{d:"M18.244 2H21.5l-7.51 8.574L22.5 22h-6.555l-5.12-6.023L4.8 22H1.54l8.05-9.19L1 2h6.69l4.64 5.44L18.244 2Zm-1.148 17.262h1.79L7.01 4.65H5.1l11.996 14.612Z"})}),patreon:i.jsxs("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:[i.jsx("circle",{cx:"9",cy:"9",r:"4"}),i.jsx("rect",{x:"15",y:"3",width:"3",height:"18",rx:"1.5"})]}),discord:i.jsxs("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:[i.jsx("path",{d:"M5 6a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3v9.5c0 .8-.65 1.5-1.45 1.5H16l-2 2-2-2H6.45A1.5 1.5 0 0 1 5 15.5V6Z"}),i.jsx("circle",{cx:"10",cy:"11",r:"1.2",className:"fill-neutral-700 dark:fill-neutral-300"}),i.jsx("circle",{cx:"14",cy:"11",r:"1.2",className:"fill-neutral-700 dark:fill-neutral-300"})]}),instagram:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{d:"M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5Zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7Zm5 3.5A5.5 5.5 0 1 1 6.5 13 5.5 5.5 0 0 1 12 7.5Zm0 2A3.5 3.5 0 1 0 15.5 13 3.5 3.5 0 0 0 12 9.5Zm5.75-3a1.25 1.25 0 1 1-1.25 1.25 1.25 1.25 0 0 1 1.25-1.25Z"})}),facebook:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{d:"M22 12a10 10 0 1 0-11.563 9.875v-6.984H7.898V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.463h-1.26c-1.242 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.984A10.002 10.002 0 0 0 22 12Z"})}),youtube:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{d:"M23.499 6.203a3.004 3.004 0 0 0-2.115-2.127C19.6 3.5 12 3.5 12 3.5s-7.6 0-9.384.576A3.004 3.004 0 0 0 .5 6.203 31.21 31.21 0 0 0 0 12a31.21 31.21 0 0 0 .5 5.797 3.004 3.004 0 0 0 2.115 2.127C4.4 20.5 12 20.5 12 20.5s7.6 0 9.384-.576a3.004 3.004 0 0 0 2.115-2.127A31.21 31.21 0 0 0 24 12a31.21 31.21 0 0 0-.501-5.797ZM9.75 15.568V8.432L15.818 12 9.75 15.568Z"})}),vimeo:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{d:"M23.977 6.416c-.105 2.338-1.739 5.543-4.894 9.609-3.268 4.247-6.026 6.37-8.29 6.37-1.409 0-2.578-1.294-3.553-3.881L5.322 11.4C4.603 8.816 3.834 7.522 3.01 7.522c-.179 0-.806.378-1.881 1.132L0 7.197a315.065 315.065 0 003.501-3.128C5.08 2.701 6.266 1.984 7.055 1.91c1.867-.18 3.016 1.1 3.447 3.838.465 2.953.789 4.789.971 5.507.539 2.45 1.131 3.674 1.776 3.674.502 0 1.256-.796 2.265-2.385 1.004-1.589 1.54-2.797 1.612-3.628.144-1.371-.395-2.061-1.614-2.061-.574 0-1.167.121-1.777.391 1.186-3.868 3.434-5.757 6.762-5.637 2.473.06 3.628 1.664 3.493 4.797l-.013.01z"})}),tiktok:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{d:"M16.5 3a5.5 5.5 0 0 0 .283 1.752 5.5 5.5 0 0 0 3.465 3.465A8.5 8.5 0 0 1 21 9.5 8.5 8.5 0 0 1 12.5 1h1.5v6.588a4.5 4.5 0 1 1-3.5 8.76V13.87a2 2 0 1 0 1.5-1.932V1H16.5Z"})}),github:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{d:"M12 1.5a10.5 10.5 0 0 0-3.32 20.468c.526.097.72-.228.72-.508 0-.25-.01-1.082-.015-1.963-2.933.637-3.552-1.257-3.552-1.257-.48-1.22-1.172-1.545-1.172-1.545-.957-.654.073-.64.073-.64 1.06.075 1.619 1.088 1.619 1.088.94 1.611 2.466 1.145 3.067.875.095-.681.367-1.145.668-1.409-2.342-.266-4.804-1.171-4.804-5.209 0-1.151.41-2.093 1.082-2.832-.108-.267-.469-1.344.102-2.802 0 0 .883-.283 2.894 1.081A10.07 10.07 0 0 1 12 6.844a10.06 10.06 0 0 1 2.636.355c2.01-1.364 2.892-1.08 2.892-1.08.573 1.457.212 2.535.104 2.802.673.74 1.08 1.682 1.08 2.833 0 4.05-2.466 4.94-4.813 5.202.377.326.714.968.714 1.95 0 1.409-.013 2.546-.013 2.894 0 .282.19.61.727.506A10.503 10.503 0 0 0 12 1.5Z"})}),linkedin:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),website:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{d:"M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2Zm6.93 6h-3.243a15.93 15.93 0 0 0-1.23-3.154A8.03 8.03 0 0 1 18.93 8ZM12 4c.735 0 1.99 1.62 2.657 4H9.343C10.01 5.62 11.265 4 12 4ZM8.543 4.846A15.93 15.93 0 0 0 7.313 8H4.07a8.03 8.03 0 0 1 4.473-3.154ZM4.07 16h3.244c.294 1.112.708 2.178 1.23 3.154A8.03 8.03 0 0 1 4.07 16Zm5.274 0h5.313c-.667 2.38-1.922 4-2.657 4-.735 0-1.99-1.62-2.656-4Zm6.113 3.154A15.928 15.928 0 0 0 18.93 16h-3.244c-.294 1.112-.708 2.178-1.23 3.154Z"})})};function ar({socials:e,variant:t="homepage",showCopyright:r=!0}){const[n,s]=g.useState(null);g.useEffect(()=>{if(e&&Object.keys(e).length>0)return;let l=!1;return(async()=>{try{const c=await fetch("/api/socials/get.php",{credentials:"same-origin",cache:"no-cache"});if(c.ok){const d=await c.json().catch(()=>null),u=d&&(d.socials||(d.success?d.socials:null));!l&&u&&typeof u=="object"&&s(u)}}catch{}})(),()=>{l=!0}},[e]);const a=e??n;if(!a||Object.keys(a).length===0)return null;const o=i$;return t==="footer"?i.jsxs("div",{className:"mx-auto max-w-6xl px-4",children:[i.jsx("div",{className:"flex flex-wrap items-center justify-center gap-3 sm:gap-4 py-6",children:o.map(l=>{const c=a[l];return c?i.jsx("a",{href:c,target:"_blank",rel:"noreferrer","aria-label":k1[l]||l,className:`inline-flex shrink-0 items-center justify-center rounded-full border border-neutral-300 bg-white text-neutral-700 p-2 hover:border-neutral-400 transition shadow-sm\r
                           dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-200 dark:hover:border-neutral-600`,children:TE[l]||i.jsx("span",{className:"text-sm",children:l})},l):null})}),r&&i.jsxs("div",{className:"pb-10 text-center text-xs opacity-70",children:[" ",new Date().getFullYear()," All Rights Reserved."]})]}):i.jsx("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-3 md:gap-4 max-w-full",children:o.map(l=>{const c=a[l];return c?i.jsx("a",{href:c,target:"_blank",rel:"noreferrer","aria-label":k1[l]||l,className:`inline-flex shrink-0 items-center justify-center rounded-full border border-neutral-300 bg-white text-neutral-700 p-2 hover:border-neutral-400 transition shadow-sm\r
                       dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-200 dark:hover:border-neutral-600`,children:TE[l]||i.jsx("span",{className:"text-sm",children:l})},l):null})})}function $r(e,t){if(!e||e.trim()==="")return t;const r=e.split(",").map(s=>s.trim()).filter(s=>s!=="");if(r.length===0)return t;const n=r[Math.floor(Math.random()*r.length)];return n.startsWith("http://")||n.startsWith("https://")||n.startsWith("/")?n:`/api/uploads/general/${n}`}const o$=g.createContext(null),l$=()=>{const e=g.useContext(o$);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},qW=({children:e})=>{const[t,r]=g.useState(()=>localStorage.getItem("theme")||"dark");g.useEffect(()=>{localStorage.setItem("theme",t),t==="dark"?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")):(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark"))},[t]);const n=()=>{r(s=>s==="dark"?"light":"dark")};return i.jsx(o$.Provider,{value:{theme:t,toggleTheme:n},children:e})},GW=()=>{const{theme:e,toggleTheme:t}=l$();return i.jsx("button",{onClick:t,className:`fixed bottom-4 right-4 md:top-4 md:left-4 md:bottom-auto md:right-auto z-50 p-2 h-10 w-10 md:h-auto md:w-auto rounded-full md:rounded-lg transition-colors duration-200 shadow-lg ${e==="dark"?"bg-neutral-800 text-neutral-100 hover:bg-neutral-700":"bg-neutral-200 text-neutral-900 hover:bg-neutral-300"}`,"aria-label":`Switch to ${e==="dark"?"light":"dark"} theme`,children:e==="dark"?i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})};function KW(){const{theme:e}=l$(),[t,r]=g.useState(null),[n,s]=g.useState({}),[a,o]=g.useState(!1),[l,c]=g.useState(!1),[d,u]=g.useState(!0);if(g.useEffect(()=>{fetch("/api/author/get.php").then(y=>y.json()).then(y=>{y.success&&r(y.profile)}).catch(y=>{console.error("Failed to fetch author profile:",y),r({name:"Author Name",bio:"Author & Writer",tagline:"Stories that captivate and inspire"})}),fetch("/api/socials/get.php").then(y=>y.json()).then(y=>{y.success&&s(y.socials)}).catch(y=>{console.error("Failed to fetch social links:",y),s({})}),fetch("/api/stories/list.php?status=published&limit=1").then(y=>y.json()).then(y=>{y.success&&y.stories&&y.stories.length>0&&o(!0)}).catch(y=>{console.error("Failed to fetch stories:",y)}),fetch("/api/galleries/list.php?limit=1").then(y=>y.json()).then(y=>{y.galleries&&y.galleries.length>0&&c(!0)}).catch(y=>{console.error("Failed to fetch galleries:",y)}).finally(()=>{u(!1)})},[]),!t)return i.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."});const h=e==="light"?$r(t.background_image_light||t.background_image,"/images/lofi_light_bg.webp"):$r(t.background_image_dark||t.background_image,"/images/lofi_bg.webp"),f=e==="light"?"bg-white/60":"bg-black/40",p=e==="light"?"bg-white/70 text-gray-900":"bg-black/70 text-white",x=`https://${t.site_domain||"example.com"}`,b=t.profile_image?t.profile_image.startsWith("http")?t.profile_image:`${x}${t.profile_image}`:`${x}/images/lofi_bg.webp`;return i.jsxs(i.Fragment,{children:[i.jsxs(En,{children:[i.jsxs("title",{children:[t.name," | ",t.bio]}),i.jsx("meta",{name:"description",content:`${t.name} - ${t.bio}. ${t.tagline}. Discover engaging stories and creative writing.`}),i.jsx("link",{rel:"canonical",href:`${x}/`}),i.jsx("meta",{property:"og:title",content:`${t.name} | ${t.bio}`}),i.jsx("meta",{property:"og:description",content:`${t.name} - ${t.bio}. ${t.tagline}. Discover engaging stories and creative writing.`}),i.jsx("meta",{property:"og:type",content:"website"}),i.jsx("meta",{property:"og:url",content:`${x}/`}),i.jsx("meta",{property:"og:image",content:b}),i.jsx("meta",{name:"twitter:card",content:"summary"}),i.jsx("meta",{name:"twitter:title",content:`${t.name} | ${t.bio}`}),i.jsx("meta",{name:"twitter:description",content:`${t.name} - ${t.bio}. ${t.tagline}. Discover engaging stories and creative writing.`}),i.jsx("meta",{name:"twitter:image",content:b}),i.jsx("meta",{name:"keywords",content:"author, writer, stories, novels, creative writing"}),i.jsx("meta",{name:"author",content:t.name})]}),i.jsx(GW,{}),i.jsxs("div",{className:"relative h-screen w-full",children:[i.jsx("div",{className:"fixed inset-0 -z-10 bg-no-repeat bg-top [background-size:auto_100%] md:[background-size:100%_auto]",style:{backgroundImage:`url('${h}')`,backgroundColor:e==="light"?"#f7f7f7":"#0a0a0a"}}),i.jsx("div",{className:`fixed inset-0 ${f} -z-10`}),i.jsx("div",{className:"relative z-10 flex items-center justify-center h-full",children:i.jsxs("div",{className:`${p} p-8 rounded-2xl shadow-xl max-w-md text-center`,children:[t.profile_image&&i.jsx("div",{className:"mb-4 flex justify-center",children:i.jsx("img",{src:t.profile_image,alt:t.name,className:"w-24 h-24 rounded-full object-cover border-4 border-white/20",onError:y=>{const v=y.target;v.style.display="none"}})}),i.jsx("h1",{className:"text-3xl font-bold mb-2",children:t.name}),i.jsx("p",{className:"opacity-90 mb-2 text-sm sm:text-base md:text-lg leading-snug break-words",children:t.bio}),i.jsx("p",{className:"opacity-80 mb-6 text-sm sm:text-base md:text-lg leading-snug break-words line-clamp-2 sm:line-clamp-3 md:line-clamp-none",children:t.tagline}),!d&&i.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-6",children:[a&&i.jsx("a",{href:"/storytime",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors",children:"Stories"}),l&&i.jsx("a",{href:"/galleries",className:`px-4 py-2 rounded-lg transition-colors ${e==="light"?"bg-gray-600 text-white hover:bg-gray-500":"bg-gray-700 text-white hover:bg-gray-600"}`,children:"Galleries"}),t.show_litrpg_tools!==!1&&i.jsx("a",{href:"/litrpg",className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-500 transition-colors",children:"LitRPG Tools"}),t.show_shoutouts&&i.jsx("a",{href:"/shoutouts",className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-500 transition-colors",children:"Shoutouts"})]}),i.jsx(ar,{socials:n}),i.jsx("div",{className:"mt-4",children:i.jsx("a",{href:"/admin",className:"text-xs opacity-50 hover:opacity-100 transition-opacity",children:"Admin"})})]})})]})]})}function YW(){return i.jsx(qW,{children:i.jsx(KW,{})})}function XW(){return i.jsx(YW,{})}function JW(){const e="analytics:session";let t=localStorage.getItem(e);return t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const n=Math.random()*16|0;return(r==="x"?n:n&3|8).toString(16)}),localStorage.setItem(e,t)),t}async function Jo(e,t={}){try{const r={event_type:e,session_id:JW(),url_path:window.location.pathname,referrer:document.referrer||void 0,...t};await fetch(`${Ce}/analytics/ingest.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(r)})}catch(r){console.debug("Analytics tracking failed:",r)}}const Rd={trackPageView(){Jo("page_view")},trackStoryView(e,t){Jo("story_view",{content_type:"story",content_id:t,meta:{story_slug:e}})},trackChapterView(e){Jo("chapter_view",{content_type:"chapter",content_id:e.chapterId,parent_type:"story",parent_id:e.storyId,meta:{story_slug:e.storySlug,chapter_number:e.chapterNumber}})},trackChapterDepth(e,t){Jo("chapter_depth",{content_type:"chapter",content_id:e.chapterId,parent_type:"story",parent_id:e.storyId,value_num:Math.max(0,Math.min(1,t.depth)),meta:{time_ms:t.timeMs}})},trackGalleryView(e){Jo("gallery_view",{content_type:"gallery",content_id:e})},trackImageView(e,t){Jo("image_view",{content_type:"image",content_id:e,parent_type:"gallery",parent_id:t})},trackClick(e,t={},r={}){Jo("click",{content_type:r.content_type,content_id:r.content_id,parent_type:r.parent_type,parent_id:r.parent_id,meta:{name:e,...t}})}};class ZW{constructor(t){Ye(this,"startTime");Ye(this,"maxDepth",0);Ye(this,"element",null);this.startTime=Date.now(),this.element=t,this.handleScroll=this.handleScroll.bind(this),this.element.addEventListener("scroll",this.handleScroll,{passive:!0})}handleScroll(){if(!this.element)return;const t=this.element.scrollTop,r=this.element.scrollHeight,n=this.element.clientHeight,s=Math.min(1,(t+n)/r);this.maxDepth=Math.max(this.maxDepth,s)}destroy(t){this.element&&this.element.removeEventListener("scroll",this.handleScroll);const r=Date.now()-this.startTime;r>2e3&&this.maxDepth>.05&&Rd.trackChapterDepth(t,{depth:this.maxDepth,timeMs:r})}}function PE(e){let t=(e||"").replace(/^\s*prompt:\s*/i,"").trim();const r=/\n\s*(steps|sampler|cfg\s*scale|seed|size|model|vae|clip\s*skip|denoising\s*strength|hires\s*steps|hires\s*upscale|hires\s*upscaler|version|ensd|scheduler|refiner|tile|loras?)\s*:/i;if(t.match(/\bnegative\s*(?:prompt)?\s*:\s*/i)){const l=t.split(/\bnegative\s*(?:prompt)?\s*:\s*/i,2),c=(l[0]||"").trim();let d=(l.slice(1).join(`
`)||"").replace(/^[\s:\-]+/,"");const u=d.search(r);return u>=0&&(d=d.slice(0,u)),{pos:c,neg:d.trim()}}const s=t.toLowerCase(),o=/(?:^|[\n,;])\s*(lowres|worst quality|bad(?:[-\s]?anatomy|[-\s]?hands)|extra[-\s]?digits|missing[-\s]?fingers|watermark|signature|username|jpeg artifacts)\b/.exec(s);if(o&&typeof o.index=="number"){const l=o[1].toLowerCase(),c=s.indexOf(l,o.index);let d=t.slice(0,c).trim().replace(/[,\s]+$/,"").trim(),u=t.slice(c).replace(/^[\s,;]+/,"");const h=u.search(r);return h>=0&&(u=u.slice(0,h)),{pos:d,neg:u.trim()}}return{pos:t}}function Yy(e){if(!e)return!1;const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function QW(e){const t=[],r=[],n=/"class_type"\s*:\s*"([^"]*cliptextencode[^"]*)"/gi;let s;for(;s=n.exec(e);){const o=Math.max(0,s.index-600),l=e.slice(o,s.index+2e3),c=/"text"\s*:\s*"((?:\\\\.|[^"\\\\])*)"/is.exec(l);if(c){const u=c[1].replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\"/g,'"').replace(/\\\\/g,"\\").trim();u&&(/"(?:_meta"\s*:\s*\{[^}]*"title"|"label)"\s*:\s*"[^"]*negative[^"]*"/i.test(l)?r.push(u):t.push(u))}}const a=o=>{let l,c=-1;for(const d of o)d.length>c&&(c=d.length,l=d);return l};return{pos:a(t),neg:a(r)}}function eV({im:e,galleryId:t}){var I;const[r,n]=g.useState(!1),[s,a]=g.useState(null);g.useEffect(()=>{r&&e.id&&t&&Rd.trackImageView(e.id,t)},[r,e.id,t]);const o=async(D,$)=>{if(D)try{await navigator.clipboard.writeText(D),a($),setTimeout(()=>a(null),1e3)}catch{}},l=e.prompt||"",c=e.parameters||void 0;let d,u=c;if(l){const{pos:D,neg:$}=PE(l);d=D,!u&&$&&(u=$)}if(u){const{neg:D}=PE(u);u=D||u}if((!d||Yy(d))&&Yy(l)){const D=QW(l);!d&&D.pos&&(d=D.pos),!u&&D.neg&&(u=D.neg)}d&&Yy(d)&&(d=void 0);const[h,f]=g.useState({}),p=e.width??h.w,m=e.height??h.h,x=!!(p&&m&&p/m>=2.2),[b,y]=g.useState({likes:0,comments:0,liked:!1});g.useEffect(()=>{let D=!1;return e.id&&fetch(`${Ce}/images/gallery-stats.php?image_id=${e.id}`,{cache:"no-cache",credentials:"same-origin"}).then($=>$.ok?$.json():null).then($=>{!D&&$&&$.ok&&y({likes:$.likes??0,comments:$.comments??0,liked:!!$.liked})}).catch(()=>{}),()=>{D=!0}},[e.id]);const v=async()=>{if(e.id)try{const D=await fetch(`${Ce}/images/gallery-like.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({image_id:e.id})});if(D.ok){const $=await D.json();y(L=>({likes:$.like_count??L.likes,comments:$.comments??L.comments,liked:!!$.user_liked}))}}catch{}},[w,j]=g.useState([]),[N,k]=g.useState(!1),[S,C]=g.useState(""),[P,E]=g.useState(""),O=async()=>{if(e.id){k(!0);try{const D=await fetch(`${Ce}/images/gallery-comment-list.php?image_id=${e.id}`,{cache:"no-cache",credentials:"same-origin"});if(D.ok){const $=await D.json();j($.comments||[]),$.comments&&Array.isArray($.comments)&&y(L=>({...L,comments:$.comments.length}))}}catch{}finally{k(!1)}}};g.useEffect(()=>{r&&w.length===0&&!N&&O()},[r]);const A=async D=>{if(D.preventDefault(),!e.id)return;const $=P.trim();if($)try{const L=await fetch(`${Ce}/images/gallery-comment-create.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({image_id:e.id,author_name:S.trim()||"Anonymous",content:$})});if(L.ok){await L.json();const M={id:Date.now(),author_name:S.trim()||"Anonymous",content:$,created_at:new Date().toISOString()};j(T=>[M,...T]),E(""),y(T=>({...T,comments:(T.comments??0)+1}))}else{const M=await L.text().catch(()=>"");alert(`Failed to submit comment: [${L.status}] ${M}`),console.error("Comment create failed",L.status,M)}}catch(L){alert("Failed to submit comment: "+((L==null?void 0:L.message)||"error"))}},_=e.title&&e.title.trim()||(()=>{try{const L=((e.src||"").split("?")[0].split("#")[0].split("/").pop()||"Image").replace(/\.[^./\\?#]+$/,"");return decodeURIComponent(L)}catch{return"Image"}})();return i.jsxs("div",{className:`rounded-2xl overflow-hidden border bg-white border-neutral-200 shadow-sm transition hover:shadow-md dark:bg-neutral-900 dark:border-neutral-800 ${x?"sm:col-span-2 lg:col-span-3":""}`,children:[i.jsx("button",{className:`block w-full overflow-hidden bg-neutral-200 dark:bg-neutral-800 ${p&&m?"":"aspect-[4/5]"}`,style:{aspectRatio:p&&m?`${p}/${m}`:void 0},onClick:()=>n(!0),"aria-label":"Open image",children:i.jsx("img",{src:e.thumb??e.src,alt:((I=e.prompt)==null?void 0:I.slice(0,120))||"image",loading:"lazy",className:"h-full w-full object-contain",onLoad:D=>{if(!e.width||!e.height){const $=D.currentTarget,L=$.naturalWidth||void 0,M=$.naturalHeight||void 0;L&&M&&(h.w!==L||h.h!==M)&&f({w:L,h:M})}}})}),i.jsxs("div",{className:"p-3 space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-3 text-xs opacity-80",children:[i.jsxs("span",{title:"Likes",children:[" ",b.likes||0]}),i.jsx("span",{children:""}),i.jsxs("span",{title:"Comments",children:[" ",b.comments||0]})]}),e.checkpoint&&i.jsxs("p",{className:"opacity-80",children:[i.jsx("span",{className:"opacity-60",children:"Checkpoint:"})," ",e.checkpoint]}),e.loras&&e.loras.length>0&&i.jsxs("div",{className:"opacity-90",children:[i.jsx("div",{className:"opacity-60 mb-1",children:"LoRAs"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:e.loras.map(D=>i.jsx("span",{className:"inline-block rounded-md bg-neutral-100 px-2 py-0.5 text-xs border border-neutral-300 dark:bg-neutral-800 dark:border-neutral-700",children:D},D))})]}),d&&i.jsxs("div",{className:"rounded-lg border bg-neutral-50 border-neutral-200 p-3 dark:bg-neutral-900 dark:border-neutral-800",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium opacity-90",children:"Positive Prompt"}),i.jsx("button",{onClick:()=>o(d||"","pos"),className:"ml-auto rounded-md border border-neutral-300 bg-white text-neutral-700 px-2 py-1 text-xs hover:border-neutral-400 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-200 dark:hover:border-neutral-600",children:s==="pos"?"Copied":"Copy"})]}),i.jsx("p",{className:"mt-2 whitespace-pre-wrap opacity-90",children:d})]}),u&&i.jsxs("div",{className:"rounded-lg border bg-neutral-50 border-neutral-200 p-3 dark:bg-neutral-900 dark:border-neutral-800",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium opacity-90",children:"Negative Prompt"}),i.jsx("button",{onClick:()=>o(u||"","neg"),className:"ml-auto rounded-md border border-neutral-300 bg-white text-neutral-700 px-2 py-1 text-xs hover:border-neutral-400 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-200 dark:hover:border-neutral-600",children:s==="neg"?"Copied":"Copy"})]}),i.jsx("p",{className:"mt-2 whitespace-pre-wrap opacity-90",children:u})]}),i.jsxs("a",{href:e.src,target:"_blank",rel:"noreferrer",className:"inline-block text-xs opacity-70 hover:opacity-100 underline",title:`${_} - Open original`,children:[_," - Open original"]})]}),r&&i.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 p-4 overflow-auto",onClick:()=>n(!1),children:i.jsxs("div",{className:"mx-auto max-w-4xl w-full",onClick:D=>D.stopPropagation(),children:[i.jsx("div",{className:"flex justify-end mb-2",children:i.jsx("button",{onClick:()=>n(!1),className:"rounded-md bg-white/90 px-2 py-1 text-sm text-neutral-900 hover:bg-white",children:" Close"})}),e.media_type==="video"?i.jsxs("video",{controls:!0,playsInline:!0,poster:e.poster||e.thumb||void 0,className:"max-h-[70vh] w-full object-contain rounded-md",children:[i.jsx("source",{src:e.src,type:e.mime_type||"video/mp4"}),"Your browser does not support the video tag."]}):i.jsx("img",{src:e.src,className:"max-h-[70vh] w-full object-contain rounded-md"}),i.jsxs("div",{className:"mt-3 rounded-lg border bg-white border-neutral-200 p-3 dark:bg-neutral-900 dark:border-neutral-800",children:[i.jsxs("div",{className:"mb-3 flex items-center gap-3",children:[i.jsxs("button",{onClick:v,disabled:!e.id,className:`inline-flex items-center gap-1 rounded-md border px-2 py-1 text-sm ${b.liked?"border-pink-400 text-pink-700 dark:text-pink-300":"border-neutral-300 text-neutral-700 hover:border-neutral-400 dark:border-neutral-700 dark:text-neutral-200 dark:hover:border-neutral-600"}`,title:b.liked?"Unlike":"Like",children:[i.jsx("span",{children:b.liked?"":""}),i.jsx("span",{className:"text-xs",children:b.likes||0})]}),i.jsxs("span",{className:"text-xs opacity-80",children:[" ",b.comments||0]})]}),i.jsx("h4",{className:"font-medium opacity-90 mb-2",children:"Comments"}),i.jsxs("form",{onSubmit:A,className:"space-y-2 mb-3",children:[i.jsx("input",{value:S,onChange:D=>C(D.target.value),className:"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm dark:border-neutral-700 dark:bg-neutral-900",placeholder:"Name (optional)"}),i.jsx("textarea",{value:P,onChange:D=>E(D.target.value),className:"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm dark:border-neutral-700 dark:bg-neutral-900",rows:3,placeholder:"Share your thoughts...",maxLength:1e3}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"submit",className:"rounded-md border border-neutral-300 bg-white px-2 py-1 text-xs hover:border-neutral-400 dark:border-neutral-700 dark:bg-neutral-800 dark:hover:border-neutral-600",children:"Submit Comment"}),i.jsxs("span",{className:"text-xs opacity-60",children:[P.length,"/1000"]})]})]}),N?i.jsx("p",{className:"text-sm opacity-70",children:"Loading"}):w.length===0?i.jsx("p",{className:"text-sm opacity-70",children:"No comments yet. Be the first to comment!"}):i.jsx("ul",{className:"space-y-2",children:w.map(D=>i.jsxs("li",{className:"rounded-md border border-neutral-200 p-2 dark:border-neutral-800",children:[i.jsxs("div",{className:"text-xs opacity-60 mb-1",children:[i.jsx("span",{className:"font-bold text-neutral-900 dark:text-neutral-100 opacity-90",children:D.author_name||"Anonymous"}),"  "+new Date(D.created_at).toLocaleString()]}),i.jsx("div",{className:"whitespace-pre-wrap text-sm opacity-90",children:D.content})]},D.id))})]})]})})]})}function jf(){const{theme:e,toggleTheme:t}=Wt(),r=e==="dark";return i.jsx("button",{onClick:t,className:`fixed bottom-4 right-4 md:top-4 md:left-4 md:bottom-auto md:right-auto z-50 p-2 h-10 w-10 md:h-auto md:w-auto rounded-full md:rounded-lg transition-colors duration-200 shadow-lg ${r?"bg-neutral-800 text-neutral-100 hover:bg-neutral-700":"bg-neutral-200 text-neutral-900 hover:bg-neutral-300"}`,"aria-label":`Switch to ${r?"light":"dark"} theme`,children:r?i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})}function Xr({breadcrumbs:e,showBreadcrumbs:t=!0}){var p,m,x,b,y,v,w,j;const r=Ba(),{theme:n}=Wt(),[s,a]=g.useState(null),[o,l]=g.useState(!1);g.useEffect(()=>{fetch("/api/homepage/get.php").then(N=>N.json()).then(N=>{N.success&&a({profile:N.profile,settings:N.settings})}).catch(()=>{a({profile:{name:"Author"},settings:{brand_color:"#10b981",brand_color_dark:"#10b981"}})})},[]);const c=[{label:"Stories",path:"/storytime"},{label:"Blog",path:"/blog"},{label:"Galleries",path:"/galleries"},{label:"Tools",path:"/litrpg"}],d=N=>N==="/"?r.pathname==="/":r.pathname.startsWith(N),u=((p=s==null?void 0:s.settings)==null?void 0:p.brand_color)||"#10b981",h=((m=s==null?void 0:s.settings)==null?void 0:m.brand_color_dark)||u,f=n==="dark"?h:u;return i.jsxs(i.Fragment,{children:[i.jsx("style",{children:`
        .nav-brand-bg { background-color: ${f}; }
        .nav-brand-text { color: ${f}; }
      `}),i.jsx("header",{className:"sticky top-0 z-40 backdrop-blur-md bg-white/80 dark:bg-neutral-950/80 border-b border-gray-200 dark:border-white/10",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsxs(Me,{to:"/",className:"flex items-center gap-3 group",children:[i.jsx("div",{className:"h-9 w-9 rounded-full nav-brand-bg flex items-center justify-center text-sm font-black text-white transition-transform group-hover:scale-105",children:((b=(x=s==null?void 0:s.profile)==null?void 0:x.name)==null?void 0:b.slice(0,2).toUpperCase())||"AU"}),i.jsxs("div",{className:"hidden sm:block",children:[i.jsx("div",{className:"text-sm font-semibold tracking-wide uppercase nav-brand-text",children:((y=s==null?void 0:s.profile)==null?void 0:y.name)||"Author"}),((v=s==null?void 0:s.profile)==null?void 0:v.tagline)&&i.jsx("div",{className:"text-xs text-gray-600 dark:text-neutral-400",children:s.profile.tagline})]})]}),i.jsx("nav",{className:"hidden md:flex items-center gap-1",children:c.map(N=>i.jsx(Me,{to:N.path,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${d(N.path)?"nav-brand-text bg-gray-100 dark:bg-white/10":"text-gray-700 dark:text-neutral-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-white/5"}`,children:N.label},N.path))}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(jf,{}),((w=s==null?void 0:s.settings)==null?void 0:w.newsletter_url)&&i.jsx("a",{href:s.settings.newsletter_url,target:"_blank",rel:"noopener noreferrer",className:"hidden sm:inline-flex rounded-full nav-brand-bg px-4 py-1.5 text-sm font-semibold text-white hover:opacity-90 transition-opacity",children:s.settings.newsletter_cta_text||"Newsletter"}),i.jsx("button",{onClick:()=>l(!o),className:"md:hidden p-2 rounded-lg text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-white/10","aria-label":"Toggle menu",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o?i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),o&&i.jsx("div",{className:"md:hidden pb-4 border-t border-gray-200 dark:border-white/10 mt-2 pt-4",children:i.jsxs("nav",{className:"flex flex-col gap-1",children:[c.map(N=>i.jsx(Me,{to:N.path,onClick:()=>l(!1),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${d(N.path)?"nav-brand-text bg-gray-100 dark:bg-white/10":"text-gray-700 dark:text-neutral-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-white/5"}`,children:N.label},N.path)),((j=s==null?void 0:s.settings)==null?void 0:j.newsletter_url)&&i.jsx("a",{href:s.settings.newsletter_url,target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-center rounded-lg nav-brand-bg px-4 py-2 text-sm font-semibold text-white hover:opacity-90 transition-opacity",children:s.settings.newsletter_cta_text||"Newsletter"})]})})]})}),t&&e&&e.length>0&&i.jsx("div",{className:"relative z-10 bg-gray-50/95 dark:bg-neutral-900/95 backdrop-blur-sm border-b border-gray-200 dark:border-white/5",children:i.jsx("div",{className:"max-w-6xl mx-auto px-4",children:i.jsxs("nav",{className:"flex items-center gap-2 py-3 text-sm","aria-label":"Breadcrumb",children:[i.jsx(Me,{to:"/",className:"text-gray-500 dark:text-neutral-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Home"}),e.map((N,k)=>i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4 text-gray-400 dark:text-neutral-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),N.path?i.jsx(Me,{to:N.path,className:"text-gray-500 dark:text-neutral-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:N.label}):i.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:N.label})]},k))]})})})]})}const tV=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;function rV({isOpen:e,onClose:t,source:r,defaultMessage:n,showPatreonLink:s=!0}){const{theme:a}=Wt(),[o,l]=g.useState(""),[c,d]=g.useState({chapters:!0,blog:!0,gallery:!0}),[u,h]=g.useState(!1),[f,p]=g.useState(!1),[m,x]=g.useState(null),[b,y]=g.useState(null),[v,w]=g.useState("#585137"),[j,N]=g.useState("#c79c00"),k=g.useMemo(()=>n||"Thanks! Check your email to confirm.",[n]);g.useEffect(()=>{(async()=>{try{const $=await fetch("/api/homepage/settings.php");if($.ok){const L=await $.json();L.success&&L.settings&&(w(L.settings.brand_color||"#585137"),N(L.settings.brand_color_dark||"#c79c00"))}}catch($){console.warn("Failed to fetch brand colors:",$)}})()},[]),g.useEffect(()=>{e||(l(""),d({chapters:!0,blog:!0,gallery:!0}),h(!1),p(!1),x(null),y(null))},[e]);const S=D=>{d($=>({...$,[D]:!$[D]}))},C=async D=>{D.preventDefault();const $=o.trim();if(!tV.test($)){x("Please enter a valid email address.");return}x(null),h(!0);try{const M=await(await fetch("/api/newsletter/subscribe.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:$,notify_chapters:c.chapters,notify_blog:c.blog,notify_gallery:c.gallery,source:r})})).json().catch(()=>null);M!=null&&M.message&&y(M.message)}catch(L){console.warn("Newsletter signup request failed",L)}finally{p(!0),h(!1)}};if(!e)return null;const P=a==="light"?"text-gray-900":"text-white",E=a==="light"?"text-gray-700":"text-neutral-200",O=a==="light"?"bg-white border-gray-200":"bg-neutral-900 border-white/10",A=a==="light"?"bg-gray-50 border-gray-200":"bg-white/5 border-white/10",_=a==="light"?v:j,I=a==="light"?"#4a442f":"#d4a600";return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",role:"dialog","aria-modal":"true",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:t}),i.jsxs("div",{className:`relative w-full sm:max-w-xl ${O} border rounded-t-3xl sm:rounded-3xl p-6 sm:p-8 shadow-2xl translate-y-0 sm:translate-y-0 animate-slide-up`,children:[i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em]",style:{color:_},children:"Newsletter"}),i.jsx("h2",{className:`mt-2 text-2xl font-bold ${P}`,children:"Stay in the loop"}),i.jsx("p",{className:`mt-2 text-sm ${E}`,children:"Get updates when new chapters, blog posts, or galleries go live. Choose what you want to hear about."})]}),i.jsx("button",{onClick:t,className:`h-10 w-10 grid place-items-center rounded-full ${a==="light"?"bg-gray-100 hover:bg-gray-200 text-gray-600":"bg-white/10 hover:bg-white/20 text-white"} transition-colors`,"aria-label":"Close",children:""})]}),f?i.jsxs("div",{className:`mt-6 rounded-2xl border ${O} px-4 py-5 text-center`,children:[i.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full text-xl",style:{backgroundColor:`${_}10`,color:_},children:""}),i.jsx("p",{className:`mt-4 text-lg font-semibold ${P}`,children:b||k}),i.jsx("p",{className:`mt-2 text-sm ${E}`,children:"Check your inbox for a confirmation link. If you don't see it, check spam."})]}):i.jsxs("form",{className:"mt-6 space-y-5",onSubmit:C,children:[i.jsxs("div",{children:[i.jsx("label",{className:`text-sm font-medium ${P}`,children:"Email address"}),i.jsx("input",{type:"email",value:o,onChange:D=>l(D.target.value),className:`mt-2 w-full rounded-xl px-4 py-3 ${A} focus:outline-none focus:ring-2 transition`,style:{"--tw-ring-color":_},placeholder:"you@example.com",required:!0}),m&&i.jsx("p",{className:"mt-2 text-sm text-red-500",children:m})]}),i.jsxs("div",{children:[i.jsx("p",{className:`text-sm font-medium ${P} mb-2`,children:"What should I send you?"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[i.jsxs("label",{className:`flex items-center gap-2 rounded-xl border px-3 py-2 cursor-pointer ${E}`,style:c.chapters?{borderColor:_,backgroundColor:a==="light"?`${_}10`:`${_}15`}:{},children:[i.jsx("input",{type:"checkbox",checked:c.chapters,onChange:()=>S("chapters"),className:"rounded border-gray-300 focus:ring-2",style:{color:_,"--tw-ring-color":_}}),i.jsx("span",{children:"New chapters"})]}),i.jsxs("label",{className:`flex items-center gap-2 rounded-xl border px-3 py-2 cursor-pointer ${E}`,style:c.blog?{borderColor:_,backgroundColor:a==="light"?`${_}10`:`${_}15`}:{},children:[i.jsx("input",{type:"checkbox",checked:c.blog,onChange:()=>S("blog"),className:"rounded border-gray-300 focus:ring-2",style:{color:_,"--tw-ring-color":_}}),i.jsx("span",{children:"Blog posts"})]}),i.jsxs("label",{className:`flex items-center gap-2 rounded-xl border px-3 py-2 cursor-pointer ${E}`,style:c.gallery?{borderColor:_,backgroundColor:a==="light"?`${_}10`:`${_}15`}:{},children:[i.jsx("input",{type:"checkbox",checked:c.gallery,onChange:()=>S("gallery"),className:"rounded border-gray-300 focus:ring-2",style:{color:_,"--tw-ring-color":_}}),i.jsx("span",{children:"Image galleries"})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[i.jsx("button",{type:"submit",disabled:u,className:"inline-flex items-center justify-center gap-2 rounded-xl px-5 py-3 font-semibold text-white shadow-lg transition disabled:opacity-70",style:{backgroundColor:_,boxShadow:`0 10px 15px -3px ${_}20`},onMouseEnter:D=>!u&&(D.currentTarget.style.backgroundColor=I),onMouseLeave:D=>D.currentTarget.style.backgroundColor=_,children:u?"Joining...":"Join the mailing list"}),s&&i.jsx("a",{href:"https://www.patreon.com",target:"_blank",rel:"noreferrer",className:`text-sm font-semibold ${E} hover:brand-text`,children:"Already subscribed? Support me on Patreon "})]})]})]})]})}function pa({variant:e,source:t,className:r="",buttonText:n}){const[s,a]=g.useState(!1),[o,l]=g.useState("#585137"),[c,d]=g.useState("#c79c00"),{theme:u}=Wt();g.useEffect(()=>{(async()=>{try{const w=await fetch("/api/homepage/settings.php");if(w.ok){const j=await w.json();j.success&&j.settings&&(l(j.settings.brand_color||"#585137"),d(j.settings.brand_color_dark||"#c79c00"))}}catch(w){console.warn("Failed to fetch brand colors:",w)}})()},[]);const h=u==="light"?"text-gray-900":"text-white",f=u==="light"?"text-gray-700":"text-neutral-200",p=u==="light"?"bg-white/70 border-gray-200 backdrop-blur":"bg-neutral-900/70 border-white/10 backdrop-blur",m=u==="light"?o:c,x=()=>a(!0),b=()=>a(!1),y=(v,w="")=>i.jsx("button",{type:"button",onClick:x,style:{backgroundColor:m,boxShadow:`0 10px 15px -3px ${m}20`},className:`inline-flex items-center justify-center gap-2 rounded-xl px-5 py-3 text-sm font-semibold text-white shadow-lg hover:opacity-90 transition focus:outline-none focus:ring-2 focus:ring-offset-2 ${w}`,onMouseEnter:j=>j.currentTarget.style.backgroundColor=u==="light"?"#4a442f":"#d4a600",onMouseLeave:j=>j.currentTarget.style.backgroundColor=m,children:v});return i.jsxs(i.Fragment,{children:[e==="button"&&i.jsx("div",{className:r,children:y(n||"Join the mailing list")}),e==="inline"&&i.jsxs("button",{type:"button",onClick:x,className:`text-sm font-semibold underline-offset-4 hover:underline ${f} ${r}`,children:[n||"Get email updates"," "]}),e==="card"&&i.jsxs("div",{className:`flex flex-col gap-4 border rounded-2xl p-4 ${p} ${r}`,children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"grid h-10 w-10 flex-shrink-0 place-items-center rounded-full text-xl",style:{backgroundColor:`${m}15`,color:m},children:""}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em]",style:{color:m},children:"Newsletter"}),i.jsx("h3",{className:`text-base font-bold ${h} mt-1`,children:"Get the latest drops"})]})]}),i.jsx("p",{className:`text-sm ${f}`,children:"Be first to know about new chapters, blog posts, and gallery drops."}),y(n||"Join the mailing list","w-full")]}),i.jsx(rV,{isOpen:s,onClose:b,source:t,defaultMessage:n})]})}function c$({items:e,onOpen:t,showAdultBadge:r=!1}){return e!=null&&e.length?i.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:e.map(n=>{const s=String(n.slug||""),a=String(n.title||"Untitled"),o=n.description?String(n.description):null,l=Number(n.image_count)||0,c=n.hero_thumb?String(n.hero_thumb):null,d=Number(n.hero_width)||null,u=Number(n.hero_height)||null,h=!!(d&&u&&d/u>=2.2);return i.jsxs("button",{className:`group text-left rounded-2xl overflow-hidden border bg-white border-neutral-200 hover:border-neutral-300 shadow-sm hover:shadow-md transition focus:outline-none focus:ring-2 focus:ring-neutral-300 dark:bg-neutral-900 dark:border-neutral-800 dark:hover:border-neutral-700 dark:focus:ring-neutral-600 ${h?"sm:col-span-2 lg:col-span-3":""}`,onClick:()=>t(s),"aria-label":`Open ${a}`,children:[i.jsxs("div",{className:h?"relative w-full overflow-hidden bg-neutral-200 dark:bg-neutral-800 aspect-[21/9]":"relative w-full overflow-hidden bg-neutral-200 dark:bg-neutral-800 aspect-[4/3]",children:[c?i.jsx("img",{src:c,alt:a,className:`h-full w-full transition-transform duration-300 group-hover:scale-[1.03] ${h?"object-contain":"object-cover"}`,loading:"lazy"}):i.jsx("div",{className:"h-full w-full grid place-items-center text-neutral-400 text-sm",children:"No image"}),r&&n.rating==="X"&&i.jsx("span",{title:"18+ content",className:"pointer-events-none absolute top-2 right-2 rounded-md bg-red-600/90 px-2 py-1 text-xs font-semibold text-white shadow-md",children:""})]}),i.jsxs("div",{className:"p-3 space-y-1",children:[i.jsx("h3",{className:"font-semibold",children:a}),o?i.jsx("p",{className:"text-sm opacity-80 line-clamp-3",children:o}):null,i.jsxs("div",{className:"flex items-center gap-3 text-xs opacity-60",children:[i.jsxs("span",{children:[" ",l]}),i.jsxs("span",{children:[" ",Number(n.like_count)||0]}),i.jsxs("span",{children:[" ",Number(n.comment_count)||0]})]})]})]},s)})}):i.jsx("p",{className:"opacity-70",children:"No galleries found."})}const nV={success:!0,profile:{name:"Ocean Wanderer",bio:"Fantasy and sci-fi author exploring worlds through words and art",tagline:"Author & Worldbuilder",profile_image:"/images/mock/mock-author-profile.webp"},settings:{hero_title:"Welcome to the worlds of ",hero_tagline:"Author & Worldbuilder",hero_description:"Dive into immersive stories filled with adventure, mystery, and unforgettable characters. From epic fantasy quests to mind-bending sci-fi mysteries, each universe is crafted with care.",show_featured_story:!0,show_activity_feed:!0,show_tools_section:!0,newsletter_cta_text:"Newsletter",newsletter_url:"https://ocwanderer.com/newsletter",brand_color:"#10b981",brand_color_dark:"#10b981",featured_story_id:1},featured_story:{id:1,title:"The Shattered Realms",tagline:"Where magic meets destiny",description:"An epic fantasy adventure following a young mage who discovers she's the key to preventing the collapse of multiple realities.",homepage_description:"When Aria discovers an ancient artifact, she's thrust into a quest across shattered dimensions. With time running out and dark forces closing in, she must master powers she never knew existed.",cover_image:"/images/mock/mock-story-cover-1.webp",genres:["Epic Fantasy","Adventure","Magic"],cta_text:"Start the Journey",slug:"shattered-realms",external_links:[{label:"Read on Royal Road",url:"https://www.royalroad.com/fiction/120420/destiny-among-the-stars-scifi-litrpg-adventure"}],latest_chapter_number:24,latest_chapter_title:"The Crystal Gate"},stories:[{id:1,title:"The Shattered Realms",tagline:"Where magic meets destiny",description:"An epic fantasy adventure following a young mage who discovers she's the key to preventing the collapse of multiple realities.",homepage_description:"When Aria discovers an ancient artifact, she's thrust into a quest across shattered dimensions.",cover_image:"/images/mock/mock-story-cover-1.webp",genres:["Epic Fantasy","Adventure","Magic","Portal"],cta_text:"Start Reading",slug:"shattered-realms"},{id:2,title:"Echoes in the Void",tagline:"Truth is buried in silence",description:"A psychological mystery where a detective investigates impossible crimes in a city where memories can be stolen.",homepage_description:"Detective Marcus Chen faces his strangest case yet: murders that never happened, but the victims remember dying.",cover_image:"/images/mock/mock-story-cover-2.webp",genres:["Mystery","Thriller","Sci-Fi","Noir"],cta_text:"Uncover the Mystery",slug:"echoes-void"},{id:3,title:"Starborn Protocol",tagline:"Evolution is just the beginning",description:"Humanity's first contact with aliens reveals we're part of a galactic experiment gone wrong.",homepage_description:"When signals from deep space arrive, they bring a warning: humanity was never meant to exist.",cover_image:"/images/mock/mock-story-cover-3.webp",genres:["Sci-Fi","Space Opera","First Contact","Adventure"],cta_text:"Launch Mission",slug:"starborn-protocol"},{id:4,title:"The Wanderer's Chronicles",tagline:"Every road leads somewhere",description:"A traveling bard discovers ancient songs that can reshape reality itself.",homepage_description:"Armed with only a lute and mysterious melodies, Finn walks roads between worlds seeking lost harmonies.",cover_image:"/images/mock/mock-story-cover-4.webp",genres:["Fantasy","Music","Journey","Slice of Life"],cta_text:"Begin the Journey",slug:"wanderers-chronicles"}],activity:[{id:1,type:"chapter",source:"Royal Road",label:"New Chapter",title:"Chapter 24: The Crystal Gate",series_title:"The Shattered Realms",url:"https://www.royalroad.com/fiction/120420/destiny-among-the-stars-scifi-litrpg-adventure",published_at:"2025-12-15T14:30:00Z",time_ago:"1 day ago"},{id:2,type:"blog",source:"Blog",label:"New Post",title:"Worldbuilding: Creating Believable Magic Systems",series_title:null,url:"/blog/worldbuilding-magic-systems",published_at:"2025-12-13T10:00:00Z",time_ago:"3 days ago"},{id:3,type:"chapter",source:"Royal Road",label:"New Chapter",title:"Chapter 12: Memory Theft",series_title:"Echoes in the Void",url:"https://www.royalroad.com/fiction/120420/destiny-among-the-stars-scifi-litrpg-adventure",published_at:"2025-12-12T16:45:00Z",time_ago:"4 days ago"},{id:4,type:"gallery",source:"Gallery",label:"New Art",title:"Character Concept: Aria the Wanderer",series_title:null,url:"/galleries",published_at:"2025-12-10T09:20:00Z",time_ago:"6 days ago"},{id:5,type:"chapter",source:"Patreon",label:"Early Access",title:"Chapter 25: Beyond the Veil (Patreon Exclusive)",series_title:"The Shattered Realms",url:"https://www.patreon.com/cw/oc_wanderer",published_at:"2025-12-15T12:00:00Z",time_ago:"1 day ago"}],tools:[{id:1,title:"Character Generator",description:"Create random fantasy characters with detailed backstories",icon:"",link:"/litrpg/character-generator"},{id:2,title:"Stat Calculator",description:"Calculate RPG stats and progression for your characters",icon:"",link:"/litrpg/stats"},{id:3,title:"World Map",description:"Interactive map of The Shattered Realms universe",icon:"",link:"/litrpg/map"},{id:4,title:"Magic System",description:"Explore the rules and mechanics of dimensional magic",icon:"",link:"/litrpg/magic"}],socials:{royalroad:"https://www.royalroad.com/fiction/120420/destiny-among-the-stars-scifi-litrpg-adventure",patreon:"https://www.patreon.com/cw/oc_wanderer",twitter:"https://twitter.com",discord:"https://discord.gg"}},sV={posts:[{id:1,title:"Worldbuilding: Creating Believable Magic Systems",slug:"worldbuilding-magic-systems",excerpt:"Explore the core principles behind designing magic systems that feel both wondrous and grounded in your fictional worlds.",content_html:"<h2>The Foundation of Magic</h2><p>When building a magic system, the key is establishing clear rules and limitations. Magic should solve problems, but it should also create them. In my work on <em>The Shattered Realms</em>, dimensional magic comes at a cost - each time reality is bent, it weakens the barriers between worlds.</p><h2>Three Core Principles</h2><p><strong>1. Cost and Consequence:</strong> Every magical action should require something from the user. Energy, time, materials, or even memories.</p><p><strong>2. Consistent Rules:</strong> Once you establish how magic works, stick to it. Readers will notice if you break your own rules.</p><p><strong>3. Limitations Breed Creativity:</strong> The best magic systems are those with clear boundaries. When characters can't simply wave their hands and solve everything, they must be clever.</p><h2>Examples in Practice</h2><p>In the Echoes universe, memory manipulation requires direct physical contact and leaves the manipulator vulnerable to experiencing the victim's memories. This creates tension and raises the stakes for every use of the power.</p>",cover_image:"/images/mock/mock-blog-cover-1.webp",category_id:1,category_name:"Worldbuilding",category_slug:"worldbuilding",tags:["magic systems","worldbuilding","writing tips"],status:"published",published_at:"2025-12-13T10:00:00Z",created_at:"2025-12-13T09:00:00Z",updated_at:"2025-12-13T10:00:00Z",view_count:342,like_count:28,comment_count:5,reading_time:5,author_name:"Ocean Wanderer"},{id:2,title:"Character Development: Writing Flawed Heroes",slug:"character-development-flawed-heroes",excerpt:"Why perfect protagonists fall flat and how to craft characters with meaningful imperfections.",content_html:"<h2>The Problem with Perfect</h2><p>Nobody wants to read about characters who always make the right choice, never struggle, and effortlessly overcome every obstacle. Flaws make characters relatable and their victories meaningful.</p><h2>Types of Character Flaws</h2><p><strong>Fatal Flaws:</strong> These are deep-seated issues that drive the character's arc. Aria's inability to trust others stems from abandonment in her past.</p><p><strong>Quirky Flaws:</strong> These add personality without necessarily driving plot. Maybe your detective has an obsessive need to organize everything by color.</p><p><strong>Evolving Flaws:</strong> The best character arcs show growth. A cowardly character learning bravery, or a loner learning to work with others.</p><h2>Balancing Strengths and Weaknesses</h2><p>Your protagonist should have clear strengths that make readers root for them, but their flaws should create genuine obstacles. Marcus Chen is brilliant at solving cases, but his obsession with finding truth makes him blind to when he's being manipulated.</p>",cover_image:"/images/mock/mock-blog-cover-2.webp",category_id:2,category_name:"Writing Craft",category_slug:"writing-craft",tags:["character development","protagonists","writing advice"],status:"published",published_at:"2025-12-10T14:30:00Z",created_at:"2025-12-10T13:00:00Z",updated_at:"2025-12-10T14:30:00Z",view_count:289,like_count:34,comment_count:8,reading_time:6,author_name:"Ocean Wanderer"},{id:3,title:"Behind the Scenes: Designing The Shattered Realms",slug:"behind-scenes-shattered-realms",excerpt:"A deep dive into the creative process behind my most ambitious fantasy series yet.",content_html:"<h2>The Genesis</h2><p>The Shattered Realms began as a simple question: What if parallel universes weren't just alternate timelines, but fragments of a single broken reality?</p><h2>Building the World</h2><p>Each realm in the story has its own magic system, culture, and rules of physics. The challenge was making them feel distinct while maintaining a cohesive underlying logic.</p><ul><li><strong>The Crystalline Realm:</strong> A world frozen in eternal twilight where time moves differently</li><li><strong>The Void Between:</strong> The dangerous space between realms where reality breaks down</li><li><strong>The Origin Point:</strong> The mythical place where all realities once converged</li></ul><h2>Character Inspirations</h2><p>Aria wasn't originally the protagonist. She started as a side character, but her voice was so strong that she demanded to tell this story. Sometimes characters know better than their authors.</p>",cover_image:"/images/mock/mock-blog-cover-3.webp",category_id:3,category_name:"Behind the Scenes",category_slug:"behind-scenes",tags:["the shattered realms","worldbuilding","creative process"],status:"published",published_at:"2025-12-08T11:15:00Z",created_at:"2025-12-08T10:00:00Z",updated_at:"2025-12-08T11:15:00Z",view_count:456,like_count:52,comment_count:12,reading_time:7,author_name:"Ocean Wanderer"},{id:4,title:"Writing Advice: Finding Your Voice",slug:"writing-advice-finding-voice",excerpt:"Discover techniques to develop your unique writing style and authentic narrative voice.",content_html:"<h2>What is Voice?</h2><p>Your voice is the unique way you tell stories - your word choices, sentence rhythms, and perspective. It's what makes your work recognizably yours.</p><h2>Exercises to Discover Your Voice</h2><p><strong>1. Free Writing:</strong> Write for 15 minutes without stopping or editing. Your natural voice emerges when you stop overthinking.</p><p><strong>2. Rewrite a Scene:</strong> Take a classic scene from literature and rewrite it in your style. Notice what changes you make naturally.</p><p><strong>3. Read Your Work Aloud:</strong> Does it sound like you? If you wouldn't say it out loud, maybe it's not your voice.</p><h2>Voice vs. Style</h2><p>Voice is who you are as a writer. Style is how you tell a particular story. Your voice stays consistent across projects, but your style can adapt to different genres and tones.</p>",cover_image:"/images/mock/mock-blog-cover-4.webp",category_id:2,category_name:"Writing Craft",category_slug:"writing-craft",tags:["writing advice","author voice","writing tips"],status:"published",published_at:"2025-12-05T09:00:00Z",created_at:"2025-12-05T08:00:00Z",updated_at:"2025-12-05T09:00:00Z",view_count:198,like_count:19,comment_count:4,reading_time:4,author_name:"Ocean Wanderer"},{id:5,title:"Sci-Fi Worldbuilding: Making Future Tech Believable",slug:"scifi-worldbuilding-future-tech",excerpt:"How to create futuristic technology that feels both advanced and grounded in reality.",content_html:"<h2>The Balance of Wonder and Logic</h2><p>Science fiction walks a tightrope between imagination and plausibility. Your tech should feel revolutionary but not magical.</p><h2>Grounding Your Technology</h2><p>In Starborn Protocol, faster-than-light travel isn't instant. Ships must navigate gravitational currents, and the journey takes months. This creates stakes and prevents the story from becoming too convenient.</p><h2>Consequences of Technology</h2><p>Every advancement has side effects. Memory storage technology in Echoes in the Void enables justice and preservation of knowledge, but it also enables theft and manipulation.</p><h2>Research and Inspiration</h2><p>Read current scientific journals. The most believable future tech often extrapolates from real cutting-edge research. Quantum entanglement, neural interfaces, and genetic engineering are happening now in primitive forms.</p>",cover_image:"/images/mock/mock-blog-cover-5.webp",category_id:1,category_name:"Worldbuilding",category_slug:"worldbuilding",tags:["sci-fi","technology","worldbuilding"],status:"published",published_at:"2025-12-02T13:45:00Z",created_at:"2025-12-02T12:00:00Z",updated_at:"2025-12-02T13:45:00Z",view_count:267,like_count:31,comment_count:7,reading_time:5,author_name:"Ocean Wanderer"},{id:6,title:"The Art of Chapter Endings: Hooks That Keep Readers Reading",slug:"art-chapter-endings",excerpt:"Master the techniques for crafting chapter endings that make it impossible to put your book down.",content_html:"<h2>Why Chapter Endings Matter</h2><p>The end of each chapter is a decision point for your reader. Give them a reason to turn the page.</p><h2>Types of Chapter Hooks</h2><p><strong>The Cliffhanger:</strong> End mid-action or revelation. 'The door swung open, revealing'</p><p><strong>The Question:</strong> Pose a mystery that demands answers. 'How did Marcus know she would be there?'</p><p><strong>The Revelation:</strong> Drop a bombshell that recontextualizes everything. 'The artifact wasn't ancient. It was from the future.'</p><p><strong>The Emotional Beat:</strong> Leave characters in emotional turmoil. 'She had never felt so alone.'</p><h2>Pacing Your Hooks</h2><p>Not every chapter needs a massive cliffhanger. Mix different types of hooks to create rhythm. Three subtle hooks, then a major cliffhanger. Keep readers engaged but not exhausted.</p>",cover_image:"/images/mock/mock-blog-cover-6.webp",category_id:2,category_name:"Writing Craft",category_slug:"writing-craft",tags:["pacing","chapter structure","writing tips"],status:"published",published_at:"2025-11-28T10:30:00Z",created_at:"2025-11-28T09:00:00Z",updated_at:"2025-11-28T10:30:00Z",view_count:412,like_count:47,comment_count:9,reading_time:6,author_name:"Ocean Wanderer"}],categories:[{id:1,name:"Worldbuilding",slug:"worldbuilding",description:"Craft immersive worlds with depth and consistency",post_count:2},{id:2,name:"Writing Craft",slug:"writing-craft",description:"Techniques and advice for improving your writing",post_count:3},{id:3,name:"Behind the Scenes",slug:"behind-scenes",description:"Insights into my creative process and story development",post_count:1}],tags:[{name:"magic systems",slug:"magic-systems",post_count:1},{name:"worldbuilding",slug:"worldbuilding",post_count:3},{name:"writing tips",slug:"writing-tips",post_count:3},{name:"character development",slug:"character-development",post_count:1},{name:"protagonists",slug:"protagonists",post_count:1},{name:"writing advice",slug:"writing-advice",post_count:2},{name:"the shattered realms",slug:"the-shattered-realms",post_count:1},{name:"creative process",slug:"creative-process",post_count:1},{name:"author voice",slug:"author-voice",post_count:1},{name:"sci-fi",slug:"scifi",post_count:1},{name:"technology",slug:"technology",post_count:1},{name:"pacing",slug:"pacing",post_count:1},{name:"chapter structure",slug:"chapter-structure",post_count:1}]},aV={stories:[{id:1,slug:"shattered-realms",title:"The Shattered Realms",blurb:"An epic fantasy adventure following a young mage who discovers she's the key to preventing the collapse of multiple realities.",cover:"/images/mock/mock-story-cover-1.webp",genres:["Epic Fantasy","Adventure","Magic","Portal"],chapter_count:3,status:"ongoing",rating:4.8,total_views:12543,total_likes:892},{id:2,slug:"echoes-void",title:"Echoes in the Void",blurb:"A psychological mystery where a detective investigates impossible crimes in a city where memories can be stolen.",cover:"/images/mock/mock-story-cover-2.webp",genres:["Mystery","Thriller","Sci-Fi","Noir"],chapter_count:3,status:"ongoing",rating:4.7,total_views:9821,total_likes:654},{id:3,slug:"starborn-protocol",title:"Starborn Protocol",blurb:"Humanity's first contact with aliens reveals we're part of a galactic experiment gone wrong.",cover:"/images/mock/mock-story-cover-3.webp",genres:["Sci-Fi","Space Opera","First Contact","Adventure"],chapter_count:3,status:"ongoing",rating:4.9,total_views:15234,total_likes:1121},{id:4,slug:"wanderers-chronicles",title:"The Wanderer's Chronicles",blurb:"A traveling bard discovers ancient songs that can reshape reality itself.",cover:"/images/mock/mock-story-cover-4.webp",genres:["Fantasy","Music","Journey","Slice of Life"],chapter_count:3,status:"ongoing",rating:4.6,total_views:7890,total_likes:523}],chapters:{"shattered-realms":[{num:1,title:"The Artifact",content:`<h1>Chapter 1: The Artifact</h1><p>The marketplace buzzed with life as Aria wove through the crowded stalls. She wasn't looking for anything in particularor so she told herself. The truth was, she was avoiding her mentor's lecture about "proper dimensional theory."</p><p>That's when she saw it.</p><p>A small crystal, no larger than her thumb, glowing with an inner light that seemed to pulse in rhythm with her heartbeat. The merchant, an old woman with knowing eyes, smiled as Aria approached.</p><p>"How much?" Aria asked, unable to look away from the artifact.</p><p>"For you? Nothing. It's been waiting."</p><p>The moment Aria's fingers closed around the crystal, the world fractured. Reality itself seemed to shatter like glass, and through the cracks, she glimpsed other worldshundreds, thousands of them, all teetering on the edge of collapse.</p><p>And somehow, she knew: she was the only one who could hold them together.</p>`,slug:"the-artifact",published_at:"2025-12-01T10:00:00Z",view_count:1245,like_count:89,comment_count:12},{num:2,title:"Between Worlds",content:`<h1>Chapter 2: Between Worlds</h1><p>Training with the crystal proved harder than anything Aria had attempted before. Her mentor, Master Theron, watched with growing concern as she practiced manipulating the dimensional energies.</p><p>"You're forcing it," he said, shaking his head. "The realms don't respond to force. They respond to harmony."</p><p>But there was no time for harmony. Each day, the fractures grew worse. Aria could feel them now, even without the crystalreality was bleeding at the edges, worlds pressing against each other like water against a dam.</p><p>Then came the attack.</p><p>Creatures from the Void Betweenthe space where broken realities went to diepoured through a tear in the marketplace. They were made of shadow and screaming wind, and where they touched, reality simply... stopped.</p><p>Aria didn't think. She just acted. The crystal flared to life in her hand, and for the first time, she felt the true extent of its power. She could see all the worlds at once, feel the threads that connected them.</p><p>And she could weave them together.</p>`,slug:"between-worlds",published_at:"2025-12-08T10:00:00Z",view_count:1103,like_count:76,comment_count:8},{num:3,title:"The First Mending",content:`<h1>Chapter 3: The First Mending</h1><p>The battle lasted only minutes, but it changed everything. Aria stood in the center of the restored marketplace, the crystal still glowing in her palm, and understood what she had become.</p><p>Not a student. Not an apprentice.</p><p>A Weaver. Someone who could mend the shattered realities themselves.</p><p>Master Theron approached slowly, his expression unreadable. "You shouldn't have been able to do that. No one has wielded that kind of power in a thousand years."</p><p>"I didn't have a choice," Aria replied. "They were going to"</p><p>"I know." His voice softened. "But now they know about you too. The things that live in the Void. They'll come for you, Aria. They'll never stop."</p><p>She looked down at the crystal, feeling its warmth against her skin. Somewhere out there, countless worlds hung by a thread. And she was the only one who could hold them together.</p><p>"Then I guess I'd better get stronger," she said.</p><p>The real journey was about to begin.</p>`,slug:"the-first-mending",published_at:"2025-12-15T10:00:00Z",view_count:987,like_count:65,comment_count:15}],"echoes-void":[{num:1,title:"The Impossible Murder",content:`<h1>Chapter 1: The Impossible Murder</h1><p>Detective Marcus Chen stared at the body that shouldn't exist.</p><p>According to every record in the city database, Sarah Mitchell died three years ago in a car accident. Her death certificate was filed, her funeral attended, her apartment leased to someone else.</p><p>Yet here she was, dead again. This time in an alley downtown, with no apparent cause of death.</p><p>"What do you think?" his partner, Rodriguez, asked quietly.</p><p>Marcus knelt beside the body. No wounds. No signs of struggle. Sarah's eyes were open, staring at nothing, her expression one of absolute terror.</p><p>"I think," Marcus said slowly, "we're not dealing with a normal case."</p><p>His phone buzzed. A message from an unknown number: <em>She remembered dying the first time. That's why they killed her again.</em></p><p>Marcus looked up at the empty alley. Somewhere in this city, someone was stealing more than lives. They were stealing memories.</p><p>And the dead were starting to remember.</p>`,slug:"the-impossible-murder",published_at:"2025-12-03T10:00:00Z",view_count:892,like_count:67,comment_count:9},{num:2,title:"Memory Thieves",content:`<h1>Chapter 2: Memory Thieves</h1><p>The deeper Marcus dug, the stranger things became.</p><p>Sarah Mitchell wasn't the only one. Over the past six months, seventeen people had died who were already listed as deceased in city records. All natural causes. All with the same expression of terror.</p><p>The mysterious messages kept coming, leading him through the city's underbelly. Finally, they led him to a woman sitting alone in a closed caf.</p><p>"You want to know about the memory thieves," she said. It wasn't a question.</p><p>Marcus sat across from her. "Who are they?"</p><p>"We are." She smiled sadly. "Or we were. The technology was supposed to preserve memories for people with dementia. But some of us discovered we could do more. We could take memories. Store them. Sell them."</p><p>"And when people remember things they shouldn't?"</p><p>"Then they become dangerous. Loose ends." She pushed a small device across the table. "This contains Sarah's real memories. All of them. What was taken and what was given. Be careful, Detective. Some truths are dangerous to know."</p><p>She was gone before Marcus could stop her.</p>`,slug:"memory-thieves",published_at:"2025-12-10T10:00:00Z",view_count:743,like_count:54,comment_count:6},{num:3,title:"The Truth in the Void",content:`<h1>Chapter 3: The Truth in the Void</h1><p>Marcus plugged the device into his neural port against every instinct screaming at him not to.</p><p>Sarah's memories flooded his mind.</p><p>He saw her deathboth of them. The first was real: a car accident, quick and painless. But then came the second life, the false one, implanted memories of a life she never lived. She was made to forget her death, to believe she had survived.</p><p>And the people who did this... they were everywhere. In the police force. In the government. Using stolen and fabricated memories to control narratives, to hide crimes, to puppet-master the city itself.</p><p>When Sarah started to remember the truthstarted to glitch between her real memories and the implanted onesshe became a liability.</p><p>Marcus pulled the device free, gasping. His hands were shaking.</p><p>Rodriguez found him like that, minutes later. "Marcus? You okay?"</p><p>He looked up at his partner, really looked at him, and wondered: were Rodriguez's memories real? Were his own?</p><p>"I need to make a call," Marcus said quietly. "And then we need to burn this entire operation to the ground."</p><p>The void between truth and lies had opened. And Marcus was going to drag everything into the light.</p>`,slug:"the-truth-in-the-void",published_at:"2025-12-17T10:00:00Z",view_count:621,like_count:48,comment_count:11}],"starborn-protocol":[{num:1,title:"First Signal",content:`<h1>Chapter 1: First Signal</h1><p>Dr. Elena Vasquez had been listening to the stars for fifteen years. She'd heard pulsars and quasars, cosmic background radiation and solar wind. She'd never heard anything like this.</p><p>"Run it again," she told her team.</p><p>The signal played through the speakers: a complex series of mathematical patterns that spelled out one unmistakable message in seventeen different languages, including three that humanity had never seen before.</p><p><em>YOU WERE NOT SUPPOSED TO SURVIVE.</em></p><p>The room fell silent.</p><p>"It's on repeat," her colleague Marcus whispered. "Broadcasting on every frequency we can detect. It's not trying to hide. It wants us to hear this."</p><p>Elena's hands trembled as she typed commands into her terminal. "Get me the Director. And someone contact the UN. Whatever this is..."</p><p>The signal shifted. New words scrolled across her screen.</p><p><em>THE EXPERIMENT FAILED. PROTOCOLS MUST BE ENACTED. HUMAN EVOLUTIONARY ANOMALY MUST BE CORRECTED.</em></p><p>"Oh god," Marcus breathed. "We're the experiment."</p>`,slug:"first-signal",published_at:"2025-12-05T10:00:00Z",view_count:1432,like_count:98,comment_count:14},{num:2,title:"The Archive",content:`<h1>Chapter 2: The Archive</h1><p>Within forty-eight hours, the world knew. The signal had gone public when a dozen independent observatories detected it simultaneously. Panic swept across the globe.</p><p>But Elena wasn't panicking. She was listening.</p><p>Buried in the repeating message was something elsea compressed data packet containing what appeared to be... instructions. A map. Coordinates pointing to a location in deep space, and something on Earth.</p><p>Antarctica. Three kilometers below the ice.</p><p>The international team assembled faster than Elena thought possible. Politics vanished when faced with potential extinction. Within a week, she was descending into an ice shaft that shouldn't exist, toward a structure that predated human civilization.</p><p>The Archive, as they came to call it, was vast. Alien, but comprehensible. And it told a story humanity had never known.</p><p>Humans weren't natural. They were designed, engineered from primitive hominids as part of a galactic project to create a species capable of surviving anything. An experiment in rapid evolution.</p><p>An experiment that went catastrophically wrong.</p><p>"We were supposed to die out," Elena realized, staring at the data. "We were too successful. Too dangerous."</p><p>And now the creators wanted to fix their mistake.</p>`,slug:"the-archive",published_at:"2025-12-12T10:00:00Z",view_count:1287,like_count:87,comment_count:10},{num:3,title:"Protocol Override",content:`<h1>Chapter 3: Protocol Override</h1><p>Elena stood before the Archive's central interface, the weight of humanity's future pressing down on her shoulders.</p><p>The data was clear: ships were coming. Automated protocol enforcers designed to "correct" the human anomaly. In their cold alien logic, humanity's rapid evolution and adaptability made them a threat to galactic stability.</p><p>But the Archive held another secret.</p><p>The original scientists who created humanity had left a failsafe. Not out of kindnesstheir notes made it clear they viewed humans as little more than experimental subjectsbut as a safeguard against their own protocols. A way to halt the correction sequence if the experiment yielded interesting results.</p><p>"We have to prove we're worth keeping," Elena said to the assembled leaders watching via satellite. "Not just that we can survive, but that we offer something unique to the galaxy."</p><p>Marcus pulled up the interface. "There's a test. A series of challenges designed to measure a species' value. Problem-solving, creativity, cooperation..."</p><p>"And we have three months before the first ship arrives."</p><p>Elena activated the protocol override sequence. Across the world, Archive sites began awakening, presenting humanity with puzzles that would determine their right to exist.</p><p>"Then we'd better not waste time," she said. "We've been defying expectations since we climbed down from the trees. Let's show them what humans do best."</p><p>Survive.</p>`,slug:"protocol-override",published_at:"2025-12-19T10:00:00Z",view_count:1098,like_count:76,comment_count:18}],"wanderers-chronicles":[{num:1,title:"The Song of Beginnings",content:`<h1>Chapter 1: The Song of Beginnings</h1><p>Finn's fingers danced across the lute strings, and the small crowd in the tavern fell silent.</p><p>He didn't plan to play that song. Didn't even know where he'd learned it. But the melody poured out of him like water from a spring, ancient and pure and impossibly beautiful.</p><p>As the last note faded, Finn opened his eyes to find the tavern transformed. The worn wooden walls gleamed like new. The tired faces of the patrons shone with youth and wonder. Even the fire in the hearth burned brighter, as if remembering what it was to be newly kindled.</p><p>Then reality snapped back, and everything was as it had been.</p><p>"What was that?" the barkeep whispered.</p><p>Finn stared at his lute, his hands trembling. "I... I don't know."</p><p>But he did know, somewhere deep inside. The song wasn't just music. It was older than music. It was the universe's memory of what things could be.</p><p>That night, dreams came to Finn of roads that stretched between worlds, and songs that could unmake and remake reality itself.</p><p>When he woke, he knew he had to follow them.</p>`,slug:"the-song-of-beginnings",published_at:"2025-12-07T10:00:00Z",view_count:654,like_count:45,comment_count:7},{num:2,title:"The Road Between",content:`<h1>Chapter 2: The Road Between</h1><p>The old woman at the crossroads looked exactly like Finn expected her to. White hair, knowing eyes, staff made of wood that seemed to shift between statessometimes oak, sometimes ash, sometimes something that had no name in this world.</p><p>"You're hearing the Lost Songs," she said without preamble. "I wondered when another one would come."</p><p>"Another?" Finn set down his pack. "There are others?"</p><p>"Were. Most gave up. The Lost Songs are dangerous, you see. They're not meant to be played in any single world. They're meant for the roads betweenthe places where reality is thin and possibility thick."</p><p>She tapped her staff against the ground, and Finn saw it: another path, one that hadn't been there before, leading off into a mist that smelled of starlight and dreams.</p><p>"You want to learn them? Then you walk the roads. Each song is hidden in a different between-place. And each one will change you."</p><p>Finn looked back at the ordinary road, the one that led to ordinary towns with ordinary people. A safe life. A simple life.</p><p>Then he looked at his lute and remembered the way reality had sung when he played that first song.</p><p>"Which way to the next one?" he asked.</p><p>The old woman smiled.</p>`,slug:"the-road-between",published_at:"2025-12-14T10:00:00Z",view_count:589,like_count:41,comment_count:5},{num:3,title:"Harmonic Convergence",content:`<h1>Chapter 3: Harmonic Convergence</h1><p>The road between worlds was stranger than Finn imagined. Time moved differently hereor didn't move at all. He walked for what felt like days without growing tired or hungry.</p><p>And everywhere, he heard fragments of songs.</p><p>They hung in the air like half-remembered melodies, woven into the fabric of the space itself. When Finn plucked a string on his lute, the fragments responded, drawing closer, showing him their patterns.</p><p>The second Lost Song revealed itself in pieces: a chord progression in the way mist swirled, a rhythm in the pulse of distant stars, lyrics written in the patterns of unfallen rain.</p><p>When Finn finally played it, the road between worlds sang with him.</p><p>And he understood.</p><p>The Lost Songs weren't just music. They were the fundamental harmonics of reality itself. Play them right, and you could tune the world like an instrument. Change its key. Shift its tempo. Rewrite its melody.</p><p>The old woman appeared beside him as the song faded. "You're learning quickly. But remember, wanderer: with each song you master, you become less of your world and more of the between. Eventually, you'll have to choose."</p><p>"Choose what?"</p><p>"Whether to return home, or to walk these roads forever."</p><p>Finn looked down at his lute, then out at the infinite paths stretching before him.</p><p>"I think," he said quietly, "I'll walk a little further first."</p>`,slug:"harmonic-convergence",published_at:"2025-12-21T10:00:00Z",view_count:512,like_count:38,comment_count:9}]}},iV={collections:[{id:1,slug:"mock-landscapes",title:"Landscape Collection",description:"Beautiful scenery and environments from various stories and worlds",themes:["Nature","Fantasy","Sci-Fi"],cover_hero:"/images/mock/mock-collection-landscapes.webp",status:"published",sort_order:1,gallery_count:1},{id:2,slug:"mock-characters",title:"Character Collection",description:"Character portraits and concept art from the author's works",themes:["Characters","Portraits","Concept Art"],cover_hero:"/images/mock/mock-collection-characters.webp",status:"published",sort_order:2,gallery_count:1}],galleries:[{id:1,slug:"mock-world-landscapes",title:"World Landscapes",description:"Breathtaking vistas and environments from The Shattered Realms",rating:"PG",image_count:1,like_count:24,comment_count:3,collection_id:1,collection_slug:"mock-landscapes",hero_thumb:"/images/mock/mock-image-landscape-1-thumb.webp",hero_width:400,hero_height:300,status:"published"},{id:2,slug:"mock-character-portraits",title:"Character Portraits",description:"Meet the characters from The Shattered Realms and Echoes in the Void",rating:"PG",image_count:1,like_count:42,comment_count:7,collection_id:2,collection_slug:"mock-characters",hero_thumb:"/images/mock/mock-image-character-1-thumb.webp",hero_width:300,hero_height:400,status:"published"}],images:{"mock-world-landscapes":[{id:1,src:"/images/mock/mock-image-landscape-1.webp",thumb:"/images/mock/mock-image-landscape-1-thumb.webp",title:"The Crystalline Realm",prompt:"A vast crystalline landscape with floating islands and ethereal light, fantasy world environment",parameters:"Steps: 30, CFG: 7.5, Sampler: DPM++ 2M Karras",checkpoint:"DreamShaper XL",loras:["fantasy_environments_v2"],width:1024,height:768,media_type:"image",mime_type:"image/webp"}],"mock-character-portraits":[{id:2,src:"/images/mock/mock-image-character-1.webp",thumb:"/images/mock/mock-image-character-1-thumb.webp",title:"Aria the Wanderer",prompt:"Portrait of a young mage with glowing eyes holding a crystal artifact, fantasy character concept art",parameters:"Steps: 25, CFG: 7, Sampler: Euler a",checkpoint:"RealVisXL",loras:["character_portraits_v3","fantasy_lighting"],width:768,height:1024,media_type:"image",mime_type:"image/webp"}]},socials:{twitter:"https://twitter.com",instagram:"https://instagram.com",patreon:"https://www.patreon.com/cw/oc_wanderer"},author_profile:{name:"Ocean Wanderer",bio:"Author & Worldbuilder",site_domain:"example.com",gallery_rating_filter:"auto"}},ln={homepage:nV,blog:sV,storytime:aV,galleries:iV},oV=20;function lV(){const e=Fo(),[t,r]=g.useState(null),[n,s]=g.useState(void 0),[a,o]=g.useState(null),[l,c]=g.useState(null),d=x=>{e(`/galleries/collection/${encodeURIComponent(x)}`)};g.useEffect(()=>{async function x(){try{const[b,y,v]=await Promise.allSettled([fetch(`${Ce}/author/get.php`,{cache:"no-cache"}),fetch(`${Ce}/socials/get.php`,{cache:"no-cache"}),fetch(`${Ce}/collections/list.php?status=published&limit=1000`,{cache:"no-cache"})]);if(b.status==="fulfilled"&&b.value.ok){const w=await b.value.json();w.success&&c(w.profile)}if(y.status==="fulfilled"&&y.value.ok){const w=await y.value.json();s(w.socials||{})}if(v.status==="fulfilled"&&v.value.ok){const j=((await v.value.json()).collections||[]).map(N=>({id:Number(N.id),slug:String(N.slug),title:String(N.title||"Untitled"),description:N.description||void 0,themes:Array.isArray(N.themes)?N.themes:[],status:N.status==="draft"||N.status==="archived"?N.status:"published",cover_hero:N.cover_hero||null,sort_order:typeof N.sort_order=="number"?N.sort_order:0,gallery_count:Number(N.gallery_count||0)}));o(j),r(null)}else throw new Error("Failed to fetch collections list")}catch(b){console.error(b),console.log("Database offline, using mock gallery collections data");const y=ln.galleries;c(y.author_profile),s(y.socials);const v=y.collections.map(w=>({id:Number(w.id),slug:String(w.slug),title:String(w.title||"Untitled"),description:w.description||void 0,themes:Array.isArray(w.themes)?w.themes:[],status:w.status==="draft"||w.status==="archived"?w.status:"published",cover_hero:w.cover_hero||null,sort_order:typeof w.sort_order=="number"?w.sort_order:0,gallery_count:Number(w.gallery_count||0)}));o(v),r(null)}}x()},[]);const u=(l==null?void 0:l.name)||"Author Name",f=`https://${(l==null?void 0:l.site_domain)||"example.com"}/galleries`,p=`Browse ${u}'s gallery collections (projects). Drill into each collection to view its galleries.`,m=`Gallery Collections | ${u} | ${(l==null?void 0:l.bio)||"Author & Artist"}`;return i.jsxs("div",{className:"min-h-screen bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 transition-colors duration-200",children:[i.jsxs(En,{children:[i.jsx("title",{children:m}),i.jsx("meta",{name:"description",content:p}),i.jsx("link",{rel:"canonical",href:f}),i.jsx("meta",{property:"og:title",content:"Gallery Collections"}),i.jsx("meta",{property:"og:description",content:p}),i.jsx("meta",{property:"og:type",content:"website"}),i.jsx("meta",{property:"og:url",content:f}),i.jsx("meta",{property:"og:site_name",content:u}),i.jsx("meta",{name:"twitter:card",content:"summary"}),i.jsx("meta",{name:"twitter:title",content:"Gallery Collections"}),i.jsx("meta",{name:"twitter:description",content:p}),i.jsx("meta",{name:"author",content:u})]}),i.jsx(Xr,{breadcrumbs:[{label:"Galleries"}]}),i.jsxs("div",{className:"relative z-10 mx-auto max-w-6xl px-4 py-8",children:[i.jsx("div",{className:"mb-8 flex flex-wrap items-center justify-between gap-4",children:i.jsx("h1",{className:"text-4xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Collections"})}),i.jsx("main",{children:t&&!a?i.jsx("p",{className:"text-red-600 dark:text-red-400",children:t}):a?a.length===0?i.jsx("p",{className:"opacity-70",children:"No collections yet."}):i.jsx("ul",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:a.map(x=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>d(x.slug),className:"w-full text-left rounded-xl border bg-white/70 dark:bg-black/70 border-gray-300 dark:border-white/20 hover:border-gray-400 dark:hover:border-white/30 hover:bg-white/80 dark:hover:bg-black/80 shadow transition-all",children:[x.cover_hero&&i.jsx("div",{className:"w-full aspect-[16/9] overflow-hidden rounded-t-xl bg-neutral-200 dark:bg-neutral-800",children:i.jsx("img",{src:x.cover_hero,alt:`${x.title} cover`,className:"w-full h-full object-cover",loading:"lazy"})}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:x.title}),i.jsxs("span",{className:"text-xs text-gray-600 dark:text-neutral-300 whitespace-nowrap",children:[x.gallery_count," ",x.gallery_count===1?"gallery":"galleries"]})]}),x.description&&i.jsx("p",{className:"mt-2 text-sm text-gray-700 dark:text-neutral-300 line-clamp-3",children:x.description}),Array.isArray(x.themes)&&x.themes.length>0&&i.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[x.themes.slice(0,4).map((b,y)=>i.jsx("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-gray-200 text-gray-800 dark:bg-white/10 dark:text-neutral-200",children:b},y)),x.themes.length>4&&i.jsxs("span",{className:"text-xs text-gray-600 dark:text-neutral-300",children:["+",x.themes.length-4," more"]})]})]})]})},x.id))}):i.jsx("p",{children:"Loading"})}),n&&i.jsx(ar,{socials:n,variant:"footer"}),i.jsxs("div",{className:"mt-8 text-center",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-neutral-400 mb-3",children:"Get notified when new collections drop"}),i.jsx(pa,{variant:"button",source:"gallery_collections"})]})]})]})}function cV(){const{cslug:e}=Id(),t=Fo(),{user:r}=za(),[n,s]=g.useState(()=>localStorage.getItem("gallery_rating_filter")==="X"?"X":"PG"),[a,o]=g.useState(null),[l,c]=g.useState(void 0),[d,u]=g.useState(null),[h,f]=g.useState(null),[p,m]=g.useState(null),x=S=>{t(`/galleries/${encodeURIComponent(S)}`)};g.useEffect(()=>{async function S(){try{const C=r?"&include_unpublished=1":"",[P,E,O,A]=await Promise.allSettled([fetch(`${Ce}/author/get.php`,{cache:"no-cache"}),fetch(`${Ce}/socials/get.php`,{cache:"no-cache"}),fetch(`${Ce}/collections/list.php?slug=${encodeURIComponent(e||"")}`,{cache:"no-cache"}),fetch(`${Ce}/galleries/list.php?collection_slug=${encodeURIComponent(e||"")}&limit=1000${C}`,{cache:"no-cache"})]);if(P.status==="fulfilled"&&P.value.ok){const I=await P.value.json();I.success&&f(I.profile)}if(E.status==="fulfilled"&&E.value.ok){const I=await E.value.json();c(I.socials||{})}if(O.status==="fulfilled"&&O.value.ok){const I=await O.value.json(),D=Array.isArray(I.collections)&&I.collections.length>0?I.collections[0]:null;D&&m({id:Number(D.id),slug:String(D.slug),title:String(D.title||"Untitled"),description:D.description||void 0,themes:Array.isArray(D.themes)?D.themes:[],status:D.status==="draft"||D.status==="archived"?D.status:"published",cover_hero:D.cover_hero||null,sort_order:typeof D.sort_order=="number"?D.sort_order:0,gallery_count:Number(D.gallery_count||0)})}let _=!1;if(A.status==="fulfilled"&&A.value.ok){const I=await A.value.json();if(I.galleries&&I.galleries.length>0){const D=(I.galleries||[]).map($=>({id:Number($.id)||0,slug:String($.slug||""),title:String($.title||"Untitled"),description:$.description?String($.description):void 0,rating:$.rating==="X"?"X":"PG",image_count:Number($.image_count)||0,like_count:Number($.like_count)||0,comment_count:Number($.comment_count)||0,hero_thumb:$.hero_thumb?String($.hero_thumb):null,hero_width:$.hero_width?Number($.hero_width):null,hero_height:$.hero_height?Number($.hero_height):null}));u(D),_=!0}}if(!_){console.log("Database offline or empty, using mock collection galleries data");const I=ln.galleries;if(h||f(I.author_profile),l||c(I.socials),!p){const L=I.collections.find(M=>M.slug===e);L&&m({id:Number(L.id),slug:String(L.slug),title:String(L.title||"Untitled"),description:L.description||void 0,themes:Array.isArray(L.themes)?L.themes:[],status:L.status==="draft"||L.status==="archived"?L.status:"published",cover_hero:L.cover_hero||null,sort_order:typeof L.sort_order=="number"?L.sort_order:0,gallery_count:Number(L.gallery_count||0)})}const $=I.galleries.filter(L=>L.collection_slug===e).map(L=>({id:Number(L.id)||0,slug:String(L.slug||""),title:String(L.title||"Untitled"),description:L.description?String(L.description):void 0,rating:L.rating==="X"?"X":"PG",image_count:Number(L.image_count)||0,like_count:Number(L.like_count)||0,comment_count:Number(L.comment_count)||0,hero_thumb:L.hero_thumb?String(L.hero_thumb):null,hero_width:L.hero_width?Number(L.hero_width):null,hero_height:L.hero_height?Number(L.hero_height):null}));u($)}o(null)}catch(C){console.error(C),console.log("Database offline (error), using mock collection galleries data");const P=ln.galleries;f(P.author_profile),c(P.socials);const E=P.collections.find(_=>_.slug===e);E&&m({id:Number(E.id),slug:String(E.slug),title:String(E.title||"Untitled"),description:E.description||void 0,themes:Array.isArray(E.themes)?E.themes:[],status:E.status==="draft"||E.status==="archived"?E.status:"published",cover_hero:E.cover_hero||null,sort_order:typeof E.sort_order=="number"?E.sort_order:0,gallery_count:Number(E.gallery_count||0)});const A=P.galleries.filter(_=>_.collection_slug===e).map(_=>({id:Number(_.id)||0,slug:String(_.slug||""),title:String(_.title||"Untitled"),description:_.description?String(_.description):void 0,rating:_.rating==="X"?"X":"PG",image_count:Number(_.image_count)||0,like_count:Number(_.like_count)||0,comment_count:Number(_.comment_count)||0,hero_thumb:_.hero_thumb?String(_.hero_thumb):null,hero_width:_.hero_width?Number(_.hero_width):null,hero_height:_.hero_height?Number(_.hero_height):null}));u(A),o(null)}}e&&S()},[e,r]);const b=g.useMemo(()=>d?n==="PG"?d.filter(S=>(S.rating??"PG")==="PG"):d:[],[d,n]),y=g.useMemo(()=>{const S=(h==null?void 0:h.gallery_rating_filter)||"auto";return S==="always"?!0:S==="never"?!1:(d==null?void 0:d.some(C=>C.rating==="X"))??!1},[h==null?void 0:h.gallery_rating_filter,d]),v=(h==null?void 0:h.name)||"Author Name",j=`https://${(h==null?void 0:h.site_domain)||"example.com"}/galleries/collection/${e}`,N=(p==null?void 0:p.description)||`Explore galleries inside the ${(p==null?void 0:p.title)||"collection"} project by ${v}.`,k=`${(p==null?void 0:p.title)||"Collection"} | ${v} | ${(h==null?void 0:h.bio)||"Author & Artist"}`;return i.jsxs("div",{className:"min-h-screen bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 transition-colors duration-200",children:[i.jsxs(En,{children:[i.jsx("title",{children:k}),i.jsx("meta",{name:"description",content:N}),i.jsx("link",{rel:"canonical",href:j}),i.jsx("meta",{property:"og:title",content:(p==null?void 0:p.title)||"Collection"}),i.jsx("meta",{property:"og:description",content:N}),i.jsx("meta",{property:"og:type",content:"website"}),i.jsx("meta",{property:"og:url",content:j}),i.jsx("meta",{property:"og:site_name",content:v}),i.jsx("meta",{name:"twitter:card",content:"summary"}),i.jsx("meta",{name:"twitter:title",content:(p==null?void 0:p.title)||"Collection"}),i.jsx("meta",{name:"twitter:description",content:N})]}),i.jsx(Xr,{breadcrumbs:[{label:"Galleries",path:"/galleries"},{label:(p==null?void 0:p.title)||e||"Collection"}]}),i.jsxs("div",{className:"relative z-10 mx-auto max-w-6xl px-4 py-8",children:[i.jsxs("div",{className:"mb-8 flex flex-wrap items-center justify-between gap-4",children:[i.jsx("h1",{className:"text-4xl font-bold tracking-tight text-gray-900 dark:text-white",children:(p==null?void 0:p.title)||"Collection"}),y&&i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("select",{"aria-label":"Rating filter",value:n,onChange:S=>{const C=S.target.value;s(C),localStorage.setItem("gallery_rating_filter",C)},className:"rounded-lg border border-gray-300 bg-white text-gray-900 hover:border-gray-400 dark:border-white/30 dark:bg-black/70 dark:text-white dark:hover:border-white/50 px-3 py-2 text-sm transition-colors",children:[i.jsx("option",{value:"PG",children:"PG"}),i.jsx("option",{value:"X",children:"X"})]})})]}),(p==null?void 0:p.description)&&i.jsx("p",{className:"mb-6 opacity-80",children:p.description}),i.jsx("main",{children:a&&!d?i.jsx("p",{className:"text-red-600 dark:text-red-400",children:a}):d?i.jsx(c$,{items:b,onOpen:x,showAdultBadge:n==="X"}):i.jsx("p",{children:"Loading"})}),l&&i.jsx(ar,{socials:l,variant:"footer"}),i.jsxs("div",{className:"mt-8 text-center",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-neutral-400 mb-3",children:"Get notified when I publish new galleries"}),i.jsx(pa,{variant:"button",source:"collection_galleries"})]})]})]})}function dV(){const e=Fo(),{user:t}=za(),[r,n]=g.useState(()=>localStorage.getItem("gallery_rating_filter")==="X"?"X":"PG"),[s,a]=g.useState(null),[o,l]=g.useState(void 0),[c,d]=g.useState(null),[u,h]=g.useState(null),f=j=>{e(`/galleries/${encodeURIComponent(j)}`)};g.useEffect(()=>{async function j(){try{const N=t?"&include_unpublished=1":"",[k,S,C]=await Promise.allSettled([fetch(`${Ce}/author/get.php`,{cache:"no-cache"}),fetch(`${Ce}/socials/get.php`,{cache:"no-cache"}),fetch(`${Ce}/galleries/list.php?page=1&limit=1000${N}`,{cache:"no-cache"})]);if(k.status==="fulfilled"&&k.value.ok){const P=await k.value.json();P.success&&h(P.profile)}if(S.status==="fulfilled"&&S.value.ok){const P=await S.value.json();l(P.socials||{})}if(C.status==="fulfilled"&&C.value.ok){const E=((await C.value.json()).galleries||[]).map(O=>({id:Number(O.id)||0,slug:String(O.slug||""),title:String(O.title||"Untitled"),description:O.description?String(O.description):void 0,rating:O.rating==="X"?"X":"PG",image_count:Number(O.image_count)||0,like_count:Number(O.like_count)||0,comment_count:Number(O.comment_count)||0,hero_thumb:O.hero_thumb?String(O.hero_thumb):null,hero_width:O.hero_width?Number(O.hero_width):null,hero_height:O.hero_height?Number(O.hero_height):null}));d(E),a(null)}else throw new Error("Failed to fetch galleries list")}catch(N){console.error(N),console.log("Database offline, using mock all galleries data");const k=ln.galleries;h(k.author_profile),l(k.socials);const S=k.galleries.map(C=>({id:Number(C.id)||0,slug:String(C.slug||""),title:String(C.title||"Untitled"),description:C.description?String(C.description):void 0,rating:C.rating==="X"?"X":"PG",image_count:Number(C.image_count)||0,like_count:Number(C.like_count)||0,comment_count:Number(C.comment_count)||0,hero_thumb:C.hero_thumb?String(C.hero_thumb):null,hero_width:C.hero_width?Number(C.hero_width):null,hero_height:C.hero_height?Number(C.hero_height):null}));d(S),a(null)}}j()},[t]);const p=g.useMemo(()=>c?r==="PG"?c.filter(j=>(j.rating??"PG")==="PG"):c:[],[c,r]),m=g.useMemo(()=>{const j=(u==null?void 0:u.gallery_rating_filter)||"auto";return j==="always"?!0:j==="never"?!1:(c==null?void 0:c.some(N=>N.rating==="X"))??!1},[u==null?void 0:u.gallery_rating_filter,c]),x=(u==null?void 0:u.name)||"Author Name",y=`https://${(u==null?void 0:u.site_domain)||"example.com"}/galleries/all`,v=`Browse all galleries by ${x}.`,w=`All Galleries | ${x} | ${(u==null?void 0:u.bio)||"Author & Artist"}`;return i.jsxs("div",{className:"min-h-screen bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 transition-colors duration-200",children:[i.jsxs(En,{children:[i.jsx("title",{children:w}),i.jsx("meta",{name:"description",content:v}),i.jsx("link",{rel:"canonical",href:y}),i.jsx("meta",{property:"og:title",content:"All Galleries"}),i.jsx("meta",{property:"og:description",content:v}),i.jsx("meta",{property:"og:type",content:"website"}),i.jsx("meta",{property:"og:url",content:y}),i.jsx("meta",{property:"og:site_name",content:x}),i.jsx("meta",{name:"twitter:card",content:"summary"}),i.jsx("meta",{name:"twitter:title",content:"All Galleries"}),i.jsx("meta",{name:"twitter:description",content:v}),i.jsx("meta",{name:"author",content:x})]}),i.jsx(Xr,{breadcrumbs:[{label:"Galleries",path:"/galleries"},{label:"All"}]}),i.jsxs("div",{className:"relative z-10 mx-auto max-w-6xl px-4 py-8",children:[i.jsxs("div",{className:"mb-8 flex flex-wrap items-center justify-between gap-4",children:[i.jsx("h1",{className:"text-4xl font-bold tracking-tight text-gray-900 dark:text-white",children:"All Galleries"}),m&&i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("select",{"aria-label":"Rating filter",value:r,onChange:j=>{const N=j.target.value;n(N),localStorage.setItem("gallery_rating_filter",N)},className:"rounded-lg border border-gray-300 bg-white text-gray-900 hover:border-gray-400 dark:border-white/30 dark:bg-black/70 dark:text-white dark:hover:border-white/50 px-3 py-2 text-sm transition-colors",children:[i.jsx("option",{value:"PG",children:"PG"}),i.jsx("option",{value:"X",children:"X"})]})})]}),i.jsx("main",{children:s&&!c?i.jsx("p",{className:"text-red-600 dark:text-red-400",children:s}):c?i.jsx(c$,{items:p,onOpen:f,showAdultBadge:r==="X"}):i.jsx("p",{children:"Loading"})}),o&&i.jsx(ar,{socials:o,variant:"footer"}),i.jsxs("div",{className:"mt-8 text-center",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-neutral-400 mb-3",children:"Get notified when I publish new galleries"}),i.jsx(pa,{variant:"button",source:"gallery_list"})]})]})]})}function uV(){const{slug:e}=Id(),{user:t}=za(),[r,n]=g.useState(""),[s,a]=g.useState(()=>localStorage.getItem("gallery_rating_filter")==="X"?"X":"PG"),[o,l]=g.useState(null),[c,d]=g.useState(void 0),[u,h]=g.useState(null),[f,p]=g.useState(null),[m,x]=g.useState([]),[b,y]=g.useState(1),[v,w]=g.useState(0),[j,N]=g.useState(!1),[k,S]=g.useState(!1),C=g.useRef(!1),P=g.useMemo(()=>{const T=new Map;return(u||[]).forEach(G=>T.set(G.slug,G.id)),T},[u]),E=g.useMemo(()=>!u||!e?null:u.find(T=>T.slug===e)||null,[u,e]);g.useEffect(()=>{E&&E.id&&Rd.trackGalleryView(E.id)},[E]),g.useEffect(()=>{async function T(){try{const G=t?"&include_unpublished=1":"",[Y,ee,R]=await Promise.allSettled([fetch(`${Ce}/author/get.php`,{cache:"no-cache"}),fetch(`${Ce}/socials/get.php`,{cache:"no-cache"}),fetch(`${Ce}/galleries/list.php?page=1&limit=1000${G}`,{cache:"no-cache"})]);if(Y.status==="fulfilled"&&Y.value.ok){const B=await Y.value.json();B.success&&p(B.profile)}if(ee.status==="fulfilled"&&ee.value.ok){const B=await ee.value.json();d(B.socials||{})}if(R.status==="fulfilled"&&R.value.ok){const q=((await R.value.json()).galleries||[]).map(X=>({id:Number(X.id)||0,slug:String(X.slug||""),title:String(X.title||"Untitled"),description:X.description?String(X.description):void 0,rating:X.rating==="X"?"X":"PG",image_count:Number(X.image_count)||0,like_count:Number(X.like_count)||0,comment_count:Number(X.comment_count)||0,hero_thumb:X.hero_thumb?String(X.hero_thumb):null,hero_width:X.hero_width?Number(X.hero_width):null,hero_height:X.hero_height?Number(X.hero_height):null}));h(q),l(null)}else throw new Error("Failed to fetch galleries list")}catch(G){console.error(G),console.log("Database offline, using mock gallery view data");const Y=ln.galleries;p(Y.author_profile),d(Y.socials);const ee=Y.galleries.map(R=>({id:Number(R.id)||0,slug:String(R.slug||""),title:String(R.title||"Untitled"),description:R.description?String(R.description):void 0,rating:R.rating==="X"?"X":"PG",image_count:Number(R.image_count)||0,like_count:Number(R.like_count)||0,comment_count:Number(R.comment_count)||0,hero_thumb:R.hero_thumb?String(R.hero_thumb):null,hero_width:R.hero_width?Number(R.hero_width):null,hero_height:R.hero_height?Number(R.hero_height):null}));h(ee),l(null)}}T()},[t]),g.useEffect(()=>{x([]),y(1),w(0),S(!1)},[e,r]),g.useEffect(()=>{async function T(){if(!e)return;const G=P.get(e);if(G&&!C.current){C.current=!0,N(!0);try{const Y=new URLSearchParams;Y.set("gallery_id",String(G)),Y.set("page",String(b)),Y.set("limit",String(oV));const ee=r.trim();ee&&Y.set("q",ee);const R=await fetch(`${Ce}/images/gallery-list.php?`+Y.toString(),{cache:"no-cache"});if(!R.ok)throw new Error("Failed to fetch images");const B=await R.json(),q=B.total??0,ue=(B.images||[]).map(U=>({id:typeof U.id=="number"?U.id:void 0,src:U.src,thumb:U.thumb,title:U.title??void 0,prompt:U.prompt??void 0,parameters:U.parameters??void 0,checkpoint:U.checkpoint??null,loras:Array.isArray(U.loras)?U.loras:[],width:typeof U.width=="number"?U.width:void 0,height:typeof U.height=="number"?U.height:void 0,media_type:U.media_type??"image",mime_type:U.mime_type??null,poster:U.poster??null}));x(U=>{const V=[...U,...ue];return S(V.length<q),V}),w(q),l(null)}catch(Y){console.error(Y),console.log("Database offline, using mock gallery images data");const B=(ln.galleries.images[e||""]||[]).map(q=>({id:typeof q.id=="number"?q.id:void 0,src:q.src,thumb:q.thumb,title:q.title??void 0,prompt:q.prompt??void 0,parameters:q.parameters??void 0,checkpoint:q.checkpoint??null,loras:Array.isArray(q.loras)?q.loras:[],width:typeof q.width=="number"?q.width:void 0,height:typeof q.height=="number"?q.height:void 0,media_type:q.media_type??"image",mime_type:q.mime_type??null,poster:q.poster??null}));x(B),w(B.length),S(!1),l(null)}finally{N(!1),C.current=!1}}}e&&T()},[e,b,r,u]);const O=()=>{j||k&&y(T=>T+1)},A=g.useMemo(()=>{const T=(f==null?void 0:f.gallery_rating_filter)||"auto";return T==="always"?!0:T==="never"?!1:(u==null?void 0:u.some(G=>G.rating==="X"))??!1},[f==null?void 0:f.gallery_rating_filter,u]),_=(f==null?void 0:f.name)||"Author Name",I=(f==null?void 0:f.site_domain)||"example.com",D=`https://${I}/galleries/${e}`,$=(E==null?void 0:E.title)||"Gallery",L=E!=null&&E.description?`${E.description} - Artwork by ${_}.`:`View ${$} image gallery featuring artwork by ${_}. Creative visual storytelling and artistic designs.`,M=`${$} | ${_} | ${(f==null?void 0:f.bio)||"Author & Artist"}`;return i.jsxs("div",{className:"min-h-screen bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 transition-colors duration-200",children:[i.jsxs(En,{children:[i.jsx("title",{children:M}),i.jsx("meta",{name:"description",content:L}),i.jsx("link",{rel:"canonical",href:D}),i.jsx("meta",{property:"og:title",content:$}),i.jsx("meta",{property:"og:description",content:L}),i.jsx("meta",{property:"og:type",content:"website"}),i.jsx("meta",{property:"og:url",content:D}),i.jsx("meta",{property:"og:site_name",content:_}),(E==null?void 0:E.hero_thumb)&&i.jsx("meta",{property:"og:image",content:E.hero_thumb.startsWith("http")?E.hero_thumb:`https://${I}${E.hero_thumb}`}),i.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),i.jsx("meta",{name:"twitter:title",content:$}),i.jsx("meta",{name:"twitter:description",content:L}),i.jsx("meta",{name:"twitter:creator",content:""}),(E==null?void 0:E.hero_thumb)&&i.jsx("meta",{name:"twitter:image",content:E.hero_thumb.startsWith("http")?E.hero_thumb:`https://${I}${E.hero_thumb}`}),i.jsx("meta",{name:"author",content:_}),i.jsx("meta",{name:"keywords",content:"digital artwork, concept art, character design, illustration, visual art, creative design"})]}),i.jsx(Xr,{breadcrumbs:[{label:"Galleries",path:"/galleries"},{label:(E==null?void 0:E.title)||e||"Gallery"}]}),i.jsxs("div",{className:"relative z-10 mx-auto max-w-6xl px-4 py-8",children:[i.jsxs("div",{className:"mb-8 flex flex-wrap items-center justify-between gap-4",children:[i.jsx("h1",{className:"text-4xl font-bold tracking-tight text-gray-900 dark:text-white",children:(E==null?void 0:E.title)||"Gallery"}),i.jsxs("div",{className:"flex items-center gap-2",children:[A&&i.jsxs("select",{"aria-label":"Rating filter",value:s,onChange:T=>a(T.target.value),className:"rounded-lg border border-gray-300 bg-white text-gray-900 hover:border-gray-400 dark:border-white/30 dark:bg-black/70 dark:text-white dark:hover:border-white/50 px-3 py-2 text-sm transition-colors",children:[i.jsx("option",{value:"PG",children:"PG"}),i.jsx("option",{value:"X",children:"X"})]}),i.jsx("input",{value:r,onChange:T=>n(T.target.value),placeholder:"Search prompt / LoRA / checkpoint",className:"w-full max-w-md rounded-xl bg-white text-gray-900 placeholder:text-gray-500 ring-gray-300 focus:ring-gray-500 dark:bg-black/70 dark:text-white dark:placeholder:text-neutral-400 dark:ring-white/30 dark:focus:ring-white/50 px-3 py-2 text-sm outline-none ring-1 transition-colors"})]})]}),i.jsx("main",{children:o?i.jsx("p",{className:"text-red-600 dark:text-red-400",children:o}):E?i.jsxs("section",{children:[E.description&&i.jsx("p",{className:"mb-4 opacity-80",children:E.description}),i.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:m.map(T=>i.jsx(eV,{im:T,galleryId:E==null?void 0:E.id},String(T.id??T.src)))}),i.jsx("div",{className:"mt-6 flex items-center justify-center",children:j&&m.length===0?i.jsx("p",{children:"Loading"}):k?i.jsx("button",{onClick:O,disabled:j,className:"rounded-lg border border-gray-300 bg-white text-gray-900 hover:border-gray-400 dark:border-white/30 dark:bg-black/70 dark:text-white dark:hover:border-white/50 px-3 py-1 text-sm transition-colors disabled:opacity-60",children:j?"Loading":"Load more"}):m.length>=v?i.jsx("p",{className:"opacity-70 text-sm",children:"No more images."}):null})]}):i.jsx("p",{className:"opacity-70",children:"Gallery not found."})}),c&&i.jsx(ar,{socials:c,variant:"footer"}),i.jsxs("div",{className:"mt-8 text-center",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-neutral-400 mb-3",children:"Get notified about new gallery uploads"}),i.jsx(pa,{variant:"button",source:"gallery_detail"})]})]})]})}function hV(){return i.jsxs(Ld,{children:[i.jsx(Ve,{path:"/",element:i.jsx(lV,{})}),i.jsx(Ve,{path:"/collection/:cslug",element:i.jsx(cV,{})}),i.jsx(Ve,{path:"/all",element:i.jsx(dV,{})}),i.jsx(Ve,{path:"/:slug",element:i.jsx(uV,{})})]})}const Ni=Ce;function gg(e){if(!e)return null;const t=String(e);if(/^https?:\/\//i.test(t))return t;const r=t.replace(/^\/+/,"");return r.startsWith("api/uploads/")?`/${r}`:r.startsWith("uploads/")?`/api/${r}`:r.startsWith("uploads")?`/api/${r}`:t.startsWith("/api/uploads/")?t:t.startsWith("/uploads/")?`/api${t}`:t.startsWith("/")?t:`/${t}`}const Mp=new Map,fV=new Map,Hu=new Map;let Xy=null;async function pV(){try{const t=await(await fetch(`${Ni}/stories/list.php?status=published`)).json();return t.success?(t.stories||[]).map(n=>({id:n.slug,title:n.title,blurb:n.description,cover:n.cover_image&&gg(n.cover_image)||"/images/default-cover.jpg",breakImage:n.break_image&&gg(n.break_image)||void 0,startIndex:1,status:n.status,genres:n.genres||[],primary_keywords:n.primary_keywords,longtail_keywords:n.longtail_keywords,target_audience:n.target_audience,external_links:Array.isArray(n.external_links)?n.external_links:[],chapter_count:n.chapter_count||0,total_likes:n.total_likes||0,total_words:n.total_words||0})):(console.error("Failed to load stories:",t.error),[])}catch{return console.log("Database offline, using mock storytime data"),ln.storytime.stories.map(r=>({id:r.slug,title:r.title,blurb:r.blurb,cover:r.cover,startIndex:1,status:r.status||"published",genres:r.genres||[],chapter_count:r.chapter_count||0,total_likes:r.total_likes||0,total_words:0}))}}async function fN(e){if(Mp.has(e))return Mp.get(e);try{const r=await(await fetch(`${Ni}/stories/list.php?slug=${encodeURIComponent(e)}`)).json();if(r.success&&r.stories&&r.stories.length>0){const n=r.stories[0],s={id:n.slug,title:n.title,blurb:n.description,cover:n.cover_image&&gg(n.cover_image)||"/images/default-cover.jpg",breakImage:n.break_image&&gg(n.break_image)||void 0,enableDropCap:!!n.enable_drop_cap,dropCapFont:n.drop_cap_font||"serif",startIndex:1,status:n.status,genres:n.genres||[],primary_keywords:n.primary_keywords,longtail_keywords:n.longtail_keywords,target_audience:n.target_audience,external_links:Array.isArray(n.external_links)?n.external_links:[],chapter_count:n.chapter_count||0,total_likes:n.total_likes||0,total_words:n.total_words||0};return Mp.set(e,s),s}else return null}catch{console.log("Database offline, using mock storytime data");const n=ln.storytime.stories.find(s=>s.slug===e);if(n){const s={id:n.slug,title:n.title,blurb:n.blurb,cover:n.cover,startIndex:1,status:n.status||"published",genres:n.genres||[],chapter_count:n.chapter_count||0,total_likes:n.total_likes||0,total_words:0};return Mp.set(e,s),s}return null}}function mV(e){fV.delete(e),Hu.delete(e)}async function gV(e,t){const r=`${e.id}-${t}`;if(Hu.has(r))return Hu.get(r);try{const s=await(await fetch(`${Ni}/chapters/list.php?story_slug=${encodeURIComponent(e.id)}&chapter_number=${t}`)).json();if(s.success&&s.chapters&&s.chapters.length>0){const o=s.chapters[0].content||"";return Hu.set(r,o),o}else throw new Error("Chapter not found")}catch{console.log("Database offline, using mock storytime data");const s=ln.storytime.chapters[e.id];if(s&&Array.isArray(s)){const a=parseInt(t,10),o=s.find(l=>l.num===a);if(o&&o.content)return Hu.set(r,o.content),o.content}throw new Error("Chapter not found")}}async function j1(e,t){try{const n=await(await fetch(`${Ni}/chapters/list.php?story_slug=${encodeURIComponent(e.id)}&chapter_number=${t}`)).json();if(n.success&&n.chapters&&n.chapters.length>0){const s=n.chapters[0];return{id:s.id,num:s.chapter_number,title:s.title,soundtrack_url:s.soundtrack_url||null,status:s.status,like_count:s.like_count||0,comment_count:s.comment_count||0,created_at:s.created_at,updated_at:s.updated_at}}else return null}catch(r){return console.error("Error fetching chapter details:",r),null}}async function xV(e){try{return await(await fetch(`${Ni}/chapters/like.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chapter_id:e})})).json()}catch(t){return console.error("Error liking chapter:",t),{success:!1}}}async function bV(e){try{return await(await fetch(`${Ni}/chapters/like.php?chapter_id=${encodeURIComponent(e)}`)).json()}catch(t){return console.error("Error fetching like status:",t),{success:!1,like_count:0,user_liked:!1}}}async function yV(e,t,r){try{return await(await fetch(`${Ni}/chapters/comments/create.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chapter_id:e,author_name:t||"Anonymous",content:r})})).json()}catch(n){return console.error("Error adding comment:",n),{success:!1}}}async function vV(e){try{const r=await(await fetch(`${Ni}/chapters/comments/list.php?chapter_id=${e}`)).json();return r.success?r.comments||[]:[]}catch(t){return console.error("Error fetching comments:",t),[]}}function pN(e){return`story-progress:${e}`}function xg(e){try{const t=localStorage.getItem(pN(e));return t?JSON.parse(t):null}catch{return null}}function ME(e,t){try{localStorage.setItem(pN(e),JSON.stringify(t))}catch{}}function wV(e){try{localStorage.removeItem(pN(e))}catch{}}async function d$(){if(Xy)return Xy;try{const t=await(await fetch(`${Ni}/author/get.php`)).json();return t.success&&t.profile?(Xy=t.profile,t.profile):{name:"O.C. Wanderer",bio:"Sci-Fi & Fantasy Author",tagline:"Worlds of adventure, danger, and love",profile_image:null,background_image_light:null,background_image_dark:null,site_domain:"authorsite.com",updated_at:new Date().toISOString()}}catch(e){return console.error("Error fetching author profile:",e),{name:"O.C. Wanderer",bio:"Sci-Fi & Fantasy Author",tagline:"Worlds of adventure, danger, and love",profile_image:null,background_image_light:null,background_image_dark:null,site_domain:"authorsite.com",updated_at:new Date().toISOString()}}}function mN(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var nc=mN();function u$(e){nc=e}var sh={exec:()=>null};function pt(e,t=""){let r=typeof e=="string"?e:e.source,n={replace:(s,a)=>{let o=typeof a=="string"?a:a.source;return o=o.replace(xn.caret,"$1"),r=r.replace(s,o),n},getRegex:()=>new RegExp(r,t)};return n}var xn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},kV=/^(?:[ \t]*(?:\n|$))+/,jV=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,NV=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Nf=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,SV=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,gN=/(?:[*+-]|\d{1,9}[.)])/,h$=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,f$=pt(h$).replace(/bull/g,gN).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),CV=pt(h$).replace(/bull/g,gN).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),xN=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,_V=/^[^\n]+/,bN=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,EV=pt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",bN).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),AV=pt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,gN).getRegex(),Ex="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",yN=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,TV=pt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",yN).replace("tag",Ex).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),p$=pt(xN).replace("hr",Nf).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ex).getRegex(),PV=pt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",p$).getRegex(),vN={blockquote:PV,code:jV,def:EV,fences:NV,heading:SV,hr:Nf,html:TV,lheading:f$,list:AV,newline:kV,paragraph:p$,table:sh,text:_V},OE=pt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Nf).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ex).getRegex(),MV={...vN,lheading:CV,table:OE,paragraph:pt(xN).replace("hr",Nf).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",OE).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ex).getRegex()},OV={...vN,html:pt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",yN).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:sh,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:pt(xN).replace("hr",Nf).replace("heading",` *#{1,6} *[^
]`).replace("lheading",f$).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},$V=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,DV=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,m$=/^( {2,}|\\)\n(?!\s*$)/,IV=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ax=/[\p{P}\p{S}]/u,wN=/[\s\p{P}\p{S}]/u,g$=/[^\s\p{P}\p{S}]/u,LV=pt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,wN).getRegex(),x$=/(?!~)[\p{P}\p{S}]/u,RV=/(?!~)[\s\p{P}\p{S}]/u,BV=/(?:[^\s\p{P}\p{S}]|~)/u,zV=/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,b$=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,FV=pt(b$,"u").replace(/punct/g,Ax).getRegex(),HV=pt(b$,"u").replace(/punct/g,x$).getRegex(),y$="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",UV=pt(y$,"gu").replace(/notPunctSpace/g,g$).replace(/punctSpace/g,wN).replace(/punct/g,Ax).getRegex(),WV=pt(y$,"gu").replace(/notPunctSpace/g,BV).replace(/punctSpace/g,RV).replace(/punct/g,x$).getRegex(),VV=pt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,g$).replace(/punctSpace/g,wN).replace(/punct/g,Ax).getRegex(),qV=pt(/\\(punct)/,"gu").replace(/punct/g,Ax).getRegex(),GV=pt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),KV=pt(yN).replace("(?:-->|$)","-->").getRegex(),YV=pt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",KV).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),bg=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,XV=pt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",bg).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),v$=pt(/^!?\[(label)\]\[(ref)\]/).replace("label",bg).replace("ref",bN).getRegex(),w$=pt(/^!?\[(ref)\](?:\[\])?/).replace("ref",bN).getRegex(),JV=pt("reflink|nolink(?!\\()","g").replace("reflink",v$).replace("nolink",w$).getRegex(),kN={_backpedal:sh,anyPunctuation:qV,autolink:GV,blockSkip:zV,br:m$,code:DV,del:sh,emStrongLDelim:FV,emStrongRDelimAst:UV,emStrongRDelimUnd:VV,escape:$V,link:XV,nolink:w$,punctuation:LV,reflink:v$,reflinkSearch:JV,tag:YV,text:IV,url:sh},ZV={...kN,link:pt(/^!?\[(label)\]\((.*?)\)/).replace("label",bg).getRegex(),reflink:pt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",bg).getRegex()},N1={...kN,emStrongRDelimAst:WV,emStrongLDelim:HV,url:pt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},QV={...N1,br:pt(m$).replace("{2,}","*").getRegex(),text:pt(N1.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Op={normal:vN,gfm:MV,pedantic:OV},pu={normal:kN,gfm:N1,breaks:QV,pedantic:ZV},eq={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$E=e=>eq[e];function va(e,t){if(t){if(xn.escapeTest.test(e))return e.replace(xn.escapeReplace,$E)}else if(xn.escapeTestNoEncode.test(e))return e.replace(xn.escapeReplaceNoEncode,$E);return e}function DE(e){try{e=encodeURI(e).replace(xn.percentDecode,"%")}catch{return null}return e}function IE(e,t){var a;let r=e.replace(xn.findPipe,(o,l,c)=>{let d=!1,u=l;for(;--u>=0&&c[u]==="\\";)d=!d;return d?"|":" |"}),n=r.split(xn.splitPipe),s=0;if(n[0].trim()||n.shift(),n.length>0&&!((a=n.at(-1))!=null&&a.trim())&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(xn.slashPipe,"|");return n}function mu(e,t,r){let n=e.length;if(n===0)return"";let s=0;for(;s<n&&e.charAt(n-s-1)===t;)s++;return e.slice(0,n-s)}function tq(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let n=0;n<e.length;n++)if(e[n]==="\\")n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&(r--,r<0))return n;return r>0?-2:-1}function LE(e,t,r,n,s){let a=t.href,o=t.title||null,l=e[1].replace(s.other.outputLinkReplace,"$1");n.state.inLink=!0;let c={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:a,title:o,text:l,tokens:n.inlineTokens(l)};return n.state.inLink=!1,c}function rq(e,t,r){let n=e.match(r.other.indentCodeCompensation);if(n===null)return t;let s=n[1];return t.split(`
`).map(a=>{let o=a.match(r.other.beginningSpace);if(o===null)return a;let[l]=o;return l.length>=s.length?a.slice(s.length):a}).join(`
`)}var yg=class{constructor(t){Ye(this,"options");Ye(this,"rules");Ye(this,"lexer");this.options=t||nc}space(t){let r=this.rules.block.newline.exec(t);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(t){let r=this.rules.block.code.exec(t);if(r){let n=r[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:mu(n,`
`)}}}fences(t){let r=this.rules.block.fences.exec(t);if(r){let n=r[0],s=rq(n,r[3]||"",this.rules);return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:s}}}heading(t){let r=this.rules.block.heading.exec(t);if(r){let n=r[2].trim();if(this.rules.other.endingHash.test(n)){let s=mu(n,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(n=s.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let r=this.rules.block.hr.exec(t);if(r)return{type:"hr",raw:mu(r[0],`
`)}}blockquote(t){let r=this.rules.block.blockquote.exec(t);if(r){let n=mu(r[0],`
`).split(`
`),s="",a="",o=[];for(;n.length>0;){let l=!1,c=[],d;for(d=0;d<n.length;d++)if(this.rules.other.blockquoteStart.test(n[d]))c.push(n[d]),l=!0;else if(!l)c.push(n[d]);else break;n=n.slice(d);let u=c.join(`
`),h=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${u}`:u,a=a?`${a}
${h}`:h;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,o,!0),this.lexer.state.top=f,n.length===0)break;let p=o.at(-1);if((p==null?void 0:p.type)==="code")break;if((p==null?void 0:p.type)==="blockquote"){let m=p,x=m.raw+`
`+n.join(`
`),b=this.blockquote(x);o[o.length-1]=b,s=s.substring(0,s.length-m.raw.length)+b.raw,a=a.substring(0,a.length-m.text.length)+b.text;break}else if((p==null?void 0:p.type)==="list"){let m=p,x=m.raw+`
`+n.join(`
`),b=this.list(x);o[o.length-1]=b,s=s.substring(0,s.length-p.raw.length)+b.raw,a=a.substring(0,a.length-m.raw.length)+b.raw,n=x.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:o,text:a}}}list(t){let r=this.rules.block.list.exec(t);if(r){let n=r[1].trim(),s=n.length>1,a={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");let o=this.rules.other.listItemRegex(n),l=!1;for(;t;){let d=!1,u="",h="";if(!(r=o.exec(t))||this.rules.block.hr.test(t))break;u=r[0],t=t.substring(u.length);let f=r[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,v=>" ".repeat(3*v.length)),p=t.split(`
`,1)[0],m=!f.trim(),x=0;if(this.options.pedantic?(x=2,h=f.trimStart()):m?x=r[1].length+1:(x=r[2].search(this.rules.other.nonSpaceChar),x=x>4?1:x,h=f.slice(x),x+=r[1].length),m&&this.rules.other.blankLine.test(p)&&(u+=p+`
`,t=t.substring(p.length+1),d=!0),!d){let v=this.rules.other.nextBulletRegex(x),w=this.rules.other.hrRegex(x),j=this.rules.other.fencesBeginRegex(x),N=this.rules.other.headingBeginRegex(x),k=this.rules.other.htmlBeginRegex(x);for(;t;){let S=t.split(`
`,1)[0],C;if(p=S,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),C=p):C=p.replace(this.rules.other.tabCharGlobal,"    "),j.test(p)||N.test(p)||k.test(p)||v.test(p)||w.test(p))break;if(C.search(this.rules.other.nonSpaceChar)>=x||!p.trim())h+=`
`+C.slice(x);else{if(m||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||j.test(f)||N.test(f)||w.test(f))break;h+=`
`+p}!m&&!p.trim()&&(m=!0),u+=S+`
`,t=t.substring(S.length+1),f=C.slice(x)}}a.loose||(l?a.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(l=!0));let b=null,y;this.options.gfm&&(b=this.rules.other.listIsTask.exec(h),b&&(y=b[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),a.items.push({type:"list_item",raw:u,task:!!b,checked:y,loose:!1,text:h,tokens:[]}),a.raw+=u}let c=a.items.at(-1);if(c)c.raw=c.raw.trimEnd(),c.text=c.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let d=0;d<a.items.length;d++)if(this.lexer.state.top=!1,a.items[d].tokens=this.lexer.blockTokens(a.items[d].text,[]),!a.loose){let u=a.items[d].tokens.filter(f=>f.type==="space"),h=u.length>0&&u.some(f=>this.rules.other.anyLine.test(f.raw));a.loose=h}if(a.loose)for(let d=0;d<a.items.length;d++)a.items[d].loose=!0;return a}}html(t){let r=this.rules.block.html.exec(t);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(t){let r=this.rules.block.def.exec(t);if(r){let n=r[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=r[2]?r[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:s,title:a}}}table(t){var l;let r=this.rules.block.table.exec(t);if(!r||!this.rules.other.tableDelimiter.test(r[2]))return;let n=IE(r[1]),s=r[2].replace(this.rules.other.tableAlignChars,"").split("|"),a=(l=r[3])!=null&&l.trim()?r[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:r[0],header:[],align:[],rows:[]};if(n.length===s.length){for(let c of s)this.rules.other.tableAlignRight.test(c)?o.align.push("right"):this.rules.other.tableAlignCenter.test(c)?o.align.push("center"):this.rules.other.tableAlignLeft.test(c)?o.align.push("left"):o.align.push(null);for(let c=0;c<n.length;c++)o.header.push({text:n[c],tokens:this.lexer.inline(n[c]),header:!0,align:o.align[c]});for(let c of a)o.rows.push(IE(c,o.header.length).map((d,u)=>({text:d,tokens:this.lexer.inline(d),header:!1,align:o.align[u]})));return o}}lheading(t){let r=this.rules.block.lheading.exec(t);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(t){let r=this.rules.block.paragraph.exec(t);if(r){let n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let r=this.rules.block.text.exec(t);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(t){let r=this.rules.inline.escape.exec(t);if(r)return{type:"escape",raw:r[0],text:r[1]}}tag(t){let r=this.rules.inline.tag.exec(t);if(r)return!this.lexer.state.inLink&&this.rules.other.startATag.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(t){let r=this.rules.inline.link.exec(t);if(r){let n=r[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let o=mu(n.slice(0,-1),"\\");if((n.length-o.length)%2===0)return}else{let o=tq(r[2],"()");if(o===-2)return;if(o>-1){let l=(r[0].indexOf("!")===0?5:4)+r[1].length+o;r[2]=r[2].substring(0,o),r[0]=r[0].substring(0,l).trim(),r[3]=""}}let s=r[2],a="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(s);o&&(s=o[1],a=o[3])}else a=r[3]?r[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?s=s.slice(1):s=s.slice(1,-1)),LE(r,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer,this.rules)}}reflink(t,r){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let s=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),a=r[s.toLowerCase()];if(!a){let o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return LE(n,a,n[0],this.lexer,this.rules)}}emStrong(t,r,n=""){let s=this.rules.inline.emStrongLDelim.exec(t);if(!(!s||s[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!n||this.rules.inline.punctuation.exec(n))){let a=[...s[0]].length-1,o,l,c=a,d=0,u=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,r=r.slice(-1*t.length+a);(s=u.exec(r))!=null;){if(o=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!o)continue;if(l=[...o].length,s[3]||s[4]){c+=l;continue}else if((s[5]||s[6])&&a%3&&!((a+l)%3)){d+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+d);let h=[...s[0]][0].length,f=t.slice(0,a+s.index+h+l);if(Math.min(a,l)%2){let m=f.slice(1,-1);return{type:"em",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}let p=f.slice(2,-2);return{type:"strong",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(t){let r=this.rules.inline.code.exec(t);if(r){let n=r[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(n),a=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return s&&a&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:r[0],text:n}}}br(t){let r=this.rules.inline.br.exec(t);if(r)return{type:"br",raw:r[0]}}del(t){let r=this.rules.inline.del.exec(t);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(t){let r=this.rules.inline.autolink.exec(t);if(r){let n,s;return r[2]==="@"?(n=r[1],s="mailto:"+n):(n=r[1],s=n),{type:"link",raw:r[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let r;if(r=this.rules.inline.url.exec(t)){let s,a;if(r[2]==="@")s=r[0],a="mailto:"+s;else{let o;do o=r[0],r[0]=((n=this.rules.inline._backpedal.exec(r[0]))==null?void 0:n[0])??"";while(o!==r[0]);s=r[0],r[1]==="www."?a="http://"+r[0]:a=r[0]}return{type:"link",raw:r[0],text:s,href:a,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(t){let r=this.rules.inline.text.exec(t);if(r){let n=this.lexer.state.inRawBlock;return{type:"text",raw:r[0],text:r[0],escaped:n}}}},ti=class S1{constructor(t){Ye(this,"tokens");Ye(this,"options");Ye(this,"state");Ye(this,"tokenizer");Ye(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||nc,this.options.tokenizer=this.options.tokenizer||new yg,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:xn,block:Op.normal,inline:pu.normal};this.options.pedantic?(r.block=Op.pedantic,r.inline=pu.pedantic):this.options.gfm&&(r.block=Op.gfm,this.options.breaks?r.inline=pu.breaks:r.inline=pu.gfm),this.tokenizer.rules=r}static get rules(){return{block:Op,inline:pu}}static lex(t,r){return new S1(r).lex(t)}static lexInline(t,r){return new S1(r).inlineTokens(t)}lex(t){t=t.replace(xn.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let n=this.inlineQueue[r];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],n=!1){var s,a,o;for(this.options.pedantic&&(t=t.replace(xn.tabCharGlobal,"    ").replace(xn.spaceLine,""));t;){let l;if((a=(s=this.options.extensions)==null?void 0:s.block)!=null&&a.some(d=>(l=d.call({lexer:this},t,r))?(t=t.substring(l.raw.length),r.push(l),!0):!1))continue;if(l=this.tokenizer.space(t)){t=t.substring(l.raw.length);let d=r.at(-1);l.raw.length===1&&d!==void 0?d.raw+=`
`:r.push(l);continue}if(l=this.tokenizer.code(t)){t=t.substring(l.raw.length);let d=r.at(-1);(d==null?void 0:d.type)==="paragraph"||(d==null?void 0:d.type)==="text"?(d.raw+=(d.raw.endsWith(`
`)?"":`
`)+l.raw,d.text+=`
`+l.text,this.inlineQueue.at(-1).src=d.text):r.push(l);continue}if(l=this.tokenizer.fences(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.heading(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.hr(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.blockquote(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.list(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.html(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.def(t)){t=t.substring(l.raw.length);let d=r.at(-1);(d==null?void 0:d.type)==="paragraph"||(d==null?void 0:d.type)==="text"?(d.raw+=(d.raw.endsWith(`
`)?"":`
`)+l.raw,d.text+=`
`+l.raw,this.inlineQueue.at(-1).src=d.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title},r.push(l));continue}if(l=this.tokenizer.table(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.lheading(t)){t=t.substring(l.raw.length),r.push(l);continue}let c=t;if((o=this.options.extensions)!=null&&o.startBlock){let d=1/0,u=t.slice(1),h;this.options.extensions.startBlock.forEach(f=>{h=f.call({lexer:this},u),typeof h=="number"&&h>=0&&(d=Math.min(d,h))}),d<1/0&&d>=0&&(c=t.substring(0,d+1))}if(this.state.top&&(l=this.tokenizer.paragraph(c))){let d=r.at(-1);n&&(d==null?void 0:d.type)==="paragraph"?(d.raw+=(d.raw.endsWith(`
`)?"":`
`)+l.raw,d.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=d.text):r.push(l),n=c.length!==t.length,t=t.substring(l.raw.length);continue}if(l=this.tokenizer.text(t)){t=t.substring(l.raw.length);let d=r.at(-1);(d==null?void 0:d.type)==="text"?(d.raw+=(d.raw.endsWith(`
`)?"":`
`)+l.raw,d.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=d.text):r.push(l);continue}if(t){let d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){var l,c,d;let n=t,s=null;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)u.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,s.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(s=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let a=!1,o="";for(;t;){a||(o=""),a=!1;let u;if((c=(l=this.options.extensions)==null?void 0:l.inline)!=null&&c.some(f=>(u=f.call({lexer:this},t,r))?(t=t.substring(u.raw.length),r.push(u),!0):!1))continue;if(u=this.tokenizer.escape(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.tag(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.link(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(u.raw.length);let f=r.at(-1);u.type==="text"&&(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):r.push(u);continue}if(u=this.tokenizer.emStrong(t,n,o)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.codespan(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.br(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.del(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.autolink(t)){t=t.substring(u.raw.length),r.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(t))){t=t.substring(u.raw.length),r.push(u);continue}let h=t;if((d=this.options.extensions)!=null&&d.startInline){let f=1/0,p=t.slice(1),m;this.options.extensions.startInline.forEach(x=>{m=x.call({lexer:this},p),typeof m=="number"&&m>=0&&(f=Math.min(f,m))}),f<1/0&&f>=0&&(h=t.substring(0,f+1))}if(u=this.tokenizer.inlineText(h)){t=t.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(o=u.raw.slice(-1)),a=!0;let f=r.at(-1);(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):r.push(u);continue}if(t){let f="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return r}},vg=class{constructor(t){Ye(this,"options");Ye(this,"parser");this.options=t||nc}space(t){return""}code({text:t,lang:r,escaped:n}){var o;let s=(o=(r||"").match(xn.notSpaceStart))==null?void 0:o[0],a=t.replace(xn.endingNewline,"")+`
`;return s?'<pre><code class="language-'+va(s)+'">'+(n?a:va(a,!0))+`</code></pre>
`:"<pre><code>"+(n?a:va(a,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:r}){return`<h${r}>${this.parser.parseInline(t)}</h${r}>
`}hr(t){return`<hr>
`}list(t){let r=t.ordered,n=t.start,s="";for(let l=0;l<t.items.length;l++){let c=t.items[l];s+=this.listitem(c)}let a=r?"ol":"ul",o=r&&n!==1?' start="'+n+'"':"";return"<"+a+o+`>
`+s+"</"+a+`>
`}listitem(t){var n;let r="";if(t.task){let s=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=s+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=s+" "+va(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):r+=s+" "}return r+=this.parser.parse(t.tokens,!!t.loose),`<li>${r}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let r="",n="";for(let a=0;a<t.header.length;a++)n+=this.tablecell(t.header[a]);r+=this.tablerow({text:n});let s="";for(let a=0;a<t.rows.length;a++){let o=t.rows[a];n="";for(let l=0;l<o.length;l++)n+=this.tablecell(o[l]);s+=this.tablerow({text:n})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+r+`</thead>
`+s+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let r=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+r+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${va(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:r,tokens:n}){let s=this.parser.parseInline(n),a=DE(t);if(a===null)return s;t=a;let o='<a href="'+t+'"';return r&&(o+=' title="'+va(r)+'"'),o+=">"+s+"</a>",o}image({href:t,title:r,text:n,tokens:s}){s&&(n=this.parser.parseInline(s,this.parser.textRenderer));let a=DE(t);if(a===null)return va(n);t=a;let o=`<img src="${t}" alt="${n}"`;return r&&(o+=` title="${va(r)}"`),o+=">",o}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:va(t.text)}},jN=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},ri=class C1{constructor(t){Ye(this,"options");Ye(this,"renderer");Ye(this,"textRenderer");this.options=t||nc,this.options.renderer=this.options.renderer||new vg,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new jN}static parse(t,r){return new C1(r).parse(t)}static parseInline(t,r){return new C1(r).parseInline(t)}parse(t,r=!0){var s,a;let n="";for(let o=0;o<t.length;o++){let l=t[o];if((a=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&a[l.type]){let d=l,u=this.options.extensions.renderers[d.type].call({parser:this},d);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(d.type)){n+=u||"";continue}}let c=l;switch(c.type){case"space":{n+=this.renderer.space(c);continue}case"hr":{n+=this.renderer.hr(c);continue}case"heading":{n+=this.renderer.heading(c);continue}case"code":{n+=this.renderer.code(c);continue}case"table":{n+=this.renderer.table(c);continue}case"blockquote":{n+=this.renderer.blockquote(c);continue}case"list":{n+=this.renderer.list(c);continue}case"html":{n+=this.renderer.html(c);continue}case"def":{n+=this.renderer.def(c);continue}case"paragraph":{n+=this.renderer.paragraph(c);continue}case"text":{let d=c,u=this.renderer.text(d);for(;o+1<t.length&&t[o+1].type==="text";)d=t[++o],u+=`
`+this.renderer.text(d);r?n+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):n+=u;continue}default:{let d='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return n}parseInline(t,r=this.renderer){var s,a;let n="";for(let o=0;o<t.length;o++){let l=t[o];if((a=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&a[l.type]){let d=this.options.extensions.renderers[l.type].call({parser:this},l);if(d!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){n+=d||"";continue}}let c=l;switch(c.type){case"escape":{n+=r.text(c);break}case"html":{n+=r.html(c);break}case"link":{n+=r.link(c);break}case"image":{n+=r.image(c);break}case"strong":{n+=r.strong(c);break}case"em":{n+=r.em(c);break}case"codespan":{n+=r.codespan(c);break}case"br":{n+=r.br(c);break}case"del":{n+=r.del(c);break}case"text":{n+=r.text(c);break}default:{let d='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return n}},ww,Mm=(ww=class{constructor(e){Ye(this,"options");Ye(this,"block");this.options=e||nc}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?ti.lex:ti.lexInline}provideParser(){return this.block?ri.parse:ri.parseInline}},Ye(ww,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),ww),nq=class{constructor(...t){Ye(this,"defaults",mN());Ye(this,"options",this.setOptions);Ye(this,"parse",this.parseMarkdown(!0));Ye(this,"parseInline",this.parseMarkdown(!1));Ye(this,"Parser",ri);Ye(this,"Renderer",vg);Ye(this,"TextRenderer",jN);Ye(this,"Lexer",ti);Ye(this,"Tokenizer",yg);Ye(this,"Hooks",Mm);this.use(...t)}walkTokens(t,r){var s,a;let n=[];for(let o of t)switch(n=n.concat(r.call(this,o)),o.type){case"table":{let l=o;for(let c of l.header)n=n.concat(this.walkTokens(c.tokens,r));for(let c of l.rows)for(let d of c)n=n.concat(this.walkTokens(d.tokens,r));break}case"list":{let l=o;n=n.concat(this.walkTokens(l.items,r));break}default:{let l=o;(a=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&a[l.type]?this.defaults.extensions.childTokens[l.type].forEach(c=>{let d=l[c].flat(1/0);n=n.concat(this.walkTokens(d,r))}):l.tokens&&(n=n.concat(this.walkTokens(l.tokens,r)))}}return n}use(...t){let r=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let s={...n};if(s.async=this.defaults.async||s.async||!1,n.extensions&&(n.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){let o=r.renderers[a.name];o?r.renderers[a.name]=function(...l){let c=a.renderer.apply(this,l);return c===!1&&(c=o.apply(this,l)),c}:r.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=r[a.level];o?o.unshift(a.tokenizer):r[a.level]=[a.tokenizer],a.start&&(a.level==="block"?r.startBlock?r.startBlock.push(a.start):r.startBlock=[a.start]:a.level==="inline"&&(r.startInline?r.startInline.push(a.start):r.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(r.childTokens[a.name]=a.childTokens)}),s.extensions=r),n.renderer){let a=this.defaults.renderer||new vg(this.defaults);for(let o in n.renderer){if(!(o in a))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let l=o,c=n.renderer[l],d=a[l];a[l]=(...u)=>{let h=c.apply(a,u);return h===!1&&(h=d.apply(a,u)),h||""}}s.renderer=a}if(n.tokenizer){let a=this.defaults.tokenizer||new yg(this.defaults);for(let o in n.tokenizer){if(!(o in a))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let l=o,c=n.tokenizer[l],d=a[l];a[l]=(...u)=>{let h=c.apply(a,u);return h===!1&&(h=d.apply(a,u)),h}}s.tokenizer=a}if(n.hooks){let a=this.defaults.hooks||new Mm;for(let o in n.hooks){if(!(o in a))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let l=o,c=n.hooks[l],d=a[l];Mm.passThroughHooks.has(o)?a[l]=u=>{if(this.defaults.async)return Promise.resolve(c.call(a,u)).then(f=>d.call(a,f));let h=c.call(a,u);return d.call(a,h)}:a[l]=(...u)=>{let h=c.apply(a,u);return h===!1&&(h=d.apply(a,u)),h}}s.hooks=a}if(n.walkTokens){let a=this.defaults.walkTokens,o=n.walkTokens;s.walkTokens=function(l){let c=[];return c.push(o.call(this,l)),a&&(c=c.concat(a.call(this,l))),c}}this.defaults={...this.defaults,...s}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,r){return ti.lex(t,r??this.defaults)}parser(t,r){return ri.parse(t,r??this.defaults)}parseMarkdown(t){return(r,n)=>{let s={...n},a={...this.defaults,...s},o=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&s.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));a.hooks&&(a.hooks.options=a,a.hooks.block=t);let l=a.hooks?a.hooks.provideLexer():t?ti.lex:ti.lexInline,c=a.hooks?a.hooks.provideParser():t?ri.parse:ri.parseInline;if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(r):r).then(d=>l(d,a)).then(d=>a.hooks?a.hooks.processAllTokens(d):d).then(d=>a.walkTokens?Promise.all(this.walkTokens(d,a.walkTokens)).then(()=>d):d).then(d=>c(d,a)).then(d=>a.hooks?a.hooks.postprocess(d):d).catch(o);try{a.hooks&&(r=a.hooks.preprocess(r));let d=l(r,a);a.hooks&&(d=a.hooks.processAllTokens(d)),a.walkTokens&&this.walkTokens(d,a.walkTokens);let u=c(d,a);return a.hooks&&(u=a.hooks.postprocess(u)),u}catch(d){return o(d)}}}onError(t,r){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let s="<p>An error occurred:</p><pre>"+va(n.message+"",!0)+"</pre>";return r?Promise.resolve(s):s}if(r)return Promise.reject(n);throw n}}},Ll=new nq;function ft(e,t){return Ll.parse(e,t)}ft.options=ft.setOptions=function(e){return Ll.setOptions(e),ft.defaults=Ll.defaults,u$(ft.defaults),ft};ft.getDefaults=mN;ft.defaults=nc;ft.use=function(...e){return Ll.use(...e),ft.defaults=Ll.defaults,u$(ft.defaults),ft};ft.walkTokens=function(e,t){return Ll.walkTokens(e,t)};ft.parseInline=Ll.parseInline;ft.Parser=ri;ft.parser=ri.parse;ft.Renderer=vg;ft.TextRenderer=jN;ft.Lexer=ti;ft.lexer=ti.lex;ft.Tokenizer=yg;ft.Hooks=Mm;ft.parse=ft;ft.options;ft.setOptions;ft.use;ft.walkTokens;ft.parseInline;ri.parse;ti.lex;/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:k$,setPrototypeOf:RE,isFrozen:sq,getPrototypeOf:aq,getOwnPropertyDescriptor:iq}=Object;let{freeze:wn,seal:Bs,create:j$}=Object,{apply:_1,construct:E1}=typeof Reflect<"u"&&Reflect;wn||(wn=function(t){return t});Bs||(Bs=function(t){return t});_1||(_1=function(t,r,n){return t.apply(r,n)});E1||(E1=function(t,r){return new t(...r)});const $p=kn(Array.prototype.forEach),oq=kn(Array.prototype.lastIndexOf),BE=kn(Array.prototype.pop),gu=kn(Array.prototype.push),lq=kn(Array.prototype.splice),Om=kn(String.prototype.toLowerCase),Jy=kn(String.prototype.toString),zE=kn(String.prototype.match),xu=kn(String.prototype.replace),cq=kn(String.prototype.indexOf),dq=kn(String.prototype.trim),Js=kn(Object.prototype.hasOwnProperty),hn=kn(RegExp.prototype.test),bu=uq(TypeError);function kn(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return _1(e,t,n)}}function uq(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E1(e,r)}}function et(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Om;RE&&RE(e,null);let n=t.length;for(;n--;){let s=t[n];if(typeof s=="string"){const a=r(s);a!==s&&(sq(t)||(t[n]=a),s=a)}e[s]=!0}return e}function hq(e){for(let t=0;t<e.length;t++)Js(e,t)||(e[t]=null);return e}function Va(e){const t=j$(null);for(const[r,n]of k$(e))Js(e,r)&&(Array.isArray(n)?t[r]=hq(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=Va(n):t[r]=n);return t}function yu(e,t){for(;e!==null;){const n=iq(e,t);if(n){if(n.get)return kn(n.get);if(typeof n.value=="function")return kn(n.value)}e=aq(e)}function r(){return null}return r}const FE=wn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Zy=wn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Qy=wn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),fq=wn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ev=wn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),pq=wn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),HE=wn(["#text"]),UE=wn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),tv=wn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),WE=wn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Dp=wn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mq=Bs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),gq=Bs(/<%[\w\W]*|[\w\W]*%>/gm),xq=Bs(/\$\{[\w\W]*/gm),bq=Bs(/^data-[\-\w.\u00B7-\uFFFF]+$/),yq=Bs(/^aria-[\-\w]+$/),N$=Bs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),vq=Bs(/^(?:\w+script|data):/i),wq=Bs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),S$=Bs(/^html$/i),kq=Bs(/^[a-z][.\w]*(-[.\w]+)+$/i);var VE=Object.freeze({__proto__:null,ARIA_ATTR:yq,ATTR_WHITESPACE:wq,CUSTOM_ELEMENT:kq,DATA_ATTR:bq,DOCTYPE_NAME:S$,ERB_EXPR:gq,IS_ALLOWED_URI:N$,IS_SCRIPT_OR_DATA:vq,MUSTACHE_EXPR:mq,TMPLIT_EXPR:xq});const vu={element:1,text:3,progressingInstruction:7,comment:8,document:9},jq=function(){return typeof window>"u"?null:window},Nq=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(n=r.getAttribute(s));const a="dompurify"+(n?"#"+n:"");try{return t.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},qE=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function C$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:jq();const t=$e=>C$($e);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==vu.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const n=r,s=n.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:p}=e,m=c.prototype,x=yu(m,"cloneNode"),b=yu(m,"remove"),y=yu(m,"nextSibling"),v=yu(m,"childNodes"),w=yu(m,"parentNode");if(typeof o=="function"){const $e=r.createElement("template");$e.content&&$e.content.ownerDocument&&(r=$e.content.ownerDocument)}let j,N="";const{implementation:k,createNodeIterator:S,createDocumentFragment:C,getElementsByTagName:P}=r,{importNode:E}=n;let O=qE();t.isSupported=typeof k$=="function"&&typeof w=="function"&&k&&k.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:A,ERB_EXPR:_,TMPLIT_EXPR:I,DATA_ATTR:D,ARIA_ATTR:$,IS_SCRIPT_OR_DATA:L,ATTR_WHITESPACE:M,CUSTOM_ELEMENT:T}=VE;let{IS_ALLOWED_URI:G}=VE,Y=null;const ee=et({},[...FE,...Zy,...Qy,...ev,...HE]);let R=null;const B=et({},[...UE,...tv,...WE,...Dp]);let q=Object.seal(j$(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),X=null,ue=null,U=!0,V=!0,ge=!1,te=!0,z=!1,le=!0,ne=!1,be=!1,ye=!1,Se=!1,He=!1,st=!1,H=!0,J=!1;const ie="user-content-";let we=!0,re=!1,oe={},Fe=null;const rt=et({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let F=null;const ae=et({},["audio","video","img","source","image","track"]);let Ie=null;const at=et({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),We="http://www.w3.org/1998/Math/MathML",fr="http://www.w3.org/2000/svg",ut="http://www.w3.org/1999/xhtml";let ms=ut,Oi=!1,$i=null;const ba=et({},[We,fr,ut],Jy);let Di=et({},["mi","mo","mn","ms","mtext"]),se=et({},["annotation-xml"]);const Ke=et({},["title","style","font","a","script"]);let qe=null;const Qt=["application/xhtml+xml","text/html"],er="text/html";let it=null,Pn=null;const or=r.createElement("form"),Fa=function(K){return K instanceof RegExp||K instanceof Function},tu=function(){let K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Pn&&Pn===K)){if((!K||typeof K!="object")&&(K={}),K=Va(K),qe=Qt.indexOf(K.PARSER_MEDIA_TYPE)===-1?er:K.PARSER_MEDIA_TYPE,it=qe==="application/xhtml+xml"?Jy:Om,Y=Js(K,"ALLOWED_TAGS")?et({},K.ALLOWED_TAGS,it):ee,R=Js(K,"ALLOWED_ATTR")?et({},K.ALLOWED_ATTR,it):B,$i=Js(K,"ALLOWED_NAMESPACES")?et({},K.ALLOWED_NAMESPACES,Jy):ba,Ie=Js(K,"ADD_URI_SAFE_ATTR")?et(Va(at),K.ADD_URI_SAFE_ATTR,it):at,F=Js(K,"ADD_DATA_URI_TAGS")?et(Va(ae),K.ADD_DATA_URI_TAGS,it):ae,Fe=Js(K,"FORBID_CONTENTS")?et({},K.FORBID_CONTENTS,it):rt,X=Js(K,"FORBID_TAGS")?et({},K.FORBID_TAGS,it):Va({}),ue=Js(K,"FORBID_ATTR")?et({},K.FORBID_ATTR,it):Va({}),oe=Js(K,"USE_PROFILES")?K.USE_PROFILES:!1,U=K.ALLOW_ARIA_ATTR!==!1,V=K.ALLOW_DATA_ATTR!==!1,ge=K.ALLOW_UNKNOWN_PROTOCOLS||!1,te=K.ALLOW_SELF_CLOSE_IN_ATTR!==!1,z=K.SAFE_FOR_TEMPLATES||!1,le=K.SAFE_FOR_XML!==!1,ne=K.WHOLE_DOCUMENT||!1,Se=K.RETURN_DOM||!1,He=K.RETURN_DOM_FRAGMENT||!1,st=K.RETURN_TRUSTED_TYPE||!1,ye=K.FORCE_BODY||!1,H=K.SANITIZE_DOM!==!1,J=K.SANITIZE_NAMED_PROPS||!1,we=K.KEEP_CONTENT!==!1,re=K.IN_PLACE||!1,G=K.ALLOWED_URI_REGEXP||N$,ms=K.NAMESPACE||ut,Di=K.MATHML_TEXT_INTEGRATION_POINTS||Di,se=K.HTML_INTEGRATION_POINTS||se,q=K.CUSTOM_ELEMENT_HANDLING||{},K.CUSTOM_ELEMENT_HANDLING&&Fa(K.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=K.CUSTOM_ELEMENT_HANDLING.tagNameCheck),K.CUSTOM_ELEMENT_HANDLING&&Fa(K.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=K.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),K.CUSTOM_ELEMENT_HANDLING&&typeof K.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(q.allowCustomizedBuiltInElements=K.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),z&&(V=!1),He&&(Se=!0),oe&&(Y=et({},HE),R=[],oe.html===!0&&(et(Y,FE),et(R,UE)),oe.svg===!0&&(et(Y,Zy),et(R,tv),et(R,Dp)),oe.svgFilters===!0&&(et(Y,Qy),et(R,tv),et(R,Dp)),oe.mathMl===!0&&(et(Y,ev),et(R,WE),et(R,Dp))),K.ADD_TAGS&&(Y===ee&&(Y=Va(Y)),et(Y,K.ADD_TAGS,it)),K.ADD_ATTR&&(R===B&&(R=Va(R)),et(R,K.ADD_ATTR,it)),K.ADD_URI_SAFE_ATTR&&et(Ie,K.ADD_URI_SAFE_ATTR,it),K.FORBID_CONTENTS&&(Fe===rt&&(Fe=Va(Fe)),et(Fe,K.FORBID_CONTENTS,it)),we&&(Y["#text"]=!0),ne&&et(Y,["html","head","body"]),Y.table&&(et(Y,["tbody"]),delete X.tbody),K.TRUSTED_TYPES_POLICY){if(typeof K.TRUSTED_TYPES_POLICY.createHTML!="function")throw bu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof K.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw bu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');j=K.TRUSTED_TYPES_POLICY,N=j.createHTML("")}else j===void 0&&(j=Nq(p,s)),j!==null&&typeof N=="string"&&(N=j.createHTML(""));wn&&wn(K),Pn=K}},uc=et({},[...Zy,...Qy,...fq]),hc=et({},[...ev,...pq]),xy=function(K){let me=w(K);(!me||!me.tagName)&&(me={namespaceURI:ms,tagName:"template"});const Te=Om(K.tagName),yt=Om(me.tagName);return $i[K.namespaceURI]?K.namespaceURI===fr?me.namespaceURI===ut?Te==="svg":me.namespaceURI===We?Te==="svg"&&(yt==="annotation-xml"||Di[yt]):!!uc[Te]:K.namespaceURI===We?me.namespaceURI===ut?Te==="math":me.namespaceURI===fr?Te==="math"&&se[yt]:!!hc[Te]:K.namespaceURI===ut?me.namespaceURI===fr&&!se[yt]||me.namespaceURI===We&&!Di[yt]?!1:!hc[Te]&&(Ke[Te]||!uc[Te]):!!(qe==="application/xhtml+xml"&&$i[K.namespaceURI]):!1},gs=function(K){gu(t.removed,{element:K});try{w(K).removeChild(K)}catch{b(K)}},Ii=function(K,me){try{gu(t.removed,{attribute:me.getAttributeNode(K),from:me})}catch{gu(t.removed,{attribute:null,from:me})}if(me.removeAttribute(K),K==="is")if(Se||He)try{gs(me)}catch{}else try{me.setAttribute(K,"")}catch{}},cp=function(K){let me=null,Te=null;if(ye)K="<remove></remove>"+K;else{const Gt=zE(K,/^[\r\n\t ]+/);Te=Gt&&Gt[0]}qe==="application/xhtml+xml"&&ms===ut&&(K='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+K+"</body></html>");const yt=j?j.createHTML(K):K;if(ms===ut)try{me=new f().parseFromString(yt,qe)}catch{}if(!me||!me.documentElement){me=k.createDocument(ms,"template",null);try{me.documentElement.innerHTML=Oi?N:yt}catch{}}const pr=me.body||me.documentElement;return K&&Te&&pr.insertBefore(r.createTextNode(Te),pr.childNodes[0]||null),ms===ut?P.call(me,ne?"html":"body")[0]:ne?me.documentElement:pr},dp=function(K){return S.call(K.ownerDocument||K,K,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},fc=function(K){return K instanceof h&&(typeof K.nodeName!="string"||typeof K.textContent!="string"||typeof K.removeChild!="function"||!(K.attributes instanceof u)||typeof K.removeAttribute!="function"||typeof K.setAttribute!="function"||typeof K.namespaceURI!="string"||typeof K.insertBefore!="function"||typeof K.hasChildNodes!="function")},ru=function(K){return typeof l=="function"&&K instanceof l};function Mn($e,K,me){$p($e,Te=>{Te.call(t,K,me,Pn)})}const up=function(K){let me=null;if(Mn(O.beforeSanitizeElements,K,null),fc(K))return gs(K),!0;const Te=it(K.nodeName);if(Mn(O.uponSanitizeElement,K,{tagName:Te,allowedTags:Y}),le&&K.hasChildNodes()&&!ru(K.firstElementChild)&&hn(/<[/\w!]/g,K.innerHTML)&&hn(/<[/\w!]/g,K.textContent)||K.nodeType===vu.progressingInstruction||le&&K.nodeType===vu.comment&&hn(/<[/\w]/g,K.data))return gs(K),!0;if(!Y[Te]||X[Te]){if(!X[Te]&&nu(Te)&&(q.tagNameCheck instanceof RegExp&&hn(q.tagNameCheck,Te)||q.tagNameCheck instanceof Function&&q.tagNameCheck(Te)))return!1;if(we&&!Fe[Te]){const yt=w(K)||K.parentNode,pr=v(K)||K.childNodes;if(pr&&yt){const Gt=pr.length;for(let Rr=Gt-1;Rr>=0;--Rr){const W=x(pr[Rr],!0);W.__removalCount=(K.__removalCount||0)+1,yt.insertBefore(W,y(K))}}}return gs(K),!0}return K instanceof c&&!xy(K)||(Te==="noscript"||Te==="noembed"||Te==="noframes")&&hn(/<\/no(script|embed|frames)/i,K.innerHTML)?(gs(K),!0):(z&&K.nodeType===vu.text&&(me=K.textContent,$p([A,_,I],yt=>{me=xu(me,yt," ")}),K.textContent!==me&&(gu(t.removed,{element:K.cloneNode()}),K.textContent=me)),Mn(O.afterSanitizeElements,K,null),!1)},hp=function(K,me,Te){if(H&&(me==="id"||me==="name")&&(Te in r||Te in or))return!1;if(!(V&&!ue[me]&&hn(D,me))){if(!(U&&hn($,me))){if(!R[me]||ue[me]){if(!(nu(K)&&(q.tagNameCheck instanceof RegExp&&hn(q.tagNameCheck,K)||q.tagNameCheck instanceof Function&&q.tagNameCheck(K))&&(q.attributeNameCheck instanceof RegExp&&hn(q.attributeNameCheck,me)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(me))||me==="is"&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&hn(q.tagNameCheck,Te)||q.tagNameCheck instanceof Function&&q.tagNameCheck(Te))))return!1}else if(!Ie[me]){if(!hn(G,xu(Te,M,""))){if(!((me==="src"||me==="xlink:href"||me==="href")&&K!=="script"&&cq(Te,"data:")===0&&F[K])){if(!(ge&&!hn(L,xu(Te,M,"")))){if(Te)return!1}}}}}}return!0},nu=function(K){return K!=="annotation-xml"&&zE(K,T)},fp=function(K){Mn(O.beforeSanitizeAttributes,K,null);const{attributes:me}=K;if(!me||fc(K))return;const Te={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:R,forceKeepAttr:void 0};let yt=me.length;for(;yt--;){const pr=me[yt],{name:Gt,namespaceURI:Rr,value:W}=pr,Z=it(Gt),he=W;let ve=Gt==="value"?he:dq(he);if(Te.attrName=Z,Te.attrValue=ve,Te.keepAttr=!0,Te.forceKeepAttr=void 0,Mn(O.uponSanitizeAttribute,K,Te),ve=Te.attrValue,J&&(Z==="id"||Z==="name")&&(Ii(Gt,K),ve=ie+ve),le&&hn(/((--!?|])>)|<\/(style|title)/i,ve)){Ii(Gt,K);continue}if(Te.forceKeepAttr)continue;if(!Te.keepAttr){Ii(Gt,K);continue}if(!te&&hn(/\/>/i,ve)){Ii(Gt,K);continue}z&&$p([A,_,I],xe=>{ve=xu(ve,xe," ")});const Ne=it(K.nodeName);if(!hp(Ne,Z,ve)){Ii(Gt,K);continue}if(j&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!Rr)switch(p.getAttributeType(Ne,Z)){case"TrustedHTML":{ve=j.createHTML(ve);break}case"TrustedScriptURL":{ve=j.createScriptURL(ve);break}}if(ve!==he)try{Rr?K.setAttributeNS(Rr,Gt,ve):K.setAttribute(Gt,ve),fc(K)?gs(K):BE(t.removed)}catch{Ii(Gt,K)}}Mn(O.afterSanitizeAttributes,K,null)},by=function $e(K){let me=null;const Te=dp(K);for(Mn(O.beforeSanitizeShadowDOM,K,null);me=Te.nextNode();)Mn(O.uponSanitizeShadowNode,me,null),up(me),fp(me),me.content instanceof a&&$e(me.content);Mn(O.afterSanitizeShadowDOM,K,null)};return t.sanitize=function($e){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=null,Te=null,yt=null,pr=null;if(Oi=!$e,Oi&&($e="<!-->"),typeof $e!="string"&&!ru($e))if(typeof $e.toString=="function"){if($e=$e.toString(),typeof $e!="string")throw bu("dirty is not a string, aborting")}else throw bu("toString is not a function");if(!t.isSupported)return $e;if(be||tu(K),t.removed=[],typeof $e=="string"&&(re=!1),re){if($e.nodeName){const W=it($e.nodeName);if(!Y[W]||X[W])throw bu("root node is forbidden and cannot be sanitized in-place")}}else if($e instanceof l)me=cp("<!---->"),Te=me.ownerDocument.importNode($e,!0),Te.nodeType===vu.element&&Te.nodeName==="BODY"||Te.nodeName==="HTML"?me=Te:me.appendChild(Te);else{if(!Se&&!z&&!ne&&$e.indexOf("<")===-1)return j&&st?j.createHTML($e):$e;if(me=cp($e),!me)return Se?null:st?N:""}me&&ye&&gs(me.firstChild);const Gt=dp(re?$e:me);for(;yt=Gt.nextNode();)up(yt),fp(yt),yt.content instanceof a&&by(yt.content);if(re)return $e;if(Se){if(He)for(pr=C.call(me.ownerDocument);me.firstChild;)pr.appendChild(me.firstChild);else pr=me;return(R.shadowroot||R.shadowrootmode)&&(pr=E.call(n,pr,!0)),pr}let Rr=ne?me.outerHTML:me.innerHTML;return ne&&Y["!doctype"]&&me.ownerDocument&&me.ownerDocument.doctype&&me.ownerDocument.doctype.name&&hn(S$,me.ownerDocument.doctype.name)&&(Rr="<!DOCTYPE "+me.ownerDocument.doctype.name+`>
`+Rr),z&&$p([A,_,I],W=>{Rr=xu(Rr,W," ")}),j&&st?j.createHTML(Rr):Rr},t.setConfig=function(){let $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};tu($e),be=!0},t.clearConfig=function(){Pn=null,be=!1},t.isValidAttribute=function($e,K,me){Pn||tu({});const Te=it($e),yt=it(K);return hp(Te,yt,me)},t.addHook=function($e,K){typeof K=="function"&&gu(O[$e],K)},t.removeHook=function($e,K){if(K!==void 0){const me=oq(O[$e],K);return me===-1?void 0:lq(O[$e],me,1)[0]}return BE(O[$e])},t.removeHooks=function($e){O[$e]=[]},t.removeAllHooks=function(){O=qE()},t}var NN=C$();const Sq={yellow:"#FFD700",gold:"#FFD700",gray:"#808080",grey:"#808080",red:"#DC143C",crimson:"#DC143C",purple:"#9370DB",violet:"#9370DB",blue:"#4169E1",royalblue:"#4169E1",green:"#32CD32",lime:"#32CD32",orange:"#FF8C00",darkorange:"#FF8C00",pink:"#FF69B4",hotpink:"#FF69B4",cyan:"#00CED1",darkturquoise:"#00CED1",magenta:"#FF00FF",fuchsia:"#FF00FF",brown:"#8B4513",saddlebrown:"#8B4513",white:"#FFFFFF",black:"#000000",silver:"#C0C0C0",maroon:"#800000",olive:"#808000",navy:"#000080",teal:"#008080",aqua:"#00FFFF",indigo:"#4B0082",coral:"#FF7F50",salmon:"#FA8072",khaki:"#F0E68C",lavender:"#E6E6FA",mint:"#98FF98",peach:"#FFDAB9",rose:"#FFE4E1",sky:"#87CEEB",tan:"#D2B48C"};function Cq(e){return e.replace(/\{(\w+)\}([\s\S]*?)\{\/\1\}/g,(t,r,n)=>{const s=Sq[r.toLowerCase()];return s?`<span class="story-color" style="--story-color: ${s};">${n}</span>`:t})}function _q(e){let t=e.replace(/(<p[^>]*>)([^<\s])/,(r,n,s)=>`${n}<span class="drop-cap">${s}</span>`);return t=t.replace(/(class="page-break"[^>]*>\s*)(<p[^>]*>)([^<\s])/g,(r,n,s,a)=>`${n}${s}<span class="drop-cap">${a}</span>`),t}function _$({markdown:e,className:t,enableDropCap:r=!1,dropCapFont:n="serif"}){const{theme:s}=Wt(),a=()=>({serif:"Georgia, serif",cinzel:'"Cinzel", serif',playfair:'"Playfair Display", serif',cormorant:'"Cormorant", serif',unna:'"Unna", serif',crimson:'"Crimson Pro", serif'})[n]||"Georgia, serif",o=g.useMemo(()=>{if(!e)return{__html:""};let l=ft.parse(e);r&&(l=_q(l));const c=Cq(l);return{__html:NN.sanitize(c,{ADD_TAGS:["img","span"],ADD_ATTR:["src","alt","title","class","style"]})}},[e,r]);return i.jsxs(i.Fragment,{children:[i.jsx("style",{children:`
        /* Drop cap styling */
        .drop-cap {
          float: left;
          font-size: 3.5em;
          line-height: 0.85;
          margin-right: 0.1em;
          margin-top: 0.05em;
          font-weight: 600;
          font-family: ${a()};
          ${s==="light"?"color: #1a1a1a;":"color: #f0f0f0;"}
        }

        /* Base color rule */
        .story-color,
        .story-color * {
          color: var(--story-color) !important;
        }

        /* Theme-aware contrast adjustments */
        ${s==="light"?`
          .story-color,
          .story-color * {
            --story-color: color-mix(in oklch, var(--story-color) 65%, black);
          }

          /* Fallback for browsers without color-mix support */
          @supports not (color: color-mix(in oklch, black 10%, white)) {
            .story-color[style*="#FFD700"],
            .story-color[style*="ffd700"] { --story-color: #b8860b; } /* darker gold */
            .story-color[style*="#808080"],
            .story-color[style*="808080"] { --story-color: #4a4a4a; } /* darker gray */
          }
        `:`
          .story-color,
          .story-color * {
            --story-color: color-mix(in oklch, var(--story-color) 90%, white);
          }

          /* Fallback for browsers without color-mix support */
          @supports not (color: color-mix(in oklch, black 10%, white)) {
            .story-color[style*="#FFD700"],
            .story-color[style*="ffd700"] { --story-color: #ffd24d; } /* brighter gold */
          }
        `}
      `}),i.jsx("div",{className:t,dangerouslySetInnerHTML:o})]})}const GE="https://www.patreon.com/cw/oc_wanderer";function Tx({variant:e,className:t="",url:r}){const{theme:n}=Wt(),[s,a]=g.useState(r||"");g.useEffect(()=>{if(r){a(r);return}let h=!1;return(async()=>{var f;try{const p=await fetch("/api/socials/get.php",{credentials:"same-origin",cache:"no-cache"});if(p.ok){const m=await p.json().catch(()=>null),x=((f=m==null?void 0:m.socials)==null?void 0:f.patreon)||(m==null?void 0:m.patreon);!h&&x&&a(x)}}catch{}finally{h||a(p=>p||GE)}})(),()=>{h=!0}},[r]);const o=g.useMemo(()=>s||r||GE,[s,r]),l=n==="light"?"text-gray-900":"text-white",c=n==="light"?"text-gray-700":"text-neutral-200",d=n==="light"?"bg-gradient-to-r from-orange-50 via-white to-amber-50 border-orange-200":"bg-gradient-to-r from-orange-900/40 via-neutral-900 to-amber-900/30 border-white/10",u="inline-flex items-center justify-center gap-2 rounded-xl bg-orange-500 px-5 py-3 text-sm font-semibold text-white shadow-lg shadow-orange-500/20 hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2";return o?e==="button"?i.jsx("a",{href:o,target:"_blank",rel:"noreferrer",className:`${u} ${t}`,children:" Support on Patreon"}):e==="banner"?i.jsxs("div",{className:`flex flex-col sm:flex-row items-center justify-between gap-4 border rounded-2xl p-5 ${d} ${t}`,children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-orange-500",children:"Patreon"}),i.jsx("h3",{className:`text-xl font-bold ${l}`,children:"Love the stories?"}),i.jsx("p",{className:`text-sm ${c}`,children:"Join on Patreon for early chapters, behind-the-scenes notes, and to keep the adventures coming."})]}),i.jsx("a",{href:o,target:"_blank",rel:"noreferrer",className:u,children:"Become a patron"})]}):i.jsxs("div",{className:`flex flex-col sm:flex-row items-center gap-3 border rounded-2xl p-5 ${d} ${t}`,children:[i.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-full bg-orange-500/15 text-orange-500",children:""}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:`text-lg font-bold ${l}`,children:"Fuel the journey"}),i.jsx("p",{className:`text-sm ${c}`,children:"Get early access, vote on what comes next, and support the author directly."})]}),i.jsx("a",{href:o,target:"_blank",rel:"noreferrer",className:u,children:"Support on Patreon"})]}):null}function Eq(){const{theme:e}=Wt(),[t,r]=g.useState([]),[n,s]=g.useState(null),[a,o]=g.useState(null),[l,c]=g.useState({});g.useEffect(()=>{document.title="My Stories"},[]),g.useEffect(()=>{async function x(){const y=(await pV()).map(v=>({...v,progress:xg(v.id)}));r(y);try{const w=await(await fetch("/api/author/get.php")).json();w.success&&o(w.profile)}catch(v){console.error("Failed to fetch author profile:",v)}}x()},[]);const d=(x,b,y)=>{x.preventDefault(),x.stopPropagation(),s({src:b,title:y})},u=a?e==="light"?$r(a.background_image_light||a.background_image,"/images/lofi_light_bg.webp"):$r(a.background_image_dark||a.background_image,"/images/lofi_bg.webp"):e==="light"?"/images/lofi_light_bg.webp":"/images/lofi_bg.webp",h=e==="light"?"bg-white/60":"bg-black/40",f=e==="light"?"bg-white/70 border-gray-300":"bg-black/70 border-white/20",p=e==="light"?"text-gray-900":"text-white",m=e==="light"?"text-gray-700":"text-neutral-300";return i.jsxs(i.Fragment,{children:[i.jsx(Xr,{breadcrumbs:[{label:"Stories"}]}),i.jsxs("div",{className:"relative min-h-screen w-full",children:[i.jsx("div",{className:"fixed inset-0 -z-10 bg-no-repeat bg-top [background-size:auto_100%] md:[background-size:100%_auto]",style:{backgroundImage:`url('${u}')`,backgroundColor:e==="light"?"#f7f7f7":"#0a0a0a"}}),i.jsx("div",{className:`fixed inset-0 ${h} -z-10`}),i.jsxs("div",{className:"relative z-10 mx-auto max-w-6xl px-4 py-8",children:[i.jsx("h1",{className:`mb-12 text-center text-4xl font-bold tracking-tight ${p}`,children:"All Stories"}),i.jsx("ul",{className:"space-y-8",children:t.map(x=>{var b;return i.jsx("li",{children:i.jsx("article",{className:`overflow-hidden rounded-xl border ${f} shadow-lg transition-all ${e==="light"?"hover:border-gray-400 hover:bg-white/80":"hover:border-white/30 hover:bg-black/80"} hover:shadow-xl`,children:i.jsxs("div",{className:"flex flex-col lg:flex-row",children:[i.jsx("div",{className:"lg:w-48 lg:flex-shrink-0 p-4",children:i.jsx("img",{src:x.cover,alt:`${x.title} cover`,className:"w-full aspect-[2/3] cursor-pointer object-cover rounded-lg shadow-md transition-opacity hover:opacity-90",onClick:y=>d(y,x.cover,x.title)})}),i.jsxs("div",{className:"flex flex-1 flex-col justify-between p-6",children:[i.jsxs("div",{children:[i.jsx(Me,{to:`/storytime/story/${x.id}`,className:"group",children:i.jsx("h2",{className:`mb-3 text-2xl font-bold ${p} transition-colors group-hover:text-blue-400`,children:x.title})}),i.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-2",children:[Array.isArray(x.genres)&&x.genres.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-2",children:[(l[x.id]?x.genres:x.genres.slice(0,3)).map((y,v)=>i.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${e==="light"?"bg-gray-200 text-gray-800":"bg-white/10 text-neutral-200"}`,children:y},v)),x.genres.length>3&&i.jsx("button",{type:"button",onClick:()=>c(y=>({...y,[x.id]:!y[x.id]})),className:`text-xs underline-offset-2 hover:underline ${m}`,children:l[x.id]?"show less":`+${x.genres.length-3} more`})]}),(x.chapter_count!=null||x.total_likes!=null||x.total_words!=null)&&Array.isArray(x.genres)&&x.genres.length>0&&i.jsx("span",{className:`mx-2 ${m}`,children:""}),(x.chapter_count!=null||x.total_likes!=null||x.total_words!=null)&&i.jsxs("div",{className:`flex items-center gap-3 ${m} text-sm`,children:[i.jsxs("span",{children:[(x.chapter_count??0).toLocaleString()," ",(x.chapter_count??0)===1?"chapter":"chapters"]}),i.jsx("span",{children:""}),i.jsxs("span",{children:[(x.total_likes??0).toLocaleString()," ",(x.total_likes??0)===1?"like":"likes"]}),x.total_words!=null&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:""}),i.jsxs("span",{children:[(x.total_words??0).toLocaleString()," ",(x.total_words??0)===1?"word":"words"]})]})]})]}),x.blurb&&i.jsx("div",{className:`mb-6 ${m}`,children:i.jsx(_$,{markdown:x.blurb,className:`max-w-none prose prose-p:mb-3 ${e==="light"?"prose-gray":"prose-invert"}`})})]}),i.jsxs("div",{className:"mt-1 flex flex-wrap gap-3",children:[i.jsx(Me,{to:`/storytime/story/${x.id}`,className:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-white shadow hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500",children:"Start Reading"}),x.progress&&typeof x.progress.chapterIndex=="number"&&i.jsxs(Me,{to:`/storytime/story/${x.id}/chapter/${x.progress.chapterIndex}`,className:"inline-flex items-center rounded-lg bg-green-600 px-4 py-2 text-white shadow hover:bg-green-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500",children:["Continue  Chapter ",x.progress.chapterIndex]})]}),Array.isArray(x.external_links)&&x.external_links.length>0&&i.jsxs("div",{className:`mt-2 text-sm ${m}`,children:[i.jsx("span",{className:"mr-2",children:"Find on"}),i.jsx("span",{className:"inline-flex flex-wrap gap-x-2 gap-y-1",children:x.external_links.map((y,v)=>i.jsx("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",className:`underline decoration-dotted ${e==="light"?"text-blue-700 hover:text-blue-800":"text-blue-300 hover:text-blue-200"}`,children:i.jsx("strong",{children:y.label})},v))})]}),typeof((b=x.progress)==null?void 0:b.percent)=="number"&&i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:`h-2 w-full rounded-full ${e==="light"?"bg-gray-300":"bg-white/20"}`,children:i.jsx("div",{className:"h-2 rounded-full bg-green-500",style:{width:`${Math.max(0,Math.min(100,x.progress.percent))}%`}})}),i.jsxs("p",{className:`mt-1 text-xs ${e==="light"?"text-gray-500":"text-neutral-400"}`,children:[Math.round(x.progress.percent),"% read"]})]})]})]})})},x.id)})}),n&&i.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/90 p-4",role:"dialog","aria-modal":"true",onClick:()=>s(null),children:i.jsxs("div",{className:"relative max-h-[92vh] w-full max-w-5xl",onClick:x=>x.stopPropagation(),children:[i.jsx("img",{src:n.src,alt:n.title,className:"max-h-[92vh] w-full object-contain"}),i.jsx("button",{onClick:()=>s(null),className:"absolute -top-3 -right-3 grid h-10 w-10 place-items-center rounded-full bg-white/10 text-white backdrop-blur hover:bg-white/20","aria-label":"Close",children:""}),i.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 rounded bg-black/70 px-3 py-1 text-sm text-white",children:n.title})]})}),i.jsxs("div",{className:`mt-14 ${f} border rounded-2xl p-6 text-center`,children:[i.jsx("h3",{className:`text-xl font-bold ${p}`,children:"Never miss a chapter"}),i.jsx("p",{className:`mt-2 text-sm ${m}`,children:"Get updates when new stories or chapters go live, or support the journey on Patreon."}),i.jsxs("div",{className:"mt-4 flex flex-col items-center justify-center gap-3 sm:flex-row sm:gap-4",children:[i.jsx(pa,{variant:"button",source:"storytime_home"}),i.jsx(Tx,{variant:"button"})]})]}),i.jsx("footer",{className:`relative z-10 mt-16 border-t ${f} py-8 ${e==="light"?"border-gray-300":"border-white/20"}`,children:i.jsx("div",{className:"mx-auto max-w-6xl px-4",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx(ar,{variant:"footer",showCopyright:!1}),i.jsxs("p",{className:`text-sm ${e==="light"?"text-gray-500":"text-neutral-400"}`,children:[" ",new Date().getFullYear()," All rights reserved."]})]})})})]})]})]})}function Aq(){var R;const{storyId:e}=Id(),{theme:t}=Wt(),[r,n]=g.useState(null),[s,a]=g.useState([]),[o,l]=g.useState(null),[c,d]=g.useState(null),[u,h]=g.useState(!0),[f,p]=g.useState(1),[m,x]=g.useState(0),[b,y]=g.useState(!1),[v,w]=g.useState(!1),[j,N]=g.useState(null),k=async(B=1,q=!1)=>{if(e){q||y(!0);try{const ue=await(await fetch(`${Ce}/chapters/list.php?story_slug=${encodeURIComponent(e)}&page=${B}&limit=20`)).json();if(ue.success){const U=(ue.chapters||[]).map(V=>({num:V.chapter_number,title:V.title,id:V.id,status:V.status,like_count:V.like_count||0,comment_count:V.comment_count||0}));a(q?V=>[...V,...U]:U),x(ue.total||0),w((ue.page||1)*(ue.limit||20)<(ue.total||0))}else throw new Error("API returned unsuccessful")}catch(X){console.error("Error loading chapters:",X),console.log("Database offline, using mock chapter data");const ue=ln.storytime.chapters[e];if(ue&&Array.isArray(ue)){const U=ue.map(V=>({num:V.num,title:V.title,status:"published",like_count:V.like_count||0,comment_count:V.comment_count||0}));a(q?V=>[...V,...U]:U),x(U.length),w(!1)}}finally{y(!1)}}};g.useEffect(()=>{async function B(){if(!e)return;h(!0);const[q,X]=await Promise.all([fN(e),d$()]);n(q),d(X),l(xg(e)),q&&await k(1,!1),h(!1)}B()},[e]),g.useEffect(()=>{u||!r||!e||Rd.trackStoryView(e,parseInt(r.id)||0)},[u,r,e]);const S=()=>{if(!b&&v){const B=f+1;p(B),k(B,!0)}},C=()=>{e&&(wV(e),l(null))},P=(B,q,X)=>{B.preventDefault(),B.stopPropagation(),N({src:q,title:X})},E=B=>B.title?B.title:B.num===0?"Prologue":`Chapter ${B.num}`;if(u)return i.jsx("div",{children:"Loading story..."});if(!r||!c)return i.jsx("div",{children:"Loading story..."});const O=B=>B.replace(/^#{1,6}\s+/gm,"").replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/__([^_]+)__/g,"$1").replace(/_([^_]+)_/g,"$1").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/\n+/g," ").replace(/\s+/g," ").trim(),A=c.site_domain||"example.com",_=`https://${A}/storytime/story/${e}`,I=r.blurb?O(r.blurb).substring(0,160)+(O(r.blurb).length>160?"...":""):`Read ${r.title}, a ${((R=r.genres)==null?void 0:R.join(", "))||"story"} by ${c.name}. ${c.tagline}`,D=`${r.title} | ${c.name} | ${c.bio}`,$=[...r.primary_keywords?r.primary_keywords.split(",").map(B=>B.trim()):[],...r.longtail_keywords?r.longtail_keywords.split(",").map(B=>B.trim()):[],"web serial","online novel","illustrated story"].filter(Boolean).join(", "),L=r.genres&&r.genres.length>0?r.genres:["Fiction","Web Serial"],M=c?t==="light"?$r(c.background_image_light||c.background_image,"/images/lofi_light_bg.webp"):$r(c.background_image_dark||c.background_image,"/images/lofi_bg.webp"):t==="light"?"/images/lofi_light_bg.webp":"/images/lofi_bg.webp",T=t==="light"?"bg-white/60":"bg-black/40",G=t==="light"?"bg-white/70 border-gray-300":"bg-black/70 border-white/20",Y=t==="light"?"text-gray-900":"text-white",ee=t==="light"?"text-gray-700":"text-neutral-300";return i.jsxs(i.Fragment,{children:[i.jsxs(En,{children:[i.jsx("title",{children:D}),i.jsx("meta",{name:"description",content:I}),i.jsx("link",{rel:"canonical",href:_}),i.jsx("meta",{property:"og:title",content:r.title}),i.jsx("meta",{property:"og:description",content:I}),i.jsx("meta",{property:"og:image",content:r.cover.startsWith("http")?r.cover:`https://${A}${r.cover}`}),i.jsx("meta",{property:"og:type",content:"book"}),i.jsx("meta",{property:"og:url",content:_}),i.jsx("meta",{property:"og:site_name",content:c.name}),i.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),i.jsx("meta",{name:"twitter:title",content:r.title}),i.jsx("meta",{name:"twitter:description",content:I}),i.jsx("meta",{name:"twitter:image",content:r.cover.startsWith("http")?r.cover:`https://${A}${r.cover}`}),i.jsx("meta",{name:"twitter:creator",content:""}),i.jsx("meta",{name:"author",content:c.name}),i.jsx("meta",{name:"keywords",content:$}),i.jsx("meta",{property:"book:author",content:c.name}),i.jsx("meta",{property:"book:genre",content:L.join(", ")}),r.target_audience&&i.jsx("meta",{name:"audience",content:r.target_audience}),i.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Book",name:r.title,description:I,author:{"@type":"Person",name:c.name},genre:L,url:_,image:r.cover.startsWith("http")?r.cover:`https://${A}${r.cover}`,publisher:{"@type":"Person",name:c.name},inLanguage:"en-US"})})]}),i.jsx(Xr,{breadcrumbs:[{label:"Stories",path:"/storytime"},{label:r.title}]}),i.jsxs("div",{className:"relative min-h-screen w-full",children:[i.jsx("div",{className:"fixed inset-0 -z-10 bg-no-repeat bg-top [background-size:auto_100%] md:[background-size:100%_auto]",style:{backgroundImage:`url('${M}')`,backgroundColor:t==="light"?"#f7f7f7":"#0a0a0a"}}),i.jsx("div",{className:`fixed inset-0 ${T} -z-10`}),i.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto px-4 py-8",children:[i.jsx("div",{className:`${G} rounded-xl p-6 mb-6`,children:i.jsxs("div",{className:"flex flex-col lg:flex-row items-start gap-6",children:[i.jsx("div",{className:"lg:w-48 lg:flex-shrink-0 w-full",children:i.jsx("img",{src:r.cover,alt:`${r.title} cover`,className:"w-full aspect-[2/3] object-cover rounded-md cursor-pointer transition-opacity hover:opacity-90",onClick:B=>P(B,r.cover,r.title)})}),i.jsxs("div",{className:"text-left flex-1",children:[i.jsx("h1",{className:`text-3xl font-bold ${Y}`,children:r.title}),r.blurb&&i.jsx(_$,{markdown:r.blurb,className:`mt-2 ${ee} prose ${t==="light"?"prose-gray":"prose-invert"}`})]})]})}),i.jsx("div",{className:`${G} rounded-xl p-6 mb-6`,children:i.jsxs("div",{className:"flex gap-2",children:[s&&s.length>0&&i.jsx(Me,{to:`/storytime/story/${e}/chapter/${r.startIndex}`,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Start reading"}),o&&typeof o.chapterIndex=="number"&&i.jsxs(Me,{to:`/storytime/story/${e}/chapter/${o.chapterIndex}`,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:["Continue  Chapter ",o.chapterIndex]}),o&&i.jsx("button",{onClick:C,className:`px-4 py-2 border rounded-lg transition-colors ${t==="light"?"border-gray-400 text-gray-700 hover:bg-gray-100":"border-white/30 text-white hover:bg-white/10"}`,children:"Reset progress"})]})}),i.jsxs("div",{className:`${G} rounded-xl p-6`,children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:`text-xl font-semibold ${Y}`,children:"Chapters"}),m>0&&i.jsxs("span",{className:`text-sm ${ee}`,children:["Showing ",s.length," of ",m]})]}),!s&&i.jsx("p",{className:ee,children:"Loading"}),s&&i.jsxs(i.Fragment,{children:[i.jsx("ul",{className:"space-y-2",children:s.map(B=>i.jsxs("li",{className:`flex justify-between border rounded-xl p-3 transition-colors ${t==="light"?"border-gray-300 bg-gray-50 hover:bg-gray-100":"border-white/20 bg-white/5 hover:bg-white/10"}`,children:[i.jsx(Me,{to:`/storytime/story/${e}/chapter/${B.num}`,className:`hover:underline ${t==="light"?"text-gray-800 hover:text-blue-600":"text-neutral-200 hover:text-blue-400"}`,children:E(B)}),o&&o.chapterIndex===B.num&&i.jsx("span",{className:`text-xs ${t==="light"?"text-gray-500":"text-neutral-400"}`,children:"Last read"})]},B.num))}),v&&i.jsx("div",{className:"mt-4 text-center",children:i.jsx("button",{onClick:S,disabled:b,className:"px-6 py-2 rounded-lg transition-colors bg-blue-600 hover:bg-blue-700 text-white disabled:bg-blue-400",children:b?"Loading...":"Load More Chapters"})})]})]}),i.jsx("footer",{className:`mt-16 border-t ${G} rounded-xl py-8 ${t==="light"?"border-gray-300":"border-white/20"}`,children:i.jsx("div",{className:"mx-auto max-w-3xl px-4",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx(ar,{variant:"footer",showCopyright:!1}),i.jsxs("p",{className:`text-sm ${t==="light"?"text-gray-500":"text-neutral-400"}`,children:[" ",new Date().getFullYear()," All rights reserved."]})]})})})]})]}),j&&i.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/90 p-4",role:"dialog","aria-modal":"true",onClick:()=>N(null),children:i.jsxs("div",{className:"relative max-h-[92vh] w-full max-w-5xl",onClick:B=>B.stopPropagation(),children:[i.jsx("img",{src:j.src,alt:j.title,className:"max-h-[92vh] w-full object-contain"}),i.jsx("button",{onClick:()=>N(null),className:"absolute -top-3 -right-3 grid h-10 w-10 place-items-center rounded-full bg-white/10 text-white backdrop-blur hover:bg-white/20","aria-label":"Close",children:""}),i.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 rounded bg-black/70 px-3 py-1 text-sm text-white",children:j.title})]})})]})}function Tq({storyId:e,chapterId:t}){const{theme:r}=Wt(),[n,s]=g.useState([]),[a,o]=g.useState({count:0,userLiked:!1}),[l,c]=g.useState(""),[d,u]=g.useState(""),[h,f]=g.useState(!0),[p,m]=g.useState(!1),[x,b]=g.useState(""),[y,v]=g.useState(null);g.useEffect(()=>{let E=!1;async function O(){f(!0);try{const A=await fN(e);if(A&&!E){const _=await j1(A,t.toString());E||v(_&&_.id!==void 0?_.id:null)}else E||v(null)}catch{E||v(null)}}return O(),()=>{E=!0}},[e,t]),g.useEffect(()=>{y&&(w(),j())},[y]);const w=async()=>{if(y)try{const E=await vV(y);s(Array.isArray(E)?E:[])}catch(E){console.error("Failed to load comments:",E)}finally{f(!1)}},j=async()=>{if(y)try{const E=await bV(y);E.like_count!==void 0&&o({count:E.like_count,userLiked:E.user_liked})}catch(E){console.error("Failed to load likes:",E)}},N=async()=>{if(y)try{const E=await xV(y);E.success&&o({count:E.like_count,userLiked:E.user_liked})}catch(E){console.error("Failed to process like:",E)}},k=async E=>{if(E.preventDefault(),!(!l.trim()||!y)){m(!0),b("");try{const O=await yV(y,d.trim()||"Anonymous",l.trim());O.success?(b(O.message||"Comment submitted successfully"),c(""),u(""),w()):b(O.error||"Failed to submit comment")}catch{b("Failed to submit comment. Please try again.")}finally{m(!1)}}},S=r==="light"?"bg-white/70 border-gray-300":"bg-black/70 border-white/20",C=r==="light"?"text-gray-900":"text-white",P=r==="light"?"text-gray-700":"text-neutral-300";return h?i.jsx("div",{className:"max-w-3xl mx-auto px-4 md:px-6 py-8",children:i.jsx("div",{className:`${S} rounded-xl p-6`,children:i.jsx("div",{className:P,children:"Loading comments..."})})}):i.jsx("div",{className:"max-w-3xl mx-auto px-4 md:px-6 py-8",children:i.jsxs("div",{className:`${S} rounded-xl p-6 border-t ${r==="light"?"border-gray-300":"border-white/20"}`,children:[i.jsx("div",{className:"mb-8",children:i.jsxs("button",{onClick:N,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${a.userLiked?"bg-red-600 hover:bg-red-700 text-white":r==="light"?"bg-gray-100 hover:bg-gray-200 text-gray-700 border border-gray-300":"bg-white/10 hover:bg-white/20 text-neutral-300 border border-white/20"}`,children:[i.jsx("span",{className:"text-lg",children:""}),i.jsxs("span",{children:[a.count," ",a.count===1?"like":"likes"]})]})}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:`text-xl font-bold mb-4 ${C}`,children:["Comments (",n.length,")"]}),n.length===0?i.jsx("p",{className:`italic ${P}`,children:"No comments yet. Be the first to comment!"}):i.jsx("div",{className:"space-y-4",children:n.map(E=>i.jsxs("div",{className:`rounded-lg p-4 border ${r==="light"?"bg-gray-50 border-gray-300":"bg-white/10 border-white/20"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("span",{className:`font-medium ${P}`,children:E.author_name}),i.jsx("span",{className:`text-sm ${r==="light"?"text-gray-500":"text-neutral-500"}`,children:E.created_at})]}),i.jsx("p",{className:`whitespace-pre-wrap ${C}`,children:E.comment_text})]},E.id))})]}),i.jsxs("div",{className:`rounded-lg p-6 border ${r==="light"?"bg-gray-50 border-gray-300":"bg-white/10 border-white/20"}`,children:[i.jsx("h4",{className:`text-lg font-semibold mb-4 ${C}`,children:"Leave a Comment"}),x&&i.jsx("div",{className:`mb-4 p-3 rounded border ${x.includes("successfully")?r==="light"?"bg-green-100 text-green-800 border-green-300":"bg-green-900/50 text-green-200 border-green-700":r==="light"?"bg-red-100 text-red-800 border-red-300":"bg-red-900/50 text-red-200 border-red-700"}`,children:x}),i.jsxs("form",{onSubmit:k,className:"space-y-4",children:[i.jsx("input",{type:"text",name:"website",value:"",onChange:()=>{},style:{display:"none"},tabIndex:-1,autoComplete:"off"}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"authorName",className:`block text-sm font-medium mb-1 ${P}`,children:"Name (optional)"}),i.jsx("input",{type:"text",id:"authorName",value:d,onChange:E=>u(E.target.value),placeholder:"Anonymous",maxLength:100,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${r==="light"?"border-gray-300 bg-white text-gray-900 placeholder-gray-500":"border-white/30 bg-white/10 text-neutral-200 placeholder-neutral-500"}`})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"comment",className:`block text-sm font-medium mb-1 ${P}`,children:"Comment"}),i.jsx("textarea",{id:"comment",value:l,onChange:E=>c(E.target.value),placeholder:"Share your thoughts about this chapter...",maxLength:1e3,rows:4,required:!0,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-vertical ${r==="light"?"border-gray-300 bg-white text-gray-900 placeholder-gray-500":"border-white/30 bg-white/10 text-neutral-200 placeholder-neutral-500"}`}),i.jsxs("div",{className:`text-right text-sm mt-1 ${r==="light"?"text-gray-500":"text-neutral-500"}`,children:[l.length,"/1000 characters"]})]}),i.jsx("button",{type:"submit",disabled:p||!l.trim(),className:`w-full font-medium py-2 px-4 rounded-md transition-colors ${p||!l.trim()?r==="light"?"bg-gray-300 cursor-not-allowed text-gray-500":"bg-neutral-700 cursor-not-allowed text-neutral-400":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:p?"Submitting...":"Submit Comment"})]}),i.jsx("p",{className:`text-sm mt-3 ${r==="light"?"text-gray-500":"text-neutral-500"}`,children:"Comments appear immediately. Please be respectful and follow community guidelines."})]})]})})}function Pq({onSelect:e,onClose:t}){const[r,n]=g.useState([]),[s,a]=g.useState(null),[o,l]=g.useState([]),[c,d]=g.useState(!0),[u,h]=g.useState(!1);g.useEffect(()=>{(async()=>{try{const y=(await(await fetch(`${Ce}/galleries/list.php?include_unpublished=1&limit=100`,{credentials:"same-origin"})).json()).galleries||[];y.length>0&&(n(y),a(y[0].id))}catch(x){console.error("Failed to load galleries:",x)}finally{d(!1)}})()},[]),g.useEffect(()=>{if(!s){l([]);return}(async()=>{h(!0);try{const b=await(await fetch(`${Ce}/images/gallery-list.php?gallery_id=${s}`,{credentials:"same-origin"})).json();l(b.images||[])}catch(x){console.error("Failed to load images:",x),l([])}finally{h(!1)}})()},[s]);const f=m=>{const x=m.src||m.thumb,b=x.startsWith("/")?x:`/${x}`,y=m.title||m.prompt||"Image";e(b,y)},p=m=>{m.target===m.currentTarget&&t()};return i.jsx("div",{className:"fixed inset-0 z-[60] grid place-items-center bg-black/60 p-4",role:"dialog","aria-modal":"true",onClick:p,children:i.jsxs("div",{className:"w-full max-w-3xl rounded-lg bg-white dark:bg-gray-900 p-6 max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Select Image"}),i.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c?i.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Loading galleries..."}):r.length===0?i.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No galleries found. Create a gallery first in the admin panel."}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Gallery"}),i.jsx("select",{value:s||"",onChange:m=>a(Number(m.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:r.map(m=>i.jsx("option",{value:m.id,children:m.title},m.id))})]}),u?i.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Loading images..."}):o.length===0?i.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No images in this gallery."}):i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3",children:o.map(m=>{var x;return i.jsxs("button",{onClick:()=>f(m),className:"group relative aspect-square overflow-hidden rounded-lg border-2 border-transparent hover:border-blue-500 transition-colors",children:[i.jsx("img",{src:(x=m.thumb)!=null&&x.startsWith("/")?m.thumb:`/${m.thumb}`,alt:m.title||"Gallery image",className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors flex items-center justify-center",children:i.jsx("span",{className:"opacity-0 group-hover:opacity-100 text-white text-sm font-medium",children:"Select"})})]},m.id)})})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white",children:"Cancel"})})]})})}function Mq({storySlug:e,chapterNumber:t,onClose:r,onSaved:n}){const s=Fo(),a=g.useRef(null),[o,l]=g.useState({id:0,title:"",slug:"",content:"",chapter_number:t,status:"draft"}),[c,d]=g.useState(!0),[u,h]=g.useState(!1),[f,p]=g.useState(""),[m,x]=g.useState(!1);g.useEffect(()=>{(async()=>{try{p("");const N=await(await fetch(`${Ce}/chapters/list.php?story_slug=${encodeURIComponent(e)}&chapter_number=${t}`,{credentials:"same-origin"})).json();if(N.success&&N.chapters&&N.chapters.length>0){const k=N.chapters[0];l({id:k.id,title:k.title||"",slug:k.slug||"",content:k.content||"",chapter_number:k.chapter_number,status:k.status||"draft"})}else throw new Error("Chapter not found")}catch(j){p(j instanceof Error?j.message:"Failed to load chapter")}finally{d(!1)}})()},[e,t]);const b=async()=>{h(!0),p("");try{const w=await fetch(`${Ce}/chapters/update.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(o)}),j=await w.json();if(!w.ok||!j.success)throw new Error(j.error||"Save failed");mV(e),n(o.content),o.chapter_number!==t&&s(`/storytime/story/${e}/chapter/${o.chapter_number}`),r()}catch(w){p(w instanceof Error?w.message:"Save failed")}finally{h(!1)}},y=(w,j)=>{l(N=>({...N,[w]:j}))},v=w=>{w.target===w.currentTarget&&r()};return c?i.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60 p-4",role:"dialog","aria-modal":"true",children:i.jsx("div",{className:"w-full max-w-3xl rounded-lg bg-white dark:bg-gray-900 p-6",children:i.jsx("div",{className:"text-center text-gray-900 dark:text-white",children:"Loading chapter..."})})}):i.jsxs("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60 p-4",role:"dialog","aria-modal":"true",onClick:v,children:[i.jsxs("div",{className:"w-full max-w-4xl rounded-lg bg-white dark:bg-gray-900 p-6 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Edit Chapter"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:b,disabled:u||!o.title.trim()||!o.content.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:u?"Saving...":"Save Chapter"}),i.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),f&&i.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-400 rounded",children:f}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),i.jsx("input",{type:"text",value:o.title,onChange:w=>y("title",w.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Chapter title"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Slug"}),i.jsx("input",{type:"text",value:o.slug,onChange:w=>y("slug",w.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"chapter-slug"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Chapter Number"}),i.jsx("input",{type:"number",value:o.chapter_number,onChange:w=>y("chapter_number",parseInt(w.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"0"}),i.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Use 0 for prologue or special chapters"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),i.jsxs("select",{value:o.status,onChange:w=>y("status",w.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Content (Markdown)"}),i.jsxs("button",{type:"button",onClick:()=>x(!0),className:"flex items-center gap-1 px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Insert Image"]})]}),i.jsx("textarea",{ref:a,value:o.content,onChange:w=>y("content",w.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white font-mono text-sm",rows:20,placeholder:"Write your chapter content in Markdown..."})]})]})]}),m&&i.jsx(Pq,{onSelect:(w,j)=>{const N=a.current;if(N){const k=N.selectionStart,S=N.selectionEnd,C=`![${j}](${w})`,P=o.content.slice(0,k)+C+o.content.slice(S);y("content",P),setTimeout(()=>{N.focus(),N.setSelectionRange(k+C.length,k+C.length)},0)}x(!1)},onClose:()=>x(!1)})]})}const Oq={yellow:"#FFD700",gold:"#FFD700",gray:"#808080",grey:"#808080",red:"#DC143C",crimson:"#DC143C",purple:"#9370DB",violet:"#9370DB",blue:"#4169E1",royalblue:"#4169E1",green:"#32CD32",lime:"#32CD32",orange:"#FF8C00",darkorange:"#FF8C00",pink:"#FF69B4",hotpink:"#FF69B4",cyan:"#00CED1",darkturquoise:"#00CED1",magenta:"#FF00FF",fuchsia:"#FF00FF",brown:"#8B4513",saddlebrown:"#8B4513",white:"#FFFFFF",black:"#000000",silver:"#C0C0C0",maroon:"#800000",olive:"#808000",navy:"#000080",teal:"#008080",aqua:"#00FFFF",indigo:"#4B0082",coral:"#FF7F50",salmon:"#FA8072",khaki:"#F0E68C",lavender:"#E6E6FA",mint:"#98FF98",peach:"#FFDAB9",rose:"#FFE4E1",sky:"#87CEEB",tan:"#D2B48C"};function $q(e){return e.replace(/\{(\w+)\}([\s\S]*?)\{\/\1\}/g,(t,r,n)=>{const s=Oq[r.toLowerCase()];return s?`<span class="story-color" style="--story-color: ${s};">${n}</span>`:t})}function Dq(){var T,G;const{storyId:e,chapterId:t}=Id(),{theme:r}=Wt(),{user:n}=za(),[s,a]=g.useState(null),[o,l]=g.useState(""),[c,d]=g.useState(null),[u,h]=g.useState(null),[f,p]=g.useState(!0),[m,x]=g.useState(null),[b,y]=g.useState(!1),v=g.useRef(null),w=g.useRef(null);g.useEffect(()=>{async function Y(){if(!e||!t)return;p(!0);const[ee,R]=await Promise.all([fN(e),d$()]);if(a(ee),d(R),ee)try{const[B,q]=await Promise.all([gV(ee,t),j1(ee,t)]);l(B),h(q);const X=parseInt(t,10)+1,ue=await j1(ee,String(X));x(ue?X:null)}catch{l("# Chapter not found"),x(null)}p(!1)}Y()},[e,t]),g.useEffect(()=>{if(f||!s||!e||!t)return;const Y=new AbortController,R=(async()=>{try{const q=await(await fetch(`${Ce}/chapters/list.php?story_slug=${encodeURIComponent(e)}&chapter_number=${t}`,{signal:Y.signal})).json();if(q.success&&q.chapters&&q.chapters.length>0){const X=q.chapters[0],ue=Number(s.id)||0;return Rd.trackChapterView({chapterId:X.id,storyId:ue,storySlug:e,chapterNumber:Number(t)}),v.current&&(w.current=new ZW(v.current)),()=>{w.current&&(w.current.destroy({chapterId:X.id,storyId:ue}),w.current=null)}}}catch(B){B.name!=="AbortError"&&console.debug("Failed to track chapter analytics:",B)}})();return()=>{Y.abort(),R.then(B=>B==null?void 0:B())}},[f,s,e,t]);const j=g.useMemo(()=>{if(!o)return{__html:""};let Y=ft.parse(o);const ee=(s==null?void 0:s.breakImage)||"/api/uploads/page_break.png",R=Y.replace(/<hr\s*\/?>/g,`<img src="${ee}" alt="" class="page-break" />`);if(s!=null&&s.enableDropCap){let q=R.replace(/(<p[^>]*>)([^<\s])/,(X,ue,U)=>`${ue}<span class="drop-cap">${U}</span>`);q=q.replace(/(class="page-break"[^>]*>\s*)(<p[^>]*>)([^<\s])/g,(X,ue,U,V)=>`${ue}${U}<span class="drop-cap">${V}</span>`),Y=q}else Y=R;const B=$q(Y);return{__html:NN.sanitize(B,{ADD_TAGS:["img","span"],ADD_ATTR:["src","alt","title","class","style"]})}},[o,s]);if(g.useEffect(()=>{var ee;if(f||!e||!t)return;const Y=xg(e);Y&&Y.chapterIndex===parseInt(t,10)&&((ee=v.current)==null||ee.scrollTo({top:Y.scrollY,behavior:"auto"}))},[f,e,t]),g.useEffect(()=>{if(f||!e||!t)return;const Y=parseInt(t,10),ee=xg(e);(!ee||ee.chapterIndex!==Y)&&ME(e,{chapterIndex:Y,scrollY:0})},[f,e,t]),g.useEffect(()=>{if(f||!e||!t)return;const Y=v.current;if(!Y)return;let ee;const R=()=>{cancelAnimationFrame(ee),ee=requestAnimationFrame(()=>{try{ME(e,{chapterIndex:parseInt(t,10),scrollY:Y.scrollTop})}catch(B){console.warn("Failed to save reading progress:",B)}})};return Y.addEventListener("scroll",R,{passive:!0}),()=>{Y.removeEventListener("scroll",R),ee&&cancelAnimationFrame(ee)}},[e,t,f]),g.useEffect(()=>{if(s!=null&&s.enableDropCap&&(s!=null&&s.dropCapFont)&&s.dropCapFont!=="serif"){const B={cinzel:"Cinzel:wght@400;600;700",playfair:"Playfair+Display:wght@400;600;700",cormorant:"Cormorant:wght@400;600;700",unna:"Unna:wght@400;700",crimson:"Crimson+Pro:wght@400;600;700"}[s.dropCapFont];if(B&&!document.getElementById(`font-${s.dropCapFont}`)){const q=document.createElement("link");q.id=`font-${s.dropCapFont}`,q.rel="stylesheet",q.href=`https://fonts.googleapis.com/css2?family=${B}&display=swap`,document.head.appendChild(q)}}const Y=()=>{if(!(s!=null&&s.enableDropCap))return"serif";const R=s.dropCapFont||"serif";return{serif:"Georgia, serif",cinzel:'"Cinzel", serif',playfair:'"Playfair Display", serif',cormorant:'"Cormorant", serif',unna:'"Unna", serif',crimson:'"Crimson Pro", serif'}[R]||"Georgia, serif"},ee=document.createElement("style");return ee.id="story-break-style",ee.textContent=`
      /* Drop cap styling */
      .drop-cap {
        float: left;
        font-size: 3.5em;
        line-height: 0.85;
        margin-right: 0.1em;
        margin-top: 0.05em;
        font-weight: 600;
        font-family: ${Y()};
        ${r==="light"?"color: #1a1a1a;":"color: #f0f0f0;"}
      }

      .page-break {
        display: block;
        width: 100%;
        height: auto;
        margin: 2rem 0;
        filter: ${r==="light"?"drop-shadow(0 0 10px rgba(0,0,0,0.45)) drop-shadow(0 0 20px rgba(0,0,0,0.25))":"none"};
      }

      /* Base color rule */
      .story-color,
      .story-color * {
        color: var(--story-color) !important;
      }

      /* Theme-aware contrast adjustments */
      ${r==="light"?`
        .story-color,
        .story-color * {
          --story-color: color-mix(in oklch, var(--story-color) 65%, black);
        }

        /* Fallback for browsers without color-mix support */
        @supports not (color: color-mix(in oklch, black 10%, white)) {
          .story-color[style*="#FFD700"],
          .story-color[style*="ffd700"] { --story-color: #b8860b; } /* darker gold */
          .story-color[style*="#808080"],
          .story-color[style*="808080"] { --story-color: #4a4a4a; } /* darker gray */
        }
      `:`
        .story-color,
        .story-color * {
          --story-color: color-mix(in oklch, var(--story-color) 90%, white);
        }

        /* Fallback for browsers without color-mix support */
        @supports not (color: color-mix(in oklch, black 10%, white)) {
          .story-color[style*="#FFD700"],
          .story-color[style*="ffd700"] { --story-color: #ffd24d; } /* brighter gold */
        }
      `}
    `,document.head.appendChild(ee),()=>{const R=document.getElementById("story-break-style");R&&document.head.removeChild(R)}},[r,s==null?void 0:s.enableDropCap,s==null?void 0:s.dropCapFont]),f)return i.jsx("div",{children:"Loading chapter..."});if(!s||!c)return i.jsx("div",{children:"Loading chapter..."});const N=Y=>Y.replace(/^#{1,6}\s+/gm,"").replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/__([^_]+)__/g,"$1").replace(/_([^_]+)_/g,"$1").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/\n+/g," ").replace(/\s+/g," ").trim(),k=()=>{if(!t)return"Chapter";const Y=parseInt(t,10),ee=u==null?void 0:u.title;return Y===0?ee||"Prologue":ee||`Chapter ${t}`},S=c.site_domain||"example.com",C=`https://${S}/storytime/story/${e}/chapter/${t}`,P=k(),E=`${P} - ${s.title}. Continue reading this ${((T=s.genres)==null?void 0:T.join(", "))||"story"} by ${c.name}.`,O=`${P} - ${s.title} | ${c.name} | ${c.bio}`,A=s!=null&&s.cover?s.cover.startsWith("http")?s.cover:`https://${S}${s.cover}`:`https://${S}/images/og-default.png`,_=o?(()=>{const Y=N(o);return Y.length>160?Y.slice(0,160)+"":Y||E})():E,I=c?r==="light"?$r(c.background_image_light||c.background_image,"/images/lofi_light_bg.webp"):$r(c.background_image_dark||c.background_image,"/images/lofi_bg.webp"):r==="light"?"/images/lofi_light_bg.webp":"/images/lofi_bg.webp",D=r==="light"?"bg-white/60":"bg-black/40",$=r==="light"?"bg-white/70 border-gray-300":"bg-black/70 border-white/20",L=r==="light"?"text-gray-900":"text-white",M=r==="light"?"text-gray-700":"text-neutral-300";return i.jsxs(i.Fragment,{children:[i.jsxs(En,{children:[i.jsx("title",{children:O}),i.jsx("meta",{name:"description",content:_}),i.jsx("link",{rel:"canonical",href:C}),i.jsx("meta",{property:"og:title",content:`${P} - ${s.title}`}),i.jsx("meta",{property:"og:description",content:_}),i.jsx("meta",{property:"og:image",content:A}),i.jsx("meta",{property:"og:type",content:"article"}),i.jsx("meta",{property:"og:url",content:C}),i.jsx("meta",{property:"og:site_name",content:c.name}),i.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),i.jsx("meta",{name:"twitter:title",content:`${P} - ${s.title}`}),i.jsx("meta",{name:"twitter:description",content:_}),i.jsx("meta",{name:"twitter:image",content:A}),i.jsx("meta",{name:"twitter:creator",content:""}),i.jsx("meta",{name:"author",content:c.name}),i.jsx("meta",{property:"article:author",content:c.name}),i.jsx("meta",{property:"article:section",content:((G=s.genres)==null?void 0:G.join(", "))||"Fiction"}),(u==null?void 0:u.updated_at)&&i.jsx("meta",{property:"article:modified_time",content:new Date(u.updated_at).toISOString()}),i.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Article",headline:`${P} - ${s.title}`,description:_,author:{"@type":"Person",name:c.name},publisher:{"@type":"Person",name:c.name},url:C,image:A,isPartOf:{"@type":"Book",name:s.title,url:`https://${S}/storytime/story/${e}`},inLanguage:"en-US",...(u==null?void 0:u.updated_at)&&{dateModified:new Date(u.updated_at).toISOString()}})})]}),i.jsx(jf,{}),i.jsxs("div",{className:"relative min-h-screen w-full",children:[i.jsx("div",{className:"fixed inset-0 -z-10 bg-no-repeat bg-top [background-size:auto_100%] md:[background-size:100%_auto]",style:{backgroundImage:`url('${I}')`,backgroundColor:r==="light"?"#f7f7f7":"#0a0a0a"}}),i.jsx("div",{className:`fixed inset-0 ${D} -z-10`}),i.jsxs("div",{className:"relative z-10 min-h-screen grid grid-rows-[auto,1fr] chapter-layout",children:[i.jsxs("header",{className:`sticky top-0 z-50 border-b ${$} ${r==="light"?"border-gray-300":"border-white/20"}`,children:[i.jsx("div",{className:"max-w-5xl mx-auto px-4 py-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:`flex items-center gap-2 text-sm ${M}`,children:[i.jsx("a",{href:"/",className:`hover:underline ${r==="light"?"hover:text-gray-900":"hover:text-neutral-200"}`,children:"Home"}),i.jsx("span",{children:"/"}),i.jsx(Me,{to:"/storytime",className:`hover:underline ${r==="light"?"hover:text-gray-900":"hover:text-neutral-200"}`,children:"Stories"}),i.jsx("span",{children:"/"}),i.jsx(Me,{to:`/storytime/story/${e}`,className:`hover:underline ${r==="light"?"hover:text-gray-900":"hover:text-neutral-200"}`,children:s.title}),i.jsx("span",{children:"/"}),i.jsx("span",{className:L,children:P})]}),UW(n)&&i.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-1 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]})}),(u==null?void 0:u.soundtrack_url)&&i.jsx("div",{className:`border-t ${r==="light"?"border-gray-300":"border-white/20"}`,children:i.jsx("div",{className:"max-w-5xl mx-auto px-4 py-2",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("svg",{className:`w-5 h-5 flex-shrink-0 ${r==="light"?"text-gray-700":"text-white"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),i.jsx("audio",{src:u.soundtrack_url,controls:!0,className:`w-full max-w-2xl rounded-lg ${r==="dark"?"bg-neutral-900 border border-neutral-800 p-2":""}`,style:r==="dark"?{colorScheme:"dark"}:void 0,preload:"metadata"})]})})})]}),i.jsxs("main",{ref:v,className:"overflow-y-auto",children:[i.jsx("div",{className:"max-w-4xl lg:max-w-5xl mx-auto px-4 md:px-6 py-8",children:i.jsx("article",{className:`prose max-w-[80ch] mx-auto prose-p:mb-6 text-left ${$} rounded-xl p-6 ${r==="light"?"prose-gray":"prose-invert"}`,dangerouslySetInnerHTML:j})}),(parseInt(t||"0",10)>(s.startIndex||1)||m)&&i.jsx("div",{className:"max-w-4xl lg:max-w-5xl mx-auto px-4 md:px-6 pb-8 text-center",children:i.jsx("div",{className:`max-w-[80ch] mx-auto ${$} rounded-xl p-6`,children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[parseInt(t||"0",10)>(s.startIndex||1)&&i.jsx(Me,{to:`/storytime/story/${e}/chapter/${parseInt(t,10)-1}`,className:`inline-block font-bold py-2 px-4 rounded transition-colors ${r==="light"?"bg-gray-200 hover:bg-gray-300 text-gray-800":"bg-gray-700 hover:bg-gray-600 text-white"}`,children:" Previous Chapter"}),m&&i.jsx(Me,{to:`/storytime/story/${e}/chapter/${m}`,className:"inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors",children:"Next Chapter "})]})})}),e&&t&&i.jsx(Tq,{storyId:e,chapterId:parseInt(t,10)}),i.jsx("div",{className:"max-w-4xl lg:max-w-5xl mx-auto px-4 md:px-6 py-8",children:i.jsx("div",{className:`max-w-[80ch] mx-auto ${$} border rounded-xl p-6`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:`text-xl font-bold ${L}`,children:" Enjoying the story?"}),i.jsx("p",{className:`mt-2 text-sm ${M}`,children:"Get notified when new chapters drop, or support me on Patreon for early access."}),i.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3 justify-center",children:[i.jsx(pa,{variant:"button",source:"chapter_end"}),i.jsx(Tx,{variant:"button"})]})]})})}),i.jsx("footer",{className:`mt-16 border-t ${$} py-8 ${r==="light"?"border-gray-300":"border-white/20"}`,children:i.jsx("div",{className:"mx-auto max-w-3xl px-4",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx(ar,{variant:"footer",showCopyright:!1}),i.jsxs("p",{className:`text-sm ${r==="light"?"text-gray-500":"text-neutral-400"}`,children:[" ",new Date().getFullYear()," All rights reserved."]})]})})})]})]})]}),b&&e&&t&&i.jsx(Mq,{storySlug:e,chapterNumber:parseInt(t,10),onClose:()=>y(!1),onSaved:Y=>{l(Y),y(!1)}})]})}function Iq(){const[e,t]=g.useState(null),[r,n]=g.useState(()=>localStorage.getItem("theme")||"dark");g.useEffect(()=>{fetch("/api/author/get.php").then(c=>c.json()).then(c=>{c.success&&t(c.profile)}).catch(c=>{console.error("Failed to fetch author profile:",c)});const l=setInterval(()=>{const c=localStorage.getItem("theme");n(c||"dark")},100);return()=>clearInterval(l)},[]);const s=e?r==="light"?$r(e.background_image_light||e.background_image,"/images/lofi_light_bg.webp"):$r(e.background_image_dark||e.background_image,"/images/lofi_bg.webp"):r==="light"?"/images/lofi_light_bg.webp":"/images/lofi_bg.webp",a=r==="light"?"bg-white/60":"bg-black/40";return i.jsxs("div",{className:"relative font-sans h-full transition-colors duration-200",children:[i.jsx("div",{className:"fixed inset-0 -z-10 bg-no-repeat bg-top [background-size:auto_100%] md:[background-size:100%_auto]",style:{backgroundImage:`url('${s}')`,backgroundColor:r==="light"?"#f7f7f7":"#0a0a0a"}}),i.jsx("div",{className:`fixed inset-0 ${a} -z-10`}),i.jsx("div",{className:"relative z-10",children:i.jsxs(Ld,{children:[i.jsx(Ve,{path:"/",element:i.jsx(Eq,{})}),i.jsx(Ve,{path:"/story/:storyId",element:i.jsx(Aq,{})}),i.jsx(Ve,{path:"/story/:storyId/chapter/:chapterId",element:i.jsx(Dq,{})})]})})]})}/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lq=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Rq=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),KE=e=>{const t=Rq(e);return t.charAt(0).toUpperCase()+t.slice(1)},E$=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Bq=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:o,...l},c)=>g.createElement("svg",{ref:c,...zq,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:E$("lucide",s),...!a&&!Bq(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>g.createElement(d,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(e,t)=>{const r=g.forwardRef(({className:n,...s},a)=>g.createElement(Fq,{ref:a,iconNode:t,className:E$(`lucide-${Lq(KE(e))}`,`lucide-${e}`,n),...s}));return r.displayName=KE(e),r};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hq=[["path",{d:"M9 13a1 1 0 0 0-1-1H5.061a1 1 0 0 1-.75-1.811l6.836-6.835a1.207 1.207 0 0 1 1.707 0l6.835 6.835a1 1 0 0 1-.75 1.811H16a1 1 0 0 0-1 1v2a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1z",key:"pnzqmc"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Ip=de("arrow-big-up-dash",Hq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uq=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],A$=de("arrow-left",Uq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wq=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],T$=de("arrow-right",Wq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],qq=de("bold",Vq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gq=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Px=de("book-open",Gq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Yq=de("book",Kq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Jq=de("bookmark",Xq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zq=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Bh=de("brain",Zq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qq=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Rl=de("briefcase",Qq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eG=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],tG=de("calculator",eG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rG=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],P$=de("calendar",rG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nG=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],$a=de("check",nG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sG=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Wi=de("chevron-down",sG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aG=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],en=de("chevron-right",aG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iG=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],id=de("chevron-left",iG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oG=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ah=de("circle-alert",oG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lG=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],M$=de("circle-check-big",lG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cG=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],dG=de("circle-plus",cG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uG=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],hG=de("circle",uG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fG=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],YE=de("clipboard-list",fG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pG=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],SN=de("clock",pG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mG=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],gG=de("code",mG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xG=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Mx=de("coins",xG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bG=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],CN=de("copy",bG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yG=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],vG=de("cpu",yG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wG=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],XE=de("database",wG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kG=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],jG=de("disc",kG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NG=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],O$=de("download",NG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SG=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],wg=de("external-link",SG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CG=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],_N=de("eye-off",CG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _G=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sc=de("eye",_G);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EG=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],AG=de("file-text",EG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TG=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],PG=de("flame",TG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MG=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],$$=de("folder",MG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OG=[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]],$G=de("footprints",OG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DG=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],IG=de("funnel",DG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LG=[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]],JE=de("gem",LG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RG=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],ZE=de("ghost",RG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BG=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],zG=de("globe",BG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FG=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],HG=de("heading-2",FG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UG=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]],WG=de("heading-3",UG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VG=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],qG=de("heart",VG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GG=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],so=de("image",GG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KG=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],rv=de("inbox",KG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YG=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ox=de("info",YG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XG=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],JG=de("italic",XG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZG=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],QG=de("layers",ZG);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eK=[["path",{d:"M9 17H7A5 5 0 0 1 7 7",key:"10o201"}],["path",{d:"M15 7h2a5 5 0 0 1 4 8",key:"1d3206"}],["line",{x1:"8",x2:"12",y1:"12",y2:"12",key:"rvw6j4"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],tK=de("link-2-off",eK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rK=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],D$=de("link",rK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nK=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],sK=de("list-ordered",nK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aK=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],I$=de("list",aK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iK=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Tr=de("loader-circle",iK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oK=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],$m=de("lock",oK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lK=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],kg=de("mail",lK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cK=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],dK=de("megaphone",cK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uK=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],$x=de("message-square",uK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hK=[["path",{d:"M5 12h14",key:"1ays0h"}]],L$=de("minus",hK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fK=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],zh=de("package",fK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pK=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],R$=de("pencil",pK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mK=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],gK=de("pill",mK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xK=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],bK=de("play",xK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yK=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ma=de("plus",yK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vK=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],wK=de("quote",vK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kK=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],QE=de("refresh-ccw",kK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],yo=de("refresh-cw",jK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NK=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],SK=de("rotate-ccw",NK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CK=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Bl=de("save",CK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _K=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],jg=de("scroll-text",_K);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EK=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],eA=de("scroll",EK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AK=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],gi=de("search",AK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TK=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],PK=de("send",TK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MK=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Dx=de("settings",MK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],tA=de("share-2",OK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ca=de("shield",$K);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DK=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],EN=de("skull",DK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IK=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],nv=de("sparkles",IK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LK=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],B$=de("square-pen",LK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RK=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],z$=de("star",RK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BK=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],nr=de("swords",BK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zK=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],F$=de("tag",zK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],HK=de("target",FK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UK=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],WK=de("text-align-center",UK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VK=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],qK=de("text-align-end",VK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GK=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],KK=de("text-align-start",GK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YK=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],XK=de("timer",YK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JK=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],oi=de("trash-2",JK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],QK=de("trending-up",ZK);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eY=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],od=de("triangle-alert",eY);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],H$=de("trophy",tY);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rY=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],nY=de("upload",rY);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sY=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],U$=de("user",sY);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aY=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ix=de("users",aY);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],rA=de("wand-sparkles",iY);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oY=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],lY=de("wifi-off",oY);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],dY=de("wifi",cY);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uY=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],hY=de("wrench",uY);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fY=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],A1=de("youtube",fY);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pY=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Dt=de("x",pY);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],W$=de("zoom-in",mY);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Bn=de("zap",gY);var je=(e=>(e.STR="STR",e.PER="PER",e.DEX="DEX",e.MEM="MEM",e.INT="INT",e.CHA="CHA",e))(je||{}),V$=(e=>(e.RECRUIT="Recruit",e.RANGER="Ranger",e.HUNTER="Hunter",e.BRAWLER="Brawler",e.SCOUT="Scout",e.DEFENDER="Defender",e.TECHNICIAN="Technician",e.MINUTEMAN="Minuteman",e.MARAUDER="Marauder",e.FIELD_MEDIC="Field Medic",e.ASSASSIN="Assassin",e.OPERATIVE="Operative",e.DEADEYE="Deadeye",e.BLADE_MASTER="Blade Master",e.COMBAT_MEDIC="Combat Medic",e.BIO_ENGINEER="Bio-Engineer",e.SUPPRESSOR="Suppressor",e.JUGGERNAUT="Juggernaut",e.CRUSHER="Crusher",e.COMBAT_ENGINEER="Combat Engineer",e.DEMOLITIONS_EXPERT="Demolitions Expert",e))(V$||{});const T1={[je.STR]:"Melee damage, carrying capacity, physical endurance",[je.PER]:"Perception, awareness, detection, initiative",[je.DEX]:"Accuracy, piloting, dodge/evasion, stealth, precision",[je.MEM]:"Knowledge recall, skill proficiency, resist mental effects",[je.INT]:"Technical, Engineering, Scientific, invention",[je.CHA]:"Influence, leadership, negotiation, morale"},xY=200,bY=1.15,q$=200,G$=.005,yY=e=>e<1?0:Math.round(xY*Math.pow(bY,e-1)),gc=e=>{if(e<=1)return 0;let t=0;for(let r=1;r<e;r++)t+=yY(r);return t},K$=e=>{let t=0,r=0;const n=[];return e===10?(t=5,n.push("Advanced Class Selection")):e===16?(t=5,n.push("Profession Class Selection")):e===32?(t=10,n.push("Combat Class Upgrade")):e>=33?t=4:e>1&&(t=2),e>1&&e%2!==0&&(r+=1),e===10&&(r+=4),e===16&&(r+=5),e===32&&(r+=5),{attributePoints:t,abilityPoints:r,unlocks:n}},vY=e=>{let t=0,r=0;for(let n=2;n<=e;n++){const s=K$(n);t+=s.attributePoints,r+=s.abilityPoints}return{attributePoints:t,abilityPoints:r}},Y$=e=>e/(e+q$),nA=(e,t)=>{if(!e||e==="Instant"||e==="Passive"||e==="Toggle")return e;let r=0;const n=/(\d+(?:\.\d+)?)\s*(hr|min|sec|h|m|s)/gi,s=Array.from(e.matchAll(n));if(s.length===0)return e;for(const l of s){const c=parseFloat(l[1]),d=l[2].toLowerCase();d==="sec"||d==="s"?r+=c:d==="min"||d==="m"?r+=c*60:(d==="hr"||d==="h")&&(r+=c*3600)}const a=Y$(t),o=r*(1-a);if(o<60)return`${o.toFixed(1)} sec`;if(o<3600){const l=Math.floor(o/60),c=o%60;return c<1?`${l} min`:`${l} min ${c.toFixed(0)} sec`}else{const l=Math.floor(o/3600),c=o%3600,d=Math.floor(c/60),u=c%60;let h=`${l} hr`;return d>0&&(h+=` ${d} min`),u>=1&&(h+=` ${u.toFixed(0)} sec`),h}},X$=e=>e*G$,sA=(e,t)=>{if(!e||e==="Instant"||e==="Passive"||e==="Toggle")return e;let r=0;const n=/(\d+(?:\.\d+)?)\s*(hr|min|sec|h|m|s)/gi,s=Array.from(e.matchAll(n));if(s.length===0)return e;for(const l of s){const c=parseFloat(l[1]),d=l[2].toLowerCase();d==="sec"||d==="s"?r+=c:d==="min"||d==="m"?r+=c*60:(d==="hr"||d==="h")&&(r+=c*3600)}const a=1+X$(t),o=r*a;if(o<60)return`${o.toFixed(1)} sec`;if(o<3600){const l=Math.floor(o/60),c=o%60;return c<1?`${l} min`:`${l} min ${c.toFixed(0)} sec`}else{const l=Math.floor(o/3600),c=o%3600,d=Math.floor(c/60),u=c%60;let h=`${l} hr`;return d>0&&(h+=` ${d} min`),u>=1&&(h+=` ${u.toFixed(0)} sec`),h}},wY=({character:e,monsters:t,onApplyResult:r,currentDbClass:n,items:s})=>{const[a,o]=g.useState("combat"),[l,c]=g.useState(1),[d,u]=g.useState(""),[h,f]=g.useState([null,null,null,null,null]),[p,m]=g.useState("Portal Delve Completion"),[x,b]=g.useState(1e4),[y,v]=g.useState(5e3),[w,j]=g.useState([{item:"",quantity:1},{item:"",quantity:1},{item:"",quantity:1},{item:"",quantity:1},{item:"",quantity:1}]),[N,k]=g.useState([]),S=()=>n!=null&&n.primary_attribute?n.primary_attribute:je.STR,C=()=>n!=null&&n.secondary_attribute?n.secondary_attribute:je.PER,P=(L,M)=>{const T=[...h];M===""?T[L]=null:T[L]={monsterId:M,quantity:1},f(T)},E=(L,M)=>{const T=[...h];T[L]&&(T[L].quantity=Math.max(1,M)),f(T)},O=(L,M)=>{const T=[...w];T[L].item=M,j(T)},A=(L,M)=>{const T=[...w];T[L].quantity=Math.max(1,M),j(T)},_=(L,M)=>{const T=L-M;return T<=-11?0:T<=-6?.5:T<=-1?.8:T<=4?1:T<=9?1.2:T<=14?1.5:2},I=()=>{let L=0,M=0,T="";if(a==="combat"){let B=0,q=0,X=[];if(h.forEach(ne=>{if(!ne)return;const be=t.find(st=>st.id===ne.monsterId);if(!be)return;const ye=_(be.level,e.level),Se=be.xpReward*ne.quantity*ye,He=be.credits*ne.quantity;B+=Se,q+=He,X.push(`${ne.quantity}x ${be.name}`)}),X.length===0)return;const ue=B/l,U=Math.floor(q/l),V=S(),ge=C(),te=e.attributes[V],z=e.attributes[ge],le=1+te/100+z/100*.6;L=Math.round(ue*le),M=U,T=`Defeated: ${X.join(", ")}`}else L=Math.floor(x/l),M=Math.floor(y/l),T=p||"Custom Reward";const G=w.filter(B=>B.item!==""),Y=[],ee=[];G.forEach(B=>{for(let q=0;q<B.quantity;q++)Y.push(B.item);ee.push(`${B.item} (x${B.quantity})`)});const R={id:Date.now(),xp:L,credits:M,description:T,loot:Y,lootSummary:ee.join(", "),timestamp:Date.now(),chapterRef:d.trim()};k(B=>[R,...B]),j([{item:"",quantity:1},{item:"",quantity:1},{item:"",quantity:1},{item:"",quantity:1},{item:"",quantity:1}])},D=L=>{k(M=>M.filter(T=>T.id!==L))},$=L=>{const M=L.chapterRef?`[${L.chapterRef}] `:"";let G=`${L.description.startsWith("Defeated")?"Battle":"Event"}: ${M}${L.description}. Rewards: ${L.xp} XP, ${L.credits} Credits.`;L.lootSummary&&(G+=` Loot: ${L.lootSummary}.`),r(L.xp,L.credits,G,L.loot),D(L.id)};return i.jsxs("div",{className:"bg-nexus-panel p-6 rounded-xl border border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6 border-b border-slate-700 pb-2",children:[i.jsx(nr,{size:20,className:"text-red-500"}),i.jsx("h2",{className:"text-xl font-bold text-slate-200",children:"Encounter & Rewards"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[i.jsxs("div",{className:"flex bg-slate-900 rounded-lg p-1 mb-4 border border-slate-700",children:[i.jsxs("button",{onClick:()=>o("combat"),className:`flex-1 flex items-center justify-center gap-2 py-1.5 text-sm font-bold rounded ${a==="combat"?"bg-red-500/20 text-red-400 border border-red-500/50":"text-slate-500 hover:text-slate-300"}`,children:[i.jsx(EN,{size:16})," Combat"]}),i.jsxs("button",{onClick:()=>o("reward"),className:`flex-1 flex items-center justify-center gap-2 py-1.5 text-sm font-bold rounded ${a==="reward"?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/50":"text-slate-500 hover:text-slate-300"}`,children:[i.jsx(H$,{size:16})," Custom Reward"]})]}),i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("h3",{className:"text-sm font-bold text-slate-300",children:a==="combat"?"Encounter Details":"Reward Details"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-400",children:[i.jsx(Jq,{size:14,className:"text-nexus-accent"}),"Chapter",i.jsx("input",{type:"text",placeholder:"#",value:d,onChange:L=>u(L.target.value),className:"w-16 bg-slate-900 border border-slate-600 rounded px-1 text-center text-white focus:border-nexus-accent outline-none"})]}),i.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-400",children:[i.jsx(Ix,{size:14,className:"text-nexus-accent"}),"Party Size",i.jsx("input",{type:"number",min:"1",max:"20",value:l,onChange:L=>c(Math.max(1,parseInt(L.target.value)||1)),className:"w-12 bg-slate-900 border border-slate-600 rounded px-1 text-center text-white focus:border-nexus-accent outline-none"})]})]})]}),a==="combat"?i.jsx("div",{className:"space-y-2 mb-4",children:h.map((L,M)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex-1 bg-slate-900 border border-slate-600 rounded px-2 py-1.5 text-sm text-slate-200 outline-none focus:border-nexus-accent",value:(L==null?void 0:L.monsterId)||"",onChange:T=>P(M,T.target.value),children:[i.jsx("option",{value:"",children:"-- Empty Monster Slot --"}),t.map(T=>i.jsxs("option",{value:T.id,children:["Lvl ",T.level," ",T.name," (",T.rank,")"]},T.id))]}),i.jsx("input",{type:"number",min:"1",disabled:!L,value:(L==null?void 0:L.quantity)||1,onChange:T=>E(M,parseInt(T.target.value)||1),className:"w-14 bg-slate-900 border border-slate-600 rounded px-1 text-center text-white focus:border-nexus-accent outline-none disabled:opacity-50 text-sm",placeholder:"Qty"})]},`mob-${M}`))}):i.jsxs("div",{className:"space-y-3 mb-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Event Description"}),i.jsx("input",{type:"text",value:p,onChange:L=>m(L.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-2 text-sm text-white focus:border-nexus-accent outline-none",placeholder:"e.g. Portal Delve Complete"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-nexus-accent mb-1",children:"Total XP Reward"}),i.jsx("input",{type:"number",value:x,onChange:L=>b(parseInt(L.target.value)||0),className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-2 text-sm text-white focus:border-nexus-accent outline-none font-mono"}),l>1&&i.jsxs("div",{className:"text-[10px] text-slate-500 mt-1 text-right",children:["Split: ",(x/l).toLocaleString()," XP"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-yellow-400 mb-1",children:"Total Credits Reward"}),i.jsx("input",{type:"number",value:y,onChange:L=>v(parseInt(L.target.value)||0),className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-2 text-sm text-white focus:border-nexus-accent outline-none font-mono"}),l>1&&i.jsxs("div",{className:"text-[10px] text-slate-500 mt-1 text-right",children:["Split: ",(y/l).toLocaleString()," CR"]})]})]})]}),i.jsx("h3",{className:"text-xs font-bold text-slate-400 mb-2 border-t border-slate-700 pt-2",children:"Add Loot / Rewards"}),i.jsx("div",{className:"space-y-2",children:w.map((L,M)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex-1 bg-slate-900 border border-slate-600 rounded px-2 py-1.5 text-sm text-slate-200 outline-none focus:border-nexus-accent",value:L.item,onChange:T=>O(M,T.target.value),children:[i.jsx("option",{value:"",children:"-- No Loot --"}),s.map(T=>i.jsx("option",{value:T.name,children:T.name},T.id))]}),i.jsx("input",{type:"number",min:"1",disabled:L.item==="",value:L.quantity,onChange:T=>A(M,parseInt(T.target.value)||1),className:"w-14 bg-slate-900 border border-slate-600 rounded px-1 text-center text-white focus:border-nexus-accent outline-none disabled:opacity-50 text-sm",placeholder:"Qty"})]},`loot-${M}`))}),i.jsxs("button",{onClick:I,className:"w-full mt-4 flex items-center justify-center gap-2 bg-nexus-accent/10 hover:bg-nexus-accent/20 border border-nexus-accent/50 text-nexus-accent font-bold py-2 rounded transition-colors",children:[i.jsx(tG,{size:18}),i.jsx("span",{children:"Calculate & Add to Log"})]})]})}),i.jsxs("div",{className:"bg-slate-900/50 rounded-lg border border-slate-700 flex flex-col h-full min-h-[400px]",children:[i.jsxs("div",{className:"p-3 border-b border-slate-700 bg-slate-800/50 rounded-t-lg flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-bold text-slate-300",children:"Unapplied Results"}),i.jsxs("span",{className:"text-xs text-slate-500",children:[N.length," pending"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 custom-scrollbar",children:N.length===0?i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-500 text-sm italic",children:[i.jsx(QK,{size:24,className:"mb-2 opacity-50"}),"No events calculated yet."]}):N.map(L=>i.jsxs("div",{className:"bg-slate-800 border border-slate-700 p-3 rounded flex flex-col gap-2 group hover:border-slate-600 transition-colors",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[L.chapterRef&&i.jsx("span",{className:"text-xs bg-slate-900 text-nexus-accent px-1.5 py-0.5 rounded mr-2 border border-slate-700",children:L.chapterRef}),i.jsx("span",{className:"text-xs text-slate-400",children:L.description})]}),i.jsxs("div",{className:"text-right min-w-fit pl-2",children:[i.jsxs("div",{className:"font-mono font-bold text-nexus-success text-sm",children:["+",L.xp.toLocaleString()," XP"]}),i.jsxs("div",{className:"font-mono font-bold text-yellow-400 text-sm flex items-center justify-end gap-1",children:["+",L.credits.toLocaleString(),i.jsx(Mx,{size:10})]})]})]}),L.lootSummary&&i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1 bg-slate-900/50 p-2 rounded text-[10px] text-slate-300 border border-slate-700/50",children:[i.jsx(zh,{size:12,className:"text-slate-500"}),L.lootSummary]}),i.jsxs("div",{className:"flex gap-2 justify-end mt-1 pt-2 border-t border-slate-700/50",children:[i.jsx("button",{onClick:()=>D(L.id),className:"p-1.5 rounded bg-slate-700 hover:bg-red-900/30 text-slate-400 hover:text-red-400 transition-colors",title:"Dismiss",children:i.jsx(Dt,{size:14})}),i.jsxs("button",{onClick:()=>$(L),className:"flex items-center gap-1 px-3 py-1.5 rounded bg-nexus-success/20 hover:bg-nexus-success/30 text-nexus-success border border-nexus-success/50 text-xs font-bold transition-colors",title:"Apply Rewards to Character",children:[i.jsx($a,{size:14}),"APPLY"]})]})]},L.id))})]})]})]})},kY=[{key:"armor",label:"Armor",icon:ca,category:"Armor",colorClass:"text-blue-400"},{key:"weapon_primary",label:"Primary Weapon",icon:nr,category:"Weapon",colorClass:"text-red-400"},{key:"weapon_secondary",label:"Secondary",icon:nr,category:"Weapon",colorClass:"text-orange-400"}],jY=[{key:"accessory_1",label:"Accessory 1"},{key:"accessory_2",label:"Accessory 2"},{key:"accessory_3",label:"Accessory 3"}],NY=({equippedItems:e,onEquipmentChange:t,isEditable:r=!0,items:n})=>{const[s,a]=g.useState(!1),o=n,l=(f,p)=>{t({...e,[f]:p||null})},c=f=>{if(f)return o.find(p=>p.name===f)},d=f=>f?o.filter(p=>p.category===f):o,u=(f,p,m,x,b)=>{const y=typeof m=="number"?null:m,v=c(y),w=d(x);return r?i.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-800/50 rounded border border-slate-700 hover:border-slate-600 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-2 min-w-[100px]",children:[b,i.jsx("span",{className:"text-xs text-slate-500 uppercase whitespace-nowrap",children:p})]}),i.jsxs("div",{className:"relative flex-1 max-w-[200px]",children:[i.jsxs("select",{value:y??"",onChange:j=>l(f,j.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1 text-sm text-slate-200 appearance-none cursor-pointer hover:border-slate-500 focus:border-nexus-accent outline-none pr-6",children:[i.jsx("option",{value:"",children:" Empty "}),w.map(j=>i.jsxs("option",{value:j.name,children:[j.name," (",j.tech_level,")"]},j.name))]}),i.jsx(Wi,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 pointer-events-none"})]})]}):i.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-800/50 rounded border border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[b,i.jsx("span",{className:"text-xs text-slate-500 uppercase",children:p})]}),i.jsx("span",{className:`text-sm ${v?"text-slate-200":"text-slate-600 italic"}`,children:(v==null?void 0:v.name)||"Empty"})]})},h=Object.values(e).filter(f=>f).length;return i.jsxs("div",{className:"bg-nexus-panel rounded-xl border border-slate-700 overflow-hidden",children:[i.jsxs("button",{onClick:()=>a(!s),className:"w-full flex justify-between items-center p-4 hover:bg-slate-800/30 transition-colors cursor-pointer",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-200 flex items-center gap-2",children:[s?i.jsx(Wi,{size:18,className:"text-slate-500"}):i.jsx(en,{size:18,className:"text-slate-500"}),i.jsx(nr,{size:18,className:"text-orange-400"}),"Equipment"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[h>0&&i.jsxs("span",{className:"text-xs bg-orange-600/20 text-orange-400 px-2 py-0.5 rounded border border-orange-600/30",children:[h," equipped"]}),!s&&o.length>0&&i.jsxs("span",{className:"text-xs text-slate-500",children:[o.length," items"]})]})]}),s&&i.jsxs("div",{className:"px-4 pb-4 animate-in slide-in-from-top-2 duration-200 border-t border-slate-700/50",children:[i.jsxs("div",{className:"space-y-2 pt-3",children:[kY.map(f=>i.jsx("div",{children:u(f.key,f.label,e[f.key],f.category,i.jsx(f.icon,{size:14,className:f.colorClass}))},f.key)),i.jsxs("div",{className:"flex items-center gap-2 pt-2 pb-1",children:[i.jsx(JE,{size:14,className:"text-purple-400"}),i.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wider",children:"Accessories"}),i.jsx("div",{className:"flex-1 h-px bg-slate-700"})]}),jY.map(f=>i.jsx("div",{children:u(f.key,f.label,e[f.key],void 0,i.jsx(JE,{size:14,className:"text-purple-400"}))},f.key))]}),Object.values(e).some(f=>f)&&i.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-2",children:"Equipped Items:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(e).map(([f,p])=>{if(!p)return null;const x=c(typeof p=="number"?null:p);return x?i.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${x.tech_level==="TL10"?"bg-purple-900/20 border-purple-600 text-purple-300":x.tech_level==="TL9"?"bg-blue-900/20 border-blue-600 text-blue-300":"bg-slate-800 border-slate-600 text-slate-400"}`,children:x.name},f):null})})]})]})]})};let ld=null,Fh=null,cd=null,dd=null,Ng=null;async function Bd(e){const t=await fetch(e,{credentials:"same-origin"});if(!t.ok){const r=await t.text();throw new Error(r||`HTTP ${t.status}`)}return t.json()}async function Us(e,t,r="POST"){const n=await fetch(e,{method:r,headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(t)}),s=await n.text();if(!n.ok)try{const a=JSON.parse(s);throw new Error(a.error||`HTTP ${n.status}`)}catch{throw new Error(s||`HTTP ${n.status}`)}return s?JSON.parse(s):{}}async function J$(){try{return await Bd(`${Ce}/litrpg/characters/list.php`)}catch(e){return{success:!1,characters:[],error:String(e)}}}async function Z$(e){try{const t=await fetch(`${Ce}/litrpg/characters/create.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(e)});if(!t.ok){const r=await t.text();try{return{success:!1,error:JSON.parse(r).error||`HTTP ${t.status}`}}catch{return{success:!1,error:r||`HTTP ${t.status}`}}}return await t.json()}catch(t){return{success:!1,error:String(t)}}}async function Q$(e){try{const t=await fetch(`${Ce}/litrpg/characters/update.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(e)});if(!t.ok){const r=await t.text();try{return{success:!1,error:JSON.parse(r).error||`HTTP ${t.status}`}}catch{return{success:!1,error:r||`HTTP ${t.status}`}}}return await t.json()}catch(t){return{success:!1,error:String(t)}}}async function SY(e){try{const t=await fetch(`${Ce}/litrpg/characters/delete.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:e})});if(!t.ok){const r=await t.text();try{return{success:!1,error:JSON.parse(r).error||`HTTP ${t.status}`}}catch{return{success:!1,error:r||`HTTP ${t.status}`}}}return await t.json()}catch(t){return{success:!1,error:String(t)}}}async function aA(e){try{const t=new URLSearchParams;return e!=null&&e.difficulty,e!=null&&e.contract_type,e!=null&&e.level_requirement,await(await fetch(`${Ce}/litrpg/contracts/list.php${t.toString()?`?${t.toString()}`:""}`,{credentials:"same-origin"})).json()}catch(t){return{success:!1,contracts:[],error:String(t)}}}async function CY(e){try{const t=await fetch(`${Ce}/litrpg/contracts/create.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(e)});if(!t.ok){const r=await t.text();try{return{success:!1,error:JSON.parse(r).error||`HTTP ${t.status}`}}catch{return{success:!1,error:r||`HTTP ${t.status}`}}}return await t.json()}catch(t){return{success:!1,error:String(t)}}}function Sf(e){return typeof e=="string"&&e.startsWith("tier-")?e.toLowerCase():`tier-${typeof e=="number"?e:parseInt(String(e).replace(/[^0-9]/g,""),10)||1}`}async function _Y(){try{const e=await Bd(`${Ce}/litrpg/classes/list.php`);if(!e.success)return{success:!1,classes:[],error:e.error};const t=e.classes.map(r=>({...r,tier:Sf(r.tier),stat_bonuses:r.stat_bonuses||{},ability_ids:r.ability_ids||[],upgrade_ids:r.upgrade_ids||[]}));return ld=t,{success:!0,classes:t}}catch(e){return{success:!1,classes:[],error:String(e)}}}async function da(){if(ld)return ld;const e=await _Y();return e.success?e.classes:[]}async function EY(e){try{const t=await Us(`${Ce}/litrpg/classes/create.php`,{name:e.name,description:e.description,tier:e.tier,unlock_level:e.unlock_level,primary_attribute:e.primary_attribute,secondary_attribute:e.secondary_attribute,ability_ids:e.ability_ids||[]});return!t.success||!t.class?{success:!1,error:t.error||"Failed to create class"}:(ld=null,{success:!0,class:{...t.class,tier:Sf(t.class.tier),stat_bonuses:t.class.stat_bonuses||{},ability_ids:t.class.ability_ids||[],upgrade_ids:t.class.upgrade_ids||[]}})}catch(t){return{success:!1,error:String(t)}}}async function eD(e,t){try{const r={id:e};t.name&&(r.name=t.name),t.description!==void 0&&(r.description=t.description),t.tier!==void 0&&(r.tier=t.tier),t.unlock_level!==void 0&&(r.unlock_level=t.unlock_level),t.primary_attribute!==void 0&&(r.primary_attribute=t.primary_attribute),t.secondary_attribute!==void 0&&(r.secondary_attribute=t.secondary_attribute),t.stat_bonuses!==void 0&&(r.stat_bonuses=t.stat_bonuses),t.ability_ids!==void 0&&(r.ability_ids=t.ability_ids);const n=await Us(`${Ce}/litrpg/classes/update.php`,r);return!n.success||!n.class?{success:!1,error:n.error||"Failed to update class"}:(ld=null,{success:!0,class:{id:n.class.id,slug:n.class.slug,name:n.class.name,description:n.class.description,tier:n.class.tier,unlock_level:n.class.unlock_level,prerequisite_class_id:n.class.prerequisite_class_id||void 0,stat_bonuses:n.class.stat_bonuses||{},primary_attribute:n.class.primary_attribute,secondary_attribute:n.class.secondary_attribute,starting_item:n.class.starting_item,ability_ids:n.class.ability_ids||[],upgrade_ids:n.class.upgrade_ids||[]}})}catch(r){return{success:!1,error:String(r)}}}async function AY(e){try{const t=await Us(`${Ce}/litrpg/classes/delete.php`,{id:e});return t.success?(ld=null,{success:!0}):{success:!1,error:t.error||"Failed to delete class"}}catch(t){return{success:!1,error:String(t)}}}async function TY(){try{const e=await Bd(`${Ce}/litrpg/professions/list.php`);if(!e.success)return{success:!1,professions:[],error:e.error};const t=e.professions.map(r=>({...r,tier:Sf(r.tier),stat_bonuses:r.stat_bonuses||{},ability_ids:r.ability_ids||[]}));return cd=t,{success:!0,professions:t}}catch(e){return{success:!1,professions:[],error:String(e)}}}async function ua(){if(cd)return cd;const e=await TY();return e.success?e.professions:[]}async function PY(e){try{const t=await Us(`${Ce}/litrpg/professions/create.php`,{name:e.name,description:e.description,tier:e.tier,unlock_level:e.unlock_level,ability_ids:e.ability_ids||[]});return!t.success||!t.profession?{success:!1,error:t.error||"Failed to create profession"}:(cd=null,{success:!0,profession:{...t.profession,tier:Sf(t.profession.tier),stat_bonuses:t.profession.stat_bonuses||{},ability_ids:t.profession.ability_ids||[]}})}catch(t){return{success:!1,error:String(t)}}}async function tD(e,t){try{const r={id:e};t.name&&(r.name=t.name),t.description!==void 0&&(r.description=t.description),t.tier!==void 0&&(r.tier=t.tier),t.unlock_level!==void 0&&(r.unlock_level=t.unlock_level),t.primary_attribute!==void 0&&(r.primary_attribute=t.primary_attribute),t.secondary_attribute!==void 0&&(r.secondary_attribute=t.secondary_attribute),t.stat_bonuses!==void 0&&(r.stat_bonuses=t.stat_bonuses),t.ability_ids!==void 0&&(r.ability_ids=t.ability_ids),t.prerequisite_class_id!==void 0&&(r.prerequisite_profession_id=t.prerequisite_class_id);const n=await Us(`${Ce}/litrpg/professions/update.php`,r);return!n.success||!n.profession?{success:!1,error:n.error||"Failed to update profession"}:(cd=null,{success:!0,profession:{...n.profession,tier:Sf(n.profession.tier),stat_bonuses:n.profession.stat_bonuses||{},ability_ids:n.profession.ability_ids||[]}})}catch(r){return{success:!1,error:String(r)}}}async function MY(e){try{const t=await Us(`${Ce}/litrpg/professions/delete.php`,{id:e});return t.success?(cd=null,{success:!0}):{success:!1,error:t.error||"Failed to delete profession"}}catch(t){return{success:!1,error:String(t)}}}async function OY(){try{const e=await Bd(`${Ce}/litrpg/abilities/list.php`);if(!e.success)return{success:!1,abilities:[],error:e.error};const t=e.abilities.map(r=>({id:r.id,slug:r.slug,name:r.name,description:r.description,maxLevel:r.max_level,evolutionId:r.evolution_ability_id||void 0,evolutionLevel:r.evolution_level||void 0,category:r.category||void 0,icon_image:r.icon_image,tiers:(r.tiers||[]).map(n=>({level:n.tier_level,duration:n.duration||void 0,cooldown:n.cooldown||void 0,energyCost:n.energy_cost||void 0,effectDescription:n.effect_description||void 0}))}));return Fh=t,{success:!0,abilities:t}}catch(e){return{success:!1,abilities:[],error:String(e)}}}async function Hh(){if(Fh)return Fh;const e=await OY();return e.success?e.abilities:[]}async function $Y(e){try{const t=await Us(`${Ce}/litrpg/abilities/create.php`,{name:e.name,description:e.description,max_level:e.maxLevel,category:e.category,evolution_ability_id:e.evolutionId,evolution_level:e.evolutionLevel,tiers:(e.tiers&&e.tiers.length>0?e.tiers:e.tierPreview?[e.tierPreview]:[]).map(n=>({tier_level:n.level,duration:n.duration,cooldown:n.cooldown,energy_cost:n.energyCost,effect_description:n.effectDescription}))});return!t.success||!t.ability?{success:!1,error:t.error||"Failed to create ability"}:(Fh=null,{success:!0,ability:{id:t.ability.id,slug:t.ability.slug,name:t.ability.name,description:t.ability.description,maxLevel:t.ability.max_level,evolutionId:t.ability.evolution_ability_id||void 0,evolutionLevel:t.ability.evolution_level||void 0,category:t.ability.category,icon_image:t.ability.icon_image,tiers:(t.ability.tiers||[]).map(n=>({level:n.tier_level,duration:n.duration||void 0,cooldown:n.cooldown||void 0,energyCost:n.energy_cost||void 0,effectDescription:n.effect_description||void 0}))}})}catch(t){return{success:!1,error:String(t)}}}async function DY(e,t){try{const r={id:e};t.name&&(r.name=t.name),t.description!==void 0&&(r.description=t.description),t.maxLevel!==void 0&&(r.max_level=t.maxLevel),t.category!==void 0&&(r.category=t.category),t.evolutionId!==void 0&&(r.evolution_ability_id=t.evolutionId),t.evolutionLevel!==void 0&&(r.evolution_level=t.evolutionLevel),t.tiers!==void 0&&(r.tiers=t.tiers.map(a=>({tier_level:a.level,duration:a.duration,cooldown:a.cooldown,energy_cost:a.energyCost,effect_description:a.effectDescription})));const n=await Us(`${Ce}/litrpg/abilities/update.php`,r);return!n.success||!n.ability?{success:!1,error:n.error||"Failed to update ability"}:(Fh=null,{success:!0,ability:{id:n.ability.id,slug:n.ability.slug,name:n.ability.name,description:n.ability.description,maxLevel:n.ability.max_level,evolutionId:n.ability.evolution_ability_id||void 0,evolutionLevel:n.ability.evolution_level||void 0,category:n.ability.category,icon_image:n.ability.icon_image,tiers:(n.ability.tiers||[]).map(a=>({level:a.tier_level,duration:a.duration||void 0,cooldown:a.cooldown||void 0,energyCost:a.energy_cost||void 0,effectDescription:a.effect_description||void 0}))}})}catch(r){return{success:!1,error:String(r)}}}async function IY(){try{const e=await Bd(`${Ce}/litrpg/monsters/list.php`);if(!e.success)return{success:!1,monsters:[],error:e.error};const t=e.monsters.map(r=>({...r,stats:r.stats||{},abilities:r.abilities||[],loot_table:r.loot_table||[]}));return dd=t,{success:!0,monsters:t}}catch(e){return{success:!1,monsters:[],error:String(e)}}}async function wl(){if(dd)return dd;const e=await IY();return e.success?e.monsters:[]}async function LY(e){try{const t=await Us(`${Ce}/litrpg/monsters/create.php`,{...e});return!t.success||!t.monster?{success:!1,error:t.error||"Failed to create monster"}:(dd=null,{success:!0,monster:{...t.monster,stats:t.monster.stats||{},abilities:t.monster.abilities||[],loot_table:t.monster.loot_table||[]}})}catch(t){return{success:!1,error:String(t)}}}async function RY(e,t){try{const r={id:e};t.name&&(r.name=t.name),t.description!==void 0&&(r.description=t.description),t.level!==void 0&&(r.level=t.level),t.rank!==void 0&&(r.rank=t.rank),t.xp_reward!==void 0&&(r.xp_reward=t.xp_reward),t.credits!==void 0&&(r.credits=t.credits),t.hp!==void 0&&(r.hp=t.hp);const n=await Us(`${Ce}/litrpg/monsters/update.php`,r);return!n.success||!n.monster?{success:!1,error:n.error||"Failed to update monster"}:(dd=null,{success:!0,monster:{...n.monster,stats:n.monster.stats||{},abilities:n.monster.abilities||[],loot_table:n.monster.loot_table||[]}})}catch(r){return{success:!1,error:String(r)}}}async function BY(e){try{const t=await Us(`${Ce}/litrpg/monsters/delete.php`,{id:e});return t.success?(dd=null,{success:!0}):{success:!1,error:t.error||"Failed to delete monster"}}catch(t){return{success:!1,error:String(t)}}}async function rD(){try{const e=await Bd(`${Ce}/litrpg/items/list.php`);if(!e.success)return{success:!1,items:[],error:e.error};const t=e.items.map(r=>({...r,stats:r.stats||{},requirements:r.requirements||{}}));return Ng=t,{success:!0,items:t}}catch(e){return{success:!1,items:[],error:String(e)}}}async function zY(){if(Ng)return Ng;const e=await rD();return e.success?e.items:[]}async function FY(e){try{const t=await Us(`${Ce}/litrpg/items/create.php`,{name:e.name,description:e.description,tech_level:e.tech_level,category:e.category,rarity:e.rarity,base_value:e.base_value});return!t.success||!t.item?{success:!1,error:t.error||"Failed to create item"}:(Ng=null,{success:!0,item:{...t.item,stats:t.item.stats||{},requirements:t.item.requirements||{}}})}catch(t){return{success:!1,error:String(t)}}}function Et(e){return parseInt(String(e).replace("tier-",""))}const Dm=["tier-1","tier-2","tier-3","tier-4","tier-5","tier-6"],Ri={"tier-1":"Tier 1","tier-2":"Tier 2","tier-3":"Tier 3","tier-4":"Tier 4","tier-5":"Tier 5","tier-6":"Tier 6"},ao={"tier-1":"text-slate-400 bg-slate-500/10 border-slate-500/30","tier-2":"text-blue-400 bg-blue-500/10 border-blue-500/30","tier-3":"text-purple-400 bg-purple-500/10 border-purple-500/30","tier-4":"text-yellow-400 bg-yellow-500/10 border-yellow-500/30","tier-5":"text-orange-400 bg-orange-500/10 border-orange-500/30","tier-6":"text-red-400 bg-red-500/10 border-red-500/30"},P1={"tier-1":"text-slate-400","tier-2":"text-blue-400","tier-3":"text-purple-400","tier-4":"text-yellow-400","tier-5":"text-orange-400","tier-6":"text-red-400"},HY={"tier-1":"border-slate-700","tier-2":"border-blue-900/50","tier-3":"border-purple-900/50","tier-4":"border-yellow-900/50","tier-5":"border-orange-900/50","tier-6":"border-red-900/50"};function AN(e){return`tier-${e}`}function Sg(e){return ao[AN(e)]||ao["tier-1"]}const UY={base:"border-slate-600 bg-slate-800/50",advanced:"border-blue-700 bg-blue-900/20",elite:"border-purple-700 bg-purple-900/20",legendary:"border-yellow-600 bg-yellow-900/20",mythic:"border-orange-600 bg-orange-900/20",transcendent:"border-red-600 bg-red-900/20"},WY={STR:i.jsx(nr,{size:12,className:"text-red-500"}),PER:i.jsx(sc,{size:12,className:"text-green-500"}),DEX:i.jsx(Bn,{size:12,className:"text-yellow-500"}),MEM:i.jsx(Bh,{size:12,className:"text-purple-500"}),INT:i.jsx(ca,{size:12,className:"text-blue-500"}),CHA:i.jsx($x,{size:12,className:"text-pink-500"})},VY=({isOpen:e,onClose:t,onSelectClass:r,currentClassId:n,characterLevel:s,defaultCategory:a="combat",lockCategory:o=!1})=>{const[l,c]=g.useState([]),[d,u]=g.useState([]),[h,f]=g.useState(!0),[p,m]=g.useState(n||null),[x,b]=g.useState(a);g.useEffect(()=>{e&&(y(),m(n||null),b(a))},[e,n,a]);const y=async()=>{f(!0);try{const[k,S]=await Promise.all([da(),ua()]);c(k),u(S)}catch(k){console.error("Failed to load classes",k)}f(!1)},v=x==="combat"?l:d.map(k=>({id:k.id,name:k.name,slug:k.slug,description:k.description,tier:k.tier,unlock_level:k.unlock_level,prerequisite_class_id:k.prerequisite_profession_id,stat_bonuses:k.stat_bonuses,primary_attribute:void 0,secondary_attribute:void 0,starting_item:void 0,ability_ids:k.ability_ids,upgrade_ids:[],created_at:"",updated_at:""})),w=v.reduce((k,S)=>(k[S.tier]||(k[S.tier]=[]),k[S.tier].push(S),k),{}),j=k=>!(s<k.unlock_level),N=()=>{if(p){let k;if(x==="professional"){const S=d.find(C=>C.id===p);S&&(k={id:S.id,name:S.name,slug:S.slug,description:S.description,tier:S.tier,unlock_level:S.unlock_level,prerequisite_class_id:S.prerequisite_profession_id,stat_bonuses:S.stat_bonuses,primary_attribute:void 0,secondary_attribute:void 0,starting_item:void 0,ability_ids:S.ability_ids,upgrade_ids:[],created_at:"",updated_at:""})}else k=l.find(S=>S.id===p);k&&r(p,k.name)}t()};return e?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:i.jsxs("div",{className:"bg-nexus-panel border border-slate-600 shadow-2xl rounded-xl max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[x==="combat"?i.jsx(nr,{className:"text-orange-400",size:24}):i.jsx(Rl,{className:"text-blue-400",size:24}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-lg font-bold text-white",children:["Select ",x==="combat"?"Class":"Profession"]}),i.jsxs("p",{className:"text-xs text-slate-400",children:["Character Level: ",i.jsx("span",{className:"text-nexus-accent font-bold",children:s})]})]})]}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:i.jsx(Dt,{size:24})})]}),!o&&i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>b("combat"),className:`flex items-center gap-2 px-3 py-1.5 text-sm rounded border transition-colors flex-1 justify-center ${x==="combat"?"bg-orange-600/20 border-orange-500 text-orange-400":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`,children:[i.jsx(nr,{size:14}),"Combat Classes"]}),i.jsxs("button",{onClick:()=>b("professional"),className:`flex items-center gap-2 px-3 py-1.5 text-sm rounded border transition-colors flex-1 justify-center ${x==="professional"?"bg-blue-600/20 border-blue-500 text-blue-400":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`,children:[i.jsx(Rl,{size:14}),"Professions"]})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:h?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(Tr,{size:32,className:"animate-spin text-nexus-accent mb-4"}),i.jsx("p",{className:"text-slate-500",children:"Loading classes..."})]}):v.length===0?i.jsxs("div",{className:"text-center text-slate-500 py-12",children:["No ",x==="combat"?"classes":"professions"," found."]}):i.jsx("div",{className:"space-y-6",children:Dm.map(k=>{const S=w[k];return!S||S.length===0?null:i.jsxs("div",{children:[i.jsxs("h3",{className:`flex items-center gap-2 text-sm font-bold uppercase tracking-wide mb-3 ${P1[k]||"text-slate-400"}`,children:[i.jsx(z$,{size:14}),k," ",x==="combat"?"Classes":"Professions"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:S.map(C=>{const P=p===C.id,E=j(C),O=n===C.id;return i.jsxs("button",{onClick:()=>E&&m(C.id),disabled:!E,className:`relative text-left p-4 rounded-lg border-2 transition-all ${P?"border-nexus-accent bg-nexus-accent/10 ring-2 ring-nexus-accent/30":E?`${UY[C.tier]||"border-slate-600 bg-slate-800/50"} hover:border-slate-500 cursor-pointer`:"border-slate-800 bg-slate-900/50 opacity-50 cursor-not-allowed"}`,children:[O&&i.jsx("span",{className:"absolute top-2 right-2 text-[10px] bg-green-600 text-white px-1.5 py-0.5 rounded uppercase font-bold",children:"Current"}),P&&!O&&i.jsx("span",{className:"absolute top-2 right-2 w-6 h-6 bg-nexus-accent rounded-full flex items-center justify-center",children:i.jsx($a,{size:14,className:"text-black"})}),i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h4",{className:`font-bold ${E?"text-white":"text-slate-500"}`,children:C.name}),i.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded capitalize ${P1[typeof C.tier=="number"?AN(C.tier):C.tier]||"text-slate-400"} bg-slate-800`,children:typeof C.tier=="number"?`Tier ${C.tier}`:C.tier})]}),i.jsx("p",{className:"text-xs text-slate-400 mb-2 line-clamp-2",children:C.description||"No description."}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsxs("span",{className:`${s>=C.unlock_level?"text-green-400":"text-red-400"}`,children:["Lvl ",C.unlock_level,"+"]}),C.prerequisite_class_id&&i.jsxs("span",{className:"text-slate-500 flex items-center gap-1",children:[i.jsx(T$,{size:10}),"Requires another class"]})]}),C.stat_bonuses&&Object.keys(C.stat_bonuses).length>0&&i.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:Object.entries(C.stat_bonuses).map(([A,_])=>i.jsxs("span",{className:"flex items-center gap-0.5 text-[10px] bg-slate-900 px-1.5 py-0.5 rounded",children:[WY[A],i.jsxs("span",{className:_>0?"text-green-400":"text-red-400",children:[_>0?"+":"",_]})]},A))})]},C.id)})})]},k)})})}),i.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-slate-700 bg-slate-900/50",children:[i.jsx("button",{onClick:t,className:"px-4 py-2 text-slate-400 hover:text-white transition-colors",children:"Cancel"}),i.jsxs("button",{onClick:N,disabled:!p,className:"flex items-center gap-2 px-4 py-2 bg-nexus-accent hover:bg-cyan-400 text-black font-bold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx($a,{size:16}),"Confirm Selection"]})]})]})}):null},sv=5,qY=({character:e,updateCharacter:t,monsters:r,currentDbClassId:n,onDbClassChange:s,theme:a})=>{var pr,Gt,Rr;const o=a==="light"?"bg-white border-gray-200":"bg-slate-900 border-slate-700",l=a==="light"?"bg-white border-gray-300":"bg-slate-800 border-slate-600",c=a==="light"?"text-gray-900":"text-white",d=a==="light"?"text-gray-700":"text-slate-200",u=a==="light"?"text-gray-500":"text-slate-400",h=a==="light"?"border-gray-200":"border-slate-700",f=a==="light"?"hover:bg-slate-100":"hover:bg-slate-800",p=a==="light"?"hover:bg-slate-200":"hover:bg-slate-700",[m,x]=g.useState(!1),[b,y]=g.useState(e.name),[v,w]=g.useState(!1),[j,N]=g.useState(e.headerImageUrl||""),[k,S]=g.useState(!1),[C,P]=g.useState(null),[E,O]=g.useState([]),[A,_]=g.useState([]),[I,D]=g.useState([]),[$,L]=g.useState([]),[M,T]=g.useState(!0),[G,Y]=g.useState(!1),[ee,R]=g.useState(""),[B,q]=g.useState(!1),[X,ue]=g.useState("combat"),[U,V]=g.useState(null),[ge,te]=g.useState(!1),[z,le]=g.useState(null),[ne,be]=g.useState(()=>e.classHistory||[]);g.useEffect(()=>{e.classHistory&&e.classHistory.length>0&&be(e.classHistory)},[(pr=e.classHistory)==null?void 0:pr.length]);const[ye,Se]=g.useState(new Set),[He,st]=g.useState(!1),[H,J]=g.useState(!1);g.useEffect(()=>{(async()=>{T(!0);try{const[Z,he,ve,Ne]=await Promise.all([da(),Hh(),ua(),zY()]);O(Z),_(he),D(ve),L(Ne)}catch(Z){console.error("Failed to load LitRPG data",Z)}T(!1)})()},[]);const ie=W=>{const Z=E.find(ve=>ve.name===W);if(Z)return Z;const he=I.find(ve=>ve.name===W);if(he)return{id:he.id,name:he.name,slug:he.slug,description:he.description,tier:he.tier,unlock_level:he.unlock_level,prerequisite_class_id:he.prerequisite_profession_id,stat_bonuses:he.stat_bonuses,primary_attribute:void 0,secondary_attribute:void 0,starting_item:void 0,ability_ids:he.ability_ids,upgrade_ids:[],created_at:"",updated_at:""}},we=W=>A.find(Z=>Z.name===W),re=W=>A.find(Z=>Z.id===W),oe=ie(e.className);Ge.useEffect(()=>{if(oe&&!ne.includes(oe.name)){const W=E.filter(Z=>{const he=Et(Z.tier),ve=Et(oe.tier);return he<ve&&(Z.name===e.className||ne.includes(Z.name))}).map(Z=>Z.name);ne.forEach(Z=>{!W.includes(Z)&&Z!==oe.name&&W.push(Z)}),W.length!==ne.length&&(be(W),t({...e,classHistory:W}))}},[oe==null?void 0:oe.name,E]);const Fe=()=>{if(!oe)return null;const W=Et(oe.tier),Z=e.highestTierAchieved||1;if(W>=Z){const he=I.map(Qe=>({id:Qe.id,name:Qe.name,slug:Qe.slug,description:Qe.description,tier:Qe.tier,unlock_level:Qe.unlock_level,prerequisite_class_id:Qe.prerequisite_profession_id,stat_bonuses:Qe.stat_bonuses,primary_attribute:void 0,secondary_attribute:void 0,starting_item:void 0,ability_ids:Qe.ability_ids,upgrade_ids:[],created_at:"",updated_at:""})),Ne=[...E,...he].filter(Qe=>{const Kt=Et(Qe.tier),Gs=e.level>=Qe.unlock_level,qn=Qe.prerequisite_class_id===oe.id;return Kt>W&&Gs&&qn});if(Ne.length===0)return null;const xe=Math.min(...Ne.map(Qe=>Et(Qe.tier))),Ze=`tier-${xe}`,Be=Ne.filter(Qe=>Et(Qe.tier)===xe);return{targetTier:Ze,availableClasses:Be}}return null};Ge.useEffect(()=>{if(!M&&E.length>0&&oe){const W=Fe();V(W)}},[e.level,oe==null?void 0:oe.tier,E,M]);const rt=()=>{if(!e.professionName)return null;const W=I.find(Be=>Be.name===e.professionName);if(!W)return null;const Z=Et(W.tier),ve=I.map(Be=>({id:Be.id,name:Be.name,slug:Be.slug,description:Be.description,tier:Be.tier,unlock_level:Be.unlock_level,prerequisite_class_id:Be.prerequisite_profession_id,stat_bonuses:Be.stat_bonuses,primary_attribute:void 0,secondary_attribute:void 0,starting_item:void 0,ability_ids:Be.ability_ids,upgrade_ids:[],created_at:"",updated_at:""})).filter(Be=>{const Qe=Et(Be.tier),Kt=e.level>=Be.unlock_level,Gs=Be.prerequisite_class_id===W.id;return Qe>Z&&Kt&&Gs});if(ve.length===0)return null;const Ne=Math.min(...ve.map(Be=>Et(Be.tier))),xe=`tier-${Ne}`,Ze=ve.filter(Be=>Et(Be.tier)===Ne);return{targetTier:xe,availableProfessions:Ze}};Ge.useEffect(()=>{if(!M&&I.length>0){if(!e.professionName){const Z=I.filter(he=>Et(he.tier)===1);if(Z.length>0){const he=Math.min(...Z.map(ve=>ve.unlock_level));te(e.level>=he)}else te(!1)}else te(!1);if(e.professionName){const Z=rt();le(Z)}else le(null)}},[e.level,e.professionName,M,I]);const F=()=>{const W=e.classActivatedAtLevel||1;return Math.max(0,e.level-W)},ae=()=>e.professionActivatedAtLevel?Math.max(0,e.level-e.professionActivatedAtLevel):0,Ie=()=>{const W={};if(oe!=null&&oe.stat_bonuses){const Z=F();for(const[he,ve]of Object.entries(oe.stat_bonuses))W[he]=(W[he]||0)+ve*Z}if(e.professionName&&e.professionActivatedAtLevel){const Z=I.find(he=>he.name===e.professionName);if(Z!=null&&Z.stat_bonuses){const he=ae();for(const[ve,Ne]of Object.entries(Z.stat_bonuses))W[ve]=(W[ve]||0)+Ne*he}}return W},at=W=>{const Z=e.attributes[W],he=Ie();return Z+(he[W]||0)},We=W=>{if(!(oe!=null&&oe.stat_bonuses))return 0;const Z=F();return(oe.stat_bonuses[W]||0)*Z},fr=W=>{if(!e.professionName||!e.professionActivatedAtLevel)return 0;const Z=I.find(ve=>ve.name===e.professionName);if(!(Z!=null&&Z.stat_bonuses))return 0;const he=ae();return(Z.stat_bonuses[W]||0)*he},ut=()=>{const W=e.highestTierAchieved||1;return Math.max(0,(W-1)*sv)},ms=W=>{var Z;return((Z=e.baseStats)==null?void 0:Z[W])??e.attributes[W]},Oi=W=>{const Z=ms(W);return Math.max(0,e.attributes[W]-Z)},$i=()=>Object.keys(e.attributes).reduce((W,Z)=>{const he=Oi(Z);return W+he},0),ba=vY(e.level),Di=$i(),se=Math.max(0,e.unspentAttributePoints-Di),Ke=Object.values(e.abilities).reduce((W,Z)=>W+Z,0),qe=ut(),Qt=ba.abilityPoints+qe,er=Math.max(0,Qt-Ke),it=gc(e.level),Pn=gc(e.level+1),or=Pn-it,Fa=e.xp-it,tu=Math.min(100,Math.max(0,Fa/or*100)),uc=at(je.MEM),hc=at(je.INT),xy=(Y$(uc)*100).toFixed(1),gs=(X$(hc)*100).toFixed(1),Ii=()=>{b.trim()?t({...e,name:b.trim()}):y(e.name),x(!1)},cp=()=>{y(e.name),x(!1)},dp=()=>{t({...e,headerImageUrl:j.trim()}),w(!1),S(!1)},fc=(W,Z)=>{const he=e.attributes[W],ve=ms(W);Z>0&&se<=0||Z<0&&he<=ve||t({...e,attributes:{...e.attributes,[W]:he+Z}})},ru=W=>{const Z=Math.max(1,e.level+W);let he=e.xp;W>0&&e.xp<gc(Z)&&(he=gc(Z));const Ne=(Z-e.level)*2,xe=Math.max(0,e.unspentAttributePoints+Ne);t({...e,level:Z,xp:he,unspentAttributePoints:xe})},Mn=(W,Z,he)=>{const ve=e.abilities[W]||0;if(Z>0&&(er<=0||ve>=he)||Z<0&&ve<=0)return;const Ne={...e.abilities};ve+Z<=0?delete Ne[W]:Ne[W]=ve+Z,t({...e,abilities:Ne})},up=W=>{const Z={...e.abilities};Z[W]||(Z[W]=1,t({...e,abilities:Z,history:[`Installed Ability Disk: ${W}`,...e.history]}),Y(!1),R(""))},hp=(W,Z)=>{const he={...e.abilities};delete he[W];const ve=re(Z);ve&&(he[ve.name]=1),t({...e,abilities:he})},nu=W=>{Se(Z=>{const he=new Set(Z);return he.has(W)?he.delete(W):he.add(W),he})},fp=(W,Z,he,ve)=>{let Ne=e.xp+W,xe=e.level,Ze=!1;for(;Ne>=gc(xe+1);)xe++,Ze=!0;if(Ze){let Be=0,Qe=0;const Kt=[];for(let Gs=e.level+1;Gs<=xe;Gs++){const qn=K$(Gs);Be+=qn.attributePoints,Qe+=qn.abilityPoints,Kt.push(...qn.unlocks)}P({oldLevel:e.level,newLevel:xe,attrGained:Be,abilGained:Qe,unlocks:Kt})}t({...e,level:xe,xp:Ne,credits:e.credits+Z,history:[he,...e.history],inventory:[...e.inventory,...ve]})},by=()=>{const W=gc(e.level+1);let Z=`[Status]
Name: ${e.name}
Level: ${e.level}
Class: ${e.className}
XP: ${e.xp.toLocaleString()} / ${W.toLocaleString()}
Credits: ${e.credits.toLocaleString()}

[Attributes]
`;Object.entries(e.attributes).forEach(([xe,Ze])=>{Z+=`${xe}: ${Ze}
`}),Z+=`
[Abilities]
`,Object.keys(e.abilities).forEach(xe=>{const Ze=e.abilities[xe],Be=we(xe);Z+=`${xe} (Lvl ${Ze})
${(Be==null?void 0:Be.description)||""}

`});const he=new Blob([Z],{type:"text/markdown"}),ve=URL.createObjectURL(he),Ne=document.createElement("a");Ne.href=ve,Ne.download=`${e.name.replace(/\s+/g,"_")}_Status.md`,Ne.click(),URL.revokeObjectURL(ve)},$e=({attr:W})=>{switch(W){case je.STR:return i.jsx(nr,{className:"text-red-500",size:16});case je.DEX:return i.jsx(Bn,{className:"text-yellow-500",size:16});case je.PER:return i.jsx(sc,{className:"text-emerald-500",size:16});case je.MEM:return i.jsx(Bh,{className:"text-purple-500",size:16});case je.INT:return i.jsx(ca,{className:"text-blue-500",size:16});case je.CHA:return i.jsx($x,{className:"text-pink-500",size:16});default:return i.jsx("div",{})}},K=W=>({id:String(W.id),name:W.name,description:W.description||"",maxLevel:W.maxLevel,evolutionId:W.evolutionId,tiers:W.tiers.map(Z=>({level:Z.level,duration:Z.duration,cooldown:Z.cooldown,effectDescription:Z.effectDescription||""}))}),me=()=>{const W=[],Z=new Set,he=Ne=>{(Ne.ability_ids||[]).forEach(xe=>{const Ze=re(xe);Ze&&!Z.has(Ze.name)&&(W.push(K(Ze)),Z.add(Ze.name))})};e.classHistory&&e.classHistory.length>0&&e.classHistory.forEach(Ne=>{const xe=ie(Ne);xe&&he(xe)}),oe&&he(oe);const ve=new Set;if(e.professionHistoryWithLevels&&e.professionHistoryWithLevels.length>0&&e.professionHistoryWithLevels.forEach(Ne=>{const xe=I.find(Ze=>Ze.name===Ne.className);xe!=null&&xe.ability_ids&&xe.ability_ids.forEach(Ze=>ve.add(Ze))}),e.professionName){const Ne=I.find(xe=>xe.name===e.professionName);Ne!=null&&Ne.ability_ids&&Ne.ability_ids.forEach(xe=>ve.add(xe))}return Object.keys(e.abilities).forEach(Ne=>{if(!Z.has(Ne)){const xe=we(Ne);xe&&!ve.has(xe.id)&&(W.push(K(xe)),Z.add(Ne))}}),W},Te=()=>{const W=[],Z=new Set;if(e.professionHistoryWithLevels&&e.professionHistoryWithLevels.length>0&&e.professionHistoryWithLevels.forEach(he=>{const ve=I.find(xe=>xe.name===he.className),Ne=(ve==null?void 0:ve.ability_ids)||[];Ne.length>0&&Ne.forEach(xe=>{const Ze=re(xe);Ze&&!Z.has(Ze.name)&&(W.push(K(Ze)),Z.add(Ze.name))})}),e.professionName){const he=I.find(Ne=>Ne.name===e.professionName),ve=(he==null?void 0:he.ability_ids)||[];ve.length>0&&ve.forEach(Ne=>{const xe=re(Ne);xe&&!Z.has(xe.name)&&(W.push(K(xe)),Z.add(xe.name))})}return W},yt=()=>{const W=new Set(Object.keys(e.abilities));return A.filter(Z=>!W.has(Z.name)).filter(Z=>Z.name.toLowerCase().includes(ee.toLowerCase()))};return M?i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Tr,{size:32,className:"animate-spin text-nexus-accent"}),i.jsx("span",{className:"ml-3 text-slate-400",children:"Loading character data..."})]}):i.jsxs("div",{className:"space-y-6 pb-20 relative",children:[C&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:i.jsxs("div",{className:"bg-nexus-panel border-2 border-nexus-accent shadow-[0_0_50px_rgba(6,182,212,0.3)] rounded-2xl max-w-md w-full p-8 relative overflow-hidden text-center",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-nexus-accent"}),i.jsx(H$,{size:64,className:"mx-auto text-yellow-400 mb-4 animate-bounce"}),i.jsx("h2",{className:"text-4xl font-black text-white italic tracking-tighter mb-2",children:"LEVEL UP!"}),i.jsxs("div",{className:"text-2xl font-mono text-nexus-accent mb-6",children:[C.oldLevel," ",i.jsx("span",{className:"text-slate-500 mx-2",children:""})," ",i.jsx("span",{className:"text-white font-bold",children:C.newLevel})]}),i.jsxs("div",{className:"space-y-4 mb-8",children:[C.attrGained>0&&i.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-lg border border-slate-700 flex items-center justify-between",children:[i.jsxs("span",{className:"text-slate-300 font-bold flex items-center gap-2",children:[i.jsx(ca,{size:18})," Attribute Points"]}),i.jsxs("span",{className:"text-green-400 font-black text-xl",children:["+",C.attrGained]})]}),C.abilGained>0&&i.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-lg border border-slate-700 flex items-center justify-between",children:[i.jsxs("span",{className:"text-slate-300 font-bold flex items-center gap-2",children:[i.jsx(Bn,{size:18})," Ability Points"]}),i.jsxs("span",{className:"text-yellow-400 font-black text-xl",children:["+",C.abilGained]})]})]}),i.jsx("button",{onClick:()=>P(null),className:"w-full py-3 bg-nexus-accent hover:bg-cyan-400 text-black font-bold text-lg rounded-lg transition-all transform hover:scale-105",children:"CONTINUE"})]})}),ge&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:i.jsxs("div",{className:"bg-nexus-panel border-2 border-blue-500 shadow-[0_0_60px_rgba(59,130,246,0.4)] rounded-2xl max-w-lg w-full p-8 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 via-cyan-500 to-blue-500 animate-pulse"}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-blue-500/20 rounded-full flex items-center justify-center border-2 border-blue-500 animate-bounce",children:i.jsx("svg",{className:"w-12 h-12 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),i.jsx("h2",{className:"text-3xl font-black text-blue-400 uppercase tracking-wide mb-2",children:"Professions Unlocked!"}),i.jsxs("p",{className:"text-slate-400 text-sm",children:["You've reached level ",i.jsx("span",{className:"text-white font-bold",children:e.level})," and can now choose a profession!"]}),i.jsx("p",{className:"text-blue-300 text-xs mt-2 font-bold",children:"Professions provide stat bonuses and special abilities."})]}),i.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 mb-4 border border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-500 uppercase mb-2",children:"Available Now"}),i.jsx("div",{className:"text-blue-400 font-bold",children:"Tier 1 Professions (Level 16+)"}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Choose your starting profession below"})]}),i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("button",{onClick:()=>{te(!1),ue("professional"),q(!0)},className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-lg transition-all transform hover:scale-105",children:"Choose Profession"}),i.jsx("button",{onClick:()=>te(!1),className:"px-4 py-3 bg-slate-700 hover:bg-slate-600 text-slate-300 font-bold rounded-lg transition-all",children:"Later"})]}),i.jsx("div",{className:"text-center text-xs text-slate-500 border-t border-slate-700 pt-4",children:i.jsx("p",{children:" You can select a profession from the Profession section on your character sheet"})})]})}),z&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:i.jsxs("div",{className:"bg-nexus-panel border-2 border-cyan-500 shadow-[0_0_60px_rgba(6,182,212,0.4)] rounded-2xl max-w-lg w-full p-8 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-cyan-500 via-blue-500 to-cyan-500 animate-pulse"}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-cyan-500/20 rounded-full flex items-center justify-center border-2 border-cyan-500 animate-bounce",children:i.jsx(Ip,{size:40,className:"text-cyan-400"})}),i.jsx("h2",{className:"text-3xl font-black text-cyan-400 uppercase tracking-wide mb-2",children:"Profession Upgrade Available!"}),i.jsxs("p",{className:"text-slate-400 text-sm",children:["You've reached level ",i.jsx("span",{className:"text-white font-bold",children:e.level})," and can now advance to ",i.jsx("span",{className:`font-bold ${((Gt=ao[z.targetTier])==null?void 0:Gt.split(" ")[0])||"text-cyan-400"}`,children:Ri[z.targetTier]})," profession!"]})]}),i.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 mb-4 border border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-500 uppercase mb-1",children:"Current Profession"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("span",{className:"font-bold text-slate-200",children:e.professionName})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"text-sm font-bold text-slate-400 mb-3 flex items-center gap-2",children:[i.jsx(nv,{size:14,className:"text-cyan-400"}),"Choose Your ",Ri[z.targetTier]," Profession"]}),i.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:z.availableProfessions.map(W=>{var ve;const Z=((ve=ao[W.tier])==null?void 0:ve.split(" ")[0])||"text-cyan-400",he=(W.ability_ids||[]).map(Ne=>re(Ne)).filter(Ne=>Ne!==void 0);return i.jsxs("button",{onClick:()=>{const Ne=e.professionHistoryWithLevels?[...e.professionHistoryWithLevels]:[];e.professionName&&e.professionActivatedAtLevel&&Ne.push({className:e.professionName,activatedAtLevel:e.professionActivatedAtLevel,deactivatedAtLevel:e.level}),t({...e,professionName:W.name,professionActivatedAtLevel:e.level,professionHistoryWithLevels:Ne,history:[`Advanced profession to ${Ri[W.tier]}: ${W.name} at Lvl ${e.level}`,...e.history]}),le(null)},className:"w-full text-left p-4 bg-slate-800/80 hover:bg-cyan-900/30 border border-slate-700 hover:border-cyan-500 rounded-lg transition-all group",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:`font-bold text-lg ${Z} group-hover:text-cyan-400`,children:W.name}),i.jsx(en,{size:20,className:"text-slate-600 group-hover:text-cyan-400 transition-colors"})]}),i.jsx("p",{className:"text-sm text-slate-400 mb-2",children:W.description||"No description available."}),W.stat_bonuses&&Object.keys(W.stat_bonuses).length>0&&i.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:Object.entries(W.stat_bonuses).map(([Ne,xe])=>i.jsxs("span",{className:"text-xs bg-green-900/30 text-green-400 px-2 py-0.5 rounded",children:[Ne," +",xe,"/lvl"]},Ne))}),he.length>0&&i.jsxs("div",{className:"text-xs text-cyan-300 mt-2 pt-2 border-t border-slate-700",children:[i.jsx("span",{className:"font-bold",children:"New Abilities:"})," ",he.map(Ne=>Ne==null?void 0:Ne.name).join(", ")]})]},W.id)})})]}),i.jsx("div",{className:"text-center text-xs text-slate-500 border-t border-slate-700 pt-4",children:i.jsx("p",{children:" Advancing your profession grants new professional abilities"})})]})}),U&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:i.jsxs("div",{className:"bg-nexus-panel border-2 border-orange-500 shadow-[0_0_60px_rgba(249,115,22,0.4)] rounded-2xl max-w-lg w-full p-8 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-orange-500 via-yellow-500 to-orange-500 animate-pulse"}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-orange-500/20 rounded-full flex items-center justify-center border-2 border-orange-500 animate-bounce",children:i.jsx(Ip,{size:40,className:"text-orange-400"})}),i.jsx("h2",{className:"text-3xl font-black text-orange-400 uppercase tracking-wide mb-2",children:"New Tier Unlocked!"}),i.jsxs("p",{className:"text-slate-400 text-sm",children:["You've reached level ",i.jsx("span",{className:"text-white font-bold",children:e.level})," and unlocked ",i.jsx("span",{className:`font-bold ${((Rr=ao[U.targetTier])==null?void 0:Rr.split(" ")[0])||"text-orange-400"}`,children:Ri[U.targetTier]})," classes!"]}),i.jsx("p",{className:"text-orange-300 text-xs mt-2 font-bold",children:"Choose a new class to continue your journey."})]}),i.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 mb-4 border border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-500 uppercase mb-1",children:"Current Class"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(nr,{size:16,className:"text-nexus-warn"}),i.jsx("span",{className:"font-bold text-slate-200",children:e.className}),oe&&i.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-700 text-slate-400",children:Ri[oe.tier]})]})]}),i.jsx("div",{className:"bg-yellow-900/20 border border-yellow-600/30 rounded-lg p-3 mb-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-yellow-400 font-bold text-sm flex items-center gap-2",children:[i.jsx(Bn,{size:16}),"Tier Upgrade Bonus"]}),i.jsxs("span",{className:"text-yellow-300 font-black text-lg",children:["+",sv," Ability Points"]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"text-sm font-bold text-slate-400 mb-3 flex items-center gap-2",children:[i.jsx(nv,{size:14,className:"text-orange-400"}),"Choose Your ",Ri[U.targetTier]," Class"]}),i.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:U.availableClasses.map(W=>{var ve;const Z=((ve=ao[W.tier])==null?void 0:ve.split(" ")[0])||"text-orange-400",he=Et(W.tier);return i.jsxs("button",{onClick:()=>{s&&s(W.id);const Ne=e.highestTierAchieved||1,xe=Math.max(Ne,he),Ze=e.classHistory?[...e.classHistory]:[];Ze.includes(e.className)||Ze.push(e.className);const Be=e.classHistoryWithLevels?[...e.classHistoryWithLevels]:[];Be.forEach(Kt=>{Kt.deactivatedAtLevel||(Kt.deactivatedAtLevel=e.level)});const Qe=e.classActivatedAtLevel||1;e.level>Qe&&Be.push({className:e.className,activatedAtLevel:Qe,deactivatedAtLevel:e.level}),t({...e,className:W.name,highestTierAchieved:xe,classActivatedAtLevel:e.level,classHistory:Ze,classHistoryWithLevels:Be,history:[`Advanced to ${Ri[W.tier]}: ${W.name} at Lvl ${e.level} (+${sv} Ability Points)`,...e.history]}),be(Ze),V(null)},className:"w-full text-left p-4 bg-slate-800/80 hover:bg-orange-900/30 border border-slate-700 hover:border-orange-500 rounded-lg transition-all group",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:`font-bold text-lg ${Z} group-hover:text-orange-400`,children:W.name}),i.jsx(en,{size:20,className:"text-slate-600 group-hover:text-orange-400 transition-colors"})]}),i.jsx("p",{className:"text-sm text-slate-400 mb-2",children:W.description||"No description available."}),W.stat_bonuses&&Object.keys(W.stat_bonuses).length>0&&i.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(W.stat_bonuses).map(([Ne,xe])=>i.jsxs("span",{className:"text-xs bg-green-900/30 text-green-400 px-2 py-0.5 rounded",children:[Ne," +",xe,"/lvl"]},Ne))})]},W.id)})})]}),i.jsx("div",{className:"text-center text-xs text-slate-500 border-t border-slate-700 pt-4",children:i.jsx("p",{children:" Class selection is required to continue leveling up"})})]})}),G&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:i.jsxs("div",{className:"bg-nexus-panel border border-slate-600 shadow-2xl rounded-xl max-w-lg w-full p-6 relative",children:[i.jsx("button",{onClick:()=>Y(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:i.jsx(Dt,{size:24})}),i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(jG,{className:"text-purple-400",size:32}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:"Install Ability Disk"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Select an ability from the database."})]})]}),i.jsxs("div",{className:"relative mb-4",children:[i.jsx("input",{type:"text",placeholder:"Search abilities...",value:ee,onChange:W=>R(W.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-lg pl-10 pr-4 py-3 text-white focus:border-nexus-accent outline-none",autoFocus:!0}),i.jsx(gi,{className:"absolute left-3 top-3.5 text-slate-500",size:18})]}),i.jsxs("div",{className:"h-60 overflow-y-auto space-y-2 mb-4 bg-slate-900/50 p-2 rounded border border-slate-800",children:[yt().map(W=>i.jsxs("button",{onClick:()=>up(W.name),className:"w-full text-left p-3 bg-slate-800 hover:bg-slate-700 border border-slate-700 hover:border-nexus-accent rounded flex items-center justify-between group transition-all",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-slate-200",children:W.name}),i.jsx("div",{className:"text-xs text-slate-500 truncate",children:W.description})]}),i.jsx(ma,{size:16,className:"text-slate-500 group-hover:text-nexus-accent"})]},W.id)),yt().length===0&&i.jsx("div",{className:"text-center text-slate-500 py-8 text-sm",children:ee?"No matching abilities.":"No abilities in DB."})]})]})}),i.jsxs("div",{className:`${o} rounded-xl border backdrop-blur-sm relative overflow-hidden group mb-6`,children:[e.headerImageUrl&&!k&&i.jsx("div",{className:`h-32 sm:h-48 w-full overflow-hidden relative border-b ${h}`,children:i.jsx("img",{src:e.headerImageUrl,alt:"Character Banner",className:"w-full h-full object-cover object-left-top",onError:()=>S(!0)})}),i.jsxs("div",{className:"p-6 relative",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4 relative z-10",children:[i.jsxs("div",{children:[m?i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("input",{type:"text",value:b,onChange:W=>y(W.target.value),className:`${l} border-nexus-accent text-3xl font-bold ${c} font-mono tracking-tighter rounded px-2 py-1 w-full md:w-auto focus:outline-none`,autoFocus:!0}),i.jsx("button",{onClick:Ii,className:"p-1 text-nexus-success hover:bg-nexus-success/20 rounded",children:i.jsx($a,{size:24})}),i.jsx("button",{onClick:cp,className:"p-1 text-red-400 hover:bg-red-400/20 rounded",children:i.jsx(Dt,{size:24})})]}):i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h1",{className:`text-4xl font-bold ${c} font-mono tracking-tighter drop-shadow-md`,children:e.name}),i.jsx("button",{onClick:()=>{x(!0),y(e.name)},className:`${u} hover:text-nexus-accent transition-colors opacity-0 group-hover:opacity-100`,title:"Edit Name",children:i.jsx(R$,{size:16})})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:"text-nexus-accent font-semibold",children:e.className}),i.jsx("span",{className:u,children:"|"}),i.jsxs("span",{className:d,children:["Level ",e.level]}),i.jsx("button",{onClick:()=>{w(!v),N(e.headerImageUrl||"")},className:`${u} ${f} ml-2 transition-colors opacity-0 group-hover:opacity-100`,title:"Change Banner Image",children:i.jsx(so,{size:14})})]}),v&&i.jsxs("div",{className:"mt-2 flex gap-2 animate-in fade-in slide-in-from-top-1",children:[i.jsx("input",{type:"text",value:j,onChange:W=>N(W.target.value),placeholder:"Paste WebP image URL...",className:`text-xs ${l} rounded px-2 py-1 w-64 ${d} outline-none focus:border-nexus-accent`}),i.jsx("button",{onClick:dp,className:"bg-nexus-success/20 text-nexus-success px-2 py-1 rounded text-xs hover:bg-nexus-success/30",children:"Set"}),i.jsx("button",{onClick:()=>w(!1),className:`${a==="light"?"bg-slate-200":"bg-slate-700"} ${d} px-2 py-1 rounded text-xs ${p}`,children:"Cancel"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:`flex items-center gap-2 ${a==="light"?"bg-yellow-50/50":"bg-slate-900/50"} p-2 px-3 rounded-lg border ${h} h-[50px] backdrop-blur-md`,children:[i.jsx(Mx,{className:"text-yellow-400",size:20}),i.jsxs("div",{children:[i.jsx("div",{className:`text-[10px] ${u} uppercase tracking-widest leading-none`,children:"Credits"}),i.jsx("div",{className:"text-lg font-bold text-yellow-400 font-mono leading-none mt-1",children:e.credits.toLocaleString()})]})]}),i.jsxs("div",{className:`flex items-center gap-2 ${a==="light"?"bg-slate-100/50":"bg-slate-900/50"} p-2 rounded-lg border ${h} backdrop-blur-md`,children:[i.jsx("button",{onClick:()=>ru(-1),className:`w-8 h-8 flex items-center justify-center ${a==="light"?"bg-slate-200 hover:bg-slate-300":"bg-slate-700 hover:bg-slate-600"} rounded ${c} font-bold transition-colors`,children:"-"}),i.jsxs("div",{className:"text-center min-w-[60px]",children:[i.jsx("div",{className:`text-[10px] ${u} uppercase tracking-widest leading-none mb-1`,children:"Level"}),i.jsx("div",{className:`text-xl font-bold ${c} font-mono leading-none`,children:e.level})]}),i.jsx("button",{onClick:()=>ru(1),className:`w-8 h-8 flex items-center justify-center bg-nexus-accent hover:bg-cyan-600 rounded ${a==="light"?"text-white":"text-black"} font-bold transition-colors`,children:"+"})]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:`flex justify-between text-xs mb-1 ${u}`,children:[i.jsxs("span",{children:["XP: ",e.xp.toLocaleString()]}),i.jsxs("span",{children:["Next: ",Pn.toLocaleString()]})]}),i.jsx("div",{className:`h-3 ${a==="light"?"bg-slate-100":"bg-slate-900/80"} rounded-full overflow-hidden border ${h} relative backdrop-blur-sm`,children:i.jsx("div",{className:"h-full bg-nexus-accent transition-all duration-500 shadow-[0_0_10px_rgba(6,182,212,0.5)]",style:{width:`${tu}%`}})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"text-red-400 font-bold",children:"Health"}),i.jsxs("span",{className:d,children:[at(je.STR)*2+e.level*5," HP"]})]}),i.jsx("div",{className:`h-2 ${a==="light"?"bg-slate-100":"bg-slate-900/80"} rounded-full overflow-hidden`,children:i.jsx("div",{className:"h-full bg-red-500 w-full"})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"text-blue-400 font-bold",children:"Energy"}),i.jsxs("span",{className:d,children:[at(je.INT)+at(je.MEM)," EP"]})]}),i.jsx("div",{className:`h-2 ${a==="light"?"bg-slate-100":"bg-slate-900/80"} rounded-full overflow-hidden`,children:i.jsx("div",{className:"h-full bg-blue-500 w-full"})})]})]})]})]}),i.jsxs("div",{className:`${o} p-4 rounded-xl border`,children:[i.jsxs("div",{className:`flex justify-between items-center mb-4 border-b ${h} pb-2`,children:[i.jsxs("h2",{className:`text-lg font-bold ${d} flex items-center gap-2`,children:[i.jsx(ca,{size:18,className:"text-nexus-accent"}),"Attributes"]}),i.jsxs("div",{className:`text-xs px-2 py-0.5 rounded-full border ${se>0?"bg-nexus-accent/20 border-nexus-accent text-nexus-accent":`${a==="light"?"bg-slate-100 border-slate-300":"bg-slate-800 border-slate-600"} ${u}`}`,children:["Points: ",se]})]}),i.jsx("p",{className:"text-xs text-pink-300 mb-3",children:"Pink + values are unbanked level-up pointsapply them now and press Save to lock them in."}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:Object.keys(e.attributes).map(W=>{var he;const Z=Oi(W);return i.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${a==="light"?"bg-slate-100/50 border-slate-200":"bg-slate-800/50 border-slate-700"} border`,children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx($e,{attr:W}),i.jsx("span",{className:`font-bold text-sm ${d}`,children:W}),W===je.MEM&&i.jsxs("span",{className:"text-[9px] uppercase bg-purple-900/50 text-purple-300 px-1 rounded",children:["-",xy,"% CD"]}),W===je.INT&&i.jsxs("span",{className:"text-[9px] uppercase bg-blue-900/50 text-blue-300 px-1 rounded",children:["+",gs,"% Dur"]})]}),i.jsx("span",{className:`text-[10px] ${u} truncate w-24`,children:(he=T1[W])==null?void 0:he.split(",")[0]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>fc(W,-1),className:`w-5 h-5 flex items-center justify-center rounded ${a==="light"?"bg-slate-200 hover:bg-slate-300":"bg-slate-700 hover:bg-slate-600"} ${d} disabled:opacity-30 text-xs`,disabled:e.attributes[W]<=ms(W),children:"-"}),i.jsxs("div",{className:"flex items-center gap-0.5 min-w-[60px] justify-center",children:[i.jsx("span",{className:`font-mono font-bold text-sm ${c}`,children:e.attributes[W]}),Z>0&&i.jsxs("span",{className:"text-[10px] font-bold text-pink-300",title:"Unbanked level-up points",children:["+",Z]}),We(W)>0&&i.jsxs("span",{className:"text-[10px] font-bold text-orange-400",title:"Class bonus",children:["+",We(W)]}),fr(W)>0&&i.jsxs("span",{className:"text-[10px] font-bold text-blue-400",title:"Profession bonus",children:["+",fr(W)]})]}),i.jsx("button",{onClick:()=>fc(W,1),className:`w-5 h-5 flex items-center justify-center rounded bg-nexus-accent/20 hover:bg-nexus-accent/40 text-nexus-accent disabled:opacity-30 ${a==="light"?"disabled:bg-slate-200":"disabled:bg-slate-800"} disabled:text-slate-600 text-xs`,disabled:se<=0,children:"+"})]})]},W)})})]}),i.jsx(NY,{equippedItems:e.equippedItems||{},onEquipmentChange:W=>t({...e,equippedItems:W}),isEditable:!0,items:$}),i.jsx(VY,{isOpen:B,onClose:()=>q(!1),defaultCategory:X,lockCategory:X==="professional",onSelectClass:(W,Z)=>{if(X==="professional"){const he=e.professionHistoryWithLevels?[...e.professionHistoryWithLevels]:[];e.professionName&&e.professionActivatedAtLevel&&he.push({className:e.professionName,activatedAtLevel:e.professionActivatedAtLevel,deactivatedAtLevel:e.level}),console.log(" Selecting profession:",{className:Z,level:e.level,professionActivatedAtLevel:e.level}),t({...e,professionName:Z,professionActivatedAtLevel:e.level,professionHistoryWithLevels:he,history:[`Selected profession: ${Z} at Lvl ${e.level}`,...e.history]})}else{s&&s(W);const he=e.classHistory?[...e.classHistory]:[];he.includes(e.className)||he.push(e.className);const ve=e.classHistoryWithLevels?[...e.classHistoryWithLevels]:[];ve.forEach(xe=>{xe.deactivatedAtLevel||(xe.deactivatedAtLevel=e.level)});const Ne=e.classActivatedAtLevel||1;e.level>Ne&&ve.push({className:e.className,activatedAtLevel:Ne,deactivatedAtLevel:e.level}),t({...e,className:Z,classActivatedAtLevel:e.level,classHistory:he,classHistoryWithLevels:ve,history:[`Changed class to ${Z} at Lvl ${e.level}`,...e.history]}),be(he)}q(!1),ue("combat")},currentClassId:n??null,characterLevel:e.level}),i.jsxs("div",{className:"bg-nexus-panel p-6 rounded-xl border border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-4 border-b border-slate-700 pb-2",children:[i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>st(!He),children:[He?i.jsx(en,{size:20,className:"text-slate-500"}):i.jsx(Wi,{size:20,className:"text-slate-500"}),i.jsx(nr,{size:20,className:"text-nexus-warn"}),i.jsx("h2",{className:"text-xl font-bold text-slate-200",children:"Class"})]}),i.jsx("button",{onClick:()=>q(!0),className:"text-xs px-3 py-1 bg-orange-600/20 hover:bg-orange-600/30 text-orange-400 rounded border border-orange-600/30 hover:border-orange-500 transition-colors",children:"Change Class"})]}),!He&&i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700 mb-4",children:[i.jsx("h3",{className:"text-lg font-bold text-nexus-warn",children:e.className}),oe&&i.jsx("p",{className:"text-sm text-slate-300 mt-1",children:oe.description}),(oe==null?void 0:oe.stat_bonuses)&&Object.keys(oe.stat_bonuses).length>0&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-700",children:[i.jsxs("div",{className:"text-xs text-slate-500 uppercase mb-2",children:["Class Bonuses (per level  ",F()," levels since Lvl ",e.classActivatedAtLevel||1,")"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(oe.stat_bonuses).map(([W,Z])=>i.jsxs("span",{className:"text-xs bg-green-900/30 text-green-400 px-2 py-1 rounded border border-green-700/30",children:[W,": +",Z,"/lvl = ",i.jsxs("strong",{children:["+",Z*F()]})]},W))})]}),!n&&i.jsx("div",{className:"mt-3 p-2 bg-orange-900/20 border border-orange-700/30 rounded text-xs text-orange-400",children:'Click "Change Class" to select a class from the database.'})]}),!He&&E.length>0&&oe&&i.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-400 mb-3 flex items-center gap-2",children:[i.jsx(eA,{size:14}),"Class Progression"]}),i.jsx("div",{className:"space-y-3",children:["tier-1","tier-2","tier-3","tier-4","tier-5","tier-6"].map(W=>{const Z=parseInt(W.replace("tier-","")),he=Et(oe.tier);if(Z>he)return null;const ve=E.filter(Be=>Be.tier===W);if(ve.length===0)return null;const Ne={1:"border-slate-600 text-slate-400",2:"border-blue-600 text-blue-400",3:"border-purple-600 text-purple-400",4:"border-yellow-600 text-yellow-400",5:"border-orange-600 text-orange-400",6:"border-red-600 text-red-400"},xe=Ne[Z]||Ne[1],Ze=ve.filter(Be=>{const Qe=Be.name===e.className,Kt=ne.includes(Be.name);return Qe||Kt});return Ze.length===0?null:i.jsxs("div",{children:[i.jsxs("div",{className:`text-xs font-bold uppercase tracking-wider mb-2 ${xe.split(" ")[1]}`,children:[Z===he?" Current - ":"",Ri[W]]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Ze.map(Be=>{const Qe=Be.name===e.className,Kt=ne.includes(Be.name);return i.jsxs("div",{className:`p-2 px-3 rounded-lg border text-xs transition-all ${Qe?`${xe.replace("text-","bg-").replace("400","900/40")} ${xe.replace("600","500")} font-bold`:Kt?"bg-slate-800/30 border-slate-700 text-slate-400":"bg-slate-900/30 border-slate-800 text-slate-600"}`,title:`${Be.name}${Be.description?": "+Be.description:""}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[Qe&&i.jsx("span",{className:"text-yellow-400",children:""}),i.jsx("span",{className:Qe?xe.split(" ")[1]:"",children:Be.name}),Kt&&!Qe&&i.jsx("span",{className:"text-[9px] text-slate-600",children:"(prev)"})]}),Be.stat_bonuses&&Object.keys(Be.stat_bonuses).length>0&&i.jsx("div",{className:"text-[9px] text-slate-500 mt-1",children:Object.entries(Be.stat_bonuses).map(([Gs,qn])=>`${Gs}+${qn}`).join(" ")})]},Be.id)})})]},W)})})]})]}),i.jsxs("div",{className:"bg-nexus-panel p-6 rounded-xl border border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-4 border-b border-slate-700 pb-2",children:[i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>J(!H),children:[H?i.jsx(en,{size:20,className:"text-slate-500"}):i.jsx(Wi,{size:20,className:"text-slate-500"}),i.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("h2",{className:"text-xl font-bold text-slate-200",children:"Profession"})]}),e.level>=16&&i.jsxs("button",{onClick:()=>{ue("professional"),q(!0)},className:"text-xs px-3 py-1 bg-blue-600/20 hover:bg-blue-600/30 text-blue-400 rounded border border-blue-600/30 hover:border-blue-500 transition-colors",children:[e.professionName?"Change":"Select"," Profession"]})]}),!H&&i.jsx(i.Fragment,{children:e.professionName?(()=>{const W=I.find(he=>he.name===e.professionName);if(!W)return null;const Z=e.professionActivatedAtLevel?Math.max(0,e.level-e.professionActivatedAtLevel):0;return i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold text-blue-400",children:W.name}),i.jsx("p",{className:"text-sm text-slate-300 mt-1",children:W.description}),W.stat_bonuses&&Object.keys(W.stat_bonuses).length>0&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-700",children:[i.jsxs("div",{className:"text-xs text-slate-500 uppercase mb-2",children:["Profession Bonuses (per level  ",Z," levels since Lvl ",e.professionActivatedAtLevel||e.level,")"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(W.stat_bonuses).map(([he,ve])=>i.jsxs("span",{className:"text-xs bg-green-900/30 text-green-400 px-2 py-1 rounded border border-green-700/30",children:[he,": +",ve,"/lvl = ",i.jsxs("strong",{children:["+",ve*Z]})]},he))})]})]})})():i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx("svg",{className:"w-16 h-16 mx-auto mb-3 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("p",{className:"text-sm",children:"No profession selected"}),i.jsx("p",{className:"text-xs text-slate-600 mt-1",children:e.level>=16?'Click "Select Profession" to choose your profession':"Professions unlock at level 16"})]})})]}),i.jsxs("div",{className:"bg-nexus-panel p-6 rounded-xl border border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-700 pb-2",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-200 flex items-center gap-2",children:[i.jsx(Bn,{size:20,className:"text-yellow-500"}),"Abilities"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:`text-sm px-3 py-1 rounded-full border ${er>0?"bg-yellow-500/20 border-yellow-500 text-yellow-500":"bg-slate-800 border-slate-600 text-slate-500"}`,title:qe>0?`Base: ${ba.abilityPoints} + Tier Bonus: ${qe}`:void 0,children:["Points: ",er,qe>0&&i.jsxs("span",{className:"text-[10px] ml-1 text-orange-400",children:["(+",qe," tier)"]})]}),i.jsx("button",{onClick:()=>Y(!0),className:"w-7 h-7 flex items-center justify-center bg-slate-800 hover:bg-purple-600 border border-slate-600 hover:border-purple-400 rounded-full transition-colors text-slate-400 hover:text-white group",title:"Install Ability Disk",children:i.jsx(ma,{size:16})})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer mb-4 p-2 hover:bg-slate-800/30 rounded transition-colors",onClick:()=>Se(W=>{const Z=new Set(W);return Z.has("combat-section")?Z.delete("combat-section"):Z.add("combat-section"),Z}),children:[ye.has("combat-section")?i.jsx(en,{size:20,className:"text-slate-500"}):i.jsx(Wi,{size:20,className:"text-slate-500"}),i.jsx(nr,{size:18,className:"text-orange-400"}),i.jsx("h3",{className:"text-lg font-bold text-slate-300",children:"Combat Abilities"})]}),!ye.has("combat-section")&&i.jsx("div",{className:"space-y-4",children:me().map(W=>{const Z=e.abilities[W.name]||0,he=er>0&&Z<W.maxLevel,ve=Z>0,Ne=ye.has(W.id),xe=W.tiers.find(qn=>qn.level===Z),Ze=W.tiers.find(qn=>qn.level===Z+1),Be=Z===W.maxLevel&&W.evolutionId&&er>0,Qe=W.evolutionId?re(W.evolutionId):null,Kt=xe!=null&&xe.cooldown?nA(xe.cooldown,uc):void 0,Gs=xe!=null&&xe.duration?sA(xe.duration,hc):void 0;return i.jsxs("div",{className:"flex flex-col bg-slate-800/30 rounded border border-slate-700/50 hover:border-slate-600 transition-colors",children:[i.jsxs("div",{className:"flex justify-between items-center p-4 cursor-pointer hover:bg-slate-800/50 transition-colors rounded-t",onClick:()=>nu(W.id),children:[i.jsxs("div",{className:"flex items-center gap-2",children:[Ne?i.jsx(en,{size:16,className:"text-slate-500"}):i.jsx(Wi,{size:16,className:"text-slate-500"}),i.jsx("span",{className:"font-semibold text-slate-200",children:W.name})]}),i.jsxs("div",{className:"flex items-center gap-2",onClick:qn=>qn.stopPropagation(),children:[i.jsxs("div",{className:"text-xs text-slate-500 font-mono",children:["Lvl ",Z,"/",W.maxLevel]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>Mn(W.name,-1,W.maxLevel),disabled:!ve,className:`w-6 h-6 flex items-center justify-center rounded transition-colors ${ve?"bg-slate-700 hover:bg-slate-600 text-slate-300":"bg-slate-800 text-slate-600 cursor-not-allowed"}`,children:i.jsx(id,{size:14})}),i.jsx("button",{onClick:()=>Mn(W.name,1,W.maxLevel),disabled:!he,className:`w-6 h-6 flex items-center justify-center rounded transition-colors ${he?"bg-yellow-500 hover:bg-yellow-400 text-black":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:i.jsx(en,{size:14})})]})]})]}),!Ne&&i.jsxs("div",{className:"px-4 pb-4 animate-in slide-in-from-top-2 duration-200",children:[i.jsx("p",{className:"text-sm text-slate-400 mb-3 pl-6 border-l-2 border-slate-700/50",children:W.description}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs bg-slate-900/40 p-2 rounded ml-6",children:[xe?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-slate-500",children:["Duration: ",i.jsx("span",{className:"text-slate-300",children:Gs||xe.duration||"-"})]}),i.jsxs("div",{className:"text-slate-500",children:["Cooldown: ",i.jsx("span",{className:"text-slate-300",children:Kt||xe.cooldown||"-"})]}),i.jsxs("div",{className:"col-span-2 text-blue-300 border-t border-slate-800 pt-1 mt-1",children:["Current: ",xe.effectDescription]})]}):i.jsx("div",{className:"col-span-2 text-slate-600 italic",children:"Not learned yet."}),Ze&&i.jsxs("div",{className:"col-span-2 text-slate-500 border-t border-slate-800 pt-1 mt-1 flex items-center gap-1",children:[i.jsx(Ip,{size:12,className:"text-green-500"}),"Next: ",Ze.effectDescription]})]}),Be&&Qe&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-700 flex items-center justify-between ml-6",children:[i.jsxs("div",{className:"text-xs text-purple-400",children:[i.jsx("span",{className:"font-bold",children:"Evolution Available:"})," ",Qe.name]}),i.jsxs("button",{onClick:()=>hp(W.name,W.evolutionId),className:"flex items-center gap-1 bg-purple-600 hover:bg-purple-500 text-white px-3 py-1 rounded text-xs font-bold transition-all animate-pulse",children:[i.jsx(nv,{size:12}),"Evolve"]})]})]})]},W.id)})})]}),e.professionName&&Te().length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer mb-4 p-2 hover:bg-slate-800/30 rounded transition-colors",onClick:()=>Se(W=>{const Z=new Set(W);return Z.has("professional-section")?Z.delete("professional-section"):Z.add("professional-section"),Z}),children:[ye.has("professional-section")?i.jsx(en,{size:20,className:"text-slate-500"}):i.jsx(Wi,{size:20,className:"text-slate-500"}),i.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("h3",{className:"text-lg font-bold text-slate-300",children:"Professional Abilities"})]}),!ye.has("professional-section")&&i.jsx("div",{className:"space-y-4",children:Te().map(W=>{const Z=e.abilities[W.name]||0,he=er>0&&Z<W.maxLevel,ve=Z>0,Ne=ye.has(W.id),xe=W.tiers.find(Kt=>Kt.level===Z),Ze=W.tiers.find(Kt=>Kt.level===Z+1),Be=xe!=null&&xe.cooldown?nA(xe.cooldown,uc):void 0,Qe=xe!=null&&xe.duration?sA(xe.duration,hc):void 0;return i.jsxs("div",{className:"flex flex-col bg-slate-800/30 rounded border border-blue-700/50 hover:border-blue-600 transition-colors",children:[i.jsxs("div",{className:"flex justify-between items-center p-4 cursor-pointer hover:bg-slate-800/50 transition-colors rounded-t",onClick:()=>nu(W.id),children:[i.jsxs("div",{className:"flex items-center gap-2",children:[Ne?i.jsx(en,{size:16,className:"text-slate-500"}):i.jsx(Wi,{size:16,className:"text-slate-500"}),i.jsx("span",{className:"font-semibold text-blue-300",children:W.name})]}),i.jsxs("div",{className:"flex items-center gap-2",onClick:Kt=>Kt.stopPropagation(),children:[i.jsxs("div",{className:"text-xs text-slate-500 font-mono",children:["Lvl ",Z,"/",W.maxLevel]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>Mn(W.name,-1,W.maxLevel),disabled:!ve,className:`w-6 h-6 flex items-center justify-center rounded transition-colors ${ve?"bg-slate-700 hover:bg-slate-600 text-slate-300":"bg-slate-800 text-slate-600 cursor-not-allowed"}`,children:i.jsx(id,{size:14})}),i.jsx("button",{onClick:()=>Mn(W.name,1,W.maxLevel),disabled:!he,className:`w-6 h-6 flex items-center justify-center rounded transition-colors ${he?"bg-yellow-500 hover:bg-yellow-400 text-black":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:i.jsx(en,{size:14})})]})]})]}),!Ne&&i.jsxs("div",{className:"px-4 pb-4 animate-in slide-in-from-top-2 duration-200",children:[i.jsx("p",{className:"text-sm text-slate-400 mb-3 pl-6 border-l-2 border-blue-700/50",children:W.description}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs bg-slate-900/40 p-2 rounded ml-6",children:[xe?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-slate-500",children:["Duration: ",i.jsx("span",{className:"text-slate-300",children:Qe||xe.duration||"-"})]}),i.jsxs("div",{className:"text-slate-500",children:["Cooldown: ",i.jsx("span",{className:"text-slate-300",children:Be||xe.cooldown||"-"})]}),i.jsxs("div",{className:"col-span-2 text-blue-300 border-t border-slate-800 pt-1 mt-1",children:["Current: ",xe.effectDescription]})]}):i.jsx("div",{className:"col-span-2 text-slate-600 italic",children:"Not learned yet."}),Ze&&i.jsxs("div",{className:"col-span-2 text-slate-500 border-t border-slate-800 pt-1 mt-1 flex items-center gap-1",children:[i.jsx(Ip,{size:12,className:"text-green-500"}),"Next: ",Ze.effectDescription]})]})]})]},W.id)})})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:by,className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-slate-200 border border-slate-600 px-4 py-2 rounded-lg transition-all text-sm font-medium",children:[i.jsx(O$,{size:18}),i.jsx("span",{children:"Download Status Sheet"})]})}),i.jsx(wY,{character:e,monsters:r,onApplyResult:fp,currentDbClass:oe,items:$}),i.jsxs("div",{className:"bg-nexus-panel p-6 rounded-xl border border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-slate-700 pb-2",children:[i.jsx(eA,{size:20,className:"text-slate-400"}),i.jsx("h2",{className:"text-xl font-bold text-slate-200",children:"Adventure Log"})]}),i.jsx("div",{className:"bg-slate-900 rounded-lg p-4 font-mono text-sm h-64 overflow-y-auto shadow-inner border border-slate-800",children:e.history.length===0?i.jsx("div",{className:"text-slate-600 italic text-center mt-20",children:"No data recorded."}):e.history.map((W,Z)=>i.jsxs("div",{className:"mb-2 border-b border-slate-800 pb-2 last:border-0 last:pb-0",children:[i.jsxs("span",{className:"text-nexus-accent mr-2",children:["[",e.history.length-Z,"]"]}),i.jsx("span",{className:"text-slate-300",children:W})]},Z))})]})]})},GY=[{to:"/litrpg",label:"Character",icon:U$,color:"hover:text-nexus-accent",exact:!0},{to:"/litrpg/attributes",label:"Attributes",icon:ca,color:"hover:text-nexus-accent"},{to:"/litrpg/classes",label:"Classes",icon:nr,color:"hover:text-orange-400"},{to:"/litrpg/abilities",label:"Abilities",icon:Bn,color:"hover:text-yellow-400"},{to:"/litrpg/bestiary",label:"Bestiary",icon:Px,color:"hover:text-purple-400"},{to:"/litrpg/loot",label:"Loot",icon:zh,color:"hover:text-green-400"},{to:"/litrpg/contracts",label:"Contracts",icon:jg,color:"hover:text-nexus-success"}];function ac(){const e=Ba(),{theme:t}=Wt(),r=(c,d)=>d?e.pathname===c:e.pathname.startsWith(c),n=t==="light"?"bg-white/80":"bg-slate-900/80",s=t==="light"?"border-gray-200":"border-slate-700",a=t==="light"?"text-gray-500":"text-slate-400",o=t==="light"?"bg-gray-100 border-gray-300":"bg-slate-800 border-slate-600",l=t==="light"?"hover:bg-gray-100":"hover:bg-slate-800/50";return i.jsx("nav",{className:`${n} backdrop-blur-md border-b ${s} sticky top-0 z-30`,children:i.jsx("div",{className:"max-w-5xl mx-auto px-4",children:i.jsx("div",{className:"h-10 flex items-center justify-center gap-1",children:GY.map(c=>{const d=c.icon,u=r(c.to,c.exact);return i.jsxs(Me,{to:c.to,title:c.label,className:`flex items-center gap-1 px-2 py-1 rounded transition-all text-xs font-medium border ${u?`${o} text-nexus-accent`:`${a} ${c.color} border-transparent ${l}`}`,children:[i.jsx(d,{size:14}),i.jsx("span",{className:"hidden sm:inline",children:c.label})]},c.to)})})})})}const KY=()=>{const{user:e}=za(),t=(e==null?void 0:e.role)==="admin",{theme:r}=Wt(),n=r==="light"?"bg-white":"bg-slate-900",s=r==="light"?"text-gray-900":"text-white",a=r==="light"?"text-gray-700":"text-slate-200",o=r==="light"?"text-gray-500":"text-slate-400",l=r==="light"?"border-gray-200":"border-slate-700",c=r==="light"?"border-gray-300":"border-slate-600",d=r==="light"?"bg-white border-gray-300":"bg-slate-800 border-slate-600",u=r==="light"?"hover:bg-slate-100":"hover:bg-slate-800",h=r==="light"?"hover:bg-slate-200":"hover:bg-slate-700",[f,p]=g.useState({name:"Operative-7",headerImageUrl:"/images/litrpg/banner.webp",level:1,xp:0,credits:0,className:V$.RECRUIT,unspentAttributePoints:0,attributes:{[je.STR]:3,[je.PER]:3,[je.DEX]:3,[je.MEM]:3,[je.INT]:3,[je.CHA]:3},baseStats:{[je.STR]:3,[je.PER]:3,[je.DEX]:3,[je.MEM]:3,[je.INT]:3,[je.CHA]:3},abilities:{},inventory:["Standard Issue Kinetic Pistol"],history:["Initialized in the Nexus."]}),[m,x]=g.useState([]),[b,y]=g.useState([]),[v,w]=g.useState([]),[j,N]=g.useState(!1),[k,S]=g.useState(null),[C,P]=g.useState(null),[E,O]=g.useState(!1),[A,_]=g.useState(!1),[I,D]=g.useState(null),[$,L]=g.useState(!1),[M,T]=g.useState(""),[G,Y]=g.useState(!1),ee=g.useRef(null);g.useEffect(()=>{R(),X()},[]);const R=async()=>{N(!0);const te=await J$();te.success&&w(te.characters),N(!1)},B=async()=>{if(!(!M.trim()||G)){Y(!0);try{const te={name:M.trim(),slug:M.trim().toLowerCase().replace(/\s+/g,"-"),class_id:1,level:1,xp_current:0,xp_to_level:100,class_level:1,hp_max:100,hp_current:100,ep_max:50,ep_current:50,neural_heat:0,credits:0,stats:{STR:3,PER:3,DEX:3,MEM:3,INT:3,CHA:3},status:"active"},z=await Z$(te);z.success&&z.character?(T(""),L(!1),await R(),ue(z.character)):alert(z.error||"Failed to create character")}catch(te){alert("Failed to create character: "+String(te))}Y(!1)}},q=te=>te.map(z=>{var le,ne,be,ye,Se,He,st,H,J,ie,we,re;return{id:String(z.id),name:z.name,description:z.description||"No description provided.",level:z.level,rank:z.rank||"Regular",xpReward:z.xp_reward??0,credits:z.credits??0,stats:{[je.STR]:((le=z.stats)==null?void 0:le.STR)??((ne=z.stats)==null?void 0:ne.str)??1,[je.PER]:((be=z.stats)==null?void 0:be.PER)??((ye=z.stats)==null?void 0:ye.per)??1,[je.DEX]:((Se=z.stats)==null?void 0:Se.DEX)??((He=z.stats)==null?void 0:He.dex)??1,[je.MEM]:((st=z.stats)==null?void 0:st.MEM)??((H=z.stats)==null?void 0:H.mem)??1,[je.INT]:((J=z.stats)==null?void 0:J.INT)??((ie=z.stats)==null?void 0:ie.int)??1,[je.CHA]:((we=z.stats)==null?void 0:we.CHA)??((re=z.stats)==null?void 0:re.cha)??1},abilities:z.abilities||[]}}),X=async()=>{try{const te=await wl();x(q(te))}catch(te){console.error("Failed to load monsters",te)}},ue=async te=>{const z=te.stats||{},le=te.base_stats||z,ne=await da();await ua();let be;if(te.class_id){const ie=ne.find(we=>we.id===te.class_id);be=(ie==null?void 0:ie.name)||"Recruit"}else be=te.class_name||"Recruit";let ye=te.profession_name,Se={};if(te.unlocked_abilities){const ie=await Hh();if(Array.isArray(te.unlocked_abilities))for(const we of te.unlocked_abilities){const re=ie.find(oe=>oe.id===we);re&&(Se[re.name]=1)}else if(typeof te.unlocked_abilities=="object")for(const[we,re]of Object.entries(te.unlocked_abilities)){const oe=parseInt(we),Fe=ie.find(rt=>rt.id===oe);Fe&&(Se[Fe.name]=re)}}const He=ne.find(ie=>ie.name===be),st=He?parseInt(He.tier.replace("tier-","")):1,H=te.class_history_with_levels||[],J=te.profession_history_with_levels||[];p({name:te.name,headerImageUrl:te.portrait_image||"/images/litrpg/banner.webp",level:te.level,xp:te.xp_current,credits:te.credits,className:be,unspentAttributePoints:te.unspent_attribute_points??0,classActivatedAtLevel:te.class_activated_at_level||1,classHistory:H.map(ie=>ie.className),classHistoryWithLevels:H,highestTierAchieved:te.highest_tier_achieved||st,professionName:ye,professionActivatedAtLevel:te.profession_activated_at_level,professionHistoryWithLevels:J,attributes:{[je.STR]:le.STR||3,[je.PER]:le.PER||3,[je.DEX]:le.DEX||3,[je.MEM]:le.MEM||3,[je.INT]:le.INT||3,[je.CHA]:le.CHA||3},baseStats:{[je.STR]:le.STR||3,[je.PER]:le.PER||3,[je.DEX]:le.DEX||3,[je.MEM]:le.MEM||3,[je.INT]:le.INT||3,[je.CHA]:le.CHA||3},abilities:Se,inventory:[],history:[],equippedItems:te.equipped_items||{}}),S(te.id),P(te.class_id||null),O(!1)},U=async()=>{if(!(!k||!t)){_(!0),D(null);try{const te=await da(),z=await ua();let le=C;if(le===null){const we=te.find(re=>re.name===f.className);we&&(le=we.id)}const ne={},be=te.find(we=>we.name===f.className);if(be!=null&&be.stat_bonuses){const we=Math.max(0,f.level-(f.classActivatedAtLevel||1));for(const[re,oe]of Object.entries(be.stat_bonuses))ne[re]=oe*we}const ye={};if(f.professionName&&f.professionActivatedAtLevel){const we=z.find(re=>re.name===f.professionName);if(we!=null&&we.stat_bonuses){const re=Math.max(0,f.level-f.professionActivatedAtLevel);for(const[oe,Fe]of Object.entries(we.stat_bonuses))ye[oe]=Fe*re}}const Se={STR:f.attributes[je.STR]+(ne.STR||0)+(ye.STR||0),PER:f.attributes[je.PER]+(ne.PER||0)+(ye.PER||0),DEX:f.attributes[je.DEX]+(ne.DEX||0)+(ye.DEX||0),MEM:f.attributes[je.MEM]+(ne.MEM||0)+(ye.MEM||0),INT:f.attributes[je.INT]+(ne.INT||0)+(ye.INT||0),CHA:f.attributes[je.CHA]+(ne.CHA||0)+(ye.CHA||0)},He=Object.keys(f.attributes).reduce((we,re)=>{var rt;const oe=f.attributes[re],Fe=((rt=f.baseStats)==null?void 0:rt[re])??oe;return we+Math.max(0,oe-Fe)},0),st=Math.max(0,f.unspentAttributePoints-He),H={id:k,name:f.name,level:f.level,xp_current:f.xp,credits:f.credits,highest_tier_achieved:f.highestTierAchieved||1,unspent_attribute_points:st,stats:Se,base_stats:Se,equipped_items:f.equippedItems,portrait_image:f.headerImageUrl,class_activated_at_level:f.level,profession_name:f.professionName,profession_activated_at_level:f.professionName?f.level:void 0};p({...f,attributes:{[je.STR]:Se.STR,[je.PER]:Se.PER,[je.DEX]:Se.DEX,[je.MEM]:Se.MEM,[je.INT]:Se.INT,[je.CHA]:Se.CHA},baseStats:{[je.STR]:Se.STR,[je.PER]:Se.PER,[je.DEX]:Se.DEX,[je.MEM]:Se.MEM,[je.INT]:Se.INT,[je.CHA]:Se.CHA},unspentAttributePoints:st,classActivatedAtLevel:f.level,professionActivatedAtLevel:f.professionName?f.level:void 0}),le!==null&&(H.class_id=le);const J=Object.keys(f.abilities).filter(we=>f.abilities[we]>0);if(J.length>0){const we=await Hh(),re={};for(const oe of J){const Fe=we.find(rt=>rt.name===oe);Fe&&(re[String(Fe.id)]=f.abilities[oe])}Object.keys(re).length>0&&(H.unlocked_abilities=re)}const ie=await Q$(H);_(!1),ie.success?(D("Saved!"),le!==null&&C===null&&P(le),R()):D(ie.error||"Save failed")}catch(te){_(!1),D("Save failed: "+String(te))}setTimeout(()=>D(null),3e3)}},V=()=>{const te={version:"1.0",timestamp:Date.now(),character:f,quests:b},z=JSON.stringify(te,null,2),le=new Blob([z],{type:"application/json"}),ne=URL.createObjectURL(le),be=document.createElement("a");be.href=ne,be.download=`${f.name.replace(/\s+/g,"_")}_SaveData.json`,document.body.appendChild(be),be.click(),document.body.removeChild(be),URL.revokeObjectURL(ne)},ge=te=>{var ne;const z=(ne=te.target.files)==null?void 0:ne[0];if(!z)return;const le=new FileReader;le.onload=be=>{var ye;try{const Se=(ye=be.target)==null?void 0:ye.result,He=JSON.parse(Se);He.character?confirm(`Load data for ${He.character.name} (Level ${He.character.level})? This will overwrite current progress.`)&&(p(He.character),y(He.quests||[]),He.monsters&&x(He.monsters),S(null)):alert("Invalid save file format.")}catch(Se){console.error(Se),alert("Failed to parse save file.")}ee.current&&(ee.current.value="")},le.readAsText(z)};return i.jsxs("div",{className:`relative min-h-screen font-sans selection:bg-nexus-accent/30 selection:text-white flex flex-col ${a}`,children:[i.jsxs("div",{className:`fixed top-0 left-0 h-full ${n} border-r ${l} z-40 transition-transform duration-300 ${E?"translate-x-0":"-translate-x-full"}`,style:{width:"280px"},children:[i.jsxs("div",{className:`p-4 border-b ${l} flex items-center justify-between`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(XE,{size:18,className:"text-nexus-accent"}),i.jsx("h3",{className:`font-bold ${s}`,children:"Characters"})]}),i.jsx("button",{onClick:()=>O(!1),className:`${o} ${u} transition-colors`,children:i.jsx(id,{size:20})})]}),i.jsxs("div",{className:"p-2 flex gap-2",children:[i.jsxs("button",{onClick:R,disabled:j,className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 ${d} ${h} ${a} rounded text-sm transition-colors`,children:[i.jsx(yo,{size:14,className:j?"animate-spin":""}),"Refresh"]}),t&&i.jsx("button",{onClick:()=>L(!0),className:"w-10 h-10 flex items-center justify-center bg-nexus-accent/20 hover:bg-nexus-accent/30 text-nexus-accent rounded transition-colors",title:"Create New Character",children:i.jsx(ma,{size:18})})]}),$&&i.jsxs("div",{className:`p-2 border-b ${l} ${r==="light"?"bg-slate-100/50":"bg-slate-800/50"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:`text-xs ${o} font-medium`,children:"New Character"}),i.jsx("button",{onClick:()=>{L(!1),T("")},className:`ml-auto ${o} ${u} transition-colors`,children:i.jsx(Dt,{size:14})})]}),i.jsx("input",{type:"text",value:M,onChange:te=>T(te.target.value),placeholder:"Character name...",className:`w-full px-3 py-2 ${d} rounded text-sm ${s} ${r==="light"?"placeholder-gray-400":"placeholder-slate-500"} focus:outline-none focus:border-nexus-accent mb-2`,onKeyDown:te=>te.key==="Enter"&&B(),autoFocus:!0}),i.jsxs("button",{onClick:B,disabled:!M.trim()||G,className:`w-full flex items-center justify-center gap-2 px-3 py-2 bg-nexus-accent hover:bg-nexus-accent/80 ${r==="light"?"text-white":"text-slate-900"} font-medium rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:[G?i.jsx(yo,{size:14,className:"animate-spin"}):i.jsx(ma,{size:14}),"Create"]})]}),i.jsx("div",{className:"overflow-y-auto h-[calc(100%-120px)]",children:v.length===0&&!j?i.jsxs("div",{className:`text-center ${o} py-8 text-sm`,children:["No characters in database.",i.jsx("br",{}),i.jsx("span",{className:"text-xs",children:"Run seed data to add some!"})]}):v.map(te=>i.jsxs("button",{onClick:()=>ue(te),className:`w-full text-left px-4 py-3 ${r==="light"?"border-b border-gray-200":"border-b border-slate-800"} ${u} transition-colors ${k===te.id?"bg-nexus-accent/10 border-l-2 border-l-nexus-accent":""}`,children:[i.jsx("div",{className:`font-medium ${s}`,children:te.name}),i.jsxs("div",{className:`text-xs ${o}`,children:["Level ",te.level,"  ",te.class_name||"Recruit"]})]},te.id))})]}),i.jsx("button",{onClick:()=>O(!0),className:`fixed left-0 top-1/2 -translate-y-1/2 z-30 ${d} ${h} border ${l} border-l-0 rounded-r-lg p-2 transition-all ${E?"opacity-0 pointer-events-none":"opacity-100"}`,children:i.jsx(Ix,{size:18,className:o})}),i.jsx(Xr,{breadcrumbs:[{label:"Tools",path:"/litrpg/home"},{label:"Character Sheet"}]}),i.jsx(ac,{}),i.jsxs("div",{className:`${n} border-b ${l} py-2 px-6 flex justify-between items-center`,children:[i.jsx("div",{className:"flex items-center gap-2",children:k?i.jsxs("span",{className:"flex items-center gap-2 text-xs text-nexus-accent",children:[i.jsx(XE,{size:12}),"Connected to Database (ID: ",k,")"]}):i.jsx("span",{className:`text-xs ${o}`,children:"Local Mode (not connected to database)"})}),i.jsxs("div",{className:"flex items-center gap-2",children:[t&&k&&i.jsxs("button",{onClick:U,disabled:A,className:"flex items-center gap-2 px-3 py-1 bg-green-600/20 hover:bg-green-600/30 text-green-400 hover:text-green-300 rounded border border-green-600/30 hover:border-green-500 text-xs font-medium transition-colors disabled:opacity-50",children:[A?i.jsx(yo,{size:14,className:"animate-spin"}):i.jsx(Bl,{size:14}),"Save to Database"]}),I&&i.jsx("span",{className:`text-xs ${I==="Saved!"?"text-green-400":"text-red-400"}`,children:I}),i.jsx("span",{className:`text-xs ${o} uppercase tracking-widest font-bold mr-2`,children:"System IO"}),i.jsx("input",{type:"file",ref:ee,onChange:ge,accept:".json",className:"hidden"}),i.jsxs("button",{onClick:()=>{var te;return(te=ee.current)==null?void 0:te.click()},className:`flex items-center gap-2 px-3 py-1 ${d} ${h} ${a} rounded border ${c} text-xs font-medium transition-colors`,children:[i.jsx(nY,{size:14})," Import JSON"]}),i.jsxs("button",{onClick:V,className:"flex items-center gap-2 px-3 py-1 bg-nexus-accent/10 hover:bg-nexus-accent/20 text-nexus-accent hover:text-white rounded border border-nexus-accent/30 hover:border-nexus-accent text-xs font-medium transition-colors",children:[i.jsx(Bl,{size:14})," Export JSON"]})]})]}),i.jsx("main",{className:"flex-1 px-4 sm:px-6 lg:px-8 max-w-5xl mx-auto py-8 w-full",children:i.jsx(qY,{character:f,updateCharacter:p,monsters:m,currentDbClassId:C,theme:r,onDbClassChange:te=>{P(te)}})}),i.jsx("footer",{className:`${n}/80 backdrop-blur-xl border-t ${l} py-8`,children:i.jsx("div",{className:"mx-auto max-w-5xl px-4",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx(ar,{variant:"footer",showCopyright:!1}),i.jsxs("p",{className:`text-sm ${o}`,children:[" ",new Date().getFullYear()," All rights reserved."]})]})})})]})};function YY(){const{theme:e}=Wt(),t=e==="light"?"bg-white":"bg-slate-900",r=e==="light"?"text-gray-900":"text-white",n=e==="light"?"text-gray-700":"text-slate-200",s=e==="light"?"text-gray-500":"text-slate-400",a=e==="light"?"border-gray-200":"border-slate-700";return i.jsxs(i.Fragment,{children:[i.jsxs(En,{children:[i.jsx("title",{children:"LitRPG Tools - Destiny Among the Stars"}),i.jsx("meta",{name:"description",content:"Interactive tools for tracking your character, exploring abilities, and managing your adventure in the LitRPG universe."})]}),i.jsx(Xr,{breadcrumbs:[{label:"Tools"}]}),i.jsxs("div",{className:`relative min-h-screen font-sans selection:bg-nexus-accent/30 selection:text-white flex flex-col ${n}`,children:[i.jsx("main",{className:"flex-1 py-12",children:i.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("div",{className:"w-16 h-16 bg-nexus-accent rounded-xl flex items-center justify-center mx-auto mb-6 shadow-[0_0_30px_rgba(6,182,212,0.5)]",children:i.jsx("span",{className:`font-bold ${e==="light"?"text-white":"text-slate-900"} text-3xl`,children:"D"})}),i.jsx("h1",{className:`text-4xl md:text-5xl font-bold font-mono tracking-tighter mb-4 ${r}`,children:"DESTINY AMONG THE STARS"}),i.jsx("p",{className:`text-xl ${s} max-w-2xl mx-auto`,children:"Interactive tools for tracking your character, exploring abilities, and managing your adventure in the LitRPG universe."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:[i.jsxs(Me,{to:"/litrpg/attributes",className:`group ${t}/80 backdrop-blur-xl border ${a} hover:border-nexus-accent rounded-2xl p-6 transition-all hover:shadow-lg hover:shadow-nexus-accent/10`,children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-nexus-accent/20 rounded-lg flex items-center justify-center group-hover:bg-nexus-accent/30 transition-colors",children:i.jsx(ca,{className:"text-nexus-accent",size:28})}),i.jsxs("div",{children:[i.jsx("h2",{className:`text-xl font-bold ${r} group-hover:text-nexus-accent transition-colors`,children:"Attributes"}),i.jsx("p",{className:`text-sm ${s}`,children:"Core stats & mechanics"})]})]}),i.jsx("p",{className:`${s} text-sm`,children:"Learn about STR, PER, DEX, MEM, INT, and CHA attributes. Understand cooldown reduction, duration scaling, and game mechanics."})]}),i.jsxs(Me,{to:"/litrpg/classes",className:`group ${t}/80 backdrop-blur-xl border ${a} hover:border-orange-400 rounded-2xl p-6 transition-all hover:shadow-lg hover:shadow-orange-400/10`,children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-orange-500/20 rounded-lg flex items-center justify-center group-hover:bg-orange-500/30 transition-colors",children:i.jsx(nr,{className:"text-orange-400",size:28})}),i.jsxs("div",{children:[i.jsx("h2",{className:`text-xl font-bold ${r} group-hover:text-orange-400 transition-colors`,children:"Classes"}),i.jsx("p",{className:`text-sm ${s}`,children:"Combat & professions"})]})]}),i.jsx("p",{className:`${s} text-sm`,children:"Explore the 4-tier class progression system from Recruit to Master. View stat bonuses, prerequisites, and upgrade paths."})]}),i.jsxs(Me,{to:"/litrpg/abilities",className:`group ${t}/80 backdrop-blur-xl border ${a} hover:border-yellow-400 rounded-2xl p-6 transition-all hover:shadow-lg hover:shadow-yellow-400/10`,children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-yellow-500/20 rounded-lg flex items-center justify-center group-hover:bg-yellow-500/30 transition-colors",children:i.jsx(Bn,{className:"text-yellow-400",size:28})}),i.jsxs("div",{children:[i.jsx("h2",{className:`text-xl font-bold ${r} group-hover:text-yellow-400 transition-colors`,children:"Abilities"}),i.jsx("p",{className:`text-sm ${s}`,children:"Skills & powers"})]})]}),i.jsx("p",{className:`${s} text-sm`,children:"Browse all abilities organized by class. View tier progression, cooldowns, durations, and evolution paths."})]}),i.jsxs(Me,{to:"/litrpg/bestiary",className:`group ${t}/80 backdrop-blur-xl border ${a} hover:border-purple-400 rounded-2xl p-6 transition-all hover:shadow-lg hover:shadow-purple-400/10`,children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center group-hover:bg-purple-500/30 transition-colors",children:i.jsx(Px,{className:"text-purple-400",size:28})}),i.jsxs("div",{children:[i.jsx("h2",{className:`text-xl font-bold ${r} group-hover:text-purple-400 transition-colors`,children:"Bestiary"}),i.jsx("p",{className:`text-sm ${s}`,children:"Creature database"})]})]}),i.jsx("p",{className:`${s} text-sm`,children:"Explore monsters from Trash to Boss rank. View stats, abilities, XP rewards, and credit drops."})]}),i.jsxs(Me,{to:"/litrpg/loot",className:`group ${t}/80 backdrop-blur-xl border ${a} hover:border-green-400 rounded-2xl p-6 transition-all hover:shadow-lg hover:shadow-green-400/10`,children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center group-hover:bg-green-500/30 transition-colors",children:i.jsx(zh,{className:"text-green-400",size:28})}),i.jsxs("div",{children:[i.jsx("h2",{className:`text-xl font-bold ${r} group-hover:text-green-400 transition-colors`,children:"Loot Catalog"}),i.jsx("p",{className:`text-sm ${s}`,children:"Items & equipment"})]})]}),i.jsx("p",{className:`${s} text-sm`,children:"Browse common materials, uncommon parts, and rare components. Find the loot you need for crafting and progression."})]}),i.jsxs(Me,{to:"/litrpg/contracts",className:`group ${t}/80 backdrop-blur-xl border ${a} hover:border-nexus-success rounded-2xl p-6 transition-all hover:shadow-lg hover:shadow-nexus-success/10`,children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-emerald-500/20 rounded-lg flex items-center justify-center group-hover:bg-emerald-500/30 transition-colors",children:i.jsx(jg,{className:"text-nexus-success",size:28})}),i.jsxs("div",{children:[i.jsx("h2",{className:`text-xl font-bold ${r} group-hover:text-nexus-success transition-colors`,children:"Contracts"}),i.jsx("p",{className:`text-sm ${s}`,children:"Quests & missions"})]})]}),i.jsx("p",{className:`${s} text-sm`,children:"Browse available contracts from routine patrols to suicide missions. View objectives, rewards, and difficulty levels."})]})]}),i.jsxs("div",{className:`${t}/80 backdrop-blur-xl border ${a} rounded-2xl p-6 text-center`,children:[i.jsx("h3",{className:`text-lg font-bold ${n} mb-2`,children:"Character Sheet Available"}),i.jsx("p",{className:`${s} text-sm mb-4`,children:"Full character creation, XP tracking, inventory management, and class progression tools are available for admins."}),i.jsx(Me,{to:"/litrpg",className:"inline-flex items-center gap-2 px-6 py-3 bg-nexus-accent/20 hover:bg-nexus-accent/30 text-nexus-accent rounded-lg font-medium transition-colors border border-nexus-accent/30 hover:border-nexus-accent",children:"Open Character Sheet"})]})]})}),i.jsx("footer",{className:`${t}/80 backdrop-blur-xl border-t ${a} py-8`,children:i.jsx("div",{className:"mx-auto max-w-5xl px-4",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx(ar,{variant:"footer",showCopyright:!1}),i.jsxs("p",{className:`text-sm ${s}`,children:[" ",new Date().getFullYear()," All rights reserved."]})]})})})]})]})}function XY(){const{theme:e}=Wt(),t=e==="light"?"bg-white":"bg-slate-900",r=e==="light"?"bg-white border-gray-200":"bg-slate-900 border-slate-700",n=e==="light"?"text-gray-900":"text-white",s=e==="light"?"text-gray-700":"text-slate-200",a=e==="light"?"text-gray-500":"text-slate-400",o=e==="light"?"border-gray-200":"border-slate-700",l=e==="light"?"border-gray-300":"border-slate-600";g.useEffect(()=>{document.title="Attributes - LitRPG Tools"},[]);const c={[je.STR]:i.jsx(nr,{className:"text-red-500",size:24}),[je.PER]:i.jsx(sc,{className:"text-emerald-500",size:24}),[je.DEX]:i.jsx(Bn,{className:"text-yellow-500",size:24}),[je.MEM]:i.jsx(Bh,{className:"text-purple-500",size:24}),[je.INT]:i.jsx(ca,{className:"text-blue-500",size:24}),[je.CHA]:i.jsx($x,{className:"text-pink-500",size:24})},d={[je.STR]:"Determines physical power, melee damage output, and carrying capacity. It directly contributes to your total Health Points (HP).",[je.PER]:"Governs situational awareness, detection of stealth/traps, accuracy with ranged weapons, and initiative in combat.",[je.DEX]:"Controls agility, evasion, piloting skills, stealth effectiveness, and fine motor precision.",[je.MEM]:"Critical for skill proficiency, recall, and resisting mental attacks. Higher MEM reduces Ability Cooldowns.",[je.INT]:"The stat for problem-solving, hacking, and engineering. Determines Energy Points (EP) and increases Ability Duration.",[je.CHA]:"Represents enhanced perception and pattern recognition applied to communication. Governs social awareness, leadership presence, linguistic adaptability, and cross-species interpretation."};return i.jsxs(i.Fragment,{children:[i.jsxs(En,{children:[i.jsx("title",{children:"Attributes - LitRPG Tools"}),i.jsx("meta",{name:"description",content:"Attribute encyclopedia for Destiny Among the Stars LitRPG game system."})]}),i.jsx(Xr,{breadcrumbs:[{label:"Tools",path:"/litrpg/home"},{label:"Attributes"}]}),i.jsxs("div",{className:`relative min-h-screen font-sans selection:bg-nexus-accent/30 selection:text-white flex flex-col ${s}`,children:[i.jsx(ac,{}),i.jsx("main",{className:`flex-1 py-8 px-6 ${t}/80`,children:i.jsxs("div",{className:"max-w-5xl mx-auto space-y-12",children:[i.jsxs("section",{children:[i.jsxs("h2",{className:`text-xl font-bold ${s} mb-6 flex items-center gap-3 border-b ${l} pb-2`,children:[i.jsx(ca,{size:24,className:"text-nexus-accent"}),"Core Attributes"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.keys(T1).map(u=>i.jsxs("div",{className:`${r} border p-6 rounded-xl hover:${l} transition-colors flex flex-col h-full shadow-sm`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c[u],i.jsx("h3",{className:`text-2xl font-bold ${s}`,children:u})]}),i.jsx("p",{className:`text-sm ${s} mb-3 font-semibold`,children:T1[u]}),i.jsx("p",{className:`text-xs ${a} leading-relaxed`,children:d[u]})]},u))})]}),i.jsxs("section",{children:[i.jsxs("h2",{className:`text-xl font-bold ${s} mb-6 flex items-center gap-3 border-b ${l} pb-2`,children:[i.jsx(Bh,{size:24,className:"text-purple-400"}),"Game Mechanics"]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:`${e==="light"?"bg-orange-50/20 border-orange-300/40":"bg-orange-950/10 border-orange-500/20"} border rounded-xl p-6 relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:i.jsx(PG,{size:150})}),i.jsxs("h3",{className:"text-orange-400 font-bold text-lg flex items-center gap-2 mb-4",children:[i.jsx(od,{size:20}),"Neural Heat Rules"]}),i.jsxs("p",{className:`text-sm ${a} mb-6 leading-relaxed max-w-md`,children:["Abilities have a ",i.jsx("span",{className:"text-nexus-accent",children:"Safe Limit"})," duration. Pushing past this limit generates Neural Heat, causing progressive physiological failure."]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 relative z-10",children:[i.jsxs("div",{className:`${e==="light"?"bg-orange-100 border-orange-400":"bg-black/40 border-orange-900/30"} p-3 rounded border`,children:[i.jsx("span",{className:"text-orange-300 font-bold text-sm block mb-1",children:"10 Heat"}),i.jsx("span",{className:`${a} text-xs`,children:"Pressure behind eyes"})]}),i.jsxs("div",{className:`${e==="light"?"bg-orange-100 border-orange-400":"bg-black/40 border-orange-900/30"} p-3 rounded border`,children:[i.jsx("span",{className:"text-orange-400 font-bold text-sm block mb-1",children:"20 Heat"}),i.jsx("span",{className:`${a} text-xs`,children:"Blurring vision, ringing"})]}),i.jsxs("div",{className:`${e==="light"?"bg-red-100 border-red-400":"bg-black/40 border-red-900/30"} p-3 rounded border`,children:[i.jsx("span",{className:"text-red-400 font-bold text-sm block mb-1",children:"50 Heat"}),i.jsx("span",{className:`${a} text-xs`,children:"Nosebleed, forced shutdown"})]}),i.jsxs("div",{className:`${e==="light"?"bg-red-100 border-red-400":"bg-black/40 border-red-900/30"} p-3 rounded border`,children:[i.jsx("span",{className:"text-red-500 font-black text-sm block mb-1",children:"100 Heat"}),i.jsx("span",{className:`${a} text-xs`,children:"Lockout (1-4 hours)"})]}),i.jsxs("div",{className:`${e==="light"?"bg-red-100 border-red-400":"bg-black/40 border-red-900/30"} p-3 rounded border`,children:[i.jsx("span",{className:"text-red-600 font-black text-sm block mb-1",children:"150 Heat"}),i.jsx("span",{className:`${a} text-xs`,children:"Migraines, blackouts"})]}),i.jsxs("div",{className:`${e==="light"?"bg-red-100 border-red-400":"bg-black/40 border-red-900/30"} p-3 rounded border`,children:[i.jsx("span",{className:"text-red-700 font-black text-sm block mb-1",children:"200 Heat"}),i.jsx("span",{className:`${a} text-xs`,children:"Near-coma / Critical Failure"})]})]})]}),i.jsxs("div",{className:`${r} border rounded-xl p-6`,children:[i.jsxs("h3",{className:"text-purple-400 font-bold text-lg flex items-center gap-2 mb-4",children:[i.jsx(SN,{size:20}),"Memory (MEM) Scaling"]}),i.jsx("p",{className:`text-sm ${a} mb-4`,children:"Memory reduces Ability Cooldowns using a diminishing returns formula, ensuring you never reach 0 second cooldowns but making every point valuable."}),i.jsxs("div",{className:`${e==="light"?"bg-gray-100 border-gray-300 text-gray-700":"bg-slate-950 border-slate-800 text-slate-300"} p-3 rounded text-xs font-mono mb-4 border`,children:["Reduction % = MEM / (MEM + ",q$,")"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:`flex items-center justify-between text-xs border-b ${l} pb-2`,children:[i.jsx("span",{className:a,children:"10 MEM"}),i.jsx("span",{className:"text-purple-300 font-bold",children:"~4.8% Reduction"})]}),i.jsxs("div",{className:`flex items-center justify-between text-xs border-b ${l} pb-2`,children:[i.jsx("span",{className:a,children:"50 MEM"}),i.jsx("span",{className:"text-purple-300 font-bold",children:"20.0% Reduction"})]}),i.jsxs("div",{className:`flex items-center justify-between text-xs border-b ${l} pb-2`,children:[i.jsx("span",{className:a,children:"200 MEM"}),i.jsx("span",{className:"text-purple-300 font-bold",children:"50.0% Reduction"})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsx("span",{className:a,children:"2000 MEM"}),i.jsx("span",{className:"text-purple-300 font-bold",children:"~90.9% Reduction"})]})]})]}),i.jsxs("div",{className:`${r} border rounded-xl p-6`,children:[i.jsxs("h3",{className:"text-blue-400 font-bold text-lg flex items-center gap-2 mb-4",children:[i.jsx(XK,{size:20}),"Intelligence (INT) Scaling"]}),i.jsxs("p",{className:`text-sm ${a} mb-4`,children:["Intelligence increases the ",i.jsx("span",{className:`${n} font-bold`,children:"Safe Limit"})," duration of abilities linearly. This directly combats Neural Heat generation by allowing longer active times."]}),i.jsxs("div",{className:`${e==="light"?"bg-gray-100 border-gray-300 text-gray-700":"bg-slate-950 border-slate-800 text-slate-300"} p-3 rounded text-xs font-mono mb-4 border`,children:["Duration Multiplier = 1 + (INT * ",G$.toFixed(3),")"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:`flex items-center justify-between text-xs border-b ${l} pb-2`,children:[i.jsx("span",{className:a,children:"25 INT"}),i.jsx("span",{className:"text-blue-300 font-bold",children:"+12.5% Duration"})]}),i.jsxs("div",{className:`flex items-center justify-between text-xs border-b ${l} pb-2`,children:[i.jsx("span",{className:a,children:"50 INT"}),i.jsx("span",{className:"text-blue-300 font-bold",children:"+25.0% Duration"})]}),i.jsxs("div",{className:`flex items-center justify-between text-xs border-b ${l} pb-2`,children:[i.jsx("span",{className:a,children:"100 INT"}),i.jsx("span",{className:"text-blue-300 font-bold",children:"+50.0% Duration"})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsx("span",{className:a,children:"200 INT"}),i.jsx("span",{className:"text-blue-300 font-bold",children:"+100.0% Duration (Double)"})]})]})]}),i.jsxs("div",{className:`${e==="light"?"bg-pink-50/20 border-pink-300/40":"bg-pink-950/10 border-pink-900/30"} border rounded-xl p-6`,children:[i.jsxs("h3",{className:"text-pink-400 font-bold text-lg flex items-center gap-2 mb-4",children:[i.jsx(zG,{size:20}),"Charisma (CHA) Proficiency"]}),i.jsx("p",{className:`text-sm ${a} mb-4`,children:"CHA provides continuous scaling to social cognition, linguistics, and cross-species communication."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:`text-xs ${e==="light"?"bg-gray-100 border-pink-300":"bg-slate-900/50 border-pink-900/20"} p-3 rounded border`,children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{className:"text-pink-300 font-bold",children:"Skilled Human Tier"}),i.jsx("span",{className:`${a} font-mono`,children:"10-20 CHA"})]}),i.jsx("p",{className:`${a} leading-tight`,children:"Reads conversations easily. Learns languages at a practiced pace."})]}),i.jsxs("div",{className:`text-xs ${e==="light"?"bg-gray-100 border-pink-300":"bg-slate-900/50 border-pink-900/20"} p-3 rounded border`,children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{className:"text-pink-300 font-bold",children:"Enhanced Specialist"}),i.jsx("span",{className:`${a} font-mono`,children:"50-100 CHA"})]}),i.jsx("p",{className:`${a} leading-tight`,children:"Detects subtle anomalies. Adapts to unfamiliar cultures rapidly."})]}),i.jsxs("div",{className:`text-xs ${e==="light"?"bg-gray-100 border-pink-300":"bg-slate-900/50 border-pink-900/20"} p-3 rounded border`,children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{className:"text-pink-300 font-bold",children:"Cross-Species Competence"}),i.jsx("span",{className:`${a} font-mono`,children:"200-300 CHA"})]}),i.jsx("p",{className:`${a} leading-tight`,children:"Recognizes intent in non-human communication. Avoids catastrophic misunderstandings."})]}),i.jsxs("div",{className:`text-xs ${e==="light"?"bg-gray-100 border-pink-300":"bg-slate-900/50 border-pink-900/20"} p-3 rounded border`,children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{className:"text-pink-300 font-bold",children:"Xenocognitive Expert"}),i.jsx("span",{className:`${a} font-mono`,children:"500+ CHA"})]}),i.jsx("p",{className:`${a} leading-tight`,children:"Decodes unknown scripts. Maps patterns across radically different lifeforms. Neural clarity."})]})]})]})]})]})]})}),i.jsx("footer",{className:`${t} border-t ${o} py-8`,children:i.jsx("div",{className:"mx-auto max-w-5xl px-4",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx(ar,{variant:"footer",showCopyright:!1}),i.jsxs("p",{className:`text-sm ${a}`,children:[" ",new Date().getFullYear()," All rights reserved."]})]})})})]})]})}function JY(e){const t=/(\d+(?:\.\d+)?)\s*(hr|min|sec|h|m|s)/gi,r=Array.from(e.matchAll(t));let n=0;for(const s of r){const a=parseFloat(s[1]),o=s[2].toLowerCase();o==="sec"||o==="s"?n+=a:o==="min"||o==="m"?n+=a*60:(o==="hr"||o==="h")&&(n+=a*3600)}return n}function ZY(e){if(e<60)return`${Math.round(e)} sec`;if(e<3600){const t=Math.floor(e/60),r=Math.round(e%60);return r===0?`${t} min`:`${t} min ${r} sec`}else{const t=Math.floor(e/3600),r=e%3600,n=Math.floor(r/60),s=Math.round(r%60);let a=`${t} hr`;return n>0&&(a+=` ${n} min`),s>0&&(a+=` ${s} sec`),a}}function iA(e,t,r){const s=JY(e)*Math.pow(1+t,r-1);return ZY(Math.max(1,s))}function QY(e){const t=[];for(let r=1;r<=e.maxLevel;r++){const n={level:r};e.baseDuration&&e.durationScaling!==void 0?n.duration=iA(e.baseDuration,e.durationScaling,r):e.baseDuration&&(n.duration=e.baseDuration),e.baseCooldown&&e.cooldownScaling!==void 0?n.cooldown=iA(e.baseCooldown,e.cooldownScaling,r):e.baseCooldown&&(n.cooldown=e.baseCooldown),e.baseEnergyCost!==void 0&&e.energyCostScaling!==void 0?n.energyCost=Math.round(e.baseEnergyCost+e.energyCostScaling*(r-1)):e.baseEnergyCost!==void 0&&(n.energyCost=e.baseEnergyCost),e.baseEffect&&(n.effectDescription=e.baseEffect),t.push(n)}return t}function eX(){const{user:e}=za(),t=(e==null?void 0:e.role)==="admin",{theme:r}=Wt(),n=r==="light"?"bg-white":"bg-slate-900",s=r==="light"?"bg-white border-gray-200":"bg-slate-900 border-slate-700",a=r==="light"?"text-gray-900":"text-white",o=r==="light"?"text-gray-700":"text-slate-200",l=r==="light"?"text-gray-500":"text-slate-400",c=r==="light"?"border-gray-200":"border-slate-700",d=r==="light"?"border-gray-300":"border-slate-600",[u,h]=g.useState(""),[f,p]=g.useState([]),[m,x]=g.useState(!0),[b,y]=g.useState(null),[v,w]=g.useState(null),j=R=>({level:R,duration:"",cooldown:"",energyCost:"",effectDescription:""}),[N,k]=g.useState({name:"",description:"",category:"",maxLevel:5,tiers:[j(1)]}),[S,C]=g.useState(!1),[P,E]=g.useState(null),O=g.useRef({});g.useEffect(()=>{document.title="Abilities - LitRPG Tools",A()},[]);const A=async()=>{x(!0),y(null),w(null);try{const R=await Hh();p(R)}catch(R){y("Failed to load abilities"),console.error(R)}finally{x(!1)}},_=async()=>{var q;w(null);const R=N.tiers.map((X,ue)=>!(X.duration||X.cooldown||X.energyCost||X.effectDescription)&&ue>0?null:{level:ue+1,duration:X.duration||void 0,cooldown:X.cooldown||void 0,energyCost:X.energyCost?Number(X.energyCost):void 0,effectDescription:X.effectDescription||void 0}).filter(X=>X!==null),B=await $Y({name:N.name,description:N.description,category:N.category,maxLevel:Number(N.maxLevel)||1,tiers:R});if(!B.success){w(B.error||"Failed to create ability");return}w(`Created ability ${(q=B.ability)==null?void 0:q.name}`),k({name:"",description:"",category:"",maxLevel:5,tiers:[j(1)]}),C(!1),await A()},I=R=>{E(R),k({name:R.name,description:R.description||"",category:R.category||"",maxLevel:R.maxLevel,tiers:R.tiers&&R.tiers.length>0?R.tiers.map(B=>({level:B.level,duration:B.duration||"",cooldown:B.cooldown||"",energyCost:B.energyCost!==void 0?String(B.energyCost):"",effectDescription:B.effectDescription||""})):[j(1)]}),C(R.tiers&&R.tiers.length>1)},D=async()=>{var q;if(!P)return;w(null);const R=N.tiers.map((X,ue)=>!(X.duration||X.cooldown||X.energyCost||X.effectDescription)&&ue>0?null:{level:ue+1,duration:X.duration||void 0,cooldown:X.cooldown||void 0,energyCost:X.energyCost?Number(X.energyCost):void 0,effectDescription:X.effectDescription||void 0}).filter(X=>X!==null),B=await DY(P.id,{name:N.name,description:N.description,category:N.category,maxLevel:Number(N.maxLevel)||1,tiers:R});if(!B.success){w(B.error||"Failed to update ability");return}w(`Updated ability ${(q=B.ability)==null?void 0:q.name}`),E(null),k({name:"",description:"",category:"",maxLevel:5,tiers:[j(1)]}),C(!1),await A()},$=()=>{E(null),k({name:"",description:"",category:"",maxLevel:5,tiers:[j(1)]}),C(!1),w(null)},L=(R,B,q)=>{k(X=>{const ue=[...X.tiers];return ue[R]={...ue[R],[B]:q},{...X,tiers:ue}})},M=()=>{k(R=>{const B=R.tiers.length+1,q=[...R.tiers,j(B)];return{...R,tiers:q,maxLevel:Math.max(R.maxLevel,q.length)}}),C(!0)},T=R=>{k(B=>{if(B.tiers.length===1)return B;const q=B.tiers.filter((X,ue)=>ue!==R).map((X,ue)=>({...X,level:ue+1}));return{...B,tiers:q,maxLevel:Math.max(B.maxLevel,q.length)}})},Y=g.useMemo(()=>{const R=[];return f.length>0&&R.push({id:"all-abilities",title:"All Abilities",abilities:f,colorClass:"text-nexus-accent border-nexus-accent"}),R},[f]).map(R=>({...R,abilities:R.abilities.filter(B=>B.name.toLowerCase().includes(u.toLowerCase())||(B.description||"").toLowerCase().includes(u.toLowerCase())).sort((B,q)=>B.name.localeCompare(q.name))})).filter(R=>R.abilities.length>0),ee=R=>{const B=f.find(q=>q.id===R);return(B==null?void 0:B.name)||`Ability #${R}`};return i.jsxs(i.Fragment,{children:[i.jsxs(En,{children:[i.jsx("title",{children:"Abilities - LitRPG Tools"}),i.jsx("meta",{name:"description",content:"Ability library for Destiny Among the Stars LitRPG game system."})]}),i.jsx(Xr,{breadcrumbs:[{label:"Tools",path:"/litrpg/home"},{label:"Abilities"}]}),i.jsxs("div",{className:`relative min-h-screen font-sans selection:bg-nexus-accent/30 selection:text-white flex flex-col ${o}`,children:[i.jsx(ac,{}),i.jsxs("div",{className:"flex-1 flex flex-col md:flex-row",children:[i.jsxs("div",{className:`w-full md:w-80 ${n}/50 border-r ${c} flex flex-col shrink-0 p-4 md:sticky md:top-0 md:h-screen md:overflow-y-auto`,children:[i.jsxs("div",{className:"flex items-center justify-between gap-3 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Bn,{className:"text-yellow-400",size:24}),i.jsx("h1",{className:`text-xl font-bold ${a} font-mono tracking-wider`,children:"ABILITIES"})]}),i.jsx("button",{onClick:A,disabled:m,className:`p-2 ${l} hover:text-nexus-accent transition-colors`,title:"Refresh",children:i.jsx(yo,{size:16,className:m?"animate-spin":""})})]}),i.jsxs("div",{className:"relative mb-6",children:[i.jsx("input",{type:"text",placeholder:"Filter abilities...",value:u,onChange:R=>h(R.target.value),className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-800 border-slate-600 text-white"} border rounded-lg py-3 pl-10 pr-4 text-sm focus:border-nexus-accent outline-none`}),i.jsx(gi,{className:`absolute left-3 top-3.5 ${l}`,size:18})]}),i.jsxs("div",{className:`mb-6 p-3 ${r==="light"?"bg-gray-100":"bg-slate-800/50"} rounded-lg`,children:[i.jsx("div",{className:`text-xs ${l} uppercase tracking-wide mb-1`,children:"Total Abilities"}),i.jsx("div",{className:"text-2xl font-bold text-nexus-accent",children:f.length})]}),t&&i.jsxs("div",{className:`mb-6 p-3 ${r==="light"?"bg-gray-100 border-gray-300":"bg-slate-800/60 border-slate-700"} rounded-lg border space-y-2`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:`text-xs font-bold ${l} uppercase`,children:P?`Edit: ${P.name}`:"Quick Add Ability"}),v&&i.jsx("div",{className:"text-[10px] text-green-300",children:v})]}),i.jsx("input",{className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1 text-sm`,placeholder:"Name (slug auto-generated)",value:N.name,onChange:R=>k({...N,name:R.target.value})}),i.jsx("input",{className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1 text-sm`,placeholder:"Category (optional)",value:N.category,onChange:R=>k({...N,category:R.target.value})}),i.jsx("textarea",{className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1 text-sm`,placeholder:"Description",value:N.description,onChange:R=>k({...N,description:R.target.value})}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("label",{className:`flex flex-col gap-1 ${l}`,children:[i.jsx("span",{className:`text-[10px] uppercase ${l}`,children:"Max Level"}),i.jsx("input",{type:"number",min:1,className:`${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1`,value:N.maxLevel,onChange:R=>k({...N,maxLevel:Number(R.target.value)})})]}),i.jsxs("label",{className:`flex flex-col gap-1 ${l}`,children:[i.jsx("span",{className:`text-[10px] uppercase ${l}`,children:"Energy (L1)"}),i.jsx("input",{className:`${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1`,value:N.tiers[0].energyCost,onChange:R=>L(0,"energyCost",R.target.value)})]}),i.jsxs("label",{className:`flex flex-col gap-1 ${l}`,children:[i.jsx("span",{className:`text-[10px] uppercase ${l}`,children:"Duration (L1)"}),i.jsx("input",{className:`${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1`,value:N.tiers[0].duration,onChange:R=>L(0,"duration",R.target.value)})]}),i.jsxs("label",{className:`flex flex-col gap-1 ${l}`,children:[i.jsx("span",{className:`text-[10px] uppercase ${l}`,children:"Cooldown (L1)"}),i.jsx("input",{className:`${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1`,value:N.tiers[0].cooldown,onChange:R=>L(0,"cooldown",R.target.value)})]})]}),i.jsx("textarea",{className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1 text-sm`,placeholder:"Effect description (L1)",value:N.tiers[0].effectDescription,onChange:R=>L(0,"effectDescription",R.target.value)}),i.jsxs("div",{className:"rounded border border-slate-700 bg-slate-900/60",children:[i.jsxs("button",{type:"button",onClick:()=>C(R=>!R),className:"w-full flex items-center justify-between px-3 py-2 text-xs font-semibold text-slate-300 hover:text-white",children:[i.jsx("span",{children:"Multi-level details"}),i.jsx("span",{className:`transform transition-transform ${S?"rotate-180":""}`,children:""})]}),S&&i.jsxs("div",{className:"px-3 pb-3 space-y-3 text-sm",children:[i.jsxs("div",{className:"p-3 rounded border border-purple-700/50 bg-purple-950/20 space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-purple-300",children:[i.jsx(rA,{className:"h-3.5 w-3.5"}),i.jsxs("span",{children:["Quick Generate Tiers (Auto-scale for levels 1-",N.maxLevel,")"]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-slate-400 mb-1",children:"Cooldown Scaling (%/level)"}),i.jsx("input",{type:"number",className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1",placeholder:"-10",id:"cooldown-scaling"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-slate-400 mb-1",children:"Duration Scaling (%/level)"}),i.jsx("input",{type:"number",className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1",placeholder:"30",id:"duration-scaling"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-slate-400 mb-1",children:"Energy Scaling (+/level)"}),i.jsx("input",{type:"number",className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1",placeholder:"5",id:"energy-scaling"})]})]}),i.jsxs("button",{type:"button",onClick:()=>{var U,V,ge,te,z,le,ne;const R=parseFloat(((U=document.getElementById("cooldown-scaling"))==null?void 0:U.value)||"-10")/100,B=parseFloat(((V=document.getElementById("duration-scaling"))==null?void 0:V.value)||"30")/100,q=parseInt(((ge=document.getElementById("energy-scaling"))==null?void 0:ge.value)||"5"),ue=QY({maxLevel:N.maxLevel,baseDuration:((te=N.tiers[0])==null?void 0:te.duration)||"",baseCooldown:((z=N.tiers[0])==null?void 0:z.cooldown)||"",baseEnergyCost:(le=N.tiers[0])!=null&&le.energyCost?parseFloat(N.tiers[0].energyCost):0,baseEffect:((ne=N.tiers[0])==null?void 0:ne.effectDescription)||"",durationScaling:B,cooldownScaling:R,energyCostScaling:q}).map(be=>({...be,duration:be.duration||"",cooldown:be.cooldown||"",energyCost:be.energyCost!==void 0?String(be.energyCost):"",effectDescription:be.effectDescription||""}));k({...N,tiers:ue})},className:"w-full px-3 py-1.5 rounded bg-purple-600 hover:bg-purple-700 text-white text-xs font-medium flex items-center justify-center gap-1.5",children:[i.jsx(rA,{className:"h-3.5 w-3.5"}),"Generate All Tiers"]}),i.jsx("p",{className:"text-xs text-slate-500 italic",children:"Uses Level 1 values as base. Scaling compounds per level (exponential growth). Effect descriptions are copied from Level 1."})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[i.jsx("span",{children:"Levels 2-10"}),i.jsx("button",{type:"button",onClick:M,disabled:N.tiers.length>=10,className:"px-2 py-1 rounded bg-nexus-accent/80 text-white disabled:bg-slate-700 disabled:text-slate-500",children:"Add Level"})]}),N.tiers.slice(1).map((R,B)=>i.jsxs("div",{className:"p-2 rounded border border-slate-800 bg-slate-900/80 space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[i.jsxs("span",{className:"font-semibold text-slate-200",children:["Level ",B+2]}),i.jsx("button",{type:"button",onClick:()=>T(B+1),className:"text-red-400 hover:text-red-300",children:"Remove"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("input",{className:"bg-slate-900 border border-slate-700 rounded px-2 py-1",placeholder:"Duration",value:R.duration,onChange:q=>L(B+1,"duration",q.target.value)}),i.jsx("input",{className:"bg-slate-900 border border-slate-700 rounded px-2 py-1",placeholder:"Cooldown",value:R.cooldown,onChange:q=>L(B+1,"cooldown",q.target.value)}),i.jsx("input",{className:"bg-slate-900 border border-slate-700 rounded px-2 py-1",placeholder:"Energy",value:R.energyCost,onChange:q=>L(B+1,"energyCost",q.target.value)}),i.jsx("textarea",{className:"col-span-2 bg-slate-900 border border-slate-700 rounded px-2 py-1",placeholder:"Effect description",value:R.effectDescription,onChange:q=>L(B+1,"effectDescription",q.target.value)})]})]},R.level)),N.tiers.length===1&&i.jsx("p",{className:"text-xs text-slate-500",children:'Click "Add Level" to include more than one tier.'})]})]}),i.jsxs("div",{className:"flex gap-2",children:[P&&i.jsx("button",{onClick:$,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white rounded py-2 text-sm font-semibold",children:"Cancel"}),i.jsx("button",{onClick:P?D:_,className:"flex-1 bg-nexus-accent/80 hover:bg-nexus-accent text-white rounded py-2 text-sm font-semibold",children:P?"Update Ability":"Add Ability"})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto",children:[i.jsxs("h4",{className:`text-xs font-bold ${l} uppercase tracking-widest mb-2 sticky top-0 ${n}/90 py-1`,children:["All Abilities (",Y.reduce((R,B)=>R+B.abilities.length,0),")"]}),i.jsx("ul",{className:"space-y-0.5 text-sm",children:Y.flatMap(R=>R.abilities.map(B=>i.jsx("li",{children:i.jsx("button",{onClick:()=>{const q=document.getElementById(`ability-${B.id}`);q==null||q.scrollIntoView({behavior:"smooth",block:"center"})},className:`w-full text-left px-2 py-1 rounded truncate transition-colors ${l} hover:text-nexus-accent ${r==="light"?"hover:bg-gray-100":"hover:bg-slate-800/50"} text-xs`,title:B.name,children:B.name})},B.id)))})]})]}),i.jsx("div",{className:`flex-1 overflow-y-auto p-4 md:p-8 ${n}/80`,children:m?i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-600",children:[i.jsx(Tr,{size:48,className:"mb-4 animate-spin text-nexus-accent"}),i.jsx("p",{className:"text-lg",children:"Loading abilities..."})]}):b?i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-red-500",children:[i.jsx("p",{className:"text-lg mb-4",children:b}),i.jsx("button",{onClick:A,className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-white",children:"Retry"})]}):Y.length===0?i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-600",children:[i.jsx(gi,{size:48,className:"mb-4 opacity-20"}),i.jsx("p",{className:"text-lg",children:"No matching abilities found."})]}):i.jsx("div",{className:"max-w-4xl mx-auto space-y-12",children:Y.map(R=>i.jsxs("div",{id:R.id,ref:B=>{O.current[R.id]=B},className:"scroll-mt-20",children:[i.jsxs("div",{className:`flex items-center gap-3 mb-4 pb-2 border-b ${R.colorClass} border-opacity-30`,children:[i.jsx(Bn,{className:"text-nexus-accent"}),i.jsx("h2",{className:`text-2xl font-bold ${R.colorClass.split(" ")[0]}`,children:R.title})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.abilities.map(B=>i.jsxs("div",{id:`ability-${B.id}`,className:`${s} border rounded-xl p-5 hover:${d} transition-colors group scroll-mt-20`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h3",{className:`font-bold text-lg ${o} group-hover:${a} transition-colors`,children:B.name}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:`text-xs ${r==="light"?"bg-gray-100 text-gray-600":"bg-slate-800 text-slate-500"} px-2 py-1 rounded font-mono`,children:["Max Lvl ",B.maxLevel]}),t&&i.jsx("button",{onClick:()=>I(B),className:`p-1.5 rounded ${r==="light"?"bg-gray-100 hover:bg-gray-200 text-gray-600":"bg-slate-800 hover:bg-slate-700 text-slate-400"} hover:text-nexus-accent transition-colors`,title:"Edit ability",children:i.jsx(B$,{size:14})})]})]}),i.jsx("p",{className:`text-sm ${l} mb-4 h-10 line-clamp-2`,children:B.description||"No description available."}),i.jsxs("div",{className:`${r==="light"?"bg-gray-100":"bg-slate-950"} rounded-lg p-3 grid grid-cols-2 gap-x-4 gap-y-2 text-xs`,children:[B.tiers&&B.tiers[0]&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"col-span-2 text-slate-500 font-bold border-b border-slate-800 pb-1 mb-1",children:"Level 1"}),i.jsxs("div",{className:"text-slate-400",children:["Duration: ",i.jsx("span",{className:"text-slate-200",children:B.tiers[0].duration||"N/A"})]}),i.jsxs("div",{className:"text-slate-400",children:["Cooldown: ",i.jsx("span",{className:"text-slate-200",children:B.tiers[0].cooldown||"N/A"})]}),B.tiers[0].energyCost&&i.jsxs("div",{className:"text-slate-400",children:["Energy: ",i.jsx("span",{className:"text-yellow-400",children:B.tiers[0].energyCost})]}),i.jsx("div",{className:"col-span-2 text-blue-400 mt-1",children:B.tiers[0].effectDescription||""})]}),B.tiers&&B.tiers.length>1&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-span-2 text-nexus-accent font-bold border-b border-slate-800 pb-1 mb-1 mt-2",children:["Level ",B.maxLevel]}),i.jsxs("div",{className:"text-slate-400",children:["Duration: ",i.jsx("span",{className:"text-slate-200",children:B.tiers[B.tiers.length-1].duration||"N/A"})]}),i.jsxs("div",{className:"text-slate-400",children:["Cooldown: ",i.jsx("span",{className:"text-slate-200",children:B.tiers[B.tiers.length-1].cooldown||"N/A"})]}),B.tiers[B.tiers.length-1].energyCost&&i.jsxs("div",{className:"text-slate-400",children:["Energy: ",i.jsx("span",{className:"text-yellow-400",children:B.tiers[B.tiers.length-1].energyCost})]}),i.jsx("div",{className:"col-span-2 text-blue-400 mt-1",children:B.tiers[B.tiers.length-1].effectDescription||""})]}),(!B.tiers||B.tiers.length===0)&&i.jsx("div",{className:"col-span-2 text-slate-500 italic",children:"No tier data available"})]}),B.evolutionId&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-800 flex items-center gap-2 text-xs text-purple-400",children:[i.jsx(Bn,{size:12,className:"animate-pulse"}),i.jsxs("span",{children:["Evolves into: ",i.jsx("strong",{children:ee(B.evolutionId)})]})]})]},B.id))})]},R.id))})})]}),i.jsx("footer",{className:`${n} border-t ${c} py-8`,children:i.jsx("div",{className:"mx-auto max-w-5xl px-4",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx(ar,{variant:"footer",showCopyright:!1}),i.jsxs("p",{className:`text-sm ${l}`,children:[" ",new Date().getFullYear()," All rights reserved."]})]})})})]})]})}const tX=({isOpen:e,onClose:t})=>{const[r,n]=g.useState([]),[s,a]=g.useState(null),[o,l]=g.useState(!0),[c,d]=g.useState(!1),[u,h]=g.useState(!1),[f,p]=g.useState(!1),[m,x]=g.useState(null),[b,y]=g.useState({name:"",description:"",level:1,rank:"Regular",xp_reward:10,credits:5,hp:100});g.useEffect(()=>{e&&(async()=>{l(!0);const S=await wl();n(S),!s&&S.length>0&&a(S[0].id),l(!1)})()},[e,s]);const v=r.find(k=>k.id===s);g.useEffect(()=>{v&&(y({name:v.name,description:v.description||"",level:v.level,rank:v.rank,xp_reward:v.xp_reward,credits:v.credits,hp:v.hp||100}),x(null))},[v]);const w=async()=>{if(!s)return;d(!0),x(null);const k=await RY(s,{name:b.name,description:b.description,level:b.level,rank:b.rank,xp_reward:b.xp_reward,credits:b.credits,hp:b.hp});if(k.success){x("Monster updated successfully!");const S=await wl();n(S)}else x(`Error: ${k.error}`);d(!1)},j=async()=>{if(!s||!f){p(!0),x("Click DELETE again to confirm");return}h(!0),x(null);const k=await BY(s);if(k.success){x("Monster deleted successfully!");const S=await wl();n(S);const C=S.length>0?S[0].id:null;a(C),p(!1)}else x(`Error: ${k.error}`);h(!1)};if(!e)return null;const N=k=>{switch(k){case"Trash":return"bg-gray-600/20 text-gray-400 border-gray-600";case"Regular":return"bg-green-600/20 text-green-400 border-green-600";case"Champion":return"bg-purple-600/20 text-purple-400 border-purple-600";case"Boss":return"bg-red-600/20 text-red-400 border-red-600";default:return"bg-slate-600/20 text-slate-400 border-slate-600"}};return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:i.jsxs("div",{className:"bg-nexus-panel border border-slate-600 shadow-2xl rounded-xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700 bg-slate-900",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(EN,{className:"text-red-400",size:24}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-white",children:"Monster Editor"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Edit monster properties and stats"})]})]}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:i.jsx(Dt,{size:24})})]}),i.jsxs("div",{className:"px-4 py-2 text-sm bg-blue-900/20 text-blue-400 border-b border-blue-900/30 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ox,{size:16}),i.jsx("span",{children:"Select a monster to edit. Changes are saved to MySQL."})]}),m&&i.jsx("span",{className:`text-xs ${m.includes("Error")?"text-red-400":"text-green-400"}`,children:m})]}),i.jsx("div",{className:"flex flex-1 overflow-hidden",children:o?i.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 text-slate-400",children:[i.jsx(Tr,{className:"animate-spin",size:18})," Loading monsters..."]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"w-64 border-r border-slate-700 bg-slate-900/50 flex flex-col",children:[i.jsx("div",{className:"p-2 border-b border-slate-800",children:i.jsxs("span",{className:"text-xs text-slate-500 uppercase tracking-wide",children:["Monsters (",r.length,")"]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:r.map(k=>i.jsxs("button",{onClick:()=>a(k.id),className:`w-full text-left px-3 py-2 border-b border-slate-800 transition-colors ${s===k.id?"bg-red-500/10 border-l-2 border-l-red-500 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[i.jsx("div",{className:"font-medium",children:k.name}),i.jsxs("div",{className:"text-[10px] text-slate-500 flex items-center gap-2",children:[i.jsx("span",{className:`px-1 rounded text-[9px] border ${N(k.rank)}`,children:k.rank}),i.jsxs("span",{children:["Lvl ",k.level]})]})]},k.id))})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:v?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1 font-semibold",children:"Name"}),i.jsx("input",{type:"text",value:b.name,onChange:k=>y({...b,name:k.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white focus:border-red-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1 font-semibold",children:"Rank"}),i.jsx("select",{value:b.rank,onChange:k=>y({...b,rank:k.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white focus:border-red-500 outline-none",children:["Trash","Regular","Champion","Boss"].map(k=>i.jsx("option",{value:k,children:k},k))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1 font-semibold",children:"Description"}),i.jsx("textarea",{value:b.description,onChange:k=>y({...b,description:k.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white min-h-[80px] focus:border-red-500 outline-none"})]}),i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[i.jsx("h3",{className:"text-sm font-bold text-red-400 mb-3",children:"Stats"}),i.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1 font-semibold",children:"Level"}),i.jsx("input",{type:"number",min:1,value:b.level,onChange:k=>y({...b,level:parseInt(k.target.value)||1}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white focus:border-red-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1 font-semibold",children:"HP"}),i.jsx("input",{type:"number",min:1,value:b.hp,onChange:k=>y({...b,hp:parseInt(k.target.value)||100}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white focus:border-red-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1 font-semibold",children:"XP Reward"}),i.jsx("input",{type:"number",min:0,value:b.xp_reward,onChange:k=>y({...b,xp_reward:parseInt(k.target.value)||0}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white focus:border-red-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1 font-semibold",children:"Credits"}),i.jsx("input",{type:"number",min:0,value:b.credits,onChange:k=>y({...b,credits:parseInt(k.target.value)||0}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white focus:border-red-500 outline-none"})]})]})]})]}):i.jsx("div",{className:"flex items-center justify-center h-full text-slate-600",children:"Select a monster from the left"})})]})}),i.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-slate-700 bg-slate-900/50",children:[i.jsx("button",{onClick:j,disabled:u||!s,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${f?"bg-red-600 hover:bg-red-700 text-white":"bg-slate-700 hover:bg-red-600 text-slate-300 hover:text-white"} disabled:bg-slate-800 disabled:text-slate-600`,onMouseLeave:()=>p(!1),children:u?i.jsxs(i.Fragment,{children:[i.jsx(Tr,{size:16,className:"animate-spin"}),"Deleting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(oi,{size:16}),f?"Confirm Delete?":"Delete"]})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Close"}),i.jsx("button",{onClick:w,disabled:c||!s,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-slate-700 disabled:text-slate-500 text-white rounded-lg transition-colors",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Tr,{size:16,className:"animate-spin"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Bl,{size:16}),"Save Changes"]})})]})]})]})})},rX={Trash:"text-slate-400 border-slate-600 bg-slate-800",Regular:"text-blue-400 border-blue-800 bg-blue-900/10",Champion:"text-yellow-400 border-yellow-800 bg-yellow-900/10",Boss:"text-red-500 border-red-800 bg-red-900/10"},nX={Trash:"border-slate-700 hover:border-slate-500",Regular:"border-blue-900/50 hover:border-blue-500/50",Champion:"border-yellow-900/50 hover:border-yellow-500/50",Boss:"border-red-900/50 hover:border-red-500/50"};function sX(){const{user:e}=za(),t=(e==null?void 0:e.role)==="admin",{theme:r}=Wt(),n=r==="light"?"bg-white":"bg-slate-900",s=r==="light"?"bg-white border-gray-200":"bg-slate-900 border-slate-700",a=r==="light"?"text-gray-900":"text-white",o=r==="light"?"text-gray-700":"text-slate-200",l=r==="light"?"text-gray-500":"text-slate-400",c=r==="light"?"border-gray-200":"border-slate-700",d=r==="light"?"border-gray-300":"border-slate-600",[u,h]=g.useState(""),[f,p]=g.useState("All"),[m,x]=g.useState([]),[b,y]=g.useState(!0),[v,w]=g.useState(null),[j,N]=g.useState(null),[k,S]=g.useState(!1),[C,P]=g.useState({name:"",rank:"Regular",level:1,xp_reward:10,credits:5,description:""});g.useEffect(()=>{(async()=>{y(!0),w(null),N(null);try{const _=await wl();x(_)}catch(_){w("Failed to load monsters"),console.error(_)}finally{y(!1)}})()},[]);const E=async()=>{var I;const A=await LY({name:C.name,rank:C.rank,level:Number(C.level)||1,xp_reward:Number(C.xp_reward)||0,credits:Number(C.credits)||0,description:C.description,hp:void 0});if(!A.success){N(A.error||"Failed to add monster");return}N(`Added ${(I=A.monster)==null?void 0:I.name}`),P({name:"",rank:"Regular",level:1,xp_reward:10,credits:5,description:""});const _=await wl();x(_)},O=g.useMemo(()=>m.filter(A=>{const _=A.name.toLowerCase().includes(u.toLowerCase())||(A.description||"").toLowerCase().includes(u.toLowerCase()),I=f==="All"||A.rank===f;return _&&I}),[m,u,f]);return i.jsxs(i.Fragment,{children:[i.jsxs(En,{children:[i.jsx("title",{children:"Bestiary - LitRPG Tools"}),i.jsx("meta",{name:"description",content:"Monster manual and creature compendium for Destiny Among the Stars LitRPG."})]}),i.jsx(Xr,{breadcrumbs:[{label:"Tools",path:"/litrpg/home"},{label:"Bestiary"}]}),i.jsxs("div",{className:`relative min-h-screen font-sans selection:bg-nexus-accent/30 selection:text-white flex flex-col ${o}`,children:[i.jsx(ac,{}),i.jsxs("div",{className:"flex-1 flex flex-col md:flex-row",children:[i.jsxs("div",{className:`w-full md:w-80 ${n}/50 border-r ${c} flex flex-col shrink-0 p-4 md:sticky md:top-0 md:h-screen md:overflow-y-auto`,children:[i.jsxs("div",{className:"flex items-center justify-between gap-3 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Px,{className:"text-purple-400",size:24}),i.jsx("h1",{className:`text-xl font-bold ${a} font-mono tracking-wider`,children:"BESTIARY"})]}),t&&i.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-1 bg-red-600/20 hover:bg-red-600/30 text-red-400 border border-red-600/30 hover:border-red-500 px-3 py-1.5 rounded-lg transition-all text-xs font-medium",title:"Edit Monsters",children:[i.jsx(Dx,{size:14}),"Edit"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Search creatures...",value:u,onChange:A=>h(A.target.value),className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-800 border-slate-600 text-white"} border rounded-lg py-2 pl-9 pr-4 text-sm focus:border-purple-500 outline-none`}),i.jsx(gi,{className:`absolute left-3 top-2.5 ${l}`,size:16})]}),i.jsxs("div",{children:[i.jsx("label",{className:`text-xs font-bold ${l} uppercase tracking-wider mb-2 block`,children:"Rank Filter"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:["All","Trash","Regular","Champion","Boss"].map(A=>i.jsx("button",{onClick:()=>p(A),className:`px-2 py-1.5 rounded text-xs font-medium transition-colors border ${f===A?"bg-purple-500/20 border-purple-500 text-white":`${r==="light"?"bg-gray-100 border-gray-300":"bg-slate-800 border-slate-700"} ${l} hover:${d}`}`,children:A},A))})]}),i.jsxs("div",{className:`${r==="light"?"bg-gray-100 border-gray-300":"bg-slate-800/50 border-slate-700"} p-3 rounded border mt-auto`,children:[i.jsx("div",{className:`text-xs ${l} mb-1`,children:"Entries Found"}),i.jsx("div",{className:`text-2xl font-mono font-bold ${a}`,children:O.length}),i.jsxs("div",{className:`text-xs ${l} mt-1`,children:["of ",m.length," total"]})]}),t&&i.jsxs("div",{className:"bg-slate-800/60 p-3 rounded border border-slate-700 space-y-2",children:[i.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Add Monster"}),j&&i.jsx("div",{className:"text-[10px] text-green-300",children:j}),i.jsx("input",{className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1 text-sm",placeholder:"Name (slug auto-generated)",value:C.name,onChange:A=>P({...C,name:A.target.value})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] text-slate-500 uppercase mb-1 font-semibold",children:"Rank"}),i.jsx("select",{className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1 text-sm",value:C.rank,onChange:A=>P({...C,rank:A.target.value}),children:["Trash","Regular","Champion","Boss"].map(A=>i.jsx("option",{value:A,children:A},A))})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] text-slate-500 uppercase mb-1 font-semibold",children:"Level"}),i.jsx("input",{className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1",type:"number",min:1,value:C.level,onChange:A=>P({...C,level:Number(A.target.value)}),placeholder:"1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] text-slate-500 uppercase mb-1 font-semibold",children:"XP Reward"}),i.jsx("input",{className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1",type:"number",value:C.xp_reward,onChange:A=>P({...C,xp_reward:Number(A.target.value)}),placeholder:"10"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] text-slate-500 uppercase mb-1 font-semibold",children:"Credits"}),i.jsx("input",{className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1",type:"number",value:C.credits,onChange:A=>P({...C,credits:Number(A.target.value)}),placeholder:"5"})]})]}),i.jsx("textarea",{className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1 text-sm",placeholder:"Description",value:C.description,onChange:A=>P({...C,description:A.target.value})}),i.jsx("button",{onClick:E,className:"w-full bg-nexus-accent/80 hover:bg-nexus-accent text-white rounded py-2 text-sm font-semibold",children:"Add Monster"})]})]})]}),i.jsx("div",{className:`flex-1 overflow-y-auto p-4 md:p-8 ${n}/80`,children:b?i.jsxs("div",{className:`h-full flex flex-col items-center justify-center ${l}`,children:[i.jsx(ZE,{size:64,className:"mb-4 animate-pulse"}),i.jsx("p",{className:"text-lg",children:"Loading bestiary..."})]}):v?i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-red-400",children:[i.jsx(od,{size:48,className:"mb-3"}),i.jsx("p",{className:"text-lg mb-4",children:v})]}):O.length===0?i.jsxs("div",{className:`h-full flex flex-col items-center justify-center ${l} opacity-50`,children:[i.jsx(ZE,{size:64,className:"mb-4"}),i.jsx("p",{className:"text-lg",children:"No threats matching parameters."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:O.map(A=>i.jsxs("div",{className:`${s} border rounded-xl p-5 transition-all hover:scale-[1.01] hover:shadow-xl ${nX[A.rank]}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:`font-bold text-lg ${o}`,children:A.name}),A.rank==="Boss"&&i.jsx(EN,{size:16,className:"text-red-500"})]}),i.jsxs("div",{className:"flex flex-col items-end gap-1",children:[i.jsxs("span",{className:`text-xs ${r==="light"?"bg-gray-200 border-gray-400 text-gray-600":"bg-black/40 border-slate-800 text-slate-400"} px-2 py-0.5 rounded font-mono border`,children:["Lvl ",A.level]}),i.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded border uppercase font-bold tracking-wider ${rX[A.rank]}`,children:A.rank})]})]}),i.jsxs("p",{className:`text-sm ${l} mb-4 h-10 line-clamp-2 italic border-l-2 ${d} pl-3`,children:['"',A.description||"No description available.",'"']}),A.stats&&i.jsx("div",{className:"grid grid-cols-6 gap-1 mb-4",children:Object.entries(A.stats).map(([_,I])=>i.jsxs("div",{className:"bg-slate-950 rounded p-1 text-center border border-slate-800",children:[i.jsx("div",{className:"text-[9px] text-slate-600 font-bold",children:_}),i.jsx("div",{className:"text-xs font-bold text-slate-300",children:I})]},_))}),i.jsxs("div",{className:"mb-4 bg-slate-950 rounded p-2 border border-slate-800",children:[i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"text-red-400 font-bold",children:"HP"}),i.jsx("span",{className:"text-slate-400",children:A.hp||""})]}),i.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-red-500 rounded-full",style:{width:`${Math.min(100,(A.hp||100)/100*20)}%`}})})]}),A.abilities&&A.abilities.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-4 h-12 overflow-hidden content-start",children:A.abilities.map((_,I)=>i.jsx("span",{className:"text-xs px-2 py-0.5 bg-slate-800 text-slate-300 rounded border border-slate-700 truncate max-w-[150px]",children:_},I))}),i.jsxs("div",{className:"pt-3 border-t border-slate-800 flex justify-between items-center text-xs font-mono",children:[i.jsxs("div",{className:"flex items-center gap-1 text-slate-500",children:[i.jsx(od,{size:12}),"Threat Reward"]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("span",{className:"text-nexus-accent font-bold",children:["XP: ",A.xp_reward.toLocaleString()]}),i.jsxs("span",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[A.credits.toLocaleString()," ",i.jsx(Mx,{size:10})]})]})]})]},A.id))})})]}),i.jsx("footer",{className:`${n} border-t ${c} py-8`,children:i.jsx("div",{className:"mx-auto max-w-5xl px-4",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx(ar,{variant:"footer",showCopyright:!1}),i.jsxs("p",{className:`text-sm ${l}`,children:[" ",new Date().getFullYear()," All rights reserved."]})]})})}),i.jsx(tX,{isOpen:k,onClose:()=>{S(!1),wl().then(x)}})]})]})}const wu={Tool:"text-amber-400 border-amber-500/30 bg-amber-900/10",Weapon:"text-red-400 border-red-500/30 bg-red-900/10",Component:"text-cyan-400 border-cyan-500/30 bg-cyan-900/10",Material:"text-slate-300 border-slate-500/30 bg-slate-800/30",Consumable:"text-green-400 border-green-500/30 bg-green-900/10",Armor:"text-blue-400 border-blue-500/30 bg-blue-900/10",Medical:"text-pink-400 border-pink-500/30 bg-pink-900/10"},oA={TL8:"text-slate-400 border-slate-600 bg-slate-800",TL9:"text-blue-400 border-blue-600 bg-blue-900/20",TL10:"text-purple-400 border-purple-600 bg-purple-900/20"},lA={Tool:i.jsx(hY,{size:14}),Weapon:i.jsx(nr,{size:14}),Component:i.jsx(vG,{size:14}),Material:i.jsx(QG,{size:14}),Consumable:i.jsx(gK,{size:14}),Armor:i.jsx(ca,{size:14}),Medical:i.jsx(qG,{size:14})},av=["TL8","TL9","TL10"],cA=["Material","Component","Tool","Weapon","Armor","Consumable","Medical"];function aX(){const{user:e}=za(),t=(e==null?void 0:e.role)==="admin",{theme:r}=Wt(),n=r==="light"?"bg-white":"bg-slate-900",s=r==="light"?"bg-white border-gray-200":"bg-slate-900 border-slate-700",a=r==="light"?"text-gray-900":"text-white",o=r==="light"?"text-gray-700":"text-slate-200",l=r==="light"?"text-gray-500":"text-slate-400",c=r==="light"?"border-gray-200":"border-slate-700",[d,u]=g.useState(""),[h,f]=g.useState("All"),[p,m]=g.useState("All"),[x,b]=g.useState(null),[y,v]=g.useState([]),[w,j]=g.useState(!1),[N,k]=g.useState(null),[S,C]=g.useState(null),[P,E]=g.useState({name:"",description:"",tech_level:"TL8",category:"Material",rarity:"common",base_value:0});g.useEffect(()=>{O()},[]);const O=async()=>{j(!0),k(null),C(null);const M=await rD();M.success?v(M.items):(k(M.error||"Failed to load items"),v([])),j(!1)},A=async()=>{var T;C(null);const M=await FY({name:P.name,description:P.description,tech_level:P.tech_level,category:P.category,rarity:P.rarity,base_value:Number(P.base_value)||0});if(!M.success){C(M.error||"Failed to create item");return}C(`Created ${(T=M.item)==null?void 0:T.name}`),E({name:"",description:"",tech_level:"TL8",category:"Material",rarity:"common",base_value:0}),await O()},_=g.useMemo(()=>{const T=Array.from(new Set(y.map(G=>G.tech_level).filter(Boolean))).sort((G,Y)=>av.indexOf(G)-av.indexOf(Y));return T.length>0?T:av},[y]),I=g.useMemo(()=>{const M=Array.from(new Set(y.map(T=>T.category).filter(Boolean)));return M.length>0?M:cA},[y]),D=g.useMemo(()=>{const M=d.toLowerCase();return y.filter(T=>{var R;const G=T.name.toLowerCase().includes(M)||((R=T.description)==null?void 0:R.toLowerCase().includes(M)),Y=h==="All"||T.tech_level===h,ee=p==="All"||T.category===p;return G&&Y&&ee})},[y,d,h,p]),$=g.useMemo(()=>{const M={};return D.forEach(T=>{const G=T.tech_level||"Unspecified",Y=T.category||"General";M[G]||(M[G]={}),M[G][Y]||(M[G][Y]=[]),M[G][Y].push(T)}),M},[D]),L=M=>{const T=oA[M];return T?T.split(" ")[0]:"text-slate-300"};return i.jsxs(i.Fragment,{children:[i.jsxs(En,{children:[i.jsx("title",{children:"Loot Catalog - LitRPG Tools"}),i.jsx("meta",{name:"description",content:"Item database organized by Tech Level and category for Destiny Among the Stars LitRPG."})]}),i.jsx(Xr,{breadcrumbs:[{label:"Tools",path:"/litrpg/home"},{label:"Loot"}]}),i.jsxs("div",{className:`relative min-h-screen font-sans selection:bg-nexus-accent/30 selection:text-white flex flex-col ${o}`,children:[i.jsx(ac,{}),i.jsxs("div",{className:"flex-1 flex flex-col md:flex-row",children:[i.jsxs("div",{className:`w-full md:w-80 ${n}/50 border-r ${c} p-4 md:sticky md:top-0 md:h-screen md:overflow-y-auto space-y-4`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zh,{className:"text-green-400",size:24}),i.jsxs("div",{children:[i.jsx("h1",{className:`text-xl font-bold ${a} font-mono tracking-wider`,children:"LOOT CATALOG"}),i.jsx("div",{className:`text-xs ${l}`,children:w?"Loading...":`${y.length} items`})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Search items...",value:d,onChange:M=>u(M.target.value),className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-800 border-slate-600 text-white"} border rounded-lg py-2 pl-10 pr-4 text-sm focus:border-green-500 outline-none`}),i.jsx(gi,{className:`absolute left-3 top-2.5 ${l}`,size:16})]}),i.jsxs("div",{className:`p-3 ${r==="light"?"bg-gray-100":"bg-slate-800/50"} rounded-lg`,children:[i.jsx("div",{className:`text-xs ${l} uppercase tracking-wide mb-1`,children:"Total Items"}),i.jsx("div",{className:"text-2xl font-bold text-green-400",children:y.length})]}),t&&i.jsxs("div",{className:`${r==="light"?"bg-gray-100 border-gray-300":"bg-slate-800/60 border-slate-700"} p-3 rounded border space-y-2`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:`text-xs font-bold ${l} uppercase`,children:"Quick Add Item"}),S&&i.jsx("div",{className:"text-[10px] text-green-500",children:S})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1 text-sm`,placeholder:"Name (slug auto-generated)",value:P.name,onChange:M=>E({...P,name:M.target.value})}),i.jsx("input",{className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1 text-sm`,placeholder:"Description",value:P.description,onChange:M=>E({...P,description:M.target.value})}),i.jsxs("select",{className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1 text-sm`,value:P.tech_level,onChange:M=>E({...P,tech_level:M.target.value}),children:[i.jsx("option",{value:"TL8",children:"TL8 - Basic Tech"}),i.jsx("option",{value:"TL9",children:"TL9 - Advanced Tech"}),i.jsx("option",{value:"TL10",children:"TL10 - Elite Tech"})]}),i.jsx("select",{className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1 text-sm`,value:P.category,onChange:M=>E({...P,category:M.target.value}),children:cA.map(M=>i.jsx("option",{value:M,children:M},M))}),i.jsxs("select",{className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1 text-sm`,value:P.rarity,onChange:M=>E({...P,rarity:M.target.value}),children:[i.jsx("option",{value:"common",children:"Common"}),i.jsx("option",{value:"uncommon",children:"Uncommon"}),i.jsx("option",{value:"rare",children:"Rare"}),i.jsx("option",{value:"legendary",children:"Legendary"})]}),i.jsx("input",{type:"number",className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1 text-sm`,placeholder:"Base Value (credits)",value:P.base_value,onChange:M=>E({...P,base_value:Number(M.target.value)})})]}),i.jsx("button",{onClick:A,disabled:!P.name,className:`w-full bg-green-600 hover:bg-green-700 ${r==="light"?"disabled:bg-gray-300 disabled:text-gray-500":"disabled:bg-slate-700 disabled:text-slate-500"} text-white px-3 py-1.5 rounded text-sm font-medium transition-colors`,children:"Add Item"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:`text-[11px] uppercase ${l}`,children:"Tech Level"}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsx("button",{onClick:()=>f("All"),className:`px-2 py-1 text-xs rounded border transition-colors ${h==="All"?`bg-nexus-accent/20 border-nexus-accent ${r==="light"?"text-gray-900":"text-white"}`:`${r==="light"?"bg-gray-100 border-gray-300 text-gray-600 hover:border-gray-400":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`}`,children:"All"}),_.map(M=>i.jsx("button",{onClick:()=>f(M),className:`px-2 py-1 text-xs rounded border transition-colors ${h===M?`${oA[M]||`${r==="light"?"bg-gray-100 text-gray-900 border-gray-400":"bg-slate-800 text-white border-slate-500"}`} border-current`:`${r==="light"?"bg-gray-100 border-gray-300 text-gray-600 hover:border-gray-400":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`}`,children:M},M))]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:`text-[11px] uppercase ${l}`,children:"Category"}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsx("button",{onClick:()=>m("All"),className:`px-2 py-1 text-xs rounded border transition-colors ${p==="All"?`bg-nexus-accent/20 border-nexus-accent ${r==="light"?"text-gray-900":"text-white"}`:`${r==="light"?"bg-gray-100 border-gray-300 text-gray-600 hover:border-gray-400":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`}`,children:"All"}),I.map(M=>i.jsxs("button",{onClick:()=>m(M),className:`px-2 py-1 text-xs rounded border transition-colors flex items-center gap-1 ${p===M&&wu[M]?wu[M]:`${r==="light"?"bg-gray-100 border-gray-300 text-gray-600 hover:border-gray-400":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`}`,children:[lA[M],M]},M))]})]}),N&&i.jsx("p",{className:"text-sm text-red-400",children:N})]}),i.jsx("div",{className:`flex-1 overflow-y-auto p-6 md:p-8 ${n}/80`,children:i.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[_.filter(M=>h==="All"||h===M).map(M=>Object.entries($[M]||{}).filter(([,G])=>G.length>0).length===0?null:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:`flex items-center gap-3 pb-2 border-b ${M==="TL8"?"border-slate-600":M==="TL9"?"border-blue-600/50":"border-purple-600/50"}`,children:[i.jsx("span",{className:`text-2xl font-bold font-mono ${M==="TL8"?"text-slate-300":M==="TL9"?"text-blue-400":"text-purple-400"}`,children:M}),i.jsx("span",{className:"text-slate-500 text-sm",children:M==="TL8"?"Basic Tech":M==="TL9"?"Advanced Tech":"Elite Tech"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:I.filter(G=>p==="All"||p===G).map(G=>{var ee;const Y=((ee=$[M])==null?void 0:ee[G])||[];return Y.length===0?null:i.jsxs("div",{className:`${s} border rounded-xl overflow-hidden`,children:[i.jsxs("div",{className:`p-3 border-b ${c} flex items-center gap-2 ${(wu[G]||o).split(" ").slice(0,1).join(" ")}`,children:[lA[G],i.jsx("h3",{className:"font-bold text-sm",children:G}),i.jsx("span",{className:`text-xs ${l} ml-auto`,children:Y.length})]}),i.jsx("div",{className:"p-2 space-y-1 max-h-80 overflow-y-auto",children:Y.map(R=>{const B=x===R.name;return i.jsxs("div",{onClick:()=>b(B?null:R.name),className:`p-2 rounded border text-sm transition-all cursor-pointer ${B?`${R.category?wu[R.category]:""} text-slate-200 border-slate-700 bg-slate-800 ring-1 ring-current`:`${R.category?wu[R.category]:""} text-slate-200 border-slate-700 bg-slate-900 hover:bg-slate-800/50`}`,children:[i.jsxs("div",{className:"font-medium flex items-center justify-between",children:[R.name,i.jsx("span",{className:`text-xs transition-transform ${B?"rotate-180":""}`,children:""})]}),B&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-current/20 space-y-2 animate-in slide-in-from-top-1 duration-200",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:"Tech Level:"}),i.jsx("span",{className:`ml-1 font-bold ${L(R.tech_level)}`,children:R.tech_level||"N/A"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:"Category:"}),i.jsx("span",{className:"ml-1 font-bold",children:R.category||"General"})]}),R.rarity&&i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:"Rarity:"}),i.jsx("span",{className:"ml-1 font-bold",children:R.rarity})]}),typeof R.base_value=="number"&&i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:"Value:"}),i.jsxs("span",{className:"ml-1 font-bold",children:[R.base_value," cr"]})]})]}),R.description&&i.jsx("p",{className:"text-xs text-slate-400 italic",children:R.description})]})]},R.id)})})]},`${M}-${G}`)})})]},M)),D.length===0&&!w&&i.jsxs("div",{className:"text-center py-20 text-slate-600",children:[i.jsx(zh,{size:64,className:"mx-auto mb-4 opacity-20"}),i.jsx("p",{className:"text-lg",children:"No items matching filters."})]})]})})]}),i.jsx("footer",{className:`${n} border-t ${c} py-8`,children:i.jsx("div",{className:"mx-auto max-w-5xl px-4",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx(ar,{variant:"footer",showCopyright:!1}),i.jsxs("p",{className:`text-sm ${l}`,children:[" ",new Date().getFullYear()," All rights reserved."]})]})})})]})]})}const dA={routine:"text-green-400 bg-green-500/10 border-green-500/30",hazardous:"text-yellow-400 bg-yellow-500/10 border-yellow-500/30",critical:"text-orange-400 bg-orange-500/10 border-orange-500/30",suicide:"text-red-500 bg-red-500/10 border-red-500/30"},uA={bounty:"text-red-400",extraction:"text-blue-400",escort:"text-green-400",patrol:"text-yellow-400",investigation:"text-purple-400"};function iX(){const{user:e}=za(),t=(e==null?void 0:e.role)==="admin",{theme:r}=Wt(),n=r==="light"?"bg-white":"bg-slate-900",s=r==="light"?"bg-white border-gray-200":"bg-slate-900 border-slate-700",a=r==="light"?"text-gray-900":"text-white",o=r==="light"?"text-gray-700":"text-slate-200",l=r==="light"?"text-gray-500":"text-slate-400",c=r==="light"?"border-gray-200":"border-slate-700",d=r==="light"?"border-gray-300":"border-slate-600",[u,h]=g.useState("All"),[f,p]=g.useState("All"),[m,x]=g.useState(""),[b,y]=g.useState([]),[v,w]=g.useState(!0),[j,N]=g.useState(null),[k,S]=g.useState(null),[C,P]=g.useState({title:"",description:"",contract_type:"bounty",difficulty:"routine",level_requirement:1,time_limit:"",rewards:{xp:0,credits:0}});g.useEffect(()=>{(async()=>{w(!0),N(null),S(null);const I=await aA();I.success?y(I.contracts||[]):N(I.error||"Failed to load contracts"),w(!1)})()},[]);const E=_=>_.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""),O=async()=>{var $;S(null),N(null);const _={slug:E(C.title),title:C.title,description:C.description,contract_type:C.contract_type,difficulty:C.difficulty,level_requirement:Number(C.level_requirement)||1,time_limit:C.time_limit||void 0,rewards:{xp:Number(C.rewards.xp)||0,credits:Number(C.rewards.credits)||0}},I=await CY(_);if(!I.success){S(I.error||"Failed to create contract");return}S(`Created ${($=I.contract)==null?void 0:$.title}`),P({title:"",description:"",contract_type:"bounty",difficulty:"routine",level_requirement:1,time_limit:"",rewards:{xp:0,credits:0}});const D=await aA();D.success&&y(D.contracts||[])},A=g.useMemo(()=>b.filter(_=>{const I=u==="All"||_.difficulty===u,D=f==="All"||_.contract_type===f,$=_.title.toLowerCase().includes(m.toLowerCase())||(_.description||"").toLowerCase().includes(m.toLowerCase());return I&&D&&$}),[b,u,f,m]);return i.jsxs(i.Fragment,{children:[i.jsxs(En,{children:[i.jsx("title",{children:"Contracts - LitRPG Tools"}),i.jsx("meta",{name:"description",content:"Active contracts and missions for your LitRPG character."})]}),i.jsx(Xr,{breadcrumbs:[{label:"Tools",path:"/litrpg/home"},{label:"Contracts"}]}),i.jsxs("div",{className:`relative min-h-screen font-sans selection:bg-nexus-accent/30 selection:text-white flex flex-col ${o}`,children:[i.jsx(ac,{}),i.jsxs("div",{className:"flex-1 flex flex-col md:flex-row",children:[i.jsxs("div",{className:`w-full md:w-80 ${n}/50 border-r ${c} p-4 md:sticky md:top-0 md:h-screen md:overflow-y-auto space-y-4`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Me,{to:"/litrpg",className:`p-2 ${r==="light"?"hover:bg-gray-100":"hover:bg-slate-800"} rounded-lg transition-colors ${l} hover:${a}`,"aria-label":"Back to LitRPG home",children:i.jsx(A$,{size:20})}),i.jsx(jg,{className:"text-nexus-success",size:28}),i.jsxs("div",{children:[i.jsx("h1",{className:`text-xl font-bold ${a} font-mono tracking-wider`,children:"CONTRACTS"}),i.jsx("div",{className:`text-xs ${l}`,children:"Mission log and quest tracking"})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Search contracts...",value:m,onChange:_=>x(_.target.value),className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-800 border-slate-600 text-white"} border rounded-lg py-2 pl-10 pr-4 text-sm focus:border-nexus-accent outline-none`}),i.jsx(gi,{className:`absolute left-3 top-2.5 ${l}`,size:16})]}),i.jsxs("div",{className:`p-3 ${r==="light"?"bg-gray-100":"bg-slate-800/50"} rounded-lg`,children:[i.jsx("div",{className:`text-xs ${l} uppercase tracking-wide mb-1`,children:"Total Contracts"}),i.jsx("div",{className:"text-2xl font-bold text-nexus-accent",children:b.length})]}),t&&i.jsxs("div",{className:`${r==="light"?"bg-gray-100 border-gray-300":"bg-slate-800/60 border-slate-700"} p-3 rounded border space-y-2`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:`text-xs font-bold ${l} uppercase`,children:"Quick Add Contract"}),k&&i.jsx("div",{className:"text-[10px] text-green-500",children:k})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1 text-sm`,placeholder:"Title (slug auto-generated)",value:C.title,onChange:_=>P({...C,title:_.target.value})}),i.jsx("textarea",{className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1 text-sm`,placeholder:"Description",value:C.description,onChange:_=>P({...C,description:_.target.value})}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsx("select",{className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1`,value:C.contract_type,onChange:_=>P({...C,contract_type:_.target.value}),children:["bounty","extraction","escort","patrol","investigation"].map(_=>i.jsx("option",{value:_,children:_},_))}),i.jsx("select",{className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1 capitalize`,value:C.difficulty,onChange:_=>P({...C,difficulty:_.target.value}),children:["routine","hazardous","critical","suicide"].map(_=>i.jsx("option",{value:_,children:_},_))}),i.jsx("input",{type:"number",className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1`,placeholder:"Level Req",min:1,value:C.level_requirement,onChange:_=>P({...C,level_requirement:Number(_.target.value)})}),i.jsx("input",{className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1`,placeholder:"Time limit (optional)",value:C.time_limit,onChange:_=>P({...C,time_limit:_.target.value})}),i.jsx("input",{type:"number",className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1`,placeholder:"XP Reward",value:C.rewards.xp,onChange:_=>P({...C,rewards:{...C.rewards,xp:Number(_.target.value)}})}),i.jsx("input",{type:"number",className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-900 border-slate-700 text-white"} border rounded px-2 py-1`,placeholder:"Credits Reward",value:C.rewards.credits,onChange:_=>P({...C,rewards:{...C.rewards,credits:Number(_.target.value)}})})]})]}),i.jsxs("button",{onClick:O,disabled:!C.title,className:`w-full bg-nexus-accent/80 hover:bg-nexus-accent text-white rounded py-2 text-sm font-semibold ${r==="light"?"disabled:bg-gray-300 disabled:text-gray-500":"disabled:bg-slate-700 disabled:text-slate-500"} flex items-center justify-center gap-2`,children:[i.jsx(dG,{size:16}),"Add Contract"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:`text-[11px] uppercase ${l}`,children:"Difficulty"}),i.jsx("div",{className:"flex gap-2 flex-wrap",children:["All","routine","hazardous","critical","suicide"].map(_=>i.jsx("button",{onClick:()=>h(_),className:`px-2 py-1 text-xs rounded border transition-colors capitalize ${u===_?_==="All"?`bg-nexus-accent/20 border-nexus-accent ${r==="light"?"text-gray-900":"text-white"}`:dA[_]:`${r==="light"?"bg-gray-100 border-gray-300 text-gray-600 hover:border-gray-400":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`}`,children:_},_))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:`text-[11px] uppercase ${l}`,children:"Type"}),i.jsx("div",{className:"flex gap-2 flex-wrap",children:["All","bounty","extraction","escort","patrol","investigation"].map(_=>i.jsx("button",{onClick:()=>p(_),className:`px-2 py-1 text-xs rounded border transition-colors capitalize ${f===_?_==="All"?`bg-nexus-accent/20 border-nexus-accent ${r==="light"?"text-gray-900":"text-white"}`:`${uA[_]} bg-current/10 border-current`:`${r==="light"?"bg-gray-100 border-gray-300 text-gray-600 hover:border-gray-400":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`}`,children:_},_))})]}),j&&i.jsx("p",{className:"text-sm text-red-400",children:j})]}),i.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-8 ${n}/80`,children:i.jsxs("div",{className:"max-w-5xl mx-auto",children:[v&&i.jsx("div",{className:`${s} border rounded-lg p-6 text-center ${l}`,children:"Loading contracts..."}),j&&!v&&i.jsx("div",{className:`${r==="light"?"bg-red-100 border-red-400":"bg-red-900/30 border-red-800"} border rounded-lg p-6 text-center text-red-200`,children:j}),!v&&A.length===0?i.jsxs("div",{className:`flex flex-col items-center justify-center py-20 ${l}`,children:[i.jsx(jg,{size:64,className:"mb-4 opacity-20"}),i.jsx("p",{className:"text-lg",children:"No contracts available."})]}):i.jsx("div",{className:"space-y-4",children:A.map(_=>{const I=_.contract_type||"bounty",D=_.difficulty||"routine";return i.jsxs("div",{className:`${r==="light"?"bg-white border-gray-300":"bg-slate-800/50 border-slate-700"} p-6 rounded-xl border hover:${d} transition-colors`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:`font-bold text-xl ${o}`,children:_.title}),i.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[i.jsx("span",{className:`text-xs uppercase font-bold ${uA[I]||"text-slate-400"}`,children:I}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded border uppercase font-bold ${dA[D]||"border-slate-700 text-slate-400"}`,children:D}),i.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[i.jsx(HK,{size:12})," Level ",_.level_requirement,"+"]})]})]}),_.time_limit&&i.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-400 bg-slate-900 px-2 py-1 rounded",children:[i.jsx(SN,{size:12}),_.time_limit]})]}),i.jsx("p",{className:"text-sm text-slate-400 mb-4",children:_.description||"No description available."}),_.objectives&&_.objectives.length>0&&i.jsxs("div",{className:"space-y-2 mb-4 bg-slate-900/50 p-4 rounded-lg",children:[i.jsx("h5",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:"Objectives"}),_.objectives.map(($,L)=>i.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-300",children:[i.jsx("span",{className:`mt-0.5 ${$.current&&$.current>=$.target?"text-green-400":"text-slate-600"}`,children:$.current&&$.current>=$.target?i.jsx(M$,{size:14}):i.jsx(hG,{size:14})}),i.jsx("span",{children:$.description}),$.target>1&&i.jsxs("span",{className:"text-xs text-slate-500 ml-auto",children:[$.current??0,"/",$.target]})]},L))]}),_.rewards&&i.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-1 bg-nexus-accent/10 text-nexus-accent px-3 py-1.5 rounded border border-nexus-accent/20",children:[i.jsx(Bn,{size:14}),i.jsxs("span",{className:"font-bold",children:[typeof _.rewards.xp=="number"?_.rewards.xp.toLocaleString():"XP varies"," XP"]})]}),i.jsxs("div",{className:"flex items-center gap-1 bg-yellow-500/10 text-yellow-400 px-3 py-1.5 rounded border border-yellow-500/20",children:[i.jsx(Mx,{size:14}),i.jsxs("span",{className:"font-bold",children:[typeof _.rewards.credits=="number"?_.rewards.credits.toLocaleString():"Credits vary"," Credits"]})]}),Array.isArray(_.rewards.items)&&_.rewards.items.length>0&&i.jsx("div",{className:"flex items-center gap-1 bg-purple-500/10 text-purple-400 px-3 py-1.5 rounded border border-purple-500/20",children:i.jsxs("span",{className:"font-bold",children:["+",_.rewards.items.length," Items"]})})]})]},_.id)})})]})})]}),i.jsx("footer",{className:`${n} border-t ${c} py-8`,children:i.jsx("div",{className:"mx-auto max-w-5xl px-4",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx(ar,{variant:"footer",showCopyright:!1}),i.jsxs("p",{className:`text-sm ${l}`,children:[" ",new Date().getFullYear()," All rights reserved."]})]})})})]})]})}const oX=({isOpen:e,onClose:t})=>{const[r,n]=g.useState("class"),[s,a]=g.useState([]),[o,l]=g.useState([]),[c,d]=g.useState([]),[u,h]=g.useState(null),[f,p]=g.useState(!0),[m,x]=g.useState(!1),[b,y]=g.useState(null),[v,w]=g.useState([]);g.useEffect(()=>{e&&(async()=>{p(!0);const[I,D,$]=await Promise.all([da(),ua(),Hh()]);a(I),l(D),d($),u||(r==="class"&&I.length>0?h(I[0].id):r==="profession"&&D.length>0&&h(D[0].id)),p(!1)})()},[e,r,u]);const j=r==="class"?s:o,N=g.useMemo(()=>j.find(_=>_.id===u),[j,u]),k=g.useMemo(()=>[...c].sort((_,I)=>_.name.localeCompare(I.name)),[c]);g.useEffect(()=>{N&&(w(N.ability_ids||[]),y(null))},[N]);const S=async()=>{if(!u)return;x(!0),y(null);const _={ability_ids:v},I=r==="class"?await eD(u,_):await tD(u,_);if(I.success){y(`${r==="class"?"Class":"Profession"} abilities updated successfully!`);const[D,$]=await Promise.all([da(),ua()]);a(D),l($)}else y(`Error: ${I.error}`);x(!1)},C=_=>{v.includes(_)||w(I=>[...I,_])},P=_=>{w(I=>I.filter(D=>D!==_))},E=_=>{n(_);const I=_==="class"?s:o;h(I.length>0?I[0].id:null)};if(!e)return null;const O=r==="class"?"text-orange-400":"text-blue-400",A=r==="class"?"orange":"blue";return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:i.jsxs("div",{className:"bg-nexus-panel border border-slate-600 shadow-2xl rounded-xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700 bg-slate-900",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[r==="class"?i.jsx(nr,{className:O,size:24}):i.jsx(Rl,{className:O,size:24}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-white",children:"Ability Manager"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Manage abilities for classes and professions"})]})]}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:i.jsx(Dt,{size:24})})]}),i.jsxs("div",{className:"px-4 py-2 bg-slate-800 border-b border-slate-700 flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>E("class"),className:`flex items-center gap-2 px-3 py-1.5 text-sm rounded border transition-colors flex-1 justify-center ${r==="class"?"bg-orange-600/20 border-orange-500 text-orange-400":"bg-slate-700 border-slate-600 text-slate-400 hover:border-slate-500"}`,children:[i.jsx(nr,{size:14}),"Combat Classes"]}),i.jsxs("button",{onClick:()=>E("profession"),className:`flex items-center gap-2 px-3 py-1.5 text-sm rounded border transition-colors flex-1 justify-center ${r==="profession"?"bg-blue-600/20 border-blue-500 text-blue-400":"bg-slate-700 border-slate-600 text-slate-400 hover:border-slate-500"}`,children:[i.jsx(Rl,{size:14}),"Professions"]})]}),i.jsxs("div",{className:"px-4 py-2 text-sm bg-blue-900/20 text-blue-400 border-b border-blue-900/30 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ox,{size:16}),i.jsxs("span",{children:["Select a ",r," to manage abilities. Changes are saved to MySQL."]})]}),b&&i.jsx("span",{className:`text-xs ${b.includes("Error")?"text-red-400":"text-green-400"}`,children:b})]}),i.jsx("div",{className:"flex flex-1 overflow-hidden",children:f?i.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 text-slate-400",children:[i.jsx(Tr,{className:"animate-spin",size:18})," Loading..."]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"w-64 border-r border-slate-700 bg-slate-900/50 flex flex-col",children:[i.jsx("div",{className:"p-2 border-b border-slate-800",children:i.jsxs("span",{className:"text-xs text-slate-500 uppercase tracking-wide",children:[r==="class"?"Classes":"Professions"," (",j.length,")"]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:j.map(_=>i.jsxs("button",{onClick:()=>h(_.id),className:`w-full text-left px-3 py-2 border-b border-slate-800 transition-colors ${u===_.id?`bg-${A}-500/10 border-l-2 border-l-${A}-500 text-white`:"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[i.jsx("div",{className:"font-medium",children:_.name}),i.jsxs("div",{className:"text-[10px] text-slate-500 flex items-center gap-2",children:[i.jsxs("span",{className:`px-1 rounded ${Sg(Et(_.tier))}`,children:["Tier ",Et(_.tier)]}),i.jsxs("span",{children:["Lvl ",_.unlock_level,"+"]})]})]},_.id))})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:N?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:N.name}),i.jsx("p",{className:"text-sm text-slate-400 mb-3",children:N.description||"No description"}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[i.jsxs("span",{className:`px-2 py-1 rounded ${Sg(Et(N.tier))}`,children:["Tier ",Et(N.tier)]}),i.jsxs("span",{children:["Unlock Level: ",N.unlock_level]}),N.primary_attribute&&i.jsxs("span",{children:["Primary: ",N.primary_attribute]})]})]}),i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[i.jsxs("h3",{className:"text-sm font-bold text-purple-400 mb-3 flex items-center gap-2",children:[i.jsx(Bn,{size:16}),"Manage Abilities"]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-xs text-slate-500 uppercase mb-2",children:["Assigned Abilities (",v.length,")"]}),v.length>0?i.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:v.map(_=>{const I=c.find(D=>D.id===_);return i.jsxs("div",{className:"flex items-center justify-between bg-slate-900 px-3 py-2 rounded border border-slate-700",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"text-sm text-white",children:(I==null?void 0:I.name)||`Ability #${_}`}),I&&i.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:["(",I.maxLevel," levels)"]})]}),i.jsx("button",{onClick:()=>P(_),className:"ml-2 p-1 hover:bg-red-600/20 rounded text-red-400 hover:text-red-300 transition-colors",title:"Remove ability",children:i.jsx(L$,{size:14})})]},_)})}):i.jsx("div",{className:"text-xs text-slate-500 italic py-2",children:"No abilities assigned"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-2",children:"Add Ability"}),i.jsxs("select",{onChange:_=>{const I=parseInt(_.target.value);I&&(C(I),_.target.value="")},className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-white focus:border-purple-500 outline-none text-sm",value:"",children:[i.jsx("option",{value:"",children:"Select an ability to add..."}),k.filter(_=>!v.includes(_.id)).map(_=>i.jsxs("option",{value:_.id,children:[_.name," (Max Lvl ",_.maxLevel,")"]},_.id))]})]})]})]}):i.jsxs("div",{className:"flex items-center justify-center h-full text-slate-600",children:["Select a ",r," from the left"]})})]})}),i.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-slate-700 bg-slate-900/50",children:[i.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Close"}),i.jsx("button",{onClick:S,disabled:m||!u,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-slate-700 disabled:text-slate-500 text-white rounded-lg transition-colors",children:m?i.jsxs(i.Fragment,{children:[i.jsx(Tr,{size:16,className:"animate-spin"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Bl,{size:16}),"Save Abilities"]})})]})]})})},iv=["STR","PER","DEX","MEM","INT","CHA"],hA={STR:"Strength",PER:"Perception",DEX:"Dexterity",MEM:"Memory",INT:"Intelligence",CHA:"Charisma"},lX=({isOpen:e,onClose:t})=>{const[r,n]=g.useState([]),[s,a]=g.useState(null),[o,l]=g.useState(!0),[c,d]=g.useState(!1),[u,h]=g.useState(!1),[f,p]=g.useState(!1),[m,x]=g.useState(null),[b,y]=g.useState({name:"",description:"",tier:1,unlock_level:1,prerequisite_class_id:null,primary_attribute:"",secondary_attribute:"",stat_bonuses:{}});g.useEffect(()=>{e&&(async()=>{l(!0);const S=await da();n(S),!s&&S.length>0&&a(S[0].id),l(!1)})()},[e,s]);const v=g.useMemo(()=>r.find(k=>k.id===s),[r,s]);g.useEffect(()=>{if(v){let k=1;typeof v.tier=="number"?k=v.tier:typeof v.tier=="string"&&(k=Et(v.tier)),y({name:v.name,description:v.description||"",tier:k,unlock_level:v.unlock_level,prerequisite_class_id:v.prerequisite_class_id||null,primary_attribute:v.primary_attribute||"",secondary_attribute:v.secondary_attribute||"",stat_bonuses:v.stat_bonuses||{}}),x(null)}},[v]);const w=async()=>{if(!s)return;d(!0),x(null);const k=await eD(s,{name:b.name,description:b.description,tier:b.tier,unlock_level:b.unlock_level,prerequisite_class_id:b.prerequisite_class_id||void 0,primary_attribute:b.primary_attribute||void 0,secondary_attribute:b.secondary_attribute||void 0,stat_bonuses:b.stat_bonuses});if(k.success){x("Class updated successfully!");const S=await da();n(S)}else x(`Error: ${k.error}`);d(!1)},j=async()=>{if(!s||!f){p(!0),x("Click DELETE again to confirm");return}h(!0),x(null);const k=await AY(s);if(k.success){x("Class deleted successfully!");const S=await da();n(S);const C=S.length>0?S[0].id:null;a(C),p(!1)}else x(`Error: ${k.error}`);h(!1)},N=(k,S)=>{const C=parseInt(S)||0;y(P=>({...P,stat_bonuses:{...P.stat_bonuses,[k]:C}}))};return e?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:i.jsxs("div",{className:"bg-nexus-panel border border-slate-600 shadow-2xl rounded-xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700 bg-slate-900",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(nr,{className:"text-orange-400",size:24}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-white",children:"Class Editor"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Edit class properties and stat bonuses"})]})]}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:i.jsx(Dt,{size:24})})]}),i.jsxs("div",{className:"px-4 py-2 text-sm bg-blue-900/20 text-blue-400 border-b border-blue-900/30 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ox,{size:16}),i.jsx("span",{children:"Select a class to edit. Changes are saved to MySQL."})]}),m&&i.jsx("span",{className:`text-xs ${m.includes("Error")?"text-red-400":"text-green-400"}`,children:m})]}),i.jsx("div",{className:"flex flex-1 overflow-hidden",children:o?i.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 text-slate-400",children:[i.jsx(Tr,{className:"animate-spin",size:18})," Loading classes..."]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"w-64 border-r border-slate-700 bg-slate-900/50 flex flex-col",children:[i.jsx("div",{className:"p-2 border-b border-slate-800",children:i.jsxs("span",{className:"text-xs text-slate-500 uppercase tracking-wide",children:["Classes (",r.length,")"]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:r.map(k=>i.jsxs("button",{onClick:()=>a(k.id),className:`w-full text-left px-3 py-2 border-b border-slate-800 transition-colors ${s===k.id?"bg-orange-500/10 border-l-2 border-l-orange-500 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[i.jsx("div",{className:"font-medium",children:k.name}),i.jsxs("div",{className:"text-[10px] text-slate-500 flex items-center gap-2",children:[i.jsxs("span",{className:`px-1 rounded ${Sg(Et(k.tier))}`,children:["Tier ",Et(k.tier)]}),i.jsxs("span",{children:["Lvl ",k.unlock_level,"+"]})]})]},k.id))})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:v?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1",children:"Name"}),i.jsx("input",{type:"text",value:b.name,onChange:k=>y({...b,name:k.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white focus:border-orange-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1",children:"Tier"}),i.jsx("input",{type:"number",min:1,max:4,value:b.tier,onChange:k=>y({...b,tier:parseInt(k.target.value)||1}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white focus:border-orange-500 outline-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1",children:"Description"}),i.jsx("textarea",{value:b.description,onChange:k=>y({...b,description:k.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white min-h-[80px] focus:border-orange-500 outline-none"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1",children:"Unlock Level"}),i.jsx("input",{type:"number",min:1,value:b.unlock_level,onChange:k=>y({...b,unlock_level:parseInt(k.target.value)||1}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white focus:border-orange-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1",children:"Prerequisite Class"}),i.jsxs("select",{value:b.prerequisite_class_id||"",onChange:k=>y({...b,prerequisite_class_id:k.target.value?parseInt(k.target.value):null}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white focus:border-orange-500 outline-none",children:[i.jsx("option",{value:"",children:"None"}),r.map(k=>i.jsxs("option",{value:k.id,children:[k.name," (Tier ",Et(k.tier),")"]},k.id))]})]})]}),i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[i.jsx("h3",{className:"text-sm font-bold text-orange-400 mb-3",children:"Combat Attributes"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1",children:"Primary Attribute"}),i.jsxs("select",{value:b.primary_attribute,onChange:k=>y({...b,primary_attribute:k.target.value}),className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-white focus:border-orange-500 outline-none",children:[i.jsx("option",{value:"",children:"Not Set"}),iv.map(k=>i.jsxs("option",{value:k,children:[k," - ",hA[k]]},k))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1",children:"Secondary Attribute"}),i.jsxs("select",{value:b.secondary_attribute,onChange:k=>y({...b,secondary_attribute:k.target.value}),className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-white focus:border-orange-500 outline-none",children:[i.jsx("option",{value:"",children:"Not Set"}),iv.map(k=>i.jsxs("option",{value:k,children:[k," - ",hA[k]]},k))]})]})]})]}),i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[i.jsx("h3",{className:"text-sm font-bold text-green-400 mb-3",children:"Stat Bonuses"}),i.jsx("div",{className:"grid grid-cols-3 gap-3",children:iv.map(k=>i.jsxs("div",{className:"flex items-center justify-between bg-slate-900 px-3 py-2 rounded border border-slate-700",children:[i.jsx("span",{className:"text-xs text-slate-400",children:k}),i.jsx("input",{type:"number",value:b.stat_bonuses[k]||0,onChange:S=>N(k,S.target.value),className:"w-16 bg-slate-800 border border-slate-600 rounded px-2 py-1 text-white text-center text-xs font-mono focus:border-green-500 outline-none"})]},k))})]}),v.ability_ids&&v.ability_ids.length>0&&i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[i.jsx("h3",{className:"text-sm font-bold text-purple-400 mb-3",children:"Assigned Ability IDs"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:v.ability_ids.map(k=>i.jsxs("span",{className:"px-2 py-1 bg-purple-900/30 text-purple-300 rounded text-xs font-mono",children:["#",k]},k))})]})]}):i.jsx("div",{className:"flex items-center justify-center h-full text-slate-600",children:"Select a class from the left"})})]})}),i.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-slate-700 bg-slate-900/50",children:[i.jsx("button",{onClick:j,disabled:u||!s,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${f?"bg-red-600 hover:bg-red-700 text-white":"bg-slate-700 hover:bg-red-600 text-slate-300 hover:text-white"} disabled:bg-slate-800 disabled:text-slate-600`,onMouseLeave:()=>p(!1),children:u?i.jsxs(i.Fragment,{children:[i.jsx(Tr,{size:16,className:"animate-spin"}),"Deleting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(oi,{size:16}),f?"Confirm Delete?":"Delete"]})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Close"}),i.jsx("button",{onClick:w,disabled:c||!s,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 disabled:bg-slate-700 disabled:text-slate-500 text-white rounded-lg transition-colors",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Tr,{size:16,className:"animate-spin"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Bl,{size:16}),"Save Changes"]})})]})]})]})}):null},ov=["STR","PER","DEX","MEM","INT","CHA"],fA={STR:"Strength",PER:"Perception",DEX:"Dexterity",MEM:"Memory",INT:"Intelligence",CHA:"Charisma"},cX=({isOpen:e,onClose:t})=>{const[r,n]=g.useState([]),[s,a]=g.useState(null),[o,l]=g.useState(!0),[c,d]=g.useState(!1),[u,h]=g.useState(!1),[f,p]=g.useState(!1),[m,x]=g.useState(null),[b,y]=g.useState({name:"",description:"",tier:1,unlock_level:1,prerequisite_profession_id:null,primary_attribute:"",secondary_attribute:"",stat_bonuses:{}});g.useEffect(()=>{e&&(async()=>{l(!0);const S=await ua();n(S),!s&&S.length>0&&a(S[0].id),l(!1)})()},[e,s]);const v=g.useMemo(()=>r.find(k=>k.id===s),[r,s]);g.useEffect(()=>{if(v){let k=1;typeof v.tier=="number"?k=v.tier:typeof v.tier=="string"&&(k=Et(v.tier)),y({name:v.name,description:v.description||"",tier:k,unlock_level:v.unlock_level,prerequisite_profession_id:v.prerequisite_profession_id||null,primary_attribute:v.primary_attribute||"",secondary_attribute:v.secondary_attribute||"",stat_bonuses:v.stat_bonuses||{}}),x(null)}},[v]);const w=async()=>{if(!s)return;d(!0),x(null);const k=await tD(s,{name:b.name,description:b.description,tier:b.tier,unlock_level:b.unlock_level,prerequisite_class_id:b.prerequisite_profession_id||void 0,primary_attribute:b.primary_attribute||void 0,secondary_attribute:b.secondary_attribute||void 0,stat_bonuses:b.stat_bonuses});if(k.success){x("Profession updated successfully!");const S=await ua();n(S)}else x(`Error: ${k.error}`);d(!1)},j=async()=>{if(!s||!f){p(!0),x("Click DELETE again to confirm");return}h(!0),x(null);const k=await MY(s);if(k.success){x("Profession deleted successfully!");const S=await ua();n(S);const C=S.length>0?S[0].id:null;a(C),p(!1)}else x(`Error: ${k.error}`);h(!1)},N=(k,S)=>{const C=parseInt(S)||0;y(P=>({...P,stat_bonuses:{...P.stat_bonuses,[k]:C}}))};return e?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:i.jsxs("div",{className:"bg-nexus-panel border border-slate-600 shadow-2xl rounded-xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700 bg-slate-900",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Rl,{className:"text-blue-400",size:24}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-white",children:"Profession Editor"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Edit profession properties and stat bonuses"})]})]}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:i.jsx(Dt,{size:24})})]}),i.jsxs("div",{className:"px-4 py-2 text-sm bg-blue-900/20 text-blue-400 border-b border-blue-900/30 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ox,{size:16}),i.jsx("span",{children:"Select a profession to edit. Changes are saved to MySQL."})]}),m&&i.jsx("span",{className:`text-xs ${m.includes("Error")?"text-red-400":"text-green-400"}`,children:m})]}),i.jsx("div",{className:"flex flex-1 overflow-hidden",children:o?i.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 text-slate-400",children:[i.jsx(Tr,{className:"animate-spin",size:18})," Loading professions..."]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"w-64 border-r border-slate-700 bg-slate-900/50 flex flex-col",children:[i.jsx("div",{className:"p-2 border-b border-slate-800",children:i.jsxs("span",{className:"text-xs text-slate-500 uppercase tracking-wide",children:["Professions (",r.length,")"]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:r.map(k=>i.jsxs("button",{onClick:()=>a(k.id),className:`w-full text-left px-3 py-2 border-b border-slate-800 transition-colors ${s===k.id?"bg-blue-500/10 border-l-2 border-l-blue-500 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[i.jsx("div",{className:"font-medium",children:k.name}),i.jsxs("div",{className:"text-[10px] text-slate-500 flex items-center gap-2",children:[i.jsxs("span",{className:`px-1 rounded ${Sg(Et(k.tier))}`,children:["Tier ",Et(k.tier)]}),i.jsxs("span",{children:["Lvl ",k.unlock_level,"+"]})]})]},k.id))})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:v?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1",children:"Name"}),i.jsx("input",{type:"text",value:b.name,onChange:k=>y({...b,name:k.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white focus:border-blue-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1",children:"Tier"}),i.jsx("input",{type:"number",min:1,max:4,value:b.tier,onChange:k=>y({...b,tier:parseInt(k.target.value)||1}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white focus:border-blue-500 outline-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1",children:"Description"}),i.jsx("textarea",{value:b.description,onChange:k=>y({...b,description:k.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white min-h-[80px] focus:border-blue-500 outline-none"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1",children:"Unlock Level"}),i.jsx("input",{type:"number",min:1,value:b.unlock_level,onChange:k=>y({...b,unlock_level:parseInt(k.target.value)||1}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white focus:border-blue-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1",children:"Prerequisite Profession"}),i.jsxs("select",{value:b.prerequisite_profession_id||"",onChange:k=>y({...b,prerequisite_profession_id:k.target.value?parseInt(k.target.value):null}),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white focus:border-blue-500 outline-none",children:[i.jsx("option",{value:"",children:"None"}),r.map(k=>i.jsxs("option",{value:k.id,children:[k.name," (Tier ",Et(k.tier),")"]},k.id))]})]})]}),i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[i.jsx("h3",{className:"text-sm font-bold text-blue-400 mb-3",children:"Profession Attributes"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1",children:"Primary Attribute"}),i.jsxs("select",{value:b.primary_attribute,onChange:k=>y({...b,primary_attribute:k.target.value}),className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-white focus:border-blue-500 outline-none",children:[i.jsx("option",{value:"",children:"Not Set"}),ov.map(k=>i.jsxs("option",{value:k,children:[k," - ",fA[k]]},k))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 uppercase mb-1",children:"Secondary Attribute"}),i.jsxs("select",{value:b.secondary_attribute,onChange:k=>y({...b,secondary_attribute:k.target.value}),className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-white focus:border-blue-500 outline-none",children:[i.jsx("option",{value:"",children:"Not Set"}),ov.map(k=>i.jsxs("option",{value:k,children:[k," - ",fA[k]]},k))]})]})]})]}),i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[i.jsx("h3",{className:"text-sm font-bold text-green-400 mb-3",children:"Stat Bonuses"}),i.jsx("div",{className:"grid grid-cols-3 gap-3",children:ov.map(k=>i.jsxs("div",{className:"flex items-center justify-between bg-slate-900 px-3 py-2 rounded border border-slate-700",children:[i.jsx("span",{className:"text-xs text-slate-400",children:k}),i.jsx("input",{type:"number",value:b.stat_bonuses[k]||0,onChange:S=>N(k,S.target.value),className:"w-16 bg-slate-800 border border-slate-600 rounded px-2 py-1 text-white text-center text-xs font-mono focus:border-green-500 outline-none"})]},k))})]}),v.ability_ids&&v.ability_ids.length>0&&i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[i.jsx("h3",{className:"text-sm font-bold text-purple-400 mb-3",children:"Assigned Ability IDs"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:v.ability_ids.map(k=>i.jsxs("span",{className:"px-2 py-1 bg-purple-900/30 text-purple-300 rounded text-xs font-mono",children:["#",k]},k))}),i.jsx("p",{className:"text-xs text-slate-500 mt-2",children:'Use "Manage Abilities" button to edit abilities'})]})]}):i.jsx("div",{className:"flex items-center justify-center h-full text-slate-600",children:"Select a profession from the left"})})]})}),i.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-slate-700 bg-slate-900/50",children:[i.jsx("button",{onClick:j,disabled:u||!s,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${f?"bg-red-600 hover:bg-red-700 text-white":"bg-slate-700 hover:bg-red-600 text-slate-300 hover:text-white"} disabled:bg-slate-800 disabled:text-slate-600`,onMouseLeave:()=>p(!1),children:u?i.jsxs(i.Fragment,{children:[i.jsx(Tr,{size:16,className:"animate-spin"}),"Deleting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(oi,{size:16}),f?"Confirm Delete?":"Delete"]})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Close"}),i.jsx("button",{onClick:w,disabled:c||!s,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-700 disabled:text-slate-500 text-white rounded-lg transition-colors",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Tr,{size:16,className:"animate-spin"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Bl,{size:16}),"Save Changes"]})})]})]})]})}):null},dX={STR:i.jsx(nr,{size:12,className:"text-red-500"}),PER:i.jsx(sc,{size:12,className:"text-green-500"}),DEX:i.jsx(Bn,{size:12,className:"text-yellow-500"}),MEM:i.jsx(Bh,{size:12,className:"text-purple-500"}),INT:i.jsx(ca,{size:12,className:"text-blue-500"}),CHA:i.jsx($x,{size:12,className:"text-pink-500"})};function uX(){const{user:e}=za(),t=(e==null?void 0:e.role)==="admin",{theme:r}=Wt(),n=r==="light"?"bg-white":"bg-slate-900",s=r==="light"?"bg-white border-gray-200":"bg-slate-900 border-slate-700",a=r==="light"?"text-gray-900":"text-white",o=r==="light"?"text-gray-700":"text-slate-200",l=r==="light"?"text-gray-500":"text-slate-400",c=r==="light"?"border-gray-200":"border-slate-700",d=r==="light"?"border-gray-300":"border-slate-600",[u,h]=g.useState([]),[f,p]=g.useState([]),[m,x]=g.useState(!0),[b,y]=g.useState(null),[v,w]=g.useState(""),[j,N]=g.useState("All"),[k,S]=g.useState("combat"),[C,P]=g.useState(!1),[E,O]=g.useState(!1),[A,_]=g.useState(!1),[I,D]=g.useState(null),[$,L]=g.useState({name:"",tier:1,unlock_level:1,description:"",primary_attribute:"",secondary_attribute:""});g.useEffect(()=>{document.title="Classes - LitRPG Tools",M()},[]);const M=async()=>{x(!0),y(null),D(null);try{const[R,B]=await Promise.all([da(),ua()]);h(R),p(B)}catch(R){y("Failed to load classes"),console.error(R)}finally{x(!1)}},T=async()=>{var B,q;if(k==="combat"){const X=await EY({name:$.name,tier:Number($.tier)||1,unlock_level:Number($.unlock_level)||1,description:$.description,primary_attribute:$.primary_attribute||void 0,secondary_attribute:$.secondary_attribute||void 0});if(!X.success){D(X.error||"Failed to create class");return}D(`Created ${(B=X.class)==null?void 0:B.name}`)}else{const X=await PY({name:$.name,tier:Number($.tier)||1,unlock_level:Number($.unlock_level)||1,description:$.description});if(!X.success){D(X.error||"Failed to create profession");return}D(`Created ${(q=X.profession)==null?void 0:q.name}`)}L({name:"",tier:1,unlock_level:1,description:"",primary_attribute:"",secondary_attribute:""});const R=await Promise.all([da(),ua()]);h(R[0]),p(R[1])},G=g.useMemo(()=>k==="combat"?u:f.map(R=>({id:R.id,name:R.name,slug:R.slug,description:R.description,tier:R.tier,unlock_level:R.unlock_level,prerequisite_class_id:R.prerequisite_profession_id,stat_bonuses:R.stat_bonuses,primary_attribute:void 0,secondary_attribute:void 0,starting_item:void 0,ability_ids:R.ability_ids,upgrade_ids:[],created_at:"",updated_at:""})),[u,k,f]),Y=g.useMemo(()=>{const R=G.filter(q=>{const X=q.name.toLowerCase().includes(v.toLowerCase())||(q.description||"").toLowerCase().includes(v.toLowerCase()),ue=j==="All"||q.tier===j;return X&&ue}),B={};return Dm.forEach(q=>{const X=R.filter(ue=>ue.tier===q);X.length>0&&(B[q]=X)}),B},[G,v,j]),ee=R=>{if(k==="combat"){const B=u.find(q=>q.id===R);return(B==null?void 0:B.name)||`Class #${R}`}else{const B=f.find(q=>q.id===R);return(B==null?void 0:B.name)||`Profession #${R}`}};return i.jsxs(i.Fragment,{children:[i.jsxs(En,{children:[i.jsx("title",{children:"Classes - LitRPG Tools"}),i.jsx("meta",{name:"description",content:"Class progression system for Destiny Among the Stars LitRPG."})]}),i.jsx(Xr,{breadcrumbs:[{label:"Tools",path:"/litrpg/home"},{label:"Classes"}]}),i.jsxs("div",{className:`relative min-h-screen font-sans selection:bg-nexus-accent/30 selection:text-white flex flex-col ${o}`,children:[i.jsx(ac,{}),i.jsx("div",{className:`${n}/80 border-b ${c} px-6 py-4`,children:i.jsxs("div",{className:"max-w-5xl mx-auto flex flex-wrap gap-4 items-center",children:[i.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[i.jsx("input",{type:"text",placeholder:"Search classes...",value:v,onChange:R=>w(R.target.value),className:`w-full ${r==="light"?"bg-white border-gray-300 text-gray-900":"bg-slate-800 border-slate-600 text-white"} border rounded-lg py-2 pl-10 pr-4 text-sm focus:border-nexus-accent outline-none`}),i.jsx(gi,{className:`absolute left-3 top-2.5 ${l}`,size:18})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-xs ${l} uppercase`,children:"Category:"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsxs("button",{onClick:()=>S("combat"),className:`flex items-center gap-1 px-3 py-1 text-xs rounded border transition-colors ${k==="combat"?"bg-orange-600/20 border-orange-500 text-orange-400":`${r==="light"?"bg-gray-100 border-gray-300":"bg-slate-800 border-slate-700"} ${l} hover:${d}`}`,children:[i.jsx(nr,{size:12}),"Combat"]}),i.jsxs("button",{onClick:()=>S("professional"),className:`flex items-center gap-1 px-3 py-1 text-xs rounded border transition-colors ${k==="professional"?"bg-blue-600/20 border-blue-500 text-blue-400":`${r==="light"?"bg-gray-100 border-gray-300":"bg-slate-800 border-slate-700"} ${l} hover:${d}`}`,children:[i.jsx(Rl,{size:12}),"Professional"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-xs ${l} uppercase`,children:"Tier:"}),i.jsx("div",{className:"flex gap-1",children:["All",...Dm].map(R=>i.jsx("button",{onClick:()=>N(R),className:`px-2 py-1 text-xs rounded border transition-colors capitalize ${j===R?R==="All"?`bg-nexus-accent/20 border-nexus-accent ${a}`:ao[R]||`${r==="light"?"bg-gray-100 border-gray-300":"bg-slate-800 border-slate-700"} ${a}`:`${r==="light"?"bg-gray-100 border-gray-300":"bg-slate-800 border-slate-700"} ${l} hover:${d}`}`,children:R},R))})]}),i.jsxs("span",{className:`text-sm ${l}`,children:[G.length," ",k==="combat"?"classes":"professions"," total"]})]})}),t&&i.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:`${s} border rounded-lg p-4 space-y-2`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:`text-sm font-bold ${a}`,children:"Add New Class"}),I&&i.jsx("span",{className:"text-[10px] text-green-300",children:I})]}),i.jsx("input",{className:`w-full ${r==="light"?"bg-gray-100 border-gray-300 text-gray-900":"bg-slate-800 border-slate-700 text-white"} border rounded px-2 py-1 text-sm`,placeholder:"Name (slug auto-generated)",value:$.name,onChange:R=>L({...$,name:R.target.value})}),i.jsx("textarea",{className:`w-full ${r==="light"?"bg-gray-100 border-gray-300 text-gray-900":"bg-slate-800 border-slate-700 text-white"} border rounded px-2 py-1 text-sm`,placeholder:"Description",value:$.description,onChange:R=>L({...$,description:R.target.value})}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("label",{className:`flex flex-col gap-1 ${l}`,children:[i.jsx("span",{className:`text-[10px] uppercase ${l}`,children:"Tier #"}),i.jsx("input",{className:`${r==="light"?"bg-gray-100 border-gray-300 text-gray-900":"bg-slate-800 border-slate-700 text-white"} border rounded px-2 py-1`,type:"number",min:1,max:4,value:$.tier,onChange:R=>L({...$,tier:Number(R.target.value)})})]}),i.jsxs("label",{className:`flex flex-col gap-1 ${l}`,children:[i.jsx("span",{className:`text-[10px] uppercase ${l}`,children:"Unlock Level"}),i.jsx("input",{className:`${r==="light"?"bg-gray-100 border-gray-300 text-gray-900":"bg-slate-800 border-slate-700 text-white"} border rounded px-2 py-1`,type:"number",min:1,value:$.unlock_level,onChange:R=>L({...$,unlock_level:Number(R.target.value)})})]}),k==="combat"&&i.jsxs(i.Fragment,{children:[i.jsxs("label",{className:`flex flex-col gap-1 ${l}`,children:[i.jsx("span",{className:`text-[10px] uppercase ${l}`,children:"Primary Attribute"}),i.jsx("input",{className:`${r==="light"?"bg-gray-100 border-gray-300 text-gray-900":"bg-slate-800 border-slate-700 text-white"} border rounded px-2 py-1`,value:$.primary_attribute,onChange:R=>L({...$,primary_attribute:R.target.value})})]}),i.jsxs("label",{className:`flex flex-col gap-1 ${l}`,children:[i.jsx("span",{className:`text-[10px] uppercase ${l}`,children:"Secondary Attribute"}),i.jsx("input",{className:`${r==="light"?"bg-gray-100 border-gray-300 text-gray-900":"bg-slate-800 border-slate-700 text-white"} border rounded px-2 py-1`,value:$.secondary_attribute,onChange:R=>L({...$,secondary_attribute:R.target.value})})]})]})]}),i.jsx("button",{onClick:T,className:`w-full bg-nexus-accent/80 hover:bg-nexus-accent ${r==="light"?"text-white":"text-slate-900"} rounded py-2 text-sm font-semibold`,children:k==="combat"?"Create Class":"Create Profession"})]}),i.jsxs("div",{className:`${s} border rounded-lg p-4 text-sm ${l}`,children:[i.jsx("div",{className:`font-semibold ${a} mb-2`,children:"Tip"}),'Use "Manage Abilities" to attach abilities to your new class after saving. Data is stored in MySQL and refreshed for all LitRPG pages.']})]}),i.jsx("main",{className:"flex-1 py-8 px-6",children:i.jsx("div",{className:"max-w-5xl mx-auto",children:m?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-600",children:[i.jsx(Tr,{size:48,className:"mb-4 animate-spin text-orange-400"}),i.jsx("p",{className:"text-lg",children:"Loading classes..."})]}):b?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-red-500",children:[i.jsx("p",{className:"text-lg mb-4",children:b}),i.jsx("button",{onClick:M,className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-white",children:"Retry"})]}):Object.keys(Y).length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-600",children:[k==="combat"?i.jsx(nr,{size:64,className:"mb-4 opacity-20"}):i.jsx(Rl,{size:64,className:"mb-4 opacity-20"}),i.jsxs("p",{className:"text-lg",children:["No ",k==="combat"?"classes":"professions"," found."]})]}):i.jsx("div",{className:"space-y-10",children:Dm.map(R=>{const B=Y[R];return B?i.jsxs("div",{children:[i.jsxs("h2",{className:`text-xl font-bold mb-4 flex items-center gap-2 capitalize ${P1[R]||"text-slate-400"}`,children:[i.jsx(z$,{size:20}),R," ",k==="combat"?"Classes":"Professions",i.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:["(",B.length,")"]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(q=>i.jsxs("div",{className:`${s} border rounded-xl p-5 hover:${d} transition-colors ${HY[R]||c}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h3",{className:`font-bold text-lg ${a}`,children:q.name}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded border uppercase ${ao[typeof q.tier=="number"?AN(q.tier):q.tier]||`${l} ${r==="light"?"bg-gray-100 border-gray-300":"bg-slate-500/10 border-slate-500/30"}`}`,children:typeof q.tier=="number"?`Tier ${q.tier}`:q.tier})]}),i.jsx("p",{className:`text-sm ${l} mb-4 line-clamp-2`,children:q.description||"No description."}),i.jsxs("div",{className:`text-xs ${l} mb-2`,children:["Unlock Level: ",i.jsx("span",{className:`${a} font-bold`,children:q.unlock_level})]}),q.prerequisite_class_id&&i.jsxs("div",{className:`text-xs ${l} mb-2 flex items-center gap-1`,children:["Requires:",i.jsx("span",{className:"text-nexus-accent",children:ee(q.prerequisite_class_id)}),i.jsx(T$,{size:10,className:l})]}),q.stat_bonuses&&Object.keys(q.stat_bonuses).length>0&&i.jsxs("div",{className:`${r==="light"?"bg-gray-100":"bg-slate-950"} rounded-lg p-3 mt-3`,children:[i.jsx("div",{className:`text-xs ${l} uppercase tracking-wide mb-2`,children:"Stat Bonuses"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(q.stat_bonuses).map(([X,ue])=>i.jsxs("div",{className:`flex items-center gap-1 text-xs ${r==="light"?"bg-gray-200":"bg-slate-800"} px-2 py-1 rounded`,children:[dX[X]||null,i.jsx("span",{className:o,children:X}),i.jsxs("span",{className:ue>0?"text-green-400":"text-red-400",children:[ue>0?"+":"",ue]})]},X))})]})]},q.id))})]},R):null})})})}),i.jsx(oX,{isOpen:C,onClose:()=>P(!1)}),i.jsx(lX,{isOpen:E,onClose:()=>O(!1)}),i.jsx(cX,{isOpen:A,onClose:()=>_(!1)}),i.jsx("footer",{className:`${n} border-t ${c} py-8`,children:i.jsx("div",{className:"mx-auto max-w-5xl px-4",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx(ar,{variant:"footer",showCopyright:!1}),i.jsxs("p",{className:`text-sm ${l}`,children:[" ",new Date().getFullYear()," All rights reserved."]})]})})})]})]})}function hX(){return g.useEffect(()=>{document.title="Character Sheet - Destiny Among the Stars"},[]),i.jsxs(i.Fragment,{children:[i.jsxs(En,{children:[i.jsx("title",{children:"Character Sheet - Destiny Among the Stars"}),i.jsx("meta",{name:"description",content:"Interactive character sheet for Destiny Among the Stars LitRPG."})]}),i.jsx(KY,{})]})}function fX(){const[e,t]=g.useState(null),[r,n]=g.useState(()=>localStorage.getItem("theme")||"dark");g.useEffect(()=>{fetch("/api/author/get.php").then(c=>c.json()).then(c=>{c.success&&t(c.profile)}).catch(c=>{console.error("Failed to fetch author profile:",c)});const l=setInterval(()=>{const c=localStorage.getItem("theme");n(c||"dark")},100);return()=>clearInterval(l)},[]);const s=e?r==="light"?$r(e.background_image_light||e.background_image,"/images/lofi_light_bg.webp"):$r(e.background_image_dark||e.background_image,"/images/lofi_bg.webp"):r==="light"?"/images/lofi_light_bg.webp":"/images/lofi_bg.webp",a=r==="light"?"bg-white/60":"bg-black/40";return i.jsxs("div",{className:"relative font-sans h-full transition-colors duration-200",children:[i.jsx("div",{className:"fixed inset-0 -z-10 bg-no-repeat bg-top [background-size:auto_100%] md:[background-size:100%_auto]",style:{backgroundImage:`url('${s}')`,backgroundColor:r==="light"?"#f7f7f7":"#0a0a0a"}}),i.jsx("div",{className:`fixed inset-0 ${a} -z-10`}),i.jsx("div",{className:"relative z-10",children:i.jsxs(Ld,{children:[i.jsx(Ve,{index:!0,element:i.jsx(hX,{})}),i.jsx(Ve,{path:"home",element:i.jsx(YY,{})}),i.jsx(Ve,{path:"attributes",element:i.jsx(XY,{})}),i.jsx(Ve,{path:"abilities",element:i.jsx(eX,{})}),i.jsx(Ve,{path:"bestiary",element:i.jsx(sX,{})}),i.jsx(Ve,{path:"loot",element:i.jsx(aX,{})}),i.jsx(Ve,{path:"contracts",element:i.jsx(iX,{})}),i.jsx(Ve,{path:"classes",element:i.jsx(uX,{})})]})})]})}const pX="/api/shoutouts";class mX{async fetchApi(t,r={}){const n=await fetch(`${pX}${t}`,{...r,headers:{"Content-Type":"application/json",...r.headers},credentials:"same-origin"});if(!n.ok){const s=await n.json().catch(()=>({error:"Request failed"}));throw new Error(s.error||`HTTP ${n.status}`)}return n.json()}async getConfig(){return this.fetchApi("/config.php")}async updateConfig(t){await this.fetchApi("/config.php",{method:"POST",body:JSON.stringify(t)})}async getStories(){return this.fetchApi("/stories.php")}async getStory(t){try{return await this.fetchApi(`/stories.php?id=${encodeURIComponent(t)}`)}catch{return}}async upsertStory(t){await this.fetchApi("/stories.php",{method:"POST",body:JSON.stringify(t)})}async deleteStory(t){await this.fetchApi(`/stories.php?id=${encodeURIComponent(t)}`,{method:"DELETE"})}async getAdminShoutouts(t){const r=t?`/shoutouts.php?storyId=${encodeURIComponent(t)}`:"/shoutouts.php";return this.fetchApi(r)}async upsertAdminShoutout(t){await this.fetchApi("/shoutouts.php",{method:"POST",body:JSON.stringify(t)})}async deleteAdminShoutout(t){await this.fetchApi(`/shoutouts.php?id=${encodeURIComponent(t)}`,{method:"DELETE"})}async getAvailability(t){return this.fetchApi(`/availability.php?storyId=${encodeURIComponent(t)}`)}async setAvailability(t,r,n){await this.fetchApi("/availability.php",{method:"POST",body:JSON.stringify({storyId:t,dateStr:r,isAvailable:n})})}async getBookings(t){const r=t?`/bookings.php?storyId=${encodeURIComponent(t)}`:"/bookings.php";return this.fetchApi(r)}async createBooking(t){return this.fetchApi("/bookings.php",{method:"POST",body:JSON.stringify(t)})}async updateBookingStatus(t,r){const n=await this.fetchApi("/bookings.php",{method:"PUT",body:JSON.stringify({id:t,status:r})});return n.emailSent&&console.log(" Email Result:",n.emailSent),n}async deleteBooking(t){await this.fetchApi(`/bookings.php?id=${encodeURIComponent(t)}`,{method:"DELETE"})}async resetDatabase(){throw console.warn("resetDatabase called - backend implementation required"),new Error("Database reset is not implemented in the API")}}const ht=new mX,gX=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],xX={amber:{bgAvailable:"bg-amber-100 dark:bg-amber-900/30",bgAvailableHover:"hover:bg-amber-200 dark:hover:bg-amber-900/50",textAvailable:"text-amber-800 dark:text-amber-400",ringAvailable:"ring-amber-300 dark:ring-amber-800",marker:"bg-amber-500"},blue:{bgAvailable:"bg-blue-100 dark:bg-blue-900/30",bgAvailableHover:"hover:bg-blue-200 dark:hover:bg-blue-900/50",textAvailable:"text-blue-800 dark:text-blue-400",ringAvailable:"ring-blue-300 dark:ring-blue-800",marker:"bg-blue-500"},rose:{bgAvailable:"bg-rose-100 dark:bg-rose-900/30",bgAvailableHover:"hover:bg-rose-200 dark:hover:bg-rose-900/50",textAvailable:"text-rose-800 dark:text-rose-400",ringAvailable:"ring-rose-300 dark:ring-rose-800",marker:"bg-rose-500"},emerald:{bgAvailable:"bg-emerald-100 dark:bg-emerald-900/30",bgAvailableHover:"hover:bg-emerald-200 dark:hover:bg-emerald-900/50",textAvailable:"text-emerald-800 dark:text-emerald-400",ringAvailable:"ring-emerald-300 dark:ring-emerald-800",marker:"bg-emerald-500"},violet:{bgAvailable:"bg-violet-100 dark:bg-violet-900/30",bgAvailableHover:"hover:bg-violet-200 dark:hover:bg-violet-900/50",textAvailable:"text-violet-800 dark:text-violet-400",ringAvailable:"ring-violet-300 dark:ring-violet-800",marker:"bg-violet-500"},cyan:{bgAvailable:"bg-cyan-100 dark:bg-cyan-900/30",bgAvailableHover:"hover:bg-cyan-200 dark:hover:bg-cyan-900/50",textAvailable:"text-cyan-800 dark:text-cyan-400",ringAvailable:"ring-cyan-300 dark:ring-cyan-800",marker:"bg-cyan-500"}};function nD({year:e,month:t,availableDates:r,bookedDates:n,pendingDates:s,onDateClick:a,isAdminMode:o=!1,color:l="amber"}){const c=new Date(e,t,1).getDay(),d=new Date(e,t+1,0).getDate(),u=new Date(e,t).toLocaleString("default",{month:"long"}),h=xX[l],f=[];for(let m=0;m<c;m++)f.push(null);for(let m=1;m<=d;m++)f.push(m);const p=m=>{const x=`${e}-${String(t+1).padStart(2,"0")}-${String(m).padStart(2,"0")}`;a(x)};return i.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-xl shadow-sm border border-neutral-200 dark:border-neutral-800 overflow-hidden mb-8 transition-colors duration-200",children:[i.jsx("div",{className:"bg-neutral-900 dark:bg-neutral-950 text-white px-6 py-4 flex justify-between items-center border-b border-neutral-800",children:i.jsxs("h3",{className:"text-xl font-bold",children:[u," ",i.jsx("span",{className:"text-neutral-400 font-normal",children:e})]})}),i.jsx("div",{className:"grid grid-cols-7 border-b border-neutral-100 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-800/50",children:gX.map(m=>i.jsx("div",{className:"py-2 text-center text-xs font-bold text-neutral-500 dark:text-neutral-400 uppercase tracking-wide",children:m},m))}),i.jsx("div",{className:"grid grid-cols-7 auto-rows-fr bg-neutral-200 dark:bg-neutral-800 gap-px",children:f.map((m,x)=>{if(m===null)return i.jsx("div",{className:"bg-neutral-50/50 dark:bg-neutral-900/50 min-h-[100px]"},`empty-${x}`);const b=`${e}-${String(t+1).padStart(2,"0")}-${String(m).padStart(2,"0")}`,y=r.has(b),v=n.has(b),w=s==null?void 0:s.has(b);let j="bg-white dark:bg-neutral-900 hover:bg-neutral-50 dark:hover:bg-neutral-800",N=null;o?(y&&(j=`${h.bgAvailable} ring-inset ring-1 ${h.ringAvailable}`),v?N=i.jsx("span",{className:"absolute bottom-2 right-2 text-xs font-bold text-neutral-600 dark:text-neutral-300 bg-neutral-200 dark:bg-neutral-800 border dark:border-neutral-600 px-2 py-0.5 rounded-full",children:"Booked"}):w&&(j="bg-yellow-50 dark:bg-yellow-900/20",N=i.jsx("span",{className:"absolute bottom-2 right-2 text-xs font-bold text-yellow-700 dark:text-yellow-400 bg-yellow-100 dark:bg-yellow-900/50 border border-yellow-200 dark:border-yellow-800 px-2 py-0.5 rounded-full",children:"Request"}))):v||w?(j="bg-neutral-100 dark:bg-neutral-800 text-neutral-400 dark:text-neutral-600",N=i.jsx("span",{className:"block mt-2 text-xs font-medium text-neutral-400 dark:text-neutral-600",children:"Taken"})):y?(j=`${h.bgAvailable} ${h.bgAvailableHover} transition-colors cursor-pointer ring-inset ring-1 ${h.ringAvailable}`,N=i.jsx("span",{className:`block mt-2 text-xs font-bold ${h.textAvailable}`,children:"Available"})):j="bg-white dark:bg-neutral-900 text-neutral-300 dark:text-neutral-700";const k=o||y&&!v&&!w;return i.jsxs("div",{onClick:()=>k&&p(m),className:`
                min-h-[120px] p-3 relative transition-all duration-200
                ${j}
                ${k?"cursor-pointer active:scale-95":"cursor-default"}
              `,children:[i.jsx("div",{className:"font-semibold text-lg",children:m}),N,o&&y&&!v&&!w&&i.jsx("div",{className:`absolute bottom-2 right-2 w-3 h-3 rounded-full shadow-sm shadow-neutral-900/50 ${h.marker}`})]},b)})})]})}function M1({html:e,title:t}){return i.jsxs("div",{className:"border border-neutral-200 dark:border-neutral-700 rounded-lg overflow-hidden bg-white dark:bg-neutral-800 shadow-sm transition-colors duration-200",children:[t&&i.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-900 px-4 py-2 border-b border-neutral-200 dark:border-neutral-700 text-xs font-semibold text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:t}),i.jsxs("div",{className:"p-4 bg-white dark:bg-neutral-800 prose prose-sm max-w-none dark:prose-invert",children:[i.jsx("div",{dangerouslySetInnerHTML:{__html:e}}),!e&&i.jsx("p",{className:"text-neutral-400 dark:text-neutral-500 italic text-sm",children:"Preview will appear here..."})]})]})}const lv={amber:{bg:"bg-amber-500",text:"text-amber-500",button:"bg-amber-500",buttonHover:"hover:bg-amber-400",border:"border-amber-500"},blue:{bg:"bg-blue-600",text:"text-blue-500",button:"bg-blue-600",buttonHover:"hover:bg-blue-500",border:"border-blue-500"},rose:{bg:"bg-rose-600",text:"text-rose-500",button:"bg-rose-600",buttonHover:"hover:bg-rose-500",border:"border-rose-500"},emerald:{bg:"bg-emerald-600",text:"text-emerald-600",button:"bg-emerald-600",buttonHover:"hover:bg-emerald-500",border:"border-emerald-500"},violet:{bg:"bg-violet-600",text:"text-violet-500",button:"bg-violet-600",buttonHover:"hover:bg-violet-500",border:"border-violet-500"},cyan:{bg:"bg-cyan-600",text:"text-cyan-500",button:"bg-cyan-600",buttonHover:"hover:bg-cyan-500",border:"border-cyan-500"}};function bX({onAdminLogin:e}){const{theme:t}=Wt(),[r,n]=g.useState({monthsToShow:3}),[s,a]=g.useState([]),[o,l]=g.useState("default"),[c,d]=g.useState(new Set),[u,h]=g.useState(new Set),[f,p]=g.useState(null),[m,x]=g.useState(0),[b,y]=g.useState(""),[v,w]=g.useState(""),[j,N]=g.useState(""),[k,S]=g.useState(""),[C,P]=g.useState(!1),[E,O]=g.useState(!1),[A,_]=g.useState(null),[I,D]=g.useState([]),[$,L]=g.useState(!0),[M,T]=g.useState(null),G=s.find(z=>z.id===o)||s[0],Y=G?lv[G.color]:lv.amber,ee=t==="light"?$r(M==null?void 0:M.background_image_light,"/images/lofi_light_bg.webp"):$r(M==null?void 0:M.background_image_dark,"/images/lofi_bg.webp"),R="bg-black bg-opacity-20";g.useEffect(()=>{B()},[]),g.useEffect(()=>{o&&!$&&(q(),p(null),_(null))},[o,$]);const B=async()=>{try{const[z,le,ne]=await Promise.all([ht.getConfig(),ht.getStories(),fetch("/api/author/get.php").then(be=>be.json())]);if(n(z),a(le),ne.success&&ne.profile&&T(ne.profile),le.length>0){const be=le[0].id;l(be);const[ye,Se,He]=await Promise.all([ht.getAvailability(be),ht.getBookings(be),ht.getAdminShoutouts()]);d(new Set(ye));const st=Se.filter(J=>J.status==="approved"||J.status==="pending").map(J=>J.dateStr);h(new Set(st));const H=He.filter(J=>!J.storyId||J.storyId===be);D(H)}L(!1)}catch(z){console.error("Failed to load initial data:",z),alert("Failed to connect to server. Please try again.")}},q=async()=>{try{const[z,le,ne]=await Promise.all([ht.getAvailability(o),ht.getBookings(o),ht.getAdminShoutouts()]);d(new Set(z));const be=le.filter(Se=>Se.status==="approved"||Se.status==="pending").map(Se=>Se.dateStr);h(new Set(be));const ye=ne.filter(Se=>!Se.storyId||Se.storyId===o);D(ye)}catch(z){console.error("Failed to refresh story data:",z)}},X=new Date,ue=new Date(X.getFullYear(),X.getMonth()+m,1),U=r.monthsToShow||3,V=z=>{c.has(z)&&!u.has(z)&&(p(z),_(null),y(""),w(""),N(""),S(""),P(!1),window.scrollTo({top:400,behavior:"smooth"}))},ge=async z=>{if(z.preventDefault(),!(!f||!C)){O(!0);try{const le=await ht.createBooking({dateStr:f,storyId:o,authorName:b,storyLink:v,shoutoutCode:k,email:j});await q(),_(le)}catch(le){console.error("Failed to create booking:",le),alert("Failed to submit booking. Please try again.")}finally{O(!1)}}},te=z=>{navigator.clipboard.writeText(z),alert("Code copied to clipboard!")};return $?i.jsx("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),i.jsx("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Loading..."})]})}):s.length===0?i.jsx("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md text-center bg-white dark:bg-neutral-800 p-8 rounded-xl shadow-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"No Stories Configured"}),i.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-6",children:"The shoutout system needs at least one story to be configured by the admin."}),e&&i.jsx("button",{onClick:e,className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-bold transition-colors",children:"Admin Login"})]})}):i.jsxs("div",{className:"relative min-h-screen font-sans text-neutral-800 dark:text-neutral-100 transition-colors duration-200",children:[i.jsx(Xr,{breadcrumbs:[{label:"Shoutouts"}]}),i.jsx("div",{className:"fixed inset-0 z-0 bg-no-repeat bg-top [background-size:auto_100%] md:[background-size:100%_auto]",style:{backgroundImage:`url('${ee}')`,backgroundColor:t==="light"?"#f7f7f7":"#0a0a0a"}}),i.jsx("div",{className:`fixed inset-0 z-[1] ${R} pointer-events-none`}),i.jsxs("div",{className:"relative z-10 text-white pb-20 pt-8 px-4 shadow-lg border-b border-neutral-800",children:[i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 -z-10"}),i.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.length>1&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-8 justify-center md:justify-start",children:s.map(z=>i.jsx("button",{onClick:()=>l(z.id),className:`px-4 py-2 rounded-full text-sm font-bold transition-all ${o===z.id?`${lv[z.color].bg} text-white shadow-lg scale-105`:"bg-neutral-800 text-neutral-400 hover:bg-neutral-700"}`,children:z.title},z.id))}),i.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[i.jsx("div",{className:"w-48 h-72 flex-shrink-0 rounded-lg overflow-hidden shadow-2xl border-4 border-neutral-700/50 transform -rotate-2 hover:rotate-0 transition-transform duration-500",children:i.jsx("img",{src:G.coverImage,alt:G.title,className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"flex-1 text-center md:text-left space-y-4",children:[i.jsx("div",{className:`inline-block px-3 py-1 bg-white/10 ${Y.text} rounded-full text-xs font-bold tracking-wider uppercase mb-2 border border-white/10`,children:"Official Shoutout Manager"}),i.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold tracking-tight text-white",children:G.title}),i.jsxs("p",{className:"text-neutral-400 text-lg max-w-2xl",children:["Looking for a shoutout swap for ",i.jsx("strong",{children:G.title}),"? Check the calendar below for available slots. Book a day, share your code, and grab mine!"]}),i.jsxs("a",{href:G.link,target:"_blank",rel:"noreferrer",className:`inline-flex items-center gap-2 ${Y.button} ${Y.buttonHover} text-white px-6 py-3 rounded-lg font-bold transition-colors shadow-lg shadow-black/20`,children:[i.jsx(Px,{size:20})," Read on Royal Road"]})]})]})]})]}),i.jsx("main",{className:"relative z-10 max-w-5xl mx-auto -mt-10 px-4 pb-20",children:i.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4 bg-white dark:bg-neutral-800/50 p-2 rounded-lg backdrop-blur-sm border border-neutral-200 dark:border-neutral-700/50",children:[i.jsxs("button",{onClick:()=>x(z=>Math.max(0,z-1)),disabled:m<=0,className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700 disabled:opacity-50 disabled:cursor-not-allowed text-neutral-700 dark:text-neutral-200 font-bold text-sm",children:[i.jsx(id,{size:18})," Prev"]}),i.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-black uppercase tracking-widest",children:"Available Months"}),i.jsxs("button",{onClick:()=>x(z=>Math.min(U-1,z+1)),disabled:m>=U-1,className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700 disabled:opacity-50 disabled:cursor-not-allowed text-neutral-700 dark:text-neutral-200 font-bold text-sm",children:["Next ",i.jsx(en,{size:18})]})]}),i.jsx(nD,{year:ue.getFullYear(),month:ue.getMonth(),availableDates:c,bookedDates:u,onDateClick:V,color:G.color})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"sticky top-8 space-y-6",children:[f&&!A&&i.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-xl border border-neutral-200 dark:border-neutral-700 overflow-hidden",children:[i.jsxs("div",{className:`${Y.bg} p-4 flex justify-between items-center text-white`,children:[i.jsxs("h3",{className:"font-bold text-lg",children:["Request ",f]}),i.jsx("button",{onClick:()=>p(null),className:"hover:bg-white/20 p-1 rounded",children:i.jsx(Dt,{size:20})})]}),i.jsxs("form",{onSubmit:ge,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-neutral-500 dark:text-neutral-400 uppercase mb-1",children:"Author / Discord Name"}),i.jsx("input",{required:!0,value:b,onChange:z=>y(z.target.value),className:"w-full p-2 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded focus:ring-2 focus:ring-amber-500 outline-none",placeholder:"e.g. RRAngel"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-neutral-500 dark:text-neutral-400 uppercase mb-1",children:"Email (for confirmation)"}),i.jsx("input",{required:!0,type:"email",value:j,onChange:z=>N(z.target.value),className:"w-full p-2 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded focus:ring-2 focus:ring-amber-500 outline-none",placeholder:"you@example.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-neutral-500 dark:text-neutral-400 uppercase mb-1",children:"Story Link"}),i.jsx("input",{required:!0,type:"url",value:v,onChange:z=>w(z.target.value),className:"w-full p-2 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded focus:ring-2 focus:ring-amber-500 outline-none",placeholder:"https://royalroad.com/..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-neutral-500 dark:text-neutral-400 uppercase mb-1",children:"Shoutout Code (HTML)"}),i.jsx("textarea",{required:!0,value:k,onChange:z=>S(z.target.value),className:"w-full h-32 p-2 text-xs font-mono bg-neutral-50 dark:bg-neutral-900 dark:text-neutral-300 border border-neutral-300 dark:border-neutral-600 rounded focus:ring-2 focus:ring-amber-500 outline-none",placeholder:"<table>...</table>"})]}),k&&i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"block text-xs font-bold text-neutral-500 dark:text-neutral-400 uppercase mb-1",children:"Preview"}),i.jsx("div",{className:"scale-75 origin-top-left border border-neutral-200 dark:border-neutral-600 rounded p-2 bg-white dark:bg-neutral-800",children:i.jsx(M1,{html:k})})]}),i.jsx("div",{className:"pt-4 border-t border-neutral-100 dark:border-neutral-700",children:i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 bg-neutral-50 dark:bg-neutral-700/50 rounded border border-neutral-200 dark:border-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",children:[i.jsx("div",{className:`w-5 h-5 border-2 rounded flex items-center justify-center ${C?`${Y.bg} ${Y.border}`:"border-neutral-300 dark:border-neutral-500"}`,children:C&&i.jsx($a,{size:14,className:"text-white"})}),i.jsx("input",{type:"checkbox",className:"hidden",checked:C,onChange:z=>P(z.target.checked)}),i.jsx("span",{className:"text-sm font-medium text-neutral-600 dark:text-neutral-300",children:"I am human (Anti-bot)"})]})}),i.jsx("button",{type:"submit",disabled:!C||E,className:`w-full py-3 ${Y.button} ${Y.buttonHover} text-white font-bold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all`,children:E?"Sending Request...":"Send Shoutout Request"})]})]}),A&&i.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-xl border border-green-200 dark:border-green-800 overflow-hidden",children:[i.jsxs("div",{className:"bg-green-600 p-4 text-white text-center",children:[i.jsx("div",{className:"mx-auto bg-white/20 w-12 h-12 rounded-full flex items-center justify-center mb-2",children:i.jsx(kg,{size:24})}),i.jsx("h3",{className:"font-bold text-lg",children:"Request Sent!"}),i.jsxs("p",{className:"text-green-100 text-sm",children:["Pending approval for ",A.dateStr]})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("p",{className:"text-neutral-600 dark:text-neutral-300 text-sm",children:["Thanks ",i.jsx("strong",{children:A.authorName}),"! Your request has been sent to the admin.",i.jsx("br",{}),i.jsx("br",{}),"You will receive a confirmation email at ",i.jsx("strong",{children:A.email})," once approved."]}),i.jsx("p",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 border-t pt-4 dark:border-neutral-700",children:"In the meantime, grab my code below:"}),I.length===0&&i.jsx("p",{className:"text-red-500 text-xs italic",children:"No shoutout codes configured for this story yet."}),I.map(z=>i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-xs font-bold uppercase text-neutral-500 dark:text-neutral-400",children:z.label}),i.jsxs("button",{onClick:()=>te(z.code),className:`${Y.text} hover:opacity-80 text-xs font-bold flex items-center gap-1`,children:[i.jsx(CN,{size:12})," Copy Code"]})]}),i.jsx("div",{className:"bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded p-2 text-xs font-mono text-neutral-500 dark:text-neutral-400 h-20 overflow-y-auto whitespace-pre-wrap select-all",children:z.code})]},z.id)),i.jsx("button",{onClick:()=>{p(null),_(null)},className:"w-full py-2 border border-neutral-300 dark:border-neutral-600 text-neutral-600 dark:text-neutral-300 font-bold rounded hover:bg-neutral-50 dark:hover:bg-neutral-700",children:"Close"})]})]}),!f&&!A&&i.jsxs("div",{className:"bg-white dark:bg-neutral-800 p-6 rounded-xl shadow-sm border border-neutral-200 dark:border-neutral-700",children:[i.jsx("h3",{className:"font-bold text-lg mb-4 text-neutral-800 dark:text-neutral-100",children:"How it works"}),i.jsxs("ul",{className:"space-y-4 text-sm text-neutral-700 dark:text-neutral-200",children:[i.jsxs("li",{className:"flex gap-3",children:[i.jsx("span",{className:`${Y.bg} text-white font-bold w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 border ${Y.border}`,children:"1"}),i.jsxs("span",{children:["Find a ",i.jsx("span",{className:`${Y.text} font-bold`,children:"colored"})," date on the calendar."]})]}),i.jsxs("li",{className:"flex gap-3",children:[i.jsx("span",{className:`${Y.bg} text-white font-bold w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 border ${Y.border}`,children:"2"}),i.jsx("span",{children:"Request the slot with your story details."})]}),i.jsxs("li",{className:"flex gap-3",children:[i.jsx("span",{className:`${Y.bg} text-white font-bold w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 border ${Y.border}`,children:"3"}),i.jsx("span",{children:"Wait for approval (you'll get an email). Grab my code while you wait!"})]})]}),i.jsxs("div",{className:"mt-8 pt-8 border-t border-neutral-100 dark:border-neutral-700 text-center",children:[i.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-2",children:"Owner of this site?"}),i.jsxs("button",{onClick:e,className:"text-xs font-bold text-neutral-600 dark:text-neutral-300 hover:text-neutral-800 dark:hover:text-neutral-100 flex items-center justify-center gap-1 mx-auto",children:[i.jsx($m,{size:12})," Admin Login"]})]})]})]})})]})}),i.jsx("div",{className:"mx-auto max-w-4xl px-4 pb-6",children:i.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-white/80 p-6 text-center shadow-lg dark:border-neutral-800 dark:bg-neutral-900/70",children:[i.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white",children:"Stay in the loop"}),i.jsx("p",{className:"mt-2 text-sm text-neutral-700 dark:text-neutral-300",children:"Get a heads-up when new shoutout slots open, or support future collabs on Patreon."}),i.jsxs("div",{className:"mt-4 flex flex-col items-center justify-center gap-3 sm:flex-row",children:[i.jsx(pa,{variant:"button",source:"shoutouts"}),i.jsx(Tx,{variant:"button"})]})]})}),i.jsx("footer",{className:"relative z-10 bg-neutral-100 dark:bg-neutral-950 border-t border-neutral-200 dark:border-neutral-800 py-8",children:i.jsx(ar,{variant:"footer"})})]})}const yX=["amber","blue","rose","emerald","violet","cyan"];function vX({onExit:e}){const[t,r]=g.useState({monthsToShow:3}),[n,s]=g.useState([]),[a,o]=g.useState("default"),[l,c]=g.useState([]),[d,u]=g.useState(new Set),[h,f]=g.useState(new Set),[p,m]=g.useState(new Set),[x,b]=g.useState([]),[y,v]=g.useState([]),[w,j]=g.useState("calendar"),[N,k]=g.useState(0),[S,C]=g.useState(!0),[P,E]=g.useState("");g.useEffect(()=>{O()},[]),g.useEffect(()=>{a&&!S&&A()},[a]);const O=async()=>{try{const[U,V,ge]=await Promise.all([ht.getConfig(),ht.getStories(),ht.getAdminShoutouts()]);if(r(U),s(V),c(ge),V.length>0){const te=V[0].id;o(te),console.log("Loading initial availability for:",te);const[z,le]=await Promise.all([ht.getAvailability(te),ht.getBookings(te)]);console.log("Initial availability loaded:",z.length,"dates"),u(new Set(z)),f(new Set(le.filter(ne=>ne.status==="approved").map(ne=>ne.dateStr))),m(new Set(le.filter(ne=>ne.status==="pending").map(ne=>ne.dateStr))),b(le.filter(ne=>ne.status==="pending").sort((ne,be)=>ne.dateStr.localeCompare(be.dateStr))),v(le.filter(ne=>ne.status==="approved").sort((ne,be)=>ne.dateStr.localeCompare(be.dateStr)))}C(!1)}catch(U){console.error("Failed to load initial data:",U),alert("Failed to connect to database. Please check your API configuration.")}},A=async()=>{try{console.log("Refreshing story data for:",a);const[U,V,ge]=await Promise.all([ht.getAvailability(a),ht.getBookings(a),ht.getAdminShoutouts()]);console.log("Availability from API:",U),console.log("Number of available dates:",U.length);const te=new Set(U);console.log("Set size:",te.size),console.log("Sample dates in set:",Array.from(te).slice(0,5)),u(te),f(new Set(V.filter(z=>z.status==="approved").map(z=>z.dateStr))),m(new Set(V.filter(z=>z.status==="pending").map(z=>z.dateStr))),b(V.filter(z=>z.status==="pending").sort((z,le)=>z.dateStr.localeCompare(le.dateStr))),v(V.filter(z=>z.status==="approved").sort((z,le)=>z.dateStr.localeCompare(le.dateStr))),c(ge),console.log(" Story data refreshed")}catch(U){console.error("Failed to refresh story data:",U)}},_=async U=>{const{name:V,value:ge}=U.target,te={...t,[V]:V==="monthsToShow"?parseInt(ge):ge};r(te),await ht.updateConfig(te)},I=async(U,V,ge)=>{const te=n.map(le=>le.id===U?{...le,[V]:ge}:le);s(te);const z=te.find(le=>le.id===U);z&&await ht.upsertStory(z)},D=async()=>{const U={id:Date.now().toString(),title:"New Story Title",link:"https://royalroad.com/...",coverImage:"https://picsum.photos/400/600",color:"blue"},V=[...n,U];s(V),await ht.upsertStory(U),o(U.id)},$=async U=>{if(n.length<=1){alert("You must have at least one story.");return}if(confirm("Are you sure? This will delete all availability and bookings for this story.")){await ht.deleteStory(U);const V=n.filter(ge=>ge.id!==U);s(V),a===U&&o(V[0].id)}},L=async(U,V,ge)=>{const te=l.map(le=>le.id===U?{...le,[V]:ge}:le);c(te);const z=te.find(le=>le.id===U);z&&await ht.upsertAdminShoutout(z)},M=async()=>{if(l.length>=10)return;const U={id:Date.now().toString(),label:"New Shoutout",code:"<b>Code here</b>",storyId:a},V=[...l,U];c(V),await ht.upsertAdminShoutout(U)},T=async U=>{const V=l.filter(ge=>ge.id!==U);c(V),await ht.deleteAdminShoutout(U)},G=async U=>{confirm(`Approve request for ${U.dateStr}?

This will send a confirmation email to ${U.email} with your shoutout code.`)&&(await ht.updateBookingStatus(U.id,"approved"),alert(` Approved!

Confirmation email sent to:
${U.email}

The email includes your shoutout code and story details.`),await A())},Y=async U=>{confirm("Reject request? The date will become available again.")&&(await ht.deleteBooking(U.id),await A())},ee=async U=>{confirm(`Delete this approved shoutout for ${U.dateStr}?

Author: ${U.authorName}

This will free up the date slot.`)&&(await ht.deleteBooking(U.id),await A())},R=async U=>{console.log("Toggling availability for:",U,"Story:",a);const ge=new Set(d).has(U);try{ge?(console.log("Removing availability..."),await ht.setAvailability(a,U,!1),console.log(" Removed from database")):(console.log("Adding availability..."),await ht.setAvailability(a,U,!0),console.log(" Added to database")),await A(),console.log(" UI refreshed from database")}catch(te){console.error("Failed to toggle availability:",te),alert("Failed to save availability. Check console for details.")}},B=new Date,q=new Date(B.getFullYear(),B.getMonth()+N,1),X=t.monthsToShow||1,ue=n.find(U=>U.id===a)||n[0];return S?i.jsx("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-950 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),i.jsx("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Loading..."})]})}):i.jsxs("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-950 pb-20 transition-colors duration-200",children:[i.jsx("header",{className:"bg-neutral-900 text-white p-4 sticky top-0 z-10 shadow-md border-b border-neutral-800",children:i.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:e,className:"p-2 hover:bg-neutral-800 rounded-full transition-colors",children:i.jsx(A$,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-amber-500",children:"Admin Dashboard"}),i.jsxs("nav",{className:"flex items-center gap-2 text-xs text-neutral-400 mt-2","aria-label":"Breadcrumb",children:[i.jsx(Me,{to:"/",className:"hover:text-white transition-colors",children:"Home"}),i.jsx(en,{size:12}),i.jsx(Me,{to:"/shoutouts",className:"hover:text-white transition-colors",children:"Shoutouts"}),i.jsx(en,{size:12}),i.jsx("span",{className:"text-amber-400",children:"Admin"})]})]})]}),i.jsxs("div",{className:"flex gap-2 text-sm overflow-x-auto",children:[i.jsxs("button",{onClick:()=>j("requests"),className:`relative flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${w==="requests"?"bg-amber-500 text-neutral-900 font-bold":"bg-neutral-800 hover:bg-neutral-700 text-neutral-200"}`,children:[i.jsx(rv,{size:16})," Requests",x.length>0&&i.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] text-white",children:x.length})]}),i.jsxs("button",{onClick:()=>j("calendar"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${w==="calendar"?"bg-amber-500 text-neutral-900 font-bold":"bg-neutral-800 hover:bg-neutral-700 text-neutral-200"}`,children:[i.jsx(P$,{size:16})," Calendar"]}),i.jsxs("button",{onClick:()=>j("stories"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${w==="stories"?"bg-amber-500 text-neutral-900 font-bold":"bg-neutral-800 hover:bg-neutral-700 text-neutral-200"}`,children:[i.jsx(Yq,{size:16})," Stories"]}),i.jsxs("button",{onClick:()=>j("shoutouts"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${w==="shoutouts"?"bg-amber-500 text-neutral-900 font-bold":"bg-neutral-800 hover:bg-neutral-700 text-neutral-200"}`,children:[i.jsx(dK,{size:16})," Codes"]}),i.jsxs("button",{onClick:()=>j("settings"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${w==="settings"?"bg-amber-500 text-neutral-900 font-bold":"bg-neutral-800 hover:bg-neutral-700 text-neutral-200"}`,children:[i.jsx(Dx,{size:16})," Config"]}),i.jsxs("button",{onClick:()=>j("copylist"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${w==="copylist"?"bg-amber-500 text-neutral-900 font-bold":"bg-neutral-800 hover:bg-neutral-700 text-neutral-200"}`,children:[i.jsx(YE,{size:16})," Copy List"]})]})]})}),i.jsxs("main",{className:"max-w-4xl mx-auto mt-8 px-4",children:[w==="requests"&&i.jsxs("div",{className:"animate-fade-in space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h2",{className:"text-2xl font-bold text-neutral-800 dark:text-neutral-100",children:["Pending Requests (",x.length,")"]}),i.jsx("select",{value:a,onChange:U=>o(U.target.value),className:"p-2 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 border border-neutral-300 dark:border-neutral-700 rounded-lg text-sm",children:n.map(U=>i.jsx("option",{value:U.id,children:U.title},U.id))})]}),x.length===0&&i.jsxs("div",{className:"bg-white dark:bg-neutral-900 p-8 rounded-xl text-center border border-neutral-200 dark:border-neutral-800",children:[i.jsx(rv,{size:48,className:"mx-auto text-neutral-300 dark:text-neutral-600 mb-4"}),i.jsx("p",{className:"text-neutral-500",children:"No pending requests for this story."})]}),x.map(U=>i.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-xl shadow-sm border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[i.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/10 border-b border-yellow-100 dark:border-yellow-900/30 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold text-neutral-800 dark:text-neutral-100 flex items-center gap-2",children:[i.jsx("span",{className:"bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 px-2 py-1 rounded text-sm font-mono",children:U.dateStr}),U.authorName]}),i.jsxs("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1 flex items-center gap-4",children:[i.jsxs("a",{href:`mailto:${U.email}`,className:"flex items-center gap-1 hover:text-blue-500",children:[i.jsx(rv,{size:14})," ",U.email]}),i.jsxs("a",{href:U.storyLink,target:"_blank",rel:"noreferrer",className:"flex items-center gap-1 hover:text-blue-500",children:[i.jsx(wg,{size:14})," View Story"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>G(U),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg font-bold text-sm transition-colors",children:[i.jsx($a,{size:16})," Approve"]}),i.jsxs("button",{onClick:()=>Y(U),className:"flex items-center gap-2 px-4 py-2 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 text-red-600 dark:text-red-400 rounded-lg font-bold text-sm transition-colors",children:[i.jsx(Dt,{size:16})," Reject"]})]})]}),i.jsxs("div",{className:"p-4 grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"text-xs",children:[i.jsx("span",{className:"font-bold text-neutral-500 uppercase block mb-1",children:"Submitted Code"}),i.jsx("textarea",{readOnly:!0,value:U.shoutoutCode,className:"w-full h-32 bg-neutral-50 dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 rounded p-2 font-mono text-neutral-600 dark:text-neutral-400"})]}),i.jsxs("div",{className:"text-xs",children:[i.jsx("span",{className:"font-bold text-neutral-500 uppercase block mb-1",children:"Preview"}),i.jsx("div",{className:"max-h-32 overflow-y-auto border border-neutral-200 dark:border-neutral-700 rounded bg-white dark:bg-neutral-800 p-2",children:i.jsx(M1,{html:U.shoutoutCode})})]})]})]},U.id))]}),w==="settings"&&i.jsxs("div",{className:"bg-white dark:bg-neutral-900 p-8 rounded-xl shadow-sm border border-neutral-200 dark:border-neutral-800 animate-fade-in",children:[i.jsx("h2",{className:"text-2xl font-bold mb-6 text-neutral-800 dark:text-neutral-100 border-b dark:border-neutral-800 pb-4",children:"Global Configuration"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-neutral-700 dark:text-neutral-300 mb-2",children:"Months to Display"}),i.jsx("input",{type:"number",min:"1",max:"12",name:"monthsToShow",value:t.monthsToShow,onChange:_,className:"w-32 p-3 border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-amber-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-neutral-800 dark:text-neutral-100 mb-2",children:"Email Test (uses server script)"}),i.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-2",children:"Enter an email and click send to trigger the same test script the server uses."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsx("input",{type:"email",placeholder:"you@example.com",value:P,onChange:U=>E(U.target.value),className:"flex-1 p-3 border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-amber-500 outline-none"}),i.jsx("button",{type:"button",onClick:()=>{if(!P){alert("Enter an email address first.");return}const U=`/api/shoutouts/email-test.php?send=1&to=${encodeURIComponent(P)}`;window.open(U,"_blank")},className:"px-4 py-2 bg-amber-500 hover:bg-amber-400 text-neutral-900 rounded-lg font-bold",children:"Send Test Email"})]})]}),i.jsxs("div",{className:"pt-8 border-t dark:border-neutral-800 mt-8",children:[i.jsx("h3",{className:"text-red-600 dark:text-red-400 font-bold mb-2",children:"Danger Zone"}),i.jsxs("button",{onClick:()=>{confirm("Reset entire DB?")&&ht.resetDatabase()},className:"flex items-center gap-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300",children:[i.jsx(yo,{size:16})," Reset Database"]})]})]})]}),w==="stories"&&i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-neutral-800 dark:text-neutral-100",children:"Your Stories"}),i.jsxs("button",{onClick:D,className:"flex items-center gap-2 bg-amber-500 text-neutral-900 px-4 py-2 rounded-lg font-bold hover:bg-amber-400",children:[i.jsx(ma,{size:18})," New Story"]})]}),n.map(U=>i.jsxs("div",{className:"bg-white dark:bg-neutral-900 p-6 rounded-xl shadow-sm border border-neutral-200 dark:border-neutral-800 relative",children:[i.jsx("button",{onClick:()=>$(U.id),className:"absolute top-4 right-4 text-neutral-400 hover:text-red-500 dark:hover:text-red-400",children:i.jsx(oi,{size:20})}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-neutral-500 dark:text-neutral-400 uppercase mb-1",children:"Title"}),i.jsx("input",{value:U.title,onChange:V=>I(U.id,"title",V.target.value),className:"w-full font-semibold text-lg bg-neutral-50 dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 border border-neutral-300 dark:border-neutral-700 rounded p-2 focus:ring-2 focus:ring-amber-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-neutral-500 dark:text-neutral-400 uppercase mb-1",children:"Link"}),i.jsx("input",{value:U.link,onChange:V=>I(U.id,"link",V.target.value),className:"w-full text-sm bg-neutral-50 dark:bg-neutral-950 text-blue-600 dark:text-blue-400 border border-neutral-300 dark:border-neutral-700 rounded p-2 focus:ring-2 focus:ring-amber-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-neutral-500 dark:text-neutral-400 uppercase mb-1",children:"Cover Image URL"}),i.jsx("input",{value:U.coverImage,onChange:V=>I(U.id,"coverImage",V.target.value),className:"w-full text-sm bg-neutral-50 dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 border border-neutral-300 dark:border-neutral-700 rounded p-2 focus:ring-2 focus:ring-amber-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-neutral-500 dark:text-neutral-400 uppercase mb-2",children:"Theme Color"}),i.jsx("div",{className:"flex gap-2",children:yX.map(V=>i.jsx("button",{onClick:()=>I(U.id,"color",V),className:`w-8 h-8 rounded-full border-2 ${U.color===V?"border-neutral-900 dark:border-white scale-110":"border-transparent"} transition-transform bg-${V}-500`,style:{backgroundColor:`var(--color-${V}-500)`},children:i.jsx("div",{className:`w-full h-full rounded-full bg-${V}-500 opacity-80`})},V))})]})]}),i.jsx("div",{className:"flex justify-center items-start",children:i.jsx("div",{className:"w-32 h-48 bg-neutral-100 dark:bg-neutral-800 rounded-lg overflow-hidden border border-neutral-200 dark:border-neutral-700 shadow-md",children:i.jsx("img",{src:U.coverImage,alt:"Cover Preview",className:"w-full h-full object-cover"})})})]})]},U.id))]}),w==="shoutouts"&&i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-neutral-800 dark:text-neutral-100",children:"Shoutout Codes"}),i.jsxs("button",{onClick:M,className:"flex items-center gap-2 bg-amber-500 text-neutral-900 px-4 py-2 rounded-lg font-bold hover:bg-amber-400",children:[i.jsx(ma,{size:18})," Add Code"]})]}),l.map(U=>i.jsxs("div",{className:"bg-white dark:bg-neutral-900 p-6 rounded-xl shadow-sm border border-neutral-200 dark:border-neutral-800",children:[i.jsxs("div",{className:"flex justify-between mb-4 gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-xs font-bold text-neutral-500 dark:text-neutral-400 uppercase mb-1",children:"Label"}),i.jsx("input",{value:U.label,onChange:V=>L(U.id,"label",V.target.value),className:"w-full font-semibold text-lg bg-transparent border-b border-neutral-300 dark:border-neutral-700 dark:text-white focus:border-amber-500 outline-none pb-1"})]}),i.jsxs("div",{className:"w-48",children:[i.jsx("label",{className:"block text-xs font-bold text-neutral-500 dark:text-neutral-400 uppercase mb-1",children:"Assigned Story"}),i.jsxs("select",{value:U.storyId||"",onChange:V=>L(U.id,"storyId",V.target.value),className:"w-full p-2 bg-neutral-50 dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 border border-neutral-300 dark:border-neutral-700 rounded-lg text-sm",children:[i.jsx("option",{value:"",children:"All Stories (Global)"}),n.map(V=>i.jsx("option",{value:V.id,children:V.title},V.id))]})]}),i.jsx("button",{onClick:()=>T(U.id),className:"text-red-400 hover:text-red-600 dark:hover:text-red-300 self-end mb-1",children:i.jsx(oi,{size:20})})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-neutral-500 dark:text-neutral-400 uppercase mb-2",children:"HTML Code"}),i.jsx("textarea",{value:U.code,onChange:V=>L(U.id,"code",V.target.value),className:"w-full h-40 p-3 font-mono text-sm bg-neutral-50 dark:bg-neutral-950 dark:text-neutral-300 border border-neutral-300 dark:border-neutral-700 rounded-lg outline-none focus:ring-2 focus:ring-amber-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-neutral-500 dark:text-neutral-400 uppercase mb-2",children:"Preview"}),i.jsx(M1,{html:U.code})]})]})]},U.id))]}),w==="calendar"&&i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-neutral-500 dark:text-neutral-400 uppercase mb-2",children:"Managing Availability For:"}),i.jsxs("div",{className:"relative",children:[i.jsx("select",{value:a,onChange:U=>o(U.target.value),className:"appearance-none bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 border border-neutral-300 dark:border-neutral-700 text-lg font-bold py-2 pl-4 pr-10 rounded-lg cursor-pointer focus:ring-2 focus:ring-amber-500 outline-none w-full md:w-auto",children:n.map(U=>i.jsx("option",{value:U.id,children:U.title},U.id))}),i.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-neutral-500",children:""})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>k(U=>Math.max(0,U-1)),disabled:N<=0,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(id,{size:20})}),i.jsxs("span",{className:"text-sm font-bold min-w-[100px] text-center",children:["Month ",N+1,"/",X]}),i.jsx("button",{onClick:()=>k(U=>Math.min(X-1,U+1)),disabled:N>=X-1,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(en,{size:20})})]})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200 p-4 rounded-lg mb-8 text-sm flex gap-4",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("p",{children:["Click dates to toggle availability for ",i.jsx("strong",{children:ue.title}),"."]})}),i.jsxs("div",{className:"flex gap-4 items-center text-xs font-bold uppercase",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"w-3 h-3 bg-green-100 border border-green-500 rounded-sm"})," Available"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"w-3 h-3 bg-yellow-100 border border-yellow-500 rounded-sm"})," Pending"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"w-3 h-3 bg-neutral-200 border border-neutral-500 rounded-sm"})," Booked"]})]})]}),i.jsx(nD,{year:q.getFullYear(),month:q.getMonth(),availableDates:d,bookedDates:h,pendingDates:p,onDateClick:R,isAdminMode:!0,color:ue.color})]}),w==="copylist"&&i.jsxs("div",{className:"animate-fade-in space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h2",{className:"text-2xl font-bold text-neutral-800 dark:text-neutral-100",children:["Shoutout Copy List (",y.length,")"]}),i.jsx("select",{value:a,onChange:U=>o(U.target.value),className:"p-2 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 border border-neutral-300 dark:border-neutral-700 rounded-lg text-sm",children:n.map(U=>i.jsx("option",{value:U.id,children:U.title},U.id))})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200 p-4 rounded-lg text-sm",children:i.jsx("p",{children:"Quick copy list of all approved shoutout codes, sorted by date. Past dates are grayed out."})}),y.length===0&&i.jsxs("div",{className:"bg-white dark:bg-neutral-900 p-8 rounded-xl text-center border border-neutral-200 dark:border-neutral-800",children:[i.jsx(YE,{size:48,className:"mx-auto text-neutral-300 dark:text-neutral-600 mb-4"}),i.jsx("p",{className:"text-neutral-500",children:"No approved bookings yet."})]}),i.jsx("div",{className:"space-y-2",children:y.map(U=>{const V=new Date(U.dateStr+"T00:00:00"),ge=new Date;ge.setHours(0,0,0,0);const te=V<ge;return i.jsxs("div",{className:`bg-white dark:bg-neutral-900 rounded-lg border border-neutral-200 dark:border-neutral-800 overflow-hidden ${te?"opacity-50":""}`,children:[i.jsxs("div",{className:"flex items-center gap-4 p-4",children:[i.jsx("div",{className:`font-mono text-sm px-3 py-1 rounded ${te?"bg-neutral-200 dark:bg-neutral-700 text-neutral-500":"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-400"}`,children:U.dateStr}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"font-semibold text-neutral-800 dark:text-neutral-200",children:U.authorName}),i.jsx("a",{href:U.storyLink,target:"_blank",rel:"noreferrer",className:"ml-2 text-blue-500 hover:text-blue-600 text-sm",children:i.jsx(wg,{size:14,className:"inline"})})]}),i.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(U.shoutoutCode),alert("Code copied to clipboard!")},className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-sm transition-colors ${te?"bg-neutral-100 dark:bg-neutral-800 text-neutral-400 dark:text-neutral-500":"bg-amber-500 hover:bg-amber-400 text-neutral-900"}`,children:[i.jsx(CN,{size:16})," Copy Code"]}),i.jsx("button",{onClick:()=>ee(U),className:"p-2 text-neutral-400 hover:text-red-500 dark:hover:text-red-400 transition-colors",title:"Delete this shoutout",children:i.jsx(oi,{size:18})})]}),i.jsx("div",{className:"px-4 pb-4",children:i.jsx("div",{className:"bg-neutral-50 dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 rounded p-2 text-xs font-mono text-neutral-500 dark:text-neutral-400 max-h-20 overflow-y-auto whitespace-pre-wrap",children:U.shoutoutCode})})]},U.id)})})]})]}),i.jsx("footer",{className:"bg-neutral-100 dark:bg-neutral-950 border-t border-neutral-200 dark:border-neutral-800 py-8 mt-auto",children:i.jsx(ar,{variant:"footer"})})]})}function wX(){const[e,t]=g.useState(()=>sessionStorage.getItem("shoutouts_admin_user")?"admin":"public"),[r,n]=g.useState(!1),[s,a]=g.useState(""),[o,l]=g.useState(""),[c,d]=g.useState(!1),[u,h]=g.useState(""),[f,p]=g.useState(!1),m=()=>{n(!0),h("")},x=async w=>{w.preventDefault(),h(""),p(!0);try{const N=await(await fetch("/api/auth/login.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({username:s,password:o})})).json();N.user||N.success?(sessionStorage.setItem("shoutouts_admin_user",JSON.stringify(N.user||{username:s})),n(!1),a(""),l(""),t("admin")):h(N.error||"Invalid credentials")}catch(j){console.error("Login error:",j),h("Login failed. Please try again.")}finally{p(!1)}},b=()=>{sessionStorage.removeItem("shoutouts_admin_user"),t("public")},y=()=>{n(!1),h(""),a(""),l("")},v=()=>i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-fade-in",children:[i.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 p-6 text-center relative",children:[i.jsx("button",{onClick:y,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors",children:i.jsx(Dt,{size:24})}),i.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx($m,{size:32,className:"text-white"})}),i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Admin Login"}),i.jsx("p",{className:"text-white/80 text-sm mt-1",children:"Enter your credentials to continue"})]}),i.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",autoComplete:"on",children:[u&&i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-lg text-sm",children:u}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"username",className:"block text-sm font-semibold text-neutral-700 dark:text-neutral-300 mb-2",children:"Username"}),i.jsxs("div",{className:"relative",children:[i.jsx(U$,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400"}),i.jsx("input",{type:"text",id:"username",name:"username",autoComplete:"username",value:s,onChange:w=>a(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all",placeholder:"Enter username",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-neutral-700 dark:text-neutral-300 mb-2",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx($m,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400"}),i.jsx("input",{type:c?"text":"password",id:"password",name:"password",autoComplete:"current-password",value:o,onChange:w=>l(w.target.value),className:"w-full pl-10 pr-12 py-3 border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all",placeholder:"Enter password",required:!0}),i.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300",children:c?i.jsx(_N,{size:18}):i.jsx(sc,{size:18})})]})]}),i.jsx("button",{type:"submit",disabled:f,className:"w-full bg-amber-500 hover:bg-amber-400 disabled:bg-amber-300 text-neutral-900 font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:f?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-neutral-900/30 border-t-neutral-900 rounded-full animate-spin"}),"Logging in..."]}):i.jsxs(i.Fragment,{children:[i.jsx($m,{size:18}),"Sign In"]})})]}),i.jsx("div",{className:"px-6 pb-6 text-center",children:i.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Use your main site admin credentials"})})]})});return i.jsxs(i.Fragment,{children:[i.jsx(jf,{}),r&&i.jsx(v,{}),e==="public"&&i.jsx(bX,{onAdminLogin:m}),e==="admin"&&i.jsx(vX,{onExit:b})]})}let ud=null,Cg=null;async function ic(e){const t=await fetch(e,{credentials:"same-origin"});if(!t.ok){const r=await t.text();try{const n=JSON.parse(r);throw new Error(n.error||`HTTP ${t.status}`)}catch{throw new Error(r||`HTTP ${t.status}`)}}return t.json()}async function Ws(e,t,r="POST"){const n=await fetch(e,{method:r,headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(t)}),s=await n.text();if(!n.ok)try{const a=JSON.parse(s);throw new Error(a.error||`HTTP ${n.status}`)}catch(a){throw a instanceof Error&&a.message.includes("HTTP")?a:new Error(s||`HTTP ${n.status}`)}return s?JSON.parse(s):{}}function Cf(e){const t=new URLSearchParams;for(const[n,s]of Object.entries(e))s!=null&&s!==""&&t.set(n,String(s));const r=t.toString();return r?`?${r}`:""}async function Lx(e){try{const t=e?Cf(e):"";return await ic(`${Ce}/blog/list.php${t}`)}catch{console.log("Database offline, using mock blog data");const r=ln.blog.posts;return{success:!0,posts:r,total:r.length,page:(e==null?void 0:e.page)||1,limit:(e==null?void 0:e.limit)||10,pages:Math.ceil(r.length/((e==null?void 0:e.limit)||10))}}}async function TN(e){try{const t={};e.slug&&(t.slug=e.slug),e.id&&(t.id=e.id),e.include_related&&(t.include_related="true");const r=Cf(t);return await ic(`${Ce}/blog/get.php${r}`)}catch{console.log("Database offline, using mock blog data");const r=ln.blog.posts,n=e.slug?r.find(s=>s.slug===e.slug):r.find(s=>s.id===e.id);return n?{success:!0,post:n}:{success:!1,error:"Post not found"}}}async function sD(e,t=!1){return TN({slug:e,include_related:t})}async function kX(e,t=!1){return TN({id:e,include_related:t})}async function aD(e){try{return await Ws(`${Ce}/blog/create.php`,e)}catch(t){return{success:!1,error:String(t)}}}async function iD(e){try{return await Ws(`${Ce}/blog/update.php`,e)}catch(t){return{success:!1,error:String(t)}}}async function oD(e,t=!1){try{return await Ws(`${Ce}/blog/delete.php`,{id:e,permanent:t})}catch(r){return{success:!1,error:String(r)}}}async function _f(e=!1){try{const r=await ic(`${Ce}/blog/categories/list.php${e?"?include_empty=true":""}`);return r.success&&(ud=r.categories),r}catch{return console.log("Database offline, using mock blog categories"),{success:!0,categories:ln.blog.categories}}}async function jX(){if(ud)return ud;const e=await _f(!0);return e.success?e.categories:[]}async function lD(e,t,r){try{const n=await Ws(`${Ce}/blog/categories/create.php`,{name:e,description:t,sort_order:r});return n.success&&(ud=null),n}catch(n){return{success:!1,error:String(n)}}}async function cD(e){try{const t=await Ws(`${Ce}/blog/categories/delete.php`,{id:e});return t.success&&(ud=null),t}catch(t){return{success:!1,error:String(t)}}}async function PN(){try{const e=await ic(`${Ce}/blog/tags/list.php`);return e.success&&(Cg=e.tags),e}catch{console.log("Database offline, using mock blog tags");const t=ln.blog.tags;return{success:!0,tags:t,total:t.length}}}async function NX(){if(Cg)return Cg;const e=await PN();return e.success?e.tags:[]}function O1(e){return e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/[\s-]+/g,"-").replace(/^-+|-+$/g,"").substring(0,200)}function $1(e){const r=e.replace(/<[^>]*>/g,"").split(/\s+/).filter(Boolean).length;return Math.max(1,Math.ceil(r/200))}function MN(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function SX(e){return new Date(e).toISOString().slice(0,16)}function dD(e){const t=e?Cf(e):"";return`${Ce}/blog/rss.xml.php${t}`}function CX(){ud=null,Cg=null}async function uD(e){try{const t=e?Cf(e):"";return await ic(`${Ce}/blog/images/picker.php${t}`)}catch(t){return{success:!1,images:[],galleries:[],total:0,page:1,limit:24,pages:0,error:String(t)}}}async function _X(e){try{return await ic(`${Ce}/blog/images/link.php?blog_post_id=${e}`)}catch(t){return{success:!1,error:String(t)}}}async function EX(e,t,r,n=0){try{return await Ws(`${Ce}/blog/images/link.php`,{blog_post_id:e,image_id:t,source:r,position_order:n})}catch(s){return{success:!1,error:String(s)}}}async function AX(e,t,r){try{return await Ws(`${Ce}/blog/images/link.php`,{blog_post_id:e,image_id:t,source:r},"DELETE")}catch(n){return{success:!1,error:String(n)}}}function hD(){const e="analytics_session";let t=localStorage.getItem(e);return t||(t="sess_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),localStorage.setItem(e,t)),t}async function fD(e,t){try{return await Ws(`${Ce}/blog/analytics/track.php`,{event_type:"blog_view",post_id:e,post_slug:t,session_id:hD(),source:document.referrer?"referral":"direct"})}catch(r){return console.error("Failed to track blog view:",r),{success:!1,error:String(r)}}}async function pD(e,t){try{const r=await Ws(`${Ce}/blog/like.php`,{post_id:e});return{success:r.success||!1,like_count:r.like_count,user_liked:r.user_liked,already_tracked:r.user_liked}}catch(r){return console.error("Failed to track blog like:",r),{success:!1,error:String(r)}}}async function mD(e,t,r){try{return await Ws(`${Ce}/blog/analytics/track.php`,{event_type:"blog_share",post_id:e,post_slug:t,session_id:hD(),source:r})}catch(n){return console.error("Failed to track blog share:",n),{success:!1,error:String(n)}}}async function gD(e){try{const t=await fetch(`${Ce}/blog/like.php?post_id=${e}`);if(!t.ok)throw new Error(`HTTP ${t.status}`);return await t.json()}catch(t){return console.error("Failed to get blog like status:",t),{success:!1,like_count:0,user_liked:!1}}}function TX(e){return JSON.parse(localStorage.getItem("blog_likes")||"[]").includes(e)}function PX(e){const t=JSON.parse(localStorage.getItem("blog_likes")||"[]");t.includes(e)||(t.push(e),localStorage.setItem("blog_likes",JSON.stringify(t)))}async function xD(e,t){try{const r={post_id:e,...t},n=Cf(r);return await ic(`${Ce}/blog/comments/list.php${n}`)}catch(r){return{success:!1,error:String(r)}}}async function bD(e,t,r,n){try{return await Ws(`${Ce}/blog/comments/create.php`,{post_id:e,author_name:t,content:r,author_email:n==null?void 0:n.author_email,parent_id:n==null?void 0:n.parent_id,time_on_page:n==null?void 0:n.time_on_page,website:""})}catch(s){return{success:!1,error:String(s)}}}async function MX(e,t){try{return await Ws(`${Ce}/blog/comments/moderate.php`,{comment_ids:e,action:t})}catch(r){return{success:!1,error:String(r)}}}const OX=Object.freeze(Object.defineProperty({__proto__:null,calculateReadingTime:$1,clearBlogCaches:CX,createBlogCategory:lD,createBlogComment:bD,createBlogPost:aD,deleteBlogCategory:cD,deleteBlogPost:oD,formatBlogDate:MN,formatDateForInput:SX,generateSlug:O1,getBlogLikeStatus:gD,getBlogLinkedImages:_X,getBlogPost:TN,getBlogPostById:kX,getBlogPostBySlug:sD,getBlogRssFeedUrl:dD,getCachedBlogCategories:jX,getCachedBlogTags:NX,hasLikedPost:TX,linkBlogImage:EX,listBlogCategories:_f,listBlogComments:xD,listBlogImages:uD,listBlogPosts:Lx,listBlogTags:PN,markPostLiked:PX,moderateBlogComments:MX,trackBlogLike:pD,trackBlogShare:mD,trackBlogView:fD,unlinkBlogImage:AX,updateBlogPost:iD},Symbol.toStringTag,{value:"Module"}));function yD({post:e,theme:t}){const r=t==="light"?"text-gray-900":"text-white",n=t==="light"?"text-gray-700":"text-neutral-200",s=t==="light"?"text-gray-500":"text-neutral-400",a=t==="light"?"bg-white/60 border-gray-200 backdrop-blur-xl":"bg-neutral-900/60 border-white/10 backdrop-blur-xl",o=e.published_at?MN(e.published_at):"Draft";return i.jsxs(Me,{to:`/blog/${e.slug}`,className:`group rounded-2xl ${a} border overflow-hidden flex flex-col hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl`,children:[i.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.cover_image?i.jsx("img",{src:e.cover_image,alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-emerald-500/20 to-sky-500/20 flex items-center justify-center",children:i.jsx("span",{className:"text-6xl opacity-50",children:""})}),e.categories&&e.categories.length>0&&i.jsx("div",{className:"absolute top-3 left-3 flex flex-wrap gap-1",children:e.categories.slice(0,2).map((l,c)=>i.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold brand-bg text-white backdrop-blur-sm uppercase tracking-wide",children:l},c))}),e.universe_tag&&i.jsx("div",{className:"absolute top-3 right-3",children:i.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-black/50 text-white backdrop-blur-sm",children:e.universe_tag})})]}),i.jsxs("div",{className:"p-5 flex flex-col flex-1",children:[i.jsx("h3",{className:`text-lg font-bold ${r} mb-2 line-clamp-2 group-hover:brand-text transition-colors`,children:e.title}),e.excerpt&&i.jsx("p",{className:`text-sm ${n} line-clamp-3 mb-4 flex-1`,children:e.excerpt}),e.tags&&e.tags.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-4",children:[e.tags.slice(0,3).map((l,c)=>i.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${t==="light"?"bg-gray-100":"bg-white/10"} ${s}`,children:["#",l]},c)),e.tags.length>3&&i.jsxs("span",{className:`text-xs ${s}`,children:["+",e.tags.length-3]})]}),i.jsxs("div",{className:`flex items-center justify-between pt-4 border-t ${t==="light"?"border-gray-200":"border-white/10"}`,children:[i.jsx("span",{className:`text-xs ${s}`,children:o}),i.jsxs("div",{className:`flex items-center gap-3 text-xs ${s}`,children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.view_count]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.like_count]}),e.comment_count>0&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.comment_count]})]})]})]})]})}function $X({tags:e,theme:t,limit:r=20}){const n=t==="light"?"text-gray-600":"text-neutral-300",s=[...e].sort((c,d)=>d.post_count-c.post_count).slice(0,r),a=Math.max(...s.map(c=>c.post_count),1),o=Math.min(...s.map(c=>c.post_count),1),l=c=>{if(a===o)return"text-sm";const d=(c-o)/(a-o);return d>.75?"text-base font-semibold":d>.5?"text-sm font-medium":d>.25?"text-sm":"text-xs"};return i.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(c=>i.jsxs(Me,{to:`/blog/tag/${c.slug}`,className:`inline-flex items-center px-3 py-1.5 rounded-full ${t==="light"?"bg-gray-100 hover:bg-gray-200":"bg-white/10 hover:bg-white/20"} ${n} hover:brand-text transition-all ${l(c.post_count)}`,title:`${c.post_count} post${c.post_count!==1?"s":""}`,children:["#",c.name]},c.slug))})}function DX({categories:e,tags:t,profile:r,theme:n}){var c;const s=n==="light"?"text-gray-900":"text-white",a=n==="light"?"text-gray-700":"text-neutral-200",o=n==="light"?"text-gray-500":"text-neutral-400",l=n==="light"?"bg-white/60 border-gray-200 backdrop-blur-xl":"bg-neutral-900/60 border-white/10 backdrop-blur-xl";return i.jsxs("aside",{className:"space-y-6",children:[r&&i.jsxs("div",{className:`${l} border rounded-2xl p-5`,children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.profile_image?i.jsx("img",{src:r.profile_image,alt:r.name,className:"w-16 h-16 rounded-full object-cover"}):i.jsx("div",{className:"w-16 h-16 rounded-full brand-bg flex items-center justify-center text-xl font-bold text-white",children:(c=r.name)==null?void 0:c.slice(0,2).toUpperCase()}),i.jsxs("div",{children:[i.jsx("h3",{className:`font-bold ${s}`,children:r.name}),i.jsx("p",{className:`text-sm ${o}`,children:r.tagline})]})]}),r.bio&&i.jsx("p",{className:`text-sm ${a} line-clamp-3`,children:r.bio}),i.jsx(Me,{to:"/",className:"mt-4 block text-center text-sm font-medium brand-text hover:underline",children:"Learn more "})]}),i.jsx(pa,{variant:"card",source:"blog_index",className:l}),e.length>0&&i.jsxs("div",{className:`${l} border rounded-2xl p-5`,children:[i.jsx("h3",{className:`font-bold ${s} mb-4`,children:"Categories"}),i.jsx("ul",{className:"space-y-2",children:e.map(d=>i.jsx("li",{children:i.jsxs(Me,{to:`/blog/category/${d.slug}`,className:`flex items-center justify-between text-sm ${a} hover:brand-text transition-colors`,children:[i.jsx("span",{children:d.name}),i.jsx("span",{className:`text-xs ${o} ${n==="light"?"bg-gray-100":"bg-white/10"} px-2 py-0.5 rounded-full`,children:d.post_count})]})},d.id))})]}),t.length>0&&i.jsxs("div",{className:`${l} border rounded-2xl p-5`,children:[i.jsx("h3",{className:`font-bold ${s} mb-4`,children:"Popular Tags"}),i.jsx($X,{tags:t,theme:n,limit:15})]}),i.jsxs("div",{className:`${l} border rounded-2xl p-5`,children:[i.jsx("h3",{className:`font-bold ${s} mb-2`,children:"Stay Updated"}),i.jsx("p",{className:`text-sm ${a} mb-4`,children:"Subscribe to the RSS feed to never miss a post."}),i.jsxs("a",{href:dD(),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full py-2.5 px-4 rounded-lg brand-bg text-white font-medium text-sm hover:opacity-90 transition-opacity",children:[i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20C5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1Z"})}),"Subscribe via RSS"]})]}),i.jsxs("div",{className:`${l} border rounded-2xl p-5`,children:[i.jsx("h3",{className:`font-bold ${s} mb-4`,children:"Quick Links"}),i.jsxs("ul",{className:"space-y-2",children:[i.jsx("li",{children:i.jsxs(Me,{to:"/storytime",className:`flex items-center gap-2 text-sm ${a} hover:brand-text transition-colors`,children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{children:"Read Stories"})]})}),i.jsx("li",{children:i.jsxs(Me,{to:"/galleries",className:`flex items-center gap-2 text-sm ${a} hover:brand-text transition-colors`,children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{children:"Browse Galleries"})]})}),i.jsx("li",{children:i.jsxs(Me,{to:"/litrpg",className:`flex items-center gap-2 text-sm ${a} hover:brand-text transition-colors`,children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{children:"LitRPG Tools"})]})})]})]})]})}function IX({initialQuery:e="",onSearch:t,theme:r,placeholder:n="Search posts..."}){const[s,a]=g.useState(e),o=r==="light"?"bg-white/80 border-gray-300 focus:border-emerald-500":"bg-white/10 border-white/20 focus:border-emerald-500",l=r==="light"?"text-gray-900":"text-white",c=r==="light"?"placeholder:text-gray-400":"placeholder:text-neutral-400",d=g.useCallback(f=>{f.preventDefault(),t(s.trim())},[s,t]),u=g.useCallback(()=>{a(""),t("")},[t]),h=g.useCallback(f=>{f.key==="Escape"&&u()},[u]);return i.jsx("form",{onSubmit:d,className:"relative",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none",children:i.jsx("svg",{className:`w-5 h-5 ${r==="light"?"text-gray-400":"text-neutral-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),i.jsx("input",{type:"text",value:s,onChange:f=>a(f.target.value),onKeyDown:h,placeholder:n,className:`w-full pl-12 pr-24 py-3 rounded-xl border ${o} ${l} ${c} backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50 transition-all`,"aria-label":"Search blog posts"}),s&&i.jsx("button",{type:"button",onClick:u,className:`absolute right-20 top-1/2 -translate-y-1/2 p-1 rounded-full ${r==="light"?"hover:bg-gray-200":"hover:bg-white/10"} transition-colors`,"aria-label":"Clear search",children:i.jsx("svg",{className:`w-4 h-4 ${r==="light"?"text-gray-400":"text-neutral-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 -translate-y-1/2 px-4 py-1.5 rounded-lg brand-bg text-white text-sm font-medium hover:opacity-90 transition-opacity",children:"Search"})]})})}function Lp(){const{theme:e}=Wt(),{category:t,tag:r,universe:n}=Id(),[s,a]=hW(),[o,l]=g.useState([]),[c,d]=g.useState([]),[u,h]=g.useState([]),[f,p]=g.useState(null),[m,x]=g.useState(!0),[b,y]=g.useState(null),[v,w]=g.useState(1),[j,N]=g.useState(1),[k,S]=g.useState(0),C=9,P=s.get("q")||"",E=e==="light"?"text-gray-900":"text-white",O=e==="light"?"text-gray-700":"text-neutral-200",A=e==="light"?"text-gray-500":"text-neutral-400",_=e==="light"?"bg-white/60 border-gray-200 backdrop-blur-xl":"bg-neutral-900/60 border-white/10 backdrop-blur-xl";g.useEffect(()=>{(async()=>{x(!0),y(null);try{const T=await Lx({page:v,limit:C,status:"published",category:t,tag:r,universe:n,q:P||void 0,sort:"published_at",order:"DESC"});T.success?(l(T.posts),N(T.pages),S(T.total)):y(T.error||"Failed to load posts");const G=await _f();G.success&&d(G.categories);const Y=await PN();Y.success&&h(Y.tags);try{const R=await(await fetch("/api/author/get.php")).json();R.success&&p(R.profile)}catch{console.log("Author profile not available, continuing without it")}}catch(T){console.error("Error loading blog data:",T)}finally{x(!1)}})()},[v,t,r,n,P]),g.useEffect(()=>{w(1)},[t,r,n,P]);const I=g.useMemo(()=>t?`Category: ${t.replace(/-/g," ")}`:r?`Tag: ${r.replace(/-/g," ")}`:n?`Universe: ${n.replace(/-/g," ")}`:P?`Search: "${P}"`:"Blog",[t,r,n,P]),D=M=>{a(M?{q:M}:{})},$=()=>{a({})},L=t||r||n||P;return i.jsxs("div",{className:`min-h-screen ${E}`,children:[i.jsx(Xr,{breadcrumbs:[{label:"Blog"},...t?[{label:`Category: ${t.replace(/-/g," ")}`}]:[],...r?[{label:`Tag: ${r.replace(/-/g," ")}`}]:[],...n?[{label:`Universe: ${n.replace(/-/g," ")}`}]:[]]}),i.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("section",{className:"text-center mb-12",children:[i.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold ${E} mb-4`,children:I}),i.jsx("p",{className:`text-lg ${O} max-w-2xl mx-auto mb-6`,children:L?`Showing ${k} post${k!==1?"s":""}`:"Thoughts, updates, and behind-the-scenes content from the author"}),i.jsx("div",{className:"max-w-xl mx-auto",children:i.jsx(IX,{initialQuery:P,onSearch:D,theme:e})}),L&&i.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4 flex-wrap",children:[t&&i.jsxs(Me,{to:"/blog",className:`inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-sm ${_} border`,children:[i.jsxs("span",{children:["Category: ",t]}),i.jsx("span",{className:"text-lg leading-none",children:""})]}),r&&i.jsxs(Me,{to:"/blog",className:`inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-sm ${_} border`,children:[i.jsxs("span",{children:["Tag: ",r]}),i.jsx("span",{className:"text-lg leading-none",children:""})]}),n&&i.jsxs(Me,{to:"/blog",className:`inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-sm ${_} border`,children:[i.jsxs("span",{children:["Universe: ",n]}),i.jsx("span",{className:"text-lg leading-none",children:""})]}),P&&i.jsxs("button",{onClick:$,className:`inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-sm ${_} border cursor-pointer`,children:[i.jsxs("span",{children:["Search: ",P]}),i.jsx("span",{className:"text-lg leading-none",children:""})]})]}),c.length>0&&!L&&i.jsxs("div",{className:"flex items-center justify-center gap-2 mt-6 flex-wrap",children:[i.jsx(Me,{to:"/blog",className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${t?`${_} border ${O} hover:brand-text`:"brand-bg text-white"}`,children:"All Posts"}),c.slice(0,5).map(M=>i.jsxs(Me,{to:`/blog/category/${M.slug}`,className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${t===M.slug?"brand-bg text-white":`${_} border ${O} hover:brand-text`}`,children:[M.name,i.jsxs("span",{className:`ml-1 ${A}`,children:["(",M.post_count,")"]})]},M.id))]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[i.jsx("div",{className:"lg:col-span-3",children:m?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((M,T)=>i.jsx("div",{className:`${_} border rounded-2xl h-80 animate-pulse`},T))}):b?i.jsxs("div",{className:`${_} border rounded-2xl p-8 text-center`,children:[i.jsx("p",{className:"text-red-500 mb-4",children:b}),i.jsx("button",{onClick:()=>window.location.reload(),className:"brand-bg text-white px-4 py-2 rounded-lg hover:opacity-90",children:"Try Again"})]}):o.length===0?i.jsxs("div",{className:`${_} border rounded-2xl p-12 text-center`,children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:`text-xl font-bold ${E} mb-2`,children:"No posts found"}),i.jsx("p",{className:O,children:L?"Try adjusting your filters or search query":"Check back soon for new content!"}),L&&i.jsx(Me,{to:"/blog",className:"inline-block mt-4 brand-bg text-white px-4 py-2 rounded-lg hover:opacity-90",children:"View All Posts"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(M=>i.jsx(yD,{post:M,theme:e},M.id))}),j>1&&i.jsxs("div",{className:"flex items-center justify-center gap-2 mt-8",children:[i.jsx("button",{onClick:()=>w(M=>Math.max(1,M-1)),disabled:v===1,className:`px-4 py-2 rounded-lg ${_} border ${v===1?"opacity-50 cursor-not-allowed":"hover:brand-text"}`,children:"Previous"}),i.jsx("div",{className:"flex items-center gap-1",children:[...Array(Math.min(5,j))].map((M,T)=>{let G;return j<=5||v<=3?G=T+1:v>=j-2?G=j-4+T:G=v-2+T,i.jsx("button",{onClick:()=>w(G),className:`w-10 h-10 rounded-lg ${v===G?"brand-bg text-white":`${_} border hover:brand-text`}`,children:G},G)})}),i.jsx("button",{onClick:()=>w(M=>Math.min(j,M+1)),disabled:v===j,className:`px-4 py-2 rounded-lg ${_} border ${v===j?"opacity-50 cursor-not-allowed":"hover:brand-text"}`,children:"Next"})]})]})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsx(DX,{categories:c,tags:u,profile:f,theme:e})})]})]}),i.jsx("footer",{className:`border-t ${e==="light"?"border-gray-200":"border-white/10"} mt-16`,children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx(ar,{variant:"footer",showCopyright:!1}),i.jsxs("div",{className:`text-center text-xs pt-4 ${A}`,children:[" ",new Date().getFullYear()," ",(f==null?void 0:f.name)||"Author",". All rights reserved."]})]})})]})}function LX(e=document){e.querySelectorAll('[data-youtube-video="true"]').forEach(r=>{const n=r.getAttribute("data-youtube-id");if(!n||r.querySelector("iframe"))return;if(!/^[\w-]{11}$/.test(n)){console.warn(`Invalid YouTube video ID: ${n}`);return}const s=document.createElement("iframe");s.src=`https://www.youtube.com/embed/${n}`,s.width="560",s.height="315",s.frameBorder="0",s.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",s.allowFullscreen=!0,s.loading="lazy",s.title="YouTube video",r.innerHTML="",r.appendChild(s)})}function RX({items:e,activeId:t,textPrimary:r,textSecondary:n,cardBg:s}){if(e.length===0)return null;const a=(o,l)=>{o.preventDefault();const c=document.getElementById(l);if(c){const h=c.getBoundingClientRect().top+window.pageYOffset-120;window.scrollTo({top:h,behavior:"smooth"}),history.pushState(null,"",`#${l}`)}};return i.jsxs("nav",{className:`${s} border rounded-2xl p-5 sticky top-24`,children:[i.jsxs("h3",{className:`text-sm font-semibold ${r} mb-4 flex items-center gap-2`,children:[i.jsx(I$,{className:"w-4 h-4"}),"On This Page"]}),i.jsx("ul",{className:"space-y-1 border-l-2 border-gray-200 dark:border-white/10",children:e.map(o=>i.jsxs("li",{className:"relative",children:[t===o.id&&i.jsx("span",{className:"absolute left-[-2px] top-0 bottom-0 w-[2px] brand-bg"}),i.jsx("a",{href:`#${o.id}`,onClick:l=>a(l,o.id),className:`block text-sm py-1.5 transition-colors ${o.level===3?"pl-6":"pl-4"} ${t===o.id?"brand-text font-medium":`${n} hover:brand-text hover:bg-gray-50 dark:hover:bg-white/5`}`,children:i.jsxs("span",{className:"flex items-start gap-2",children:[i.jsx("span",{className:`mt-1.5 w-1.5 h-1.5 rounded-full flex-shrink-0 ${t===o.id?"brand-bg":"bg-gray-300 dark:bg-white/30"}`}),i.jsx("span",{className:"line-clamp-2",children:o.text})]})})]},o.id))})]})}function BX(e){const n=new DOMParser().parseFromString(e,"text/html").querySelectorAll("h2, h3"),s=[];return n.forEach((a,o)=>{var c;const l=((c=a.textContent)==null?void 0:c.trim())||"";if(l){let d=a.id;d||(d=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")||`heading-${o}`),s.push({id:d,text:l,level:a.tagName==="H2"?2:3})}}),s}function zX(e){const r=new DOMParser().parseFromString(e,"text/html");return r.querySelectorAll("h2, h3").forEach((s,a)=>{var o;if(!s.id){const l=((o=s.textContent)==null?void 0:o.trim())||"";s.id=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")||`heading-${a}`}}),r.body.innerHTML}function FX({postId:e,comments:t,setComments:r,commentsLoading:n,setCommentsLoading:s,commentName:a,setCommentName:o,commentEmail:l,setCommentEmail:c,commentText:d,setCommentText:u,commentSubmitting:h,setCommentSubmitting:f,commentSuccess:p,setCommentSuccess:m,commentError:x,setCommentError:b,replyingTo:y,setReplyingTo:v,pageLoadTime:w,theme:j,textPrimary:N,textSecondary:k,textMuted:S,cardBg:C}){g.useEffect(()=>{(async()=>{s(!0);try{const _=await xD(e,{status:"approved",include_replies:!0});_.success&&_.data&&r(_.data.comments)}catch(_){console.error("Failed to load comments:",_)}finally{s(!1)}})()},[e,r,s]);const P=async A=>{var I;if(A.preventDefault(),!d.trim()){b("Comment is required");return}const _=a.trim()||"Anonymous";f(!0),b(null),m(!1);try{const D=Math.floor((Date.now()-w.current)/1e3),$=await bD(e,_,d.trim(),{author_email:l.trim()||void 0,parent_id:y||void 0,time_on_page:D});$.success?(m(!0),u(""),v(null),a.trim()&&localStorage.setItem("blog_comment_name",a.trim()),l&&localStorage.setItem("blog_comment_email",l.trim())):b($.error||((I=$.errors)==null?void 0:I.join(", "))||"Failed to submit comment")}catch{b("Failed to submit comment")}finally{f(!1)}};g.useEffect(()=>{const A=localStorage.getItem("blog_comment_name"),_=localStorage.getItem("blog_comment_email");A&&o(A),_&&c(_)},[o,c]);const E=A=>{const _=new Date(A),D=new Date().getTime()-_.getTime(),$=Math.floor(D/6e4),L=Math.floor(D/36e5),M=Math.floor(D/864e5);return $<1?"just now":$<60?`${$} min ago`:L<24?`${L} hour${L>1?"s":""} ago`:M<7?`${M} day${M>1?"s":""} ago`:_.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},O=(A,_=!1)=>i.jsxs("div",{className:`${_?"ml-8 mt-4":""}`,children:[i.jsx("div",{className:`${C} border rounded-xl p-4`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold text-white flex-shrink-0",style:{backgroundColor:`hsl(${A.author_name.charCodeAt(0)*10%360}, 60%, 50%)`},children:A.author_name.slice(0,2).toUpperCase()}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:`font-semibold ${N}`,children:A.author_name}),i.jsx("span",{className:`text-xs ${S}`,children:E(A.created_at)})]}),i.jsx("p",{className:`text-sm ${k} whitespace-pre-wrap break-words`,children:A.content}),!_&&i.jsx("button",{onClick:()=>v(y===A.id?null:A.id),className:"mt-2 text-xs font-medium brand-text hover:underline",children:y===A.id?"Cancel Reply":"Reply"})]})]})}),A.replies&&A.replies.length>0&&i.jsx("div",{className:"space-y-3 mt-3",children:A.replies.map(I=>O(I,!0))}),y===A.id&&i.jsx("div",{className:"ml-8 mt-3",children:i.jsxs("form",{onSubmit:P,className:`${C} border rounded-xl p-4`,children:[i.jsxs("p",{className:`text-sm ${S} mb-3`,children:["Replying to ",A.author_name]}),i.jsx("textarea",{value:d,onChange:I=>u(I.target.value),placeholder:"Write your reply...",required:!0,maxLength:5e3,className:`w-full px-3 py-2 rounded-lg border ${j==="light"?"bg-white border-gray-300":"bg-neutral-800 border-white/20"} ${N} text-sm resize-none focus:outline-none focus:ring-2 focus:ring-brand/50`,rows:3}),i.jsx("div",{className:"flex justify-end mt-2",children:i.jsx("button",{type:"submit",disabled:h||!d.trim(),className:"px-4 py-2 rounded-lg brand-bg text-white text-sm font-medium hover:opacity-90 disabled:opacity-50",children:h?"Posting...":"Post Reply"})})]})})]},A.id);return i.jsxs("section",{className:`mt-16 pt-8 border-t ${j==="light"?"border-gray-200":"border-white/10"}`,children:[i.jsxs("h2",{className:`text-2xl font-bold ${N} mb-6`,children:["Comments ",t.length>0&&`(${t.length})`]}),!y&&i.jsxs("form",{onSubmit:P,className:`${C} border rounded-2xl p-6 mb-8`,children:[i.jsx("h3",{className:`text-lg font-semibold ${N} mb-4`,children:"Leave a Comment"}),p&&i.jsx("div",{className:"mb-4 p-3 rounded-lg bg-green-500/10 border border-green-500/30 text-green-600 dark:text-green-400 text-sm",children:"Comment posted successfully!"}),x&&i.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30 text-red-600 dark:text-red-400 text-sm",children:x}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:`block text-sm font-medium ${k} mb-1`,children:["Name ",i.jsx("span",{className:S,children:"(optional)"})]}),i.jsx("input",{type:"text",value:a,onChange:A=>o(A.target.value),placeholder:"Anonymous",maxLength:100,className:`w-full px-3 py-2 rounded-lg border ${j==="light"?"bg-white border-gray-300":"bg-neutral-800 border-white/20"} ${N} text-sm focus:outline-none focus:ring-2 focus:ring-brand/50`})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium ${k} mb-1`,children:"Email (optional)"}),i.jsx("input",{type:"email",value:l,onChange:A=>c(A.target.value),placeholder:"your@email.com",maxLength:200,className:`w-full px-3 py-2 rounded-lg border ${j==="light"?"bg-white border-gray-300":"bg-neutral-800 border-white/20"} ${N} text-sm focus:outline-none focus:ring-2 focus:ring-brand/50`})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:`block text-sm font-medium ${k} mb-1`,children:"Comment *"}),i.jsx("textarea",{value:d,onChange:A=>u(A.target.value),placeholder:"Share your thoughts...",required:!0,maxLength:5e3,className:`w-full px-3 py-2 rounded-lg border ${j==="light"?"bg-white border-gray-300":"bg-neutral-800 border-white/20"} ${N} text-sm resize-none focus:outline-none focus:ring-2 focus:ring-brand/50`,rows:4}),i.jsxs("p",{className:`text-xs ${S} mt-1`,children:[d.length,"/5000 characters"]})]}),i.jsx("input",{type:"text",name:"website",style:{display:"none"},tabIndex:-1,autoComplete:"off"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:`text-xs ${S}`,children:"Be respectful and keep it civil."}),i.jsx("button",{type:"submit",disabled:h||!d.trim(),className:"px-6 py-2.5 rounded-lg brand-bg text-white font-medium hover:opacity-90 disabled:opacity-50 transition-opacity",children:h?"Posting...":"Post Comment"})]})]}),n?i.jsx("div",{className:`text-center py-8 ${S}`,children:"Loading comments..."}):t.length===0?i.jsx("div",{className:`text-center py-8 ${S}`,children:"No comments yet. Be the first to share your thoughts!"}):i.jsx("div",{className:"space-y-4",children:t.map(A=>O(A))})]})}function HX(){var H,J,ie,we;const{theme:e}=Wt(),{slug:t}=Id(),r=Fo(),[n,s]=g.useState(null),[a,o]=g.useState([]),[l,c]=g.useState(null),[d,u]=g.useState(!0),[h,f]=g.useState(null),[p,m]=g.useState(!1),[x,b]=g.useState(0),[y,v]=g.useState(!1),w=g.useRef(!1),[j,N]=g.useState([]),[k,S]=g.useState(!1),[C,P]=g.useState(""),[E,O]=g.useState(""),[A,_]=g.useState(""),[I,D]=g.useState(!1),[$,L]=g.useState(!1),[M,T]=g.useState(null),[G,Y]=g.useState(null),ee=g.useRef(Date.now()),[R,B]=g.useState(null),q=e==="light"?"text-gray-900":"text-white",X=e==="light"?"text-gray-700":"text-neutral-200",ue=e==="light"?"text-gray-500":"text-neutral-400",U=e==="light"?"bg-white/60 border-gray-200 backdrop-blur-xl":"bg-neutral-900/60 border-white/10 backdrop-blur-xl",{tocItems:V,processedHtml:ge}=g.useMemo(()=>{if(!(n!=null&&n.content_html))return{tocItems:[],processedHtml:""};const re=BX(n.content_html),oe=zX(n.content_html);return{tocItems:re,processedHtml:oe}},[n==null?void 0:n.content_html]);g.useEffect(()=>{if(!ge)return;const re=setTimeout(()=>{LX()},100);return()=>clearTimeout(re)},[ge]),g.useEffect(()=>{if(V.length===0)return;const re=new IntersectionObserver(oe=>{oe.forEach(Fe=>{Fe.isIntersecting&&B(Fe.target.id)})},{rootMargin:"-100px 0px -70% 0px",threshold:0});return V.forEach(oe=>{const Fe=document.getElementById(oe.id);Fe&&re.observe(Fe)}),()=>re.disconnect()},[V]),g.useEffect(()=>((async()=>{var oe;if(!t){r("/blog");return}u(!0),f(null);try{const Fe=await sD(t,!0);if(!Fe.success||!Fe.post){f(Fe.error||"Post not found");return}if(s(Fe.post),Fe.related_posts)o(Fe.related_posts);else{const rt=await Lx({limit:3,status:"published",category:(oe=Fe.post.categories)==null?void 0:oe[0]});rt.success&&o(rt.posts.filter(F=>F.id!==Fe.post.id).slice(0,3))}try{const F=await(await fetch("/api/author/get.php")).json();F.success&&c(F.profile)}catch{console.log("Author profile not available, continuing without it")}document.title=`${Fe.post.title} | Blog`,le(Fe.post);try{const rt=await gD(Fe.post.id);b(rt.like_count||0),m(rt.user_liked||!1)}catch{console.log("Like status not available, using defaults"),b(0),m(!1)}}catch(Fe){console.error("Error loading blog post:",Fe)}finally{u(!1)}})(),()=>{document.title="Blog"}),[t,r]),g.useEffect(()=>(n&&!w.current&&(w.current=!0,fD(n.id,n.slug).catch(console.error)),()=>{w.current=!1}),[n==null?void 0:n.id,n==null?void 0:n.slug]);const te=async()=>{if(console.log("Like button clicked",{post:n,isLiking:y,liked:p}),!n||y||p){console.log("Like blocked:",{noPost:!n,isLiking:y,alreadyLiked:p});return}v(!0);try{console.log("Calling trackBlogLike with:",n.id,n.slug);const re=await pD(n.id,n.slug);console.log("trackBlogLike result:",re),re.success&&(b(re.like_count||0),m(re.user_liked||!1),console.log("Like successful, count:",re.like_count,"user_liked:",re.user_liked))}catch(re){console.error("Failed to like post:",re)}finally{v(!1)}},z=async(re,oe)=>{n&&mD(n.id,n.slug,re).catch(console.error),oe()},le=re=>{var F,ae;const oe=(Ie,at,We=!1)=>{const fr=We?"property":"name";let ut=document.querySelector(`meta[${fr}="${Ie}"]`);ut||(ut=document.createElement("meta"),ut.setAttribute(fr,Ie),document.head.appendChild(ut)),ut.setAttribute("content",at)};oe("description",re.meta_description||re.excerpt||""),re.primary_keywords&&oe("keywords",re.primary_keywords),oe("og:title",re.og_title||re.title,!0),oe("og:description",re.og_description||re.meta_description||re.excerpt||"",!0),oe("og:type","article",!0),oe("og:url",window.location.href,!0),re.cover_image&&oe("og:image",re.cover_image,!0),oe("twitter:card","summary_large_image"),oe("twitter:title",re.og_title||re.title),oe("twitter:description",re.og_description||re.meta_description||re.excerpt||""),re.cover_image&&oe("twitter:image",re.cover_image),re.published_at&&oe("article:published_time",re.published_at,!0),re.updated_at&&oe("article:modified_time",re.updated_at,!0),(F=re.tags)==null||F.forEach(Ie=>{oe("article:tag",Ie,!0)});const Fe={"@context":"https://schema.org","@type":"BlogPosting",headline:re.title,description:re.meta_description||re.excerpt,image:re.cover_image,datePublished:re.published_at,dateModified:re.updated_at,author:{"@type":"Person",name:re.author_name||(l==null?void 0:l.name)},keywords:(ae=re.tags)==null?void 0:ae.join(", ")};let rt=document.querySelector('script[type="application/ld+json"]');rt||(rt=document.createElement("script"),rt.setAttribute("type","application/ld+json"),document.head.appendChild(rt)),rt.textContent=JSON.stringify(Fe)},ne=typeof window<"u"?window.location.href:"",be=(n==null?void 0:n.title)||"",ye=()=>{window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(be)}&url=${encodeURIComponent(ne)}`,"_blank","width=600,height=400")},Se=()=>{window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(ne)}`,"_blank","width=600,height=400")},He=()=>{window.open(`https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(ne)}&title=${encodeURIComponent(be)}`,"_blank","width=600,height=400")},st=()=>{navigator.clipboard.writeText(ne)};return d?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:`text-lg ${X}`,children:"Loading..."})}):h||!n?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:`${U} border rounded-2xl p-8 text-center max-w-md`,children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h2",{className:`text-xl font-bold ${q} mb-2`,children:"Post Not Found"}),i.jsx("p",{className:X+" mb-4",children:h||"This blog post does not exist or has been removed."}),i.jsx(Me,{to:"/blog",className:"brand-bg text-white px-4 py-2 rounded-lg hover:opacity-90 inline-block",children:"Back to Blog"})]})}):i.jsxs("div",{className:`min-h-screen ${q}`,children:[i.jsx(Xr,{breadcrumbs:[{label:"Blog",path:"/blog"},...(H=n.categories)!=null&&H[0]?[{label:n.categories[0],path:`/blog/category/${n.categories[0].toLowerCase().replace(/\s+/g,"-")}`}]:[],{label:n.title}]}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 my-8",children:i.jsxs("div",{className:`flex gap-8 ${V.length>0?"lg:flex-row":""} flex-col`,children:[i.jsxs("article",{className:`flex-1 min-w-0 pb-16 ${e==="light"?"bg-white/80":"bg-black/40"} backdrop-blur-xl rounded-2xl py-8 px-6 lg:px-10`,children:[i.jsxs("header",{className:"mb-8",children:[n.categories&&n.categories.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n.categories.map((re,oe)=>i.jsx(Me,{to:`/blog/category/${re.toLowerCase().replace(/\s+/g,"-")}`,className:"text-sm font-medium brand-text uppercase tracking-wider hover:underline",children:re},oe))}),i.jsx("h1",{className:`text-3xl md:text-4xl lg:text-5xl font-extrabold ${q} mb-4 leading-tight`,children:n.title}),i.jsxs("div",{className:`flex flex-wrap items-center gap-4 text-sm ${ue} mb-6`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[l!=null&&l.profile_image?i.jsx("img",{src:l.profile_image,alt:l.name,className:"w-8 h-8 rounded-full object-cover"}):i.jsx("div",{className:"w-8 h-8 rounded-full brand-bg flex items-center justify-center text-xs font-bold text-white",children:((J=l==null?void 0:l.name)==null?void 0:J.slice(0,2).toUpperCase())||"AU"}),i.jsx("span",{className:X,children:n.author_name||(l==null?void 0:l.name)||"Author"})]}),i.jsx("span",{children:""}),i.jsx("time",{dateTime:n.published_at||void 0,children:n.published_at?MN(n.published_at):"Draft"}),n.reading_time&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:""}),i.jsxs("span",{children:[n.reading_time," min read"]})]}),n.universe_tag&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:""}),i.jsx(Me,{to:`/blog/universe/${n.universe_tag.toLowerCase().replace(/\s+/g,"-")}`,className:"brand-text hover:underline",children:n.universe_tag})]})]}),n.cover_image&&i.jsxs("div",{className:"relative rounded-2xl overflow-hidden mb-8 shadow-2xl",children:[i.jsx("img",{src:n.cover_image,alt:n.title,className:"w-full h-64 md:h-96 object-cover"}),((ie=n.featured_image)==null?void 0:ie.prompt)&&i.jsxs("details",{className:`absolute bottom-0 left-0 right-0 ${U} p-4`,children:[i.jsx("summary",{className:`cursor-pointer text-sm font-medium ${X}`,children:"AI Generation Info"}),i.jsxs("div",{className:`mt-2 text-sm ${ue}`,children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Prompt:"})," ",n.featured_image.prompt]}),n.featured_image.checkpoint&&i.jsxs("p",{children:[i.jsx("strong",{children:"Model:"})," ",n.featured_image.checkpoint]})]})]})]})]}),i.jsx("div",{className:`prose prose-lg max-w-none ${e==="dark"?"prose-invert":""} prose-headings:font-bold prose-a:brand-text prose-a:no-underline hover:prose-a:underline prose-img:rounded-xl prose-blockquote:border-l-4 prose-blockquote:brand-border prose-code:brand-text`,dangerouslySetInnerHTML:{__html:ge||n.content_html}}),n.tags&&n.tags.length>0&&i.jsxs("div",{className:`mt-8 pt-8 border-t ${e==="light"?"border-gray-200":"border-white/10"}`,children:[i.jsx("h3",{className:`text-sm font-medium ${ue} mb-3`,children:"Tags"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map((re,oe)=>i.jsxs(Me,{to:`/blog/tag/${re.toLowerCase().replace(/\s+/g,"-")}`,className:`px-3 py-1.5 rounded-full text-sm ${e==="light"?"bg-gray-100 hover:bg-gray-200":"bg-white/10 hover:bg-white/20"} ${X} hover:brand-text transition-colors`,children:["#",re]},oe))})]}),i.jsxs("div",{className:`mt-8 pt-8 border-t ${e==="light"?"border-gray-200":"border-white/10"}`,children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[i.jsxs("button",{onClick:te,disabled:y||p,className:`flex items-center gap-2 px-5 py-2.5 rounded-full font-medium transition-all ${p?"bg-red-500 text-white cursor-default":e==="light"?"bg-gray-100 hover:bg-red-50 hover:text-red-500 text-gray-700":"bg-white/10 hover:bg-red-500/20 hover:text-red-400 text-neutral-200"} ${y?"opacity-50":""}`,children:[i.jsx("svg",{className:`w-5 h-5 ${p?"fill-current":""}`,fill:p?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:p?0:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),i.jsx("span",{children:p?"Liked":"Like"}),x>0&&i.jsxs("span",{className:`text-sm ${p?"text-white/80":ue}`,children:["(",x,")"]})]}),i.jsx("span",{className:ue,children:"Share this post"})]}),i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs("button",{onClick:()=>z("twitter",ye),className:`flex items-center gap-2 px-4 py-2 rounded-lg ${e==="light"?"bg-gray-100 hover:bg-gray-200":"bg-white/10 hover:bg-white/20"} ${X} transition-colors`,children:[i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),i.jsx("span",{className:"text-sm font-medium",children:"Twitter"})]}),i.jsxs("button",{onClick:()=>z("facebook",Se),className:`flex items-center gap-2 px-4 py-2 rounded-lg ${e==="light"?"bg-gray-100 hover:bg-gray-200":"bg-white/10 hover:bg-white/20"} ${X} transition-colors`,children:[i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),i.jsx("span",{className:"text-sm font-medium",children:"Facebook"})]}),i.jsxs("button",{onClick:()=>z("linkedin",He),className:`flex items-center gap-2 px-4 py-2 rounded-lg ${e==="light"?"bg-gray-100 hover:bg-gray-200":"bg-white/10 hover:bg-white/20"} ${X} transition-colors`,children:[i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),i.jsx("span",{className:"text-sm font-medium",children:"LinkedIn"})]}),i.jsxs("button",{onClick:()=>z("copy_link",st),className:`flex items-center gap-2 px-4 py-2 rounded-lg ${e==="light"?"bg-gray-100 hover:bg-gray-200":"bg-white/10 hover:bg-white/20"} ${X} transition-colors`,children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),i.jsx("span",{className:"text-sm font-medium",children:"Copy Link"})]})]})]}),l&&i.jsx("div",{className:`mt-8 ${U} border rounded-2xl p-6`,children:i.jsxs("div",{className:"flex items-start gap-4",children:[l.profile_image?i.jsx("img",{src:l.profile_image,alt:l.name,className:"w-16 h-16 rounded-full object-cover flex-shrink-0"}):i.jsx("div",{className:"w-16 h-16 rounded-full brand-bg flex items-center justify-center text-xl font-bold text-white flex-shrink-0",children:(we=l.name)==null?void 0:we.slice(0,2).toUpperCase()}),i.jsxs("div",{children:[i.jsx("h3",{className:`text-lg font-bold ${q}`,children:l.name}),i.jsx("p",{className:`text-sm ${ue} mb-2`,children:l.tagline}),i.jsx("p",{className:`text-sm ${X}`,children:l.bio}),i.jsx(Me,{to:"/",className:"mt-3 inline-block text-sm font-medium brand-text hover:underline",children:"View all posts "})]})]})}),a.length>0&&i.jsxs("section",{className:"mt-16",children:[i.jsx("h2",{className:`text-2xl font-bold ${q} mb-6`,children:"Related Posts"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.map(re=>i.jsx(yD,{post:re,theme:e},re.id))})]}),i.jsx(FX,{postId:n.id,comments:j,setComments:N,commentsLoading:k,setCommentsLoading:S,commentName:C,setCommentName:P,commentEmail:E,setCommentEmail:O,commentText:A,setCommentText:_,commentSubmitting:I,setCommentSubmitting:D,commentSuccess:$,setCommentSuccess:L,commentError:M,setCommentError:T,replyingTo:G,setReplyingTo:Y,pageLoadTime:ee,theme:e,textPrimary:q,textSecondary:X,textMuted:ue,cardBg:U}),i.jsxs("div",{className:`mt-8 ${U} border rounded-2xl p-6`,children:[i.jsx("h3",{className:`text-xl font-bold ${q} mb-4 text-center`,children:" Enjoyed this post?"}),i.jsx("p",{className:`text-sm ${X} text-center mb-6`,children:"Get notified when I publish new content, or support me on Patreon for exclusive access."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsx(pa,{variant:"button",source:"blog_post_bottom"}),i.jsx(Tx,{variant:"button"})]})]})]}),V.length>0&&i.jsxs("aside",{className:"hidden lg:flex w-64 flex-shrink-0 flex-col gap-4",children:[i.jsx(RX,{items:V,activeId:R,textPrimary:q,textSecondary:X,cardBg:U}),i.jsx(pa,{variant:"card",source:"blog_post_top",className:`sticky top-36 ${U}`})]})]})}),i.jsx("footer",{className:`border-t ${e==="light"?"border-gray-200":"border-white/10"}`,children:i.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx(ar,{variant:"footer",showCopyright:!1}),i.jsxs("div",{className:`text-center text-xs pt-4 ${ue}`,children:[" ",new Date().getFullYear()," ",(l==null?void 0:l.name)||"Author",". All rights reserved."]})]})})]})}function UX(){const[e,t]=g.useState(null),[r,n]=g.useState(null),[s,a]=g.useState(()=>localStorage.getItem("theme")||"dark");g.useEffect(()=>{fetch("/api/author/get.php").then(h=>h.json()).then(h=>{h.success&&t(h.profile)}).catch(h=>{console.error("Failed to fetch author profile:",h)}),fetch("/api/homepage/settings.php").then(h=>h.json()).then(h=>{h.success&&n(h.settings)}).catch(h=>{console.error("Failed to fetch homepage settings:",h)});const u=setInterval(()=>{const h=localStorage.getItem("theme");a(h||"dark")},100);return()=>clearInterval(u)},[]);const o=e?s==="light"?$r(e.background_image_light||e.background_image,"/images/lofi_light_bg.webp"):$r(e.background_image_dark||e.background_image,"/images/lofi_bg.webp"):s==="light"?"/images/lofi_light_bg.webp":"/images/lofi_bg.webp",l=s==="light"?"bg-white/60":"bg-black/40",c=s==="light"?(r==null?void 0:r.brand_color)||"#10b981":(r==null?void 0:r.brand_color_dark)||"#10b981";return i.jsxs("div",{className:"relative font-sans min-h-screen transition-colors duration-200",children:[i.jsx("style",{children:`
        :root { --brand-color: ${c}; }
        .brand-bg { background-color: ${c}; }
        .brand-text { color: ${c}; }
        .brand-border { border-color: ${c}; }
      `}),i.jsx("div",{className:"fixed inset-0 -z-10 bg-no-repeat bg-cover bg-center",style:{backgroundImage:`url('${o}')`,backgroundColor:s==="light"?"#f7f7f7":"#0a0a0a"}}),i.jsx("div",{className:`fixed inset-0 ${l} -z-10`}),i.jsx("div",{className:"relative z-10",children:i.jsxs(Ld,{children:[i.jsx(Ve,{path:"/",element:i.jsx(Lp,{})}),i.jsx(Ve,{path:"/category/:category",element:i.jsx(Lp,{})}),i.jsx(Ve,{path:"/tag/:tag",element:i.jsx(Lp,{})}),i.jsx(Ve,{path:"/universe/:universe",element:i.jsx(Lp,{})}),i.jsx(Ve,{path:"/:slug",element:i.jsx(HX,{})})]})})]})}function WX(){const[e,t]=g.useState([]),[r,n]=g.useState(null),[s,a]=g.useState([]),[o,l]=g.useState(!1),[c,d]=g.useState(null),[u,h]=g.useState(null),[f,p]=g.useState(!1),[m,x]=g.useState(null),[b,y]=g.useState({title:"",slug:"",description:"",homepage_description:"",tagline:"",genres:[],primary_keywords:"",longtail_keywords:"",target_audience:"",cover_image:"",break_image:"",enable_drop_cap:!1,drop_cap_font:"serif",status:"draft",external_links:[],latest_chapter_number:null,latest_chapter_title:"",cta_text:"",show_on_homepage:!0}),[v,w]=g.useState(!1),[j,N]=g.useState(!1),[k,S]=g.useState([]),[C,P]=g.useState(!1),[E,O]=g.useState("upload"),A=H=>H.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim().replace(/^-+|-+$/g,""),_=async(H,J)=>{const ie=new FormData;ie.append("image",H),ie.append("type",J==="cover"?"cover":"pagebreak");const we=await fetch("/api/images/upload.php",{method:"POST",credentials:"same-origin",body:ie});if(!we.ok){const oe=await we.text();throw new Error(oe||"Failed to upload image")}return(await we.json()).url},I=async H=>{var ie;const J=(ie=H.target.files)==null?void 0:ie[0];if(J){w(!0),d(null);try{const we=await _(J,"cover");y(re=>({...re,cover_image:we})),h("Cover image uploaded successfully!")}catch(we){d(we.message||"Failed to upload cover image")}finally{w(!1)}}},D=async H=>{var ie;const J=(ie=H.target.files)==null?void 0:ie[0];if(J){N(!0),d(null);try{const we=await _(J,"break");y(re=>({...re,break_image:we})),h("Page break image uploaded successfully!")}catch(we){d(we.message||"Failed to upload page break image")}finally{N(!1)}}},$=async()=>{try{const H=await fetch("/api/images/list-pagebreaks.php",{credentials:"same-origin"});if(!H.ok)throw new Error("Failed to load page breaks");const J=await H.json();S(J.images||[])}catch(H){console.error("Failed to load page breaks:",H),S([])}},L=H=>{y(J=>({...J,break_image:H})),P(!1),h("Page break image selected!")},[M,T]=g.useState(!1),[G,Y]=g.useState(null),[ee,R]=g.useState({title:"",slug:"",content:"",soundtrack_url:"",chapter_number:1,status:"draft"}),[B,q]=g.useState(!1),[X,ue]=g.useState(null);g.useEffect(()=>{U()},[]);const U=async()=>{l(!0),d(null);try{const H=await fetch("/api/stories/list.php",{credentials:"same-origin"});if(!H.ok)throw new Error("Failed to load stories");const J=await H.json();t(J.stories||[])}catch(H){d(H.message||"Failed to load stories")}finally{l(!1)}},V=async H=>{l(!0),d(null);try{const J=await fetch(`/api/chapters/list.php?story_id=${H}&limit=1000`,{credentials:"same-origin"});if(!J.ok)throw new Error("Failed to load chapters");const ie=await J.json();a(ie.chapters||[])}catch(J){d(J.message||"Failed to load chapters")}finally{l(!1)}},ge=async H=>{H.preventDefault(),l(!0),d(null),h(null);try{const J=m?"/api/stories/update.php":"/api/stories/create.php",ie=m?{id:m.id,...b}:b,we=await fetch(J,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(ie)});if(!we.ok){const re=await we.text();throw new Error(re||"Failed to save story")}h(m?"Story updated successfully!":"Story created successfully!"),p(!1),x(null),y({title:"",slug:"",description:"",homepage_description:"",tagline:"",genres:[],primary_keywords:"",longtail_keywords:"",target_audience:"",cover_image:"",break_image:"",enable_drop_cap:!1,drop_cap_font:"serif",status:"draft",external_links:[],latest_chapter_number:null,latest_chapter_title:"",cta_text:"",show_on_homepage:!0}),await U()}catch(J){d(J.message||"Failed to save story")}finally{l(!1)}},te=async H=>{if(H.preventDefault(),!!r){l(!0),d(null),h(null);try{const J=G?"/api/chapters/update.php":"/api/chapters/create.php",ie=G?{id:G.id,...ee}:{...ee,story_id:r.id},we=await fetch(J,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(ie)});if(!we.ok){const re=await we.text();throw new Error(re||"Failed to save chapter")}h(G?"Chapter updated successfully!":"Chapter created successfully!"),T(!1),Y(null),R({title:"",slug:"",content:"",soundtrack_url:"",chapter_number:1,status:"draft"}),await V(r.id)}catch(J){d(J.message||"Failed to save chapter")}finally{l(!1)}}},z=async H=>{if(confirm(`Are you sure you want to delete "${H.title}"? This will also delete all chapters in this story.`)){l(!0),d(null);try{const J=await fetch("/api/stories/delete.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:H.id})});if(!J.ok){const ie=await J.text();throw new Error(ie||"Failed to delete story")}h("Story deleted successfully!"),(r==null?void 0:r.id)===H.id&&(n(null),a([])),await U()}catch(J){d(J.message||"Failed to delete story")}finally{l(!1)}}},le=async H=>{if(confirm("Are you sure you want to delete this chapter?")){l(!0),d(null);try{const J=await fetch("/api/chapters/delete.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:H})});if(!J.ok){const ie=await J.text();throw new Error(ie||"Failed to delete chapter")}h("Chapter deleted successfully!"),r&&await V(r.id)}catch(J){d(J.message||"Failed to delete chapter")}finally{l(!1)}}},ne=H=>H.filter(J=>J.status!=="published").length,be=async()=>{if(r){l(!0),d(null),h(null);try{const J=await(await fetch("/api/chapters/bulk-publish.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({story_id:r.id,dry_run:!0})})).json().catch(()=>({})),ie=typeof(J==null?void 0:J.would_affect)=="number"?J.would_affect:0;if(ie<=0){h("No drafts to publish for this story.");return}if(!confirm(`Publish ${ie} chapter(s) for "${r.title}"?`))return;const re=await fetch("/api/chapters/bulk-publish.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({story_id:r.id})});if(!re.ok){const rt=await re.text();throw new Error(rt||"Failed to publish chapters")}const oe=await re.json().catch(()=>({})),Fe=typeof(oe==null?void 0:oe.affected)=="number"?oe.affected:ie;h(`Published ${Fe} chapter(s).`),await V(r.id),await U()}catch(H){d(H.message||"Failed to publish chapters")}finally{l(!1)}}},ye=H=>{x(H),y({title:H.title,slug:H.slug,description:H.description||"",homepage_description:H.homepage_description||"",tagline:H.tagline||"",genres:H.genres||[],primary_keywords:H.primary_keywords||"",longtail_keywords:H.longtail_keywords||"",target_audience:H.target_audience||"",cover_image:H.cover_image||"",break_image:H.break_image||"",enable_drop_cap:H.enable_drop_cap||!1,drop_cap_font:H.drop_cap_font||"serif",status:H.status,external_links:H.external_links||[],latest_chapter_number:H.latest_chapter_number||null,latest_chapter_title:H.latest_chapter_title||"",cta_text:H.cta_text||"",show_on_homepage:H.show_on_homepage!==!1}),O("upload"),$(),p(!0)},Se=H=>{Y(H),R({title:H.title,slug:H.slug,content:H.content,soundtrack_url:H.soundtrack_url||"",chapter_number:H.chapter_number,status:H.status}),T(!0)},He=()=>s.length===0?1:Math.max(...s.map(H=>H.chapter_number))+1,st=async H=>{const J=H.target.files;if(!(!J||J.length===0||!r)){q(!0),d(null),ue(null);try{const ie=new FormData;ie.append("story_id",r.id.toString());for(let oe=0;oe<J.length;oe++)ie.append("markdown_files[]",J[oe]);const we=await fetch("/api/chapters/bulk-upload.php",{method:"POST",credentials:"same-origin",body:ie});if(!we.ok){const oe=await we.text();throw new Error(oe||"Failed to upload chapters")}const re=await we.json();ue(re),re.success&&(h(`Successfully uploaded ${re.uploaded_count} chapters!`),await V(r.id)),re.errors&&re.errors.length>0&&d(`Some files had errors: ${re.errors.join(", ")}`)}catch(ie){d(ie.message||"Failed to upload chapters")}finally{q(!1),H.target.value=""}}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Story Manager"}),i.jsx("button",{onClick:()=>{p(!0),x(null),y({title:"",slug:"",description:"",homepage_description:"",tagline:"",genres:[],primary_keywords:"",longtail_keywords:"",target_audience:"",cover_image:"",break_image:"",enable_drop_cap:!1,drop_cap_font:"serif",status:"draft",external_links:[],latest_chapter_number:null,latest_chapter_title:"",cta_text:"",show_on_homepage:!0}),O("upload"),$()},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Story"})]}),c&&i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg",children:c}),u&&i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400 px-4 py-3 rounded-lg",children:u}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg w-full max-w-2xl max-h-[95vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:m?"Edit Story":"Create Story"}),i.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),i.jsx("input",{type:"text",value:b.title,onChange:H=>{const J=H.target.value;y(ie=>({...ie,title:J,slug:m?ie.slug:A(J)}))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Slug (auto-generated)"}),i.jsx("input",{type:"text",value:b.slug,onChange:H=>y(J=>({...J,slug:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white bg-gray-50 dark:bg-gray-600",required:!0,placeholder:"Will be auto-generated from title"}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Used in URLs: /story/",b.slug||"your-story-slug"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Full - for story pages)"}),i.jsx("textarea",{value:b.description,onChange:H=>y(J=>({...J,description:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white font-mono text-sm",rows:4,placeholder:"Full description with markdown and color tags..."}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Supports markdown with color tags. Used on story detail pages."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Homepage Description (Short - plain text)"}),i.jsx("textarea",{value:b.homepage_description,onChange:H=>y(J=>({...J,homepage_description:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",rows:3,placeholder:"A simplified, plain text description for the homepage..."}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Plain text only. This will appear on homepage cards and featured story section."})]}),i.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[i.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"Homepage Display"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:b.show_on_homepage,onChange:H=>y(J=>({...J,show_on_homepage:H.target.checked})),className:"w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Show on Homepage"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:'When enabled, this story will appear in the "Explore the universes" grid on the homepage'})]})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tagline"}),i.jsx("input",{type:"text",value:b.tagline,onChange:H=>y(J=>({...J,tagline:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"A short, catchy tagline for the story"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Short tagline shown below the title on the homepage"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Call-to-Action Text"}),i.jsx("input",{type:"text",value:b.cta_text,onChange:H=>y(J=>({...J,cta_text:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Start Reading"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Button text (default: "Start Reading")'})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Latest Chapter Number"}),i.jsx("input",{type:"number",min:"0",value:b.latest_chapter_number??"",onChange:H=>y(J=>({...J,latest_chapter_number:H.target.value?parseInt(H.target.value):null})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"42"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Current chapter number on external platforms"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Latest Chapter Title"}),i.jsx("input",{type:"text",value:b.latest_chapter_title,onChange:H=>y(J=>({...J,latest_chapter_title:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"The Final Battle"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Title of the latest chapter"})]})]})]})]}),i.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[i.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"SEO & Marketing"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Genres"}),b.genres.length>0&&i.jsxs("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[i.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Selected Genres:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:b.genres.map((H,J)=>i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:[H,i.jsx("button",{type:"button",onClick:()=>{const ie=b.genres.filter((we,re)=>re!==J);y(we=>({...we,genres:ie}))},className:"ml-1 text-blue-600 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-100",children:""})]},J))})]}),i.jsxs("div",{className:"space-y-4 max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Sci-Fi"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["Science Fiction","Space Opera","Cyberpunk","Dystopian","Post-Apocalyptic","Time Travel","Alternate History","Hard Science Fiction","Soft Science Fiction","Military Sci-Fi"].map(H=>i.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:b.genres.includes(H),onChange:J=>{J.target.checked?y(ie=>({...ie,genres:[...ie.genres,H]})):y(ie=>({...ie,genres:ie.genres.filter(we=>we!==H)}))},className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:H})]},H))})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Fantasy/Magic"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["High Fantasy","Urban Fantasy","Dark Fantasy","Epic Fantasy","Sword and Sorcery","Magical Realism","Paranormal","Supernatural","Mythology","Fairy Tale Retelling"].map(H=>i.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:b.genres.includes(H),onChange:J=>{J.target.checked?y(ie=>({...ie,genres:[...ie.genres,H]})):y(ie=>({...ie,genres:ie.genres.filter(we=>we!==H)}))},className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:H})]},H))})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Web Fiction"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["LitRPG","GameLit","Progression Fantasy","Cultivation","System Apocalypse","Portal Fantasy","Isekai","Virtual Reality","Artificial Intelligence","Genetic Engineering"].map(H=>i.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:b.genres.includes(H),onChange:J=>{J.target.checked?y(ie=>({...ie,genres:[...ie.genres,H]})):y(ie=>({...ie,genres:ie.genres.filter(we=>we!==H)}))},className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:H})]},H))})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Erotica/Adult"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["Erotica","Romance","Erotic Romance","BDSM","Harem","Reverse Harem","Adult Fantasy","Adult Sci-Fi","Steamy Romance"].map(H=>i.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:b.genres.includes(H),onChange:J=>{J.target.checked?y(ie=>({...ie,genres:[...ie.genres,H]})):y(ie=>({...ie,genres:ie.genres.filter(we=>we!==H)}))},className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:H})]},H))})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Themes/Elements"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["Adventure","Action","Drama","Comedy","Thriller","Mystery","Horror","Slice of Life","Coming of Age"].map(H=>i.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:b.genres.includes(H),onChange:J=>{J.target.checked?y(ie=>({...ie,genres:[...ie.genres,H]})):y(ie=>({...ie,genres:ie.genres.filter(we=>we!==H)}))},className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:H})]},H))})]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Select multiple genres that best describe your story"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Primary Keywords"}),i.jsx("input",{type:"text",value:b.primary_keywords,onChange:H=>y(J=>({...J,primary_keywords:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"adventure story, online novel, web serial"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Main SEO keywords, comma-separated"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Long-tail Keywords"}),i.jsx("textarea",{value:b.longtail_keywords,onChange:H=>y(J=>({...J,longtail_keywords:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",rows:2,placeholder:"free sci-fi story online, destiny among the stars web novel, AI generated sci-fi artwork, space colonization fiction"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Specific search phrases your target audience might use"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target Audience"}),i.jsx("input",{type:"text",value:b.target_audience,onChange:H=>y(J=>({...J,target_audience:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Readers, story enthusiasts, novel fans"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Describe your ideal readers for better targeting"})]})]})]}),i.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[i.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"External Links (RoyalRoad, Patreon, etc.)"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Add links to external platforms where this story is published (e.g., RoyalRoad, Patreon, Amazon, ScribbleHub). These will appear as clickable links on the homepage featured story section and the story pages."}),i.jsxs("div",{className:"space-y-2",children:[(b.external_links||[]).map((H,J)=>i.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[i.jsx("input",{type:"text",value:H.label,onChange:ie=>y(we=>{const re=[...we.external_links||[]];return re[J]={...re[J],label:ie.target.value},{...we,external_links:re}}),className:"w-full md:w-48 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Platform (e.g., Amazon)"}),i.jsxs("div",{className:"flex items-center gap-2 w-full",children:[i.jsx("input",{type:"url",value:H.url,onChange:ie=>y(we=>{const re=[...we.external_links||[]];return re[J]={...re[J],url:ie.target.value},{...we,external_links:re}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"https://example.com/your-story"}),i.jsx("button",{type:"button",onClick:()=>y(ie=>({...ie,external_links:(ie.external_links||[]).filter((we,re)=>re!==J)})),className:"px-3 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700",title:"Remove link",children:"Remove"})]})]},J)),i.jsx("button",{type:"button",onClick:()=>y(H=>({...H,external_links:[...H.external_links||[],{label:"",url:""}]})),className:"mt-2 px-3 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 text-sm",children:"+ Add Link"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cover Image"}),b.cover_image?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"relative inline-block",children:[i.jsx("img",{src:b.cover_image,alt:"Cover preview",className:"w-32 h-48 object-cover rounded-lg border border-gray-300 dark:border-gray-600"}),i.jsx("button",{type:"button",onClick:()=>y(H=>({...H,cover_image:""})),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm hover:bg-red-600",children:""})]}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("label",{className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 cursor-pointer text-sm",children:[v?"Uploading...":"Change Cover",i.jsx("input",{type:"file",accept:"image/*",onChange:I,className:"hidden",disabled:v})]})})]}):i.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-gray-400",children:i.jsx("svg",{className:"mx-auto h-12 w-12",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:i.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:i.jsxs("label",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 cursor-pointer",children:[v?"Uploading...":"Upload Cover Image",i.jsx("input",{type:"file",accept:"image/*",onChange:I,className:"hidden",disabled:v})]})}),i.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Page Break Image (Optional)"}),i.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[i.jsx("button",{type:"button",onClick:()=>O("upload"),className:`px-3 py-1 text-xs rounded-md transition-colors ${E==="upload"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Upload New"}),i.jsx("button",{type:"button",onClick:()=>O("select"),className:`px-3 py-1 text-xs rounded-md transition-colors ${E==="select"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Choose Existing"})]})]}),b.break_image?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"relative inline-block",children:[i.jsx("img",{src:b.break_image,alt:"Page break preview",className:"w-24 h-6 object-cover rounded border border-gray-300 dark:border-gray-600"}),i.jsx("button",{type:"button",onClick:()=>y(H=>({...H,break_image:""})),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600",children:""})]}),i.jsx("div",{className:"flex gap-2",children:E==="upload"?i.jsxs("label",{className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 cursor-pointer text-sm",children:[j?"Uploading...":"Change Image",i.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"hidden",disabled:j})]}):i.jsx("button",{type:"button",onClick:()=>P(!0),className:"bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 text-sm",children:"Choose Different"})})]}):i.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center",children:E==="upload"?i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:i.jsxs("label",{className:"bg-gray-600 text-white px-3 py-2 rounded-lg hover:bg-gray-700 cursor-pointer text-sm",children:[j?"Uploading...":"Upload Page Break Image",i.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"hidden",disabled:j})]})}),i.jsx("p",{className:"text-xs text-gray-500",children:"Replaces --- in chapter content"})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{type:"button",onClick:()=>P(!0),className:"bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 text-sm",children:"Choose from Existing Images"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Select from previously uploaded page break images"})]})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:b.enable_drop_cap,onChange:H=>y(J=>({...J,enable_drop_cap:H.target.checked})),className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable Drop Cap (Manuscript Style)"})]}),i.jsx("p",{className:"text-xs text-gray-500 ml-6",children:"When enabled, the first letter of each chapter will be larger and top-aligned (traditional manuscript style)"}),b.enable_drop_cap&&i.jsxs("div",{className:"ml-6 mt-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Drop Cap Font Style"}),i.jsxs("select",{value:b.drop_cap_font,onChange:H=>y(J=>({...J,drop_cap_font:H.target.value})),className:"w-full max-w-xs px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"serif",children:"Classic Serif (Default)"}),i.jsx("option",{value:"cinzel",children:"Cinzel (Elegant Roman)"}),i.jsx("option",{value:"playfair",children:"Playfair Display (High Contrast)"}),i.jsx("option",{value:"cormorant",children:"Cormorant (Delicate Serif)"}),i.jsx("option",{value:"unna",children:"Unna (Traditional)"}),i.jsx("option",{value:"crimson",children:"Crimson Pro (Editorial)"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose a decorative font that matches your story's tone"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),i.jsxs("select",{value:b.status,onChange:H=>y(J=>({...J,status:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"}),i.jsx("option",{value:"archived",children:"Archived"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",disabled:o,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:o?"Saving...":m?"Update":"Create"}),i.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})]})}),M&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:G?"Edit Chapter":"Create Chapter"}),i.jsxs("form",{onSubmit:te,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),i.jsx("input",{type:"text",value:ee.title,onChange:H=>{const J=H.target.value;R(ie=>({...ie,title:J,slug:G?ie.slug:A(J)}))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Slug (auto-generated)"}),i.jsx("input",{type:"text",value:ee.slug,onChange:H=>R(J=>({...J,slug:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white bg-gray-50 dark:bg-gray-600",required:!0,placeholder:"Will be auto-generated from title"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Chapter Number"}),i.jsx("input",{type:"number",min:"0",value:ee.chapter_number,onChange:H=>R(J=>({...J,chapter_number:parseInt(H.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use 0 for prologue or special chapters"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),i.jsxs("select",{value:ee.status,onChange:H=>R(J=>({...J,status:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Soundtrack (Optional)"}),i.jsx("input",{type:"text",placeholder:"Enter MP3 URL (e.g., /api/uploads/general/soundtrack.mp3)",value:ee.soundtrack_url,onChange:H=>R(J=>({...J,soundtrack_url:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Link to an MP3 file from the uploads (go to Uploads  General to upload MP3 files)"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content (Markdown)"}),i.jsxs("div",{className:"mb-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload Markdown File (Optional)"}),i.jsx("input",{type:"file",accept:".md,.markdown,.txt",onChange:H=>{var ie;const J=(ie=H.target.files)==null?void 0:ie[0];if(J){const we=new FileReader;we.onload=re=>{var Fe;const oe=(Fe=re.target)==null?void 0:Fe.result;R(rt=>({...rt,content:oe}))},we.readAsText(J)}},className:"text-sm"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a .md file to automatically populate the content below"})]}),i.jsx("textarea",{value:ee.content,onChange:H=>R(J=>({...J,content:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white font-mono text-sm",rows:15,placeholder:"Write your chapter content in Markdown format or upload a .md file above...",required:!0}),i.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[i.jsx("strong",{children:"Markdown Tips:"})," Use # for headers, **bold**, *italic*, `code`, [links](url), and > for quotes"]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:o?"Saving...":G?"Update Chapter":"Create Chapter"}),i.jsx("button",{type:"button",onClick:()=>T(!1),className:"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Stories"}),o&&!r?i.jsx("div",{className:"text-center py-4",children:"Loading stories..."}):e.length===0?i.jsx("div",{className:"text-center py-4 text-gray-500",children:"No stories found"}):i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(H=>i.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${(r==null?void 0:r.id)===H.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,onClick:()=>{n(H),V(H.id)},children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:H.title}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:J=>{J.stopPropagation(),ye(H)},className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),i.jsx("button",{onClick:J=>{J.stopPropagation(),z(H)},className:"text-red-600 hover:text-red-800 text-sm ml-2",children:"Delete"})]})]}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Slug: ",H.slug]}),H.description&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2",children:H.description}),i.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[i.jsx("span",{className:`px-2 py-1 rounded ${H.status==="published"?"bg-green-100 text-green-800":H.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:H.status}),i.jsxs("span",{children:[H.chapter_count||0," chapters"]})]})]},H.id))})]})}),r&&i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:['Chapters in "',r.title,'"']}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("label",{className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors cursor-pointer",children:[B?"Uploading...":"Bulk Upload",i.jsx("input",{type:"file",multiple:!0,accept:".md,.markdown,.txt",onChange:st,className:"hidden",disabled:B})]}),i.jsxs("button",{onClick:be,className:`bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors ${ne(s)===0?"opacity-50 cursor-not-allowed":""}`,disabled:o||ne(s)===0,title:ne(s)===0?"No drafts to publish":"Publish all non-published chapters",children:["Publish All",ne(s)>0?` (${ne(s)})`:""]}),i.jsx("button",{onClick:()=>{T(!0),Y(null),R({title:"",slug:"",content:"",soundtrack_url:"",chapter_number:He(),status:"draft"})},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Add Chapter"})]})]}),X&&i.jsxs("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-300 mb-2",children:"Bulk Upload Results"}),i.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-400 mb-2",children:["Successfully uploaded ",X.uploaded_count," chapters"]}),X.chapters&&X.chapters.length>0&&i.jsx("div",{className:"space-y-1",children:X.chapters.map((H,J)=>i.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300",children:[" ",H.filename,"  Chapter ",H.chapter_number,": ",H.title]},J))}),X.errors&&X.errors.length>0&&i.jsxs("div",{className:"mt-2 pt-2 border-t border-blue-300 dark:border-blue-700",children:[i.jsx("p",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-1",children:"Errors:"}),X.errors.map((H,J)=>i.jsxs("div",{className:"text-xs text-red-600 dark:text-red-400",children:[" ",H]},J))]}),i.jsx("button",{onClick:()=>ue(null),className:"mt-2 text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",children:"Dismiss"})]}),o&&r?i.jsx("div",{className:"text-center py-4",children:"Loading chapters..."}):s.length===0?i.jsx("div",{className:"text-center py-4 text-gray-500",children:"No chapters in this story"}):i.jsx("div",{className:"space-y-3",children:s.sort((H,J)=>H.chapter_number-J.chapter_number).map(H=>i.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["Chapter ",H.chapter_number]}),i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:H.title}),i.jsx("span",{className:`px-2 py-1 rounded text-xs ${H.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:H.status})]}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Slug: ",H.slug]}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:[H.content.substring(0,200),"..."]})]}),i.jsxs("div",{className:"flex gap-2 ml-4",children:[i.jsx("button",{onClick:()=>Se(H),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),i.jsx("button",{onClick:()=>le(H.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]})},H.id))})]})}),C&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Choose Page Break Image"}),i.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),k.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx("p",{children:"No page break images found."}),i.jsx("p",{className:"text-sm mt-2",children:"Upload some page break images first to use this feature."})]}):i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:k.map((H,J)=>i.jsxs("div",{className:"relative group cursor-pointer border-2 border-transparent hover:border-blue-500 rounded-lg overflow-hidden",onClick:()=>L(H.url),children:[i.jsx("img",{src:H.url,alt:`Page break ${J+1}`,className:"w-full h-16 object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center",children:i.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:i.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate",children:H.filename})]},J))}),i.jsx("div",{className:"flex justify-end mt-6",children:i.jsx("button",{onClick:()=>P(!1),className:"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})})]})})]})}function VX(){const[e,t]=g.useState({name:"",bio:"",tagline:"",gallery_rating_filter:"auto",show_litrpg_tools:!0}),[r,n]=g.useState(!0),[s,a]=g.useState(!1),[o,l]=g.useState(""),[c,d]=g.useState("");g.useEffect(()=>{u()},[]);const u=async()=>{try{const p=await(await fetch("/api/author/get.php")).json();p.success&&t(p.profile)}catch{l("Failed to load author profile")}finally{n(!1)}},h=async()=>{a(!0),l(""),d("");try{const p=await(await fetch("/api/author/update.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(e)})).json();if(p.success)d("Profile updated successfully!"),setTimeout(()=>d(""),3e3);else{const m=p.details?`${p.error}

Details: ${p.details}`:p.error||"Failed to update profile";l(m)}}catch(f){l(`Network error occurred: ${f.message||"Unknown error"}`)}finally{a(!1)}};return r?i.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:i.jsx("div",{className:"text-center",children:"Loading..."})}):i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Author Profile"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Manage your author information displayed on the homepage"})]}),o&&i.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:o}),c&&i.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:c}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),i.jsx("input",{type:"text",value:e.name,onChange:f=>t({...e,name:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Your author name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),i.jsx("input",{type:"text",value:e.bio,onChange:f=>t({...e,bio:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Author & Writer"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tagline"}),i.jsx("input",{type:"text",value:e.tagline,onChange:f=>t({...e,tagline:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Stories that captivate and inspire"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Image URL (optional)"}),i.jsx("input",{type:"url",value:e.profile_image||"",onChange:f=>t({...e,profile_image:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/profile.jpg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Light Theme Background Image(s) (optional)"}),i.jsx("input",{type:"text",value:e.background_image_light||"",onChange:f=>t({...e,background_image_light:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"image1.webp, image2.webp, image3.webp"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter filename(s) from /api/uploads/general/ (comma-separated for random selection)"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Example: image1.webp, image2.webp | Leave empty for default: /images/lofi_light_bg.webp"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dark Theme Background Image(s) (optional)"}),i.jsx("input",{type:"text",value:e.background_image_dark||"",onChange:f=>t({...e,background_image_dark:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"dark1.webp, dark2.webp, dark3.webp"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter filename(s) from /api/uploads/general/ (comma-separated for random selection)"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Example: dark1.webp, dark2.webp | Leave empty for default: /images/lofi_bg.webp"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Domain (for SEO)"}),i.jsx("input",{type:"text",value:e.site_domain||"",onChange:f=>t({...e,site_domain:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"example.com"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Domain name used for SEO URLs and canonical links. Leave empty to use server detection."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gallery Rating Filter"}),i.jsxs("select",{value:e.gallery_rating_filter||"auto",onChange:f=>t({...e,gallery_rating_filter:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"always",children:"Always Show - Filter is always visible"}),i.jsx("option",{value:"auto",children:"Auto (Recommended) - Show only if X-rated galleries exist"}),i.jsx("option",{value:"never",children:"Never Show - Hide the filter completely"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Controls visibility of the PG/X rating filter on the Galleries page."})]}),i.jsx("div",{className:"p-4 bg-cyan-50 dark:bg-cyan-900/20 rounded-lg border border-cyan-200 dark:border-cyan-800",children:i.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:e.show_litrpg_tools!==!1,onChange:f=>t({...e,show_litrpg_tools:f.target.checked}),className:"mt-1 h-4 w-4 rounded border-gray-300 text-cyan-600 focus:ring-cyan-500"}),i.jsxs("div",{children:[i.jsx("span",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show LitRPG Tools on Homepage"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:`When enabled, displays a "LitRPG Tools" button on the homepage linking to the interactive game tools. Disable this if deploying to a site that doesn't use the LitRPG features.`})]})]})}),i.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:i.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:e.show_shoutouts===!0,onChange:f=>t({...e,show_shoutouts:f.target.checked}),className:"mt-1 h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500"}),i.jsxs("div",{children:[i.jsx("span",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show Shoutouts on Homepage"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:'When enabled, displays a "Shoutouts" button on the homepage linking to the Royal Road shoutout exchange system. Enable this to allow authors to book shoutout swaps with you.'})]})]})}),i.jsx("div",{className:"pt-4",children:i.jsx("button",{onClick:h,disabled:s,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:s?"Saving...":"Save Profile"})})]}),i.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Preview"}),i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsx("div",{className:"font-semibold",children:e.name||"Your Name"}),i.jsxs("div",{children:[e.bio||"Your Bio"," | ",e.tagline||"Your Tagline"]})]})]})]})}function qX(){const[e,t]=g.useState([]),[r,n]=g.useState(0),[s,a]=g.useState("unassigned"),[o,l]=g.useState([]),[c,d]=g.useState(null),[u,h]=g.useState([]),[f,p]=g.useState(!1),[m,x]=g.useState(null),[b,y]=g.useState(null),[v,w]=g.useState(!1),[j,N]=g.useState(null),[k,S]=g.useState({title:"",slug:"",description:"",rating:"PG",status:"draft",collection_id:""}),[C,P]=g.useState(!1),[E,O]=g.useState(null),[A,_]=g.useState({title:"",slug:"",description:"",themesText:"",status:"published",cover_hero:"",sort_order:0});g.useEffect(()=>{D()},[]),g.useEffect(()=>{$()},[s]);const I=g.useMemo(()=>typeof s=="number"&&e.find(F=>F.id===s)||null,[s,e]);async function D(){p(!0),x(null);try{const F=await fetch("/api/collections/list.php?limit=1000",{credentials:"same-origin"});if(!F.ok)throw new Error("Failed to load collections");const Ie=((await F.json()).collections||[]).map(We=>({id:Number(We.id),slug:String(We.slug),title:String(We.title||"Untitled"),description:We.description||null,themes:Array.isArray(We.themes)?We.themes:[],status:We.status==="draft"||We.status==="archived"?We.status:"published",cover_hero:We.cover_hero||null,sort_order:typeof We.sort_order=="number"?We.sort_order:0,gallery_count:Number(We.gallery_count||0)}));t(Ie);const at=await fetch("/api/galleries/list.php?include_unpublished=1&limit=10000",{credentials:"same-origin"});if(at.ok){const fr=(await at.json()).galleries||[];n(fr.filter(ut=>ut.collection_id==null).length)}else n(0)}catch(F){x(F.message||"Failed to load collections")}finally{p(!1)}}async function $(){p(!0),x(null);try{let F="/api/galleries/list.php?include_unpublished=1&limit=1000";typeof s=="number"&&(F+=`&collection_id=${s}`);const ae=await fetch(F,{credentials:"same-origin"});if(!ae.ok)throw new Error("Failed to load galleries");let at=((await ae.json()).galleries||[]).map(We=>({id:Number(We.id),slug:String(We.slug),title:String(We.title||"Untitled"),description:We.description||null,rating:We.rating==="X"?"X":"PG",status:We.status==="published"||We.status==="archived"?We.status:"draft",collection_id:We.collection_id==null?null:Number(We.collection_id),image_count:Number(We.image_count||0)}));s==="unassigned"&&(at=at.filter(We=>We.collection_id==null)),l(at)}catch(F){x(F.message||"Failed to load galleries"),l([])}finally{p(!1)}}const L=F=>F.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""),M=()=>{N(null),S({title:"",slug:"",description:"",rating:"PG",status:"draft",collection_id:typeof s=="number"?s:""}),w(!0)},T=F=>{N(F),S({title:F.title,slug:F.slug,description:F.description||"",rating:F.rating||"PG",status:F.status||"draft",collection_id:F.collection_id==null?"":F.collection_id}),w(!0)},G=async F=>{p(!0),x(null);try{const ae=F.status==="published"?"draft":"published",Ie=await fetch("/api/galleries/update.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:F.id,status:ae})});if(!Ie.ok){const at=await Ie.text();throw new Error(at||"Failed to update status")}y(ae==="published"?"Gallery published!":"Gallery unpublished!"),await $()}catch(ae){x(ae.message||"Failed to update status")}finally{p(!1)}},Y=async F=>{if(confirm(`Delete gallery "${F.title}"? This will delete all images within it.`)){p(!0),x(null);try{const ae=await fetch("/api/galleries/delete.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:F.id})});if(!ae.ok){const Ie=await ae.text();throw new Error(Ie||"Failed to delete gallery")}y("Gallery deleted."),(c==null?void 0:c.id)===F.id&&(d(null),h([])),await $(),await D()}catch(ae){x(ae.message||"Failed to delete gallery")}finally{p(!1)}}},[ee,R]=g.useState(null),[B,q]=g.useState(null),[X,ue]=g.useState(!1),[U,V]=g.useState({positive:"",negative:"",checkpoint:"",loras:"",extractMetadata:!0}),[ge,te]=g.useState(null),[z,le]=g.useState(""),[ne,be]=g.useState(""),[ye,Se]=g.useState({positive:"",negative:"",checkpoint:"",loras:[]}),He=async F=>{p(!0),x(null);try{const ae=await fetch(`/api/images/gallery-list.php?gallery_id=${F}&limit=100`,{credentials:"same-origin"});if(!ae.ok)throw new Error("Failed to load images");const Ie=await ae.json();h(Ie.images||[])}catch(ae){x(ae.message||"Failed to load images")}finally{p(!1)}},st=async()=>{if(!(!c||!ee||ee.length===0)){ue(!0),x(null);try{const F=new FormData;F.append("gallery_id",c.id.toString()),U.positive.trim()&&F.append("positive_prompt",U.positive.trim()),U.negative.trim()&&F.append("negative_prompt",U.negative.trim()),U.checkpoint.trim()&&F.append("checkpoint",U.checkpoint.trim()),U.loras.trim()&&F.append("loras",U.loras.trim()),F.append("extract_metadata",U.extractMetadata?"1":"0"),Array.from(ee).forEach(Ie=>{F.append("files[]",Ie)}),B&&F.append("poster",B);const ae=await fetch("/api/images/gallery-upload.php",{method:"POST",credentials:"same-origin",body:F});if(!ae.ok){const Ie=await ae.text();throw new Error(Ie||"Failed to upload images")}y("Images uploaded successfully!"),R(null),V({positive:"",negative:"",checkpoint:"",loras:"",extractMetadata:!0}),await He(c.id)}catch(F){x(F.message||"Failed to upload images")}finally{ue(!1)}}},H=async F=>{if(confirm("Delete this image?")){p(!0),x(null);try{const ae=await fetch("/api/images/gallery-delete.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:F})});if(!ae.ok){const Ie=await ae.text();throw new Error(Ie||"Failed to delete image")}h(Ie=>Ie.filter(at=>at.id!==F)),y("Image deleted successfully!")}catch(ae){x(ae.message||"Failed to delete image")}finally{p(!1)}}},J=F=>{te(F.id),le(F.title||""),be(F.alt_text||"");let ae=F.prompt||"",Ie="";if(F.parameters){const at=F.parameters.match(/Negative prompt:\s*(.+?)(?:\n|$)/i);at&&(Ie=at[1].trim())}Se({positive:ae,negative:Ie,checkpoint:F.checkpoint||"",loras:F.loras||[]})},ie=async F=>{F.preventDefault(),p(!0),x(null),y(null);try{const ae=j?"/api/galleries/update.php":"/api/galleries/create.php",Ie={title:k.title,slug:k.slug,description:k.description,rating:k.rating,status:k.status,collection_id:k.collection_id===""?null:k.collection_id},at=j?{id:j.id,...Ie}:Ie,We=await fetch(ae,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(at)});if(!We.ok){const fr=await We.text();throw new Error(fr||"Failed to save gallery")}y(j?"Gallery updated":"Gallery created"),w(!1),N(null),await $(),await D()}catch(ae){x(ae.message||"Failed to save gallery")}finally{p(!1)}},we=g.useMemo(()=>e.slice().sort((F,ae)=>(F.sort_order||0)-(ae.sort_order||0)||ae.id-F.id),[e]),re=()=>{O(null),_({title:"",slug:"",description:"",themesText:"",status:"published",cover_hero:"",sort_order:0}),P(!0)},oe=()=>{I&&(O(I),_({title:I.title||"",slug:I.slug||"",description:I.description||"",themesText:(I.themes||[]).join(", "),status:I.status||"published",cover_hero:I.cover_hero||"",sort_order:I.sort_order||0}),P(!0))},Fe=async()=>{if(I&&confirm(`Delete collection "${I.title}"? All assigned galleries will be unassigned.`)){p(!0),x(null);try{const F=await fetch("/api/collections/delete.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:I.id,force:!0})});if(!F.ok){const ae=await F.text();throw new Error(ae||"Failed to delete collection")}y("Collection deleted."),a("unassigned"),await D(),await $()}catch(F){x(F.message||"Failed to delete collection")}finally{p(!1)}}},rt=async F=>{var ae;F.preventDefault(),p(!0),x(null),y(null);try{const Ie=A.themesText.split(",").map(ut=>ut.trim()).filter(Boolean),at={title:A.title,slug:A.slug,description:A.description||null,themes:Ie,status:A.status,cover_hero:A.cover_hero||null,sort_order:Number(A.sort_order)||0},We=E?"/api/collections/update.php":"/api/collections/create.php";E&&(at.id=E.id);const fr=await fetch(We,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(at)});if(!fr.ok){const ut=await fr.text();throw new Error(ut||"Failed to save collection")}if(y(E?"Collection updated":"Collection created"),P(!1),O(null),await D(),!E){const ut=(ae=(await(await fetch(`/api/collections/list.php?slug=${encodeURIComponent(A.slug)}`,{credentials:"same-origin"})).json()).collections)==null?void 0:ae[0];ut!=null&&ut.id&&a(Number(ut.id))}}catch(Ie){x(Ie.message||"Failed to save collection")}finally{p(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Collections & Galleries"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:re,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:"Create Collection"}),i.jsx("button",{onClick:M,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Gallery"})]})]}),m&&i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg",children:m}),b&&i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400 px-4 py-3 rounded-lg",children:b}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Collections"}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[i.jsxs("button",{onClick:()=>a("unassigned"),className:`border rounded-lg p-4 text-left transition-colors ${s==="unassigned"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Unassigned"}),i.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:[r," galleries"]})]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Galleries without a collection"})]}),we.map(F=>i.jsxs("button",{onClick:()=>a(F.id),className:`border rounded-lg p-4 text-left transition-colors ${s===F.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:F.title}),i.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:[F.gallery_count," galleries"]})]}),F.description&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:F.description})]},F.id))]})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s==="unassigned"?"Galleries  Unassigned":I?`Galleries in ${I.title}`:"Galleries"}),i.jsxs("div",{className:"flex items-center gap-2",children:[I&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:oe,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-3 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors text-sm",children:"Edit Collection"}),i.jsx("button",{onClick:Fe,className:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Delete Collection"})]}),i.jsx("button",{onClick:M,className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"New Gallery"})]})]}),f&&o.length===0?i.jsx("div",{className:"text-center py-4",children:"Loading galleries..."}):o.length===0?i.jsx("div",{className:"text-center py-4 text-gray-500",children:"No galleries found"}):i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(F=>{var ae;return i.jsxs("div",{className:`border rounded-lg p-4 border-gray-200 dark:border-gray-600 cursor-pointer ${(c==null?void 0:c.id)===F.id?"ring-2 ring-blue-500":""}`,onClick:()=>{d(F),He(F.id)},children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:F.title}),i.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Slug: ",F.slug]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>G(F),className:`${F.status==="published"?"text-yellow-600 hover:text-yellow-800":"text-green-600 hover:text-green-800"} text-sm`,title:F.status==="published"?"Unpublish":"Publish",children:F.status==="published"?"Unpublish":"Publish"}),i.jsx("button",{onClick:()=>T(F),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),i.jsx("button",{onClick:()=>Y(F),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]}),i.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[i.jsxs("span",{children:["Rating: ",F.rating||"PG"]}),i.jsxs("span",{children:[F.image_count||0," images"]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:["Collection:"," ",F.collection_id==null?i.jsx("span",{className:"italic",children:"Unassigned"}):i.jsx("span",{children:((ae=e.find(Ie=>Ie.id===F.collection_id))==null?void 0:ae.title)||`#${F.collection_id}`})]})]},F.id)})})]})}),c&&i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:["Manage Images  ",c.title,""]}),i.jsxs("div",{className:"mb-6 p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[i.jsx("h4",{className:"font-medium mb-3 text-gray-900 dark:text-white",children:"Upload Images"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("input",{type:"file",multiple:!0,accept:".png,.jpg,.jpeg,.webp,.mp4,.webm",onChange:F=>R(F.target.files),className:"text-sm"}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Supported formats: PNG, JPG, JPEG, WebP. Thumbnails generated automatically."})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Poster Image (for videos)"}),i.jsx("input",{type:"file",accept:".png,.jpg,.jpeg,.webp",onChange:F=>q(F.target.files&&F.target.files[0]?F.target.files[0]:null),className:"text-sm"}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"If you upload a video (.mp4/.webm), adding a poster image is recommended so the gallery grid has a thumbnail."})]}),i.jsxs("div",{className:"space-y-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Positive Prompt (Optional)"}),i.jsx("textarea",{value:U.positive,onChange:F=>V(ae=>({...ae,positive:F.target.value})),placeholder:"Enter positive prompt for all uploaded images...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",rows:3})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Negative Prompt (Optional)"}),i.jsx("textarea",{value:U.negative,onChange:F=>V(ae=>({...ae,negative:F.target.value})),placeholder:"Enter negative prompt for all uploaded images...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Checkpoint (Optional)"}),i.jsx("input",{type:"text",value:U.checkpoint,onChange:F=>V(ae=>({...ae,checkpoint:F.target.value})),placeholder:"e.g., sd_xl_base_1.0.safetensors",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"LoRAs (Optional)"}),i.jsx("input",{type:"text",value:U.loras,onChange:F=>V(ae=>({...ae,loras:F.target.value})),placeholder:"Comma-separated: lora1, lora2, lora3",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"extractMetadata",checked:U.extractMetadata,onChange:F=>V(ae=>({...ae,extractMetadata:F.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"extractMetadata",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Auto-extract metadata from images (when manual fields are empty)"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("button",{onClick:st,disabled:X||!ee||ee.length===0,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:X?"Uploading...":"Upload"}),(U.positive||U.negative||U.checkpoint||U.loras)&&i.jsx("button",{onClick:()=>V({positive:"",negative:"",checkpoint:"",loras:"",extractMetadata:!0}),className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Clear All Fields"})]})]}),f&&c?i.jsx("div",{className:"text-center py-4",children:"Loading images..."}):u.length===0?i.jsx("div",{className:"text-center py-4 text-gray-500",children:"No images in this gallery"}):i.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:u.map(F=>{var ae;return i.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"aspect-square bg-gray-200 dark:bg-gray-700",children:i.jsx("img",{src:F.thumb||F.src,alt:F.title||"Image",className:"w-full h-full object-cover",loading:"lazy"})}),i.jsx("div",{className:"p-3",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:F.title||((ae=F.src)==null?void 0:ae.split("/").pop())||"Untitled"}),F.prompt&&i.jsxs("p",{className:"text-xs text-gray-500",children:[i.jsx("span",{className:"font-medium",children:"Prompt:"})," ",F.prompt.length>50?F.prompt.substring(0,50)+"...":F.prompt]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>J(F),className:"text-xs text-blue-600 hover:text-blue-800",children:"Edit"}),i.jsx("button",{onClick:()=>H(F.id),className:"text-xs text-red-600 hover:text-red-800",children:"Delete"})]})]})})]},F.id)})})]})}),ge&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Edit Image"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),i.jsx("input",{type:"text",value:z,onChange:F=>le(F.target.value),placeholder:"Image title",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Alt Text (SEO)"}),i.jsx("input",{type:"text",value:ne,onChange:F=>be(F.target.value),placeholder:"Alt text for accessibility",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Positive Prompt (Danbooru tags)"}),i.jsx("textarea",{value:ye.positive,onChange:F=>Se(ae=>({...ae,positive:F.target.value})),placeholder:"person, profile, highres, solo, ...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",rows:4})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Negative Prompt"}),i.jsx("textarea",{value:ye.negative,onChange:F=>Se(ae=>({...ae,negative:F.target.value})),placeholder:"bad anatomy, extra fingers, ...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",rows:4})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Checkpoint"}),i.jsx("input",{type:"text",value:ye.checkpoint,onChange:F=>Se(ae=>({...ae,checkpoint:F.target.value})),placeholder:"e.g., sd_xl_base_1.0.safetensors",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"LoRAs"}),i.jsx("input",{type:"text",value:ye.loras.join(", "),onChange:F=>Se(ae=>({...ae,loras:F.target.value.split(",").map(Ie=>Ie.trim()).filter(Boolean)})),placeholder:"Comma-separated: lora1, lora2, lora3",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"})]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-6",children:[i.jsx("button",{onClick:async()=>{if(ge){p(!0),x(null);try{const F=await fetch("/api/images/gallery-update.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:ge,title:z.trim()||null,alt_text:ne.trim()||null,prompt:ye.positive.trim()||null,parameters:ye.negative.trim()?`Negative prompt: ${ye.negative.trim()}`:null,checkpoint:ye.checkpoint.trim()||null,loras:ye.loras.length>0?ye.loras:null})});if(!F.ok){const ae=await F.text();throw new Error(ae||"Failed to update image")}h(ae=>ae.map(Ie=>Ie.id===ge?{...Ie,title:z.trim()||null,alt_text:ne.trim()||null,prompt:ye.positive.trim()||null,parameters:ye.negative.trim()?`Negative prompt: ${ye.negative.trim()}`:null,checkpoint:ye.checkpoint.trim()||null,loras:ye.loras.length>0?ye.loras:[]}:Ie)),te(null),y("Image updated successfully!")}catch(F){x(F.message||"Failed to update image")}finally{p(!1)}}},disabled:f,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:f?"Saving...":"Save Changes"}),i.jsx("button",{onClick:()=>te(null),className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})})}),v&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:j?"Edit Gallery":"Create Gallery"}),i.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),i.jsx("input",{type:"text",value:k.title,onChange:F=>S(ae=>({...ae,title:F.target.value,slug:j?ae.slug:L(F.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Slug ",!j&&i.jsx("span",{className:"text-xs text-gray-500",children:"(auto-generated)"})]}),i.jsx("input",{type:"text",value:k.slug,onChange:F=>S(ae=>({...ae,slug:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),i.jsx("textarea",{value:k.description,onChange:F=>S(ae=>({...ae,description:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rating"}),i.jsxs("select",{value:k.rating,onChange:F=>S(ae=>({...ae,rating:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"PG",children:"PG"}),i.jsx("option",{value:"X",children:"X"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),i.jsxs("select",{value:k.status,onChange:F=>S(ae=>({...ae,status:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"}),i.jsx("option",{value:"archived",children:"Archived"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Collection"}),i.jsxs("select",{value:k.collection_id,onChange:F=>{const ae=F.target.value;S(Ie=>({...Ie,collection_id:ae===""?"":Number(ae)}))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"",children:"Unassigned"}),e.map(F=>i.jsx("option",{value:F.id,children:F.title},F.id))]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:f?"Saving...":j?"Update":"Create"}),i.jsx("button",{type:"button",onClick:()=>w(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})]})}),C&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-xl",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:E?"Edit Collection":"Create Collection"}),i.jsxs("form",{onSubmit:rt,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),i.jsx("input",{type:"text",value:A.title,onChange:F=>{const ae=F.target.value;_(Ie=>({...Ie,title:ae,slug:E?Ie.slug:L(ae)}))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Slug ",!E&&i.jsx("span",{className:"text-xs text-gray-500",children:"(auto-generated)"})]}),i.jsx("input",{type:"text",value:A.slug,onChange:F=>_(ae=>({...ae,slug:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),i.jsx("textarea",{value:A.description,onChange:F=>_(ae=>({...ae,description:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",rows:3})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Themes (comma-separated)"}),i.jsx("input",{type:"text",value:A.themesText,onChange:F=>_(ae=>({...ae,themesText:F.target.value})),placeholder:"Characters, Covers, Concepts",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),i.jsxs("select",{value:A.status,onChange:F=>_(ae=>({...ae,status:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"}),i.jsx("option",{value:"archived",children:"Archived"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sort Order"}),i.jsx("input",{type:"number",value:A.sort_order,onChange:F=>_(ae=>({...ae,sort_order:Number(F.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cover Hero (URL)"}),i.jsx("input",{type:"text",value:A.cover_hero,onChange:F=>_(ae=>({...ae,cover_hero:F.target.value})),placeholder:"/api/uploads/your-cover.webp",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 disabled:opacity-50 transition-colors",children:f?"Saving...":E?"Update":"Create"}),i.jsx("button",{type:"button",onClick:()=>P(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})]})})]})}function GX(){const[e,t]=g.useState({}),[r,n]=g.useState(!0),[s,a]=g.useState(!1),[o,l]=g.useState(""),[c,d]=g.useState(""),u=i$.map(m=>({key:m,label:k1[m],placeholder:VW[m]}));g.useEffect(()=>{h()},[]);const h=async()=>{try{const x=await(await fetch("/api/socials/get.php")).json();x.success&&t(x.socials||{})}catch{l("Failed to load social media links")}finally{n(!1)}},f=async()=>{a(!0),l(""),d("");try{const x=await(await fetch("/api/socials/update.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(e)})).json();x.success?(d("Social media links updated successfully!"),setTimeout(()=>d(""),3e3),await h()):l(x.error||"Failed to update social media links")}catch{l("Network error occurred")}finally{a(!1)}},p=(m,x)=>{t(b=>({...b,[m]:x}))};return r?i.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:i.jsx("div",{className:"text-center",children:"Loading..."})}):i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Social Media Links"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Manage social media links displayed across all sites"})]}),o&&i.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:o}),c&&i.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:c}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.map(m=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:m.label}),i.jsx("input",{type:"url",value:e[m.key]||"",onChange:x=>p(m.key,x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:m.placeholder})]},m.key))}),i.jsx("div",{className:"mt-8 pt-4 border-t border-gray-200",children:i.jsx("button",{onClick:f,disabled:s,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:s?"Saving...":"Save Social Links"})}),i.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Active Links"}),i.jsxs("div",{className:"space-y-2",children:[Object.entries(e).filter(([m,x])=>x).map(([m,x])=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"font-medium capitalize",children:[m,":"]}),i.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 truncate max-w-xs",children:x})]},m)),Object.keys(e).filter(m=>e[m]).length===0&&i.jsx("p",{className:"text-gray-500 text-sm",children:"No social links configured yet."})]})]}),i.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:" Note"}),i.jsx("p",{className:"text-sm text-blue-800",children:"These social media links will appear on all sites: the author homepage, image galleries, and story pages. Leave fields empty to hide specific platforms."})]})]})}const Zo={instagram:{name:"Instagram",icon:"",color:"from-pink-500 to-purple-600",description:"Requires Instagram Business Account + Facebook Page",docsUrl:"https://developers.facebook.com/docs/instagram-api/",fields:["access_token","instagram_user_id","facebook_page_id"],disabled:!1},twitter:{name:"Twitter/X",icon:"",color:"from-blue-400 to-blue-600",description:"Requires Twitter Developer Account (Basic tier+)",docsUrl:"https://developer.twitter.com/en/docs/twitter-api",fields:["access_token","username"],disabled:!1},facebook:{name:"Facebook",icon:"",color:"from-blue-600 to-blue-800",description:"Requires Facebook Page + Page Access Token",docsUrl:"https://developers.facebook.com/docs/pages-api/",fields:["access_token","page_id"],disabled:!1},discord:{name:"Discord",icon:"",color:"from-indigo-500 to-purple-600",description:"Uses webhook URL (no OAuth needed)",docsUrl:"https://discord.com/developers/docs/resources/webhook",fields:["webhook_url","guild_id"],disabled:!1},threads:{name:"Threads",icon:"@",color:"from-gray-600 to-gray-800",description:"Coming soon - Uses Instagram API",docsUrl:"#",fields:["access_token"],disabled:!0},bluesky:{name:"Bluesky",icon:"",color:"from-sky-400 to-blue-500",description:"Coming soon",docsUrl:"#",fields:["access_token"],disabled:!0},youtube:{name:"YouTube",icon:"",color:"from-red-500 to-red-700",description:"Coming soon - For community posts",docsUrl:"#",fields:["access_token"],disabled:!0}};function KX(){var C,P,E;const[e,t]=g.useState({}),[r,n]=g.useState({total_platforms:0,connected:0,expiring_soon:0}),[s,a]=g.useState(!0),[o,l]=g.useState(null),[c,d]=g.useState(null),[u,h]=g.useState(null),[f,p]=g.useState({}),[m,x]=g.useState(!1),[b,y]=g.useState(!1),v=g.useCallback(async()=>{try{const A=await(await fetch("/api/social/credentials/get.php",{credentials:"include"})).json();A.success?(t(A.platforms),n(A.summary)):l("Failed to load credentials")}catch{l("Network error loading credentials")}finally{a(!1)}},[]);g.useEffect(()=>{v()},[v]);const w=async O=>{var A;h(O);try{const I=await(await fetch("/api/social/credentials/update.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform:O,action:"test"})})).json();I.success?alert(` ${(A=Zo[O])==null?void 0:A.name} connected!
Account: ${I.account||"Connected"}`):alert(` Connection failed: ${I.error||I.message}`)}catch{alert("Network error testing connection")}finally{h(null)}},j=async O=>{var A;if(confirm(`Disconnect ${(A=Zo[O])==null?void 0:A.name}? You'll need to re-enter credentials to reconnect.`))try{const I=await(await fetch("/api/social/credentials/update.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform:O,action:"disconnect"})})).json();I.success?v():alert(`Failed to disconnect: ${I.error}`)}catch{alert("Network error")}},N=O=>{d(O),p({}),x(!1)},k=async()=>{var O;if(c){y(!0),l(null);try{const A={};f.webhook_url&&(A.webhook_url=f.webhook_url),f.page_id&&(A.page_id=f.page_id),f.instagram_user_id&&(A.instagram_user_id=f.instagram_user_id),f.facebook_page_id&&(A.facebook_page_id=f.facebook_page_id),f.guild_id&&(A.guild_id=f.guild_id),f.username&&(A.username=f.username);const _={platform:c,action:"update",is_active:!0};f.access_token&&(_.access_token=f.access_token),f.token_expires_at&&(_.token_expires_at=f.token_expires_at),Object.keys(A).length>0&&(_.config=A),console.log("Saving credentials:",_);const I=await fetch("/api/social/credentials/update.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(!I.ok){const $=await I.text();console.error("HTTP Error:",I.status,$),l(`Server error (${I.status}): ${$.substring(0,200)}`);return}const D=await I.json();console.log("Response:",D),D.success?(d(null),l(null),v(),alert(` ${(O=Zo[c])==null?void 0:O.name} credentials saved!`)):l(D.error||D.message||"Unknown error saving credentials")}catch(A){console.error("Save error:",A),l(`Network error: ${A instanceof Error?A.message:"Unknown error"}`)}finally{y(!1)}}},S=O=>{switch(O){case"connected":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400",children:[i.jsx($a,{className:"w-3 h-3"})," Connected"]});case"expiring_soon":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400",children:[i.jsx(od,{className:"w-3 h-3"})," Expiring Soon"]});case"expired":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400",children:[i.jsx(Dt,{className:"w-3 h-3"})," Expired"]});default:return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",children:[i.jsx(lY,{className:"w-3 h-3"})," Not Connected"]})}};return s?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx(yo,{className:"w-6 h-6 animate-spin text-gray-400"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[i.jsx(Dx,{className:"w-6 h-6"}),"Social Media Integrations"]}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Connect your social accounts to enable blog crossposting"})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsxs("span",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[i.jsx(dY,{className:"w-4 h-4"}),r.connected," connected"]}),r.expiring_soon>0&&i.jsxs("span",{className:"flex items-center gap-1 text-yellow-600 dark:text-yellow-400",children:[i.jsx(od,{className:"w-4 h-4"}),r.expiring_soon," expiring"]})]})]}),o&&i.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400",children:o}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(Zo).map(([O,A])=>{const _=e[O],I=A.disabled;return i.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden ${I?"opacity-50":""}`,children:[i.jsx("div",{className:`px-4 py-3 bg-gradient-to-r ${A.color} text-white`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xl",children:A.icon}),i.jsx("span",{className:"font-semibold",children:A.name})]}),_&&S(_.status)]})}),i.jsxs("div",{className:"p-4 space-y-3",children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:A.description}),(_==null?void 0:_.last_used_at)&&i.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[i.jsx(SN,{className:"w-3 h-3"}),"Last used: ",new Date(_.last_used_at).toLocaleDateString()]}),(_==null?void 0:_.expires_in_days)!==null&&_.expires_in_days<=30&&i.jsxs("div",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:[" Token expires in ",_.expires_in_days," days"]}),i.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[!I&&i.jsxs(i.Fragment,{children:[(_==null?void 0:_.status)==="connected"||(_==null?void 0:_.status)==="expiring_soon"?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>w(O),disabled:u===O,className:"px-3 py-1.5 text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 transition-colors",children:u===O?"Testing...":"Test"}),i.jsx("button",{onClick:()=>N(O),className:"px-3 py-1.5 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:"Update"}),i.jsx("button",{onClick:()=>j(O),className:"px-3 py-1.5 text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:"Disconnect"})]}):i.jsx("button",{onClick:()=>N(O),className:"px-3 py-1.5 text-xs font-medium bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 rounded-lg hover:bg-emerald-200 dark:hover:bg-emerald-900/50 transition-colors",children:"Connect"}),i.jsxs("a",{href:A.docsUrl,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 text-xs font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors flex items-center gap-1",children:["Docs ",i.jsx(wg,{className:"w-3 h-3"})]})]}),I&&i.jsx("span",{className:"text-xs text-gray-400 italic",children:"Coming soon"})]})]})]},O)})}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-auto",children:[i.jsx("div",{className:`px-6 py-4 bg-gradient-to-r ${(C=Zo[c])==null?void 0:C.color} text-white rounded-t-lg`,children:i.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[i.jsx("span",{children:(P=Zo[c])==null?void 0:P.icon}),"Configure ",(E=Zo[c])==null?void 0:E.name]})}),i.jsx("div",{className:"p-6 space-y-4",children:c==="discord"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Webhook URL *"}),i.jsx("input",{type:"text",value:f.webhook_url||"",onChange:O=>p({...f,webhook_url:O.target.value}),placeholder:"https://discord.com/api/webhooks/...",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Get this from Server Settings  Integrations  Webhooks"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Guild ID (optional)"}),i.jsx("input",{type:"text",value:f.guild_id||"",onChange:O=>p({...f,guild_id:O.target.value}),placeholder:"Server ID for message links",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Access Token *"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:m?"text":"password",value:f.access_token||"",onChange:O=>p({...f,access_token:O.target.value}),placeholder:"Paste your access token",className:"w-full px-3 py-2 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white font-mono text-sm"}),i.jsx("button",{type:"button",onClick:()=>x(!m),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:m?i.jsx(_N,{className:"w-4 h-4"}):i.jsx(sc,{className:"w-4 h-4"})})]})]}),c==="instagram"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Instagram User ID *"}),i.jsx("input",{type:"text",value:f.instagram_user_id||"",onChange:O=>p({...f,instagram_user_id:O.target.value}),placeholder:"Your Instagram Business Account ID",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Facebook Page ID"}),i.jsx("input",{type:"text",value:f.facebook_page_id||"",onChange:O=>p({...f,facebook_page_id:O.target.value}),placeholder:"Linked Facebook Page ID",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]})]}),c==="facebook"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Page ID *"}),i.jsx("input",{type:"text",value:f.page_id||"",onChange:O=>p({...f,page_id:O.target.value}),placeholder:"Your Facebook Page ID",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]}),c==="twitter"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Username (for URLs)"}),i.jsx("input",{type:"text",value:f.username||"",onChange:O=>p({...f,username:O.target.value}),placeholder:"@username (without @)",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Token Expiry Date (optional)"}),i.jsx("input",{type:"date",value:f.token_expires_at||"",onChange:O=>p({...f,token_expires_at:O.target.value}),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We'll remind you before it expires"})]})]})}),i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-900/50 rounded-b-lg flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>d(null),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Cancel"}),i.jsx("button",{onClick:k,disabled:b,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-colors",children:b?"Saving...":"Save Credentials"})]})]})})]})}function YX(){const[e,t]=g.useState({smtp_host:"",smtp_port:"465",smtp_user:"",smtp_pass:"",smtp_encryption:"ssl",from_email:"",from_name:"",admin_email:""}),[r,n]=g.useState({}),[s,a]=g.useState(!0),[o,l]=g.useState(!1),[c,d]=g.useState(""),[u,h]=g.useState(""),[f,p]=g.useState(!1);g.useEffect(()=>{m()},[]);const m=async()=>{try{const v=await(await fetch("/api/email/get.php")).json();v.config&&t(v.config),v.descriptions&&n(v.descriptions)}catch{d("Failed to load email configuration")}finally{a(!1)}},x=async()=>{l(!0),d(""),h("");try{const v=await(await fetch("/api/email/update.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({config:e})})).json();v.message?(h("Email settings updated successfully!"),setTimeout(()=>h(""),3e3),await m()):d(v.error||"Failed to update email settings")}catch{d("Network error occurred")}finally{l(!1)}},b=(y,v)=>{t(w=>({...w,[y]:v}))};return s?i.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:i.jsx("div",{className:"text-center",children:"Loading..."})}):i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[i.jsx(kg,{className:"w-6 h-6 text-blue-600"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Email & SMTP Settings"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Configure SMTP settings for sending emails (shoutouts, blog notifications, etc.)"})]})]}),c&&i.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded flex items-start gap-2",children:[i.jsx(ah,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),i.jsx("span",{children:c})]}),u&&i.jsxs("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded flex items-start gap-2",children:[i.jsx(M$,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),i.jsx("span",{children:u})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[i.jsx("h3",{className:"text-md font-semibold text-gray-800 mb-4",children:"SMTP Server Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Host"}),i.jsx("input",{type:"text",value:e.smtp_host,onChange:y=>b("smtp_host",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"smtp.hostinger.com"}),r.smtp_host&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.smtp_host})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Port"}),i.jsx("input",{type:"text",value:e.smtp_port,onChange:y=>b("smtp_port",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"465"}),r.smtp_port&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.smtp_port})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Encryption"}),i.jsxs("select",{value:e.smtp_encryption,onChange:y=>b("smtp_encryption",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"ssl",children:"SSL (Port 465)"}),i.jsx("option",{value:"tls",children:"TLS (Port 587)"})]}),r.smtp_encryption&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.smtp_encryption})]})]})]}),i.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[i.jsx("h3",{className:"text-md font-semibold text-gray-800 mb-4",children:"SMTP Authentication"}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Username"}),i.jsx("input",{type:"text",value:e.smtp_user,onChange:y=>b("smtp_user",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"your-email@yourdomain.com"}),r.smtp_user&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.smtp_user})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:f?"text":"password",value:e.smtp_pass,onChange:y=>b("smtp_pass",y.target.value),className:"w-full px-3 py-2 pr-20 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""}),i.jsx("button",{type:"button",onClick:()=>p(!f),className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-blue-600 hover:text-blue-800",children:f?"Hide":"Show"})]}),r.smtp_pass&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.smtp_pass})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-semibold text-gray-800 mb-4",children:"Email Addresses"}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Email Address"}),i.jsx("input",{type:"email",value:e.from_email,onChange:y=>b("from_email",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"noreply@yourdomain.com"}),r.from_email&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.from_email})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Name"}),i.jsx("input",{type:"text",value:e.from_name,onChange:y=>b("from_name",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Author Website"}),r.from_name&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.from_name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Email (for notifications)"}),i.jsx("input",{type:"email",value:e.admin_email,onChange:y=>b("admin_email",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"admin@yourdomain.com"}),r.admin_email&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.admin_email})]})]})]})]}),i.jsx("div",{className:"mt-8 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:x,disabled:o,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[i.jsx(kg,{className:"w-4 h-4"}),o?"Saving...":"Save Email Settings"]})}),i.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-yellow-900 mb-2",children:" Important Notes"}),i.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:'The "From Email" must be a valid mailbox on your domain (Hostinger requirement)'}),i.jsx("li",{children:"Use SSL encryption (port 465) or TLS encryption (port 587)"}),i.jsx("li",{children:"These settings are used by shoutouts, blog, and other notification features"}),i.jsx("li",{children:"Store passwords securely - consider environment variables for production"})]})]})]})}function XX(){const[e,t]=g.useState([]),[r,n]=g.useState([]),[s,a]=g.useState(null),[o,l]=g.useState(!1),[c,d]=g.useState(null),[u,h]=g.useState(null),[f,p]=g.useState("all"),[m,x]=g.useState("all"),[b,y]=g.useState(!1),[v,w]=g.useState({ip_address:"",reason:""});g.useEffect(()=>{j()},[f,m]);const j=async()=>{l(!0),d(null);try{await Promise.all([N(),k(),S()])}catch(D){d(D.message||"Failed to load data")}finally{l(!1)}},N=async()=>{const D=new URLSearchParams;f!=="all"&&D.set("status",f),m!=="all"&&D.set("type",m);const $=await fetch(`/api/admin/comments/list.php?${D.toString()}`,{credentials:"same-origin"});if(!$.ok)throw new Error("Failed to load comments");const L=await $.json();t(L.comments||[])},k=async()=>{const D=await fetch("/api/admin/banned-ips/list.php",{credentials:"same-origin"});if(!D.ok)throw new Error("Failed to load banned IPs");const $=await D.json();n($.banned_ips||[])},S=async()=>{const D=await fetch("/api/admin/mod-stats.php",{credentials:"same-origin"});if(!D.ok)throw new Error("Failed to load stats");const $=await D.json();a($)},C=async(D,$)=>{l(!0),d(null);try{const L=await fetch("/api/admin/comments/moderate.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:D,action:$})});if(!L.ok){const M=await L.text();throw new Error(M||`Failed to ${$} comment`)}h(`Comment ${$}d successfully!`),await j()}catch(L){d(L.message||`Failed to ${$} comment`)}finally{l(!1)}},P=async D=>{D.preventDefault(),l(!0),d(null),h(null);try{const $=await fetch("/api/admin/ban-ip.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(v)});if(!$.ok){const L=await $.text();throw new Error(L||"Failed to ban IP")}h("IP address banned successfully!"),y(!1),w({ip_address:"",reason:""}),await k(),await S()}catch($){d($.message||"Failed to ban IP")}finally{l(!1)}},E=async D=>{if(confirm("Are you sure you want to unban this IP address?")){l(!0),d(null);try{const $=await fetch("/api/admin/unban-ip.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:D})});if(!$.ok){const L=await $.text();throw new Error(L||"Failed to unban IP")}h("IP address unbanned successfully!"),await k(),await S()}catch($){d($.message||"Failed to unban IP")}finally{l(!1)}}},O=D=>{w({ip_address:D,reason:"Spam/inappropriate content"}),y(!0)},A=D=>new Date(D).toLocaleString(),_=D=>({type:D.comment_type==="image"?"Image":"Chapter",title:D.content_title}),I=D=>D.is_approved===1?"approved":"pending";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Moderation Manager"}),i.jsx("button",{onClick:()=>y(!0),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Ban IP Address"})]}),c&&i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg",children:c}),u&&i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400 px-4 py-3 rounded-lg",children:u}),s&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:s.pending_comments}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Comments"})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.approved_comments}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Approved Comments"})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.rejected_comments}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rejected Comments"})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[i.jsx("div",{className:"text-2xl font-bold text-gray-600",children:s.banned_ips}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Banned IPs"})]})]}),b&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Ban IP Address"}),i.jsxs("form",{onSubmit:P,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"IP Address"}),i.jsx("input",{type:"text",value:v.ip_address,onChange:D=>w($=>({...$,ip_address:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"192.168.1.1",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reason (Optional)"}),i.jsx("textarea",{value:v.reason,onChange:D=>w($=>({...$,reason:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",rows:3,placeholder:"Reason for banning this IP..."})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",disabled:o,className:"flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors",children:o?"Banning...":"Ban IP"}),i.jsx("button",{type:"button",onClick:()=>y(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:i.jsxs("div",{className:"flex flex-wrap gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status Filter"}),i.jsxs("select",{value:f,onChange:D=>p(D.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"all",children:"All Comments"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"approved",children:"Approved"}),i.jsx("option",{value:"rejected",children:"Rejected"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content Type"}),i.jsxs("select",{value:m,onChange:D=>x(D.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"all",children:"All Content"}),i.jsx("option",{value:"images",children:"Images"}),i.jsx("option",{value:"stories",children:"Stories"})]})]})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Comments"}),o?i.jsx("div",{className:"text-center py-4",children:"Loading comments..."}):e.length===0?i.jsx("div",{className:"text-center py-4 text-gray-500",children:"No comments found"}):i.jsx("div",{className:"space-y-4",children:e.map(D=>{const $=_(D);return i.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:D.author_name}),D.author_email&&i.jsx("span",{className:"text-sm text-gray-500",children:D.author_email}),i.jsxs("span",{className:"text-xs text-gray-400",children:["IP: ",D.ip_address]}),i.jsx("button",{onClick:()=>O(D.ip_address),className:"text-xs text-red-600 hover:text-red-800",children:"Ban IP"})]}),i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:`px-2 py-1 rounded text-xs ${I(D)==="approved"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:I(D)}),i.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["on ",$.type,":",i.jsx("a",{href:D.content_link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline ml-1",children:$.title})]}),i.jsxs("span",{className:"text-xs text-gray-500",children:["(",D.content_context,")"]})]}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:D.content}),i.jsx("p",{className:"text-xs text-gray-500",children:A(D.created_at)})]}),i.jsxs("div",{className:"flex gap-2 ml-4",children:[I(D)==="pending"&&i.jsx(i.Fragment,{children:i.jsx("button",{onClick:()=>C(D.id,"approve"),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",children:"Approve"})}),i.jsx("button",{onClick:()=>C(D.id,"delete"),className:"bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700",children:"Delete"})]})]})},D.id)})})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Banned IP Addresses"}),r.length===0?i.jsx("div",{className:"text-center py-4 text-gray-500",children:"No banned IPs"}):i.jsx("div",{className:"space-y-3",children:r.map(D=>i.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"font-mono text-gray-900 dark:text-white",children:D.ip_address}),i.jsxs("span",{className:"text-sm text-gray-500",children:["Banned by: ",D.banned_by_username||`User ${D.banned_by}`]})]}),D.reason&&i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Reason: ",D.reason]}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Banned on: ",A(D.banned_at)]})]}),i.jsx("button",{onClick:()=>E(D.id),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",children:"Unban"})]})},D.id))})]})})]})}function JX(){const[e,t]=g.useState(""),[r,n]=g.useState(""),[s,a]=g.useState(""),[o,l]=g.useState(!1),[c,d]=g.useState(""),[u,h]=g.useState(""),f=async p=>{if(p.preventDefault(),l(!0),h(""),d(""),r!==s){h("New passwords do not match"),l(!1);return}if(r.length<8){h("New password must be at least 8 characters long"),l(!1);return}try{const x=await(await fetch("/api/auth/change-password.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({currentPassword:e,newPassword:r})})).json();x.success?(d("Password changed successfully!"),t(""),n(""),a("")):h(x.error||"Failed to change password")}catch{h("Network error occurred")}finally{l(!1)}};return i.jsx("div",{className:"bg-white shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Change Password"}),c&&i.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:c}),u&&i.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:u}),i.jsxs("form",{onSubmit:f,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),i.jsx("input",{type:"password",value:e,onChange:p=>t(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter current password",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),i.jsx("input",{type:"password",value:r,onChange:p=>n(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter new password (min 8 characters)",required:!0,minLength:8})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),i.jsx("input",{type:"password",value:s,onChange:p=>a(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Confirm new password",required:!0,minLength:8})]}),i.jsx("div",{className:"pt-4",children:i.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:o?"Changing Password...":"Change Password"})})]}),i.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Password Requirements"}),i.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[i.jsx("li",{children:" Minimum 8 characters long"}),i.jsx("li",{children:" Use a unique password you haven't used before"}),i.jsx("li",{children:" Consider using a mix of letters, numbers, and symbols"})]})]})]})})}function ZX(){const[e,t]=g.useState({covers:[],pagebreaks:[],general:[],music:[]}),[r,n]=g.useState(!1),[s,a]=g.useState(null),[o,l]=g.useState(null),[c,d]=g.useState("covers"),[u,h]=g.useState(!1),[f,p]=g.useState(!1),m=g.useRef(null);g.useEffect(()=>{x()},[]);const x=async()=>{n(!0),a(null);try{const E=await fetch("/api/images/manage.php",{credentials:"same-origin"});if(!E.ok)throw new Error("Failed to load uploads");const O=await E.json();t(O.uploads||{covers:[],pagebreaks:[],general:[],music:[]})}catch(E){a(E.message||"Failed to load uploads")}finally{n(!1)}},b=async E=>{if(confirm(`Are you sure you want to delete "${E.filename}"? This action cannot be undone.`)){a(null);try{const O=await fetch("/api/images/manage.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({action:"delete",path:E.path})});if(!O.ok){const A=await O.json();throw new Error(A.error||"Failed to delete file")}l("File deleted successfully!"),await x()}catch(O){a(O.message||"Failed to delete file")}}},y=async E=>{if(!E||E.length===0)return;const O=E[0];if(!["image/jpeg","image/png","image/gif","image/webp","video/mp4","video/webm","video/quicktime","audio/mpeg","audio/mp3","application/pdf"].includes(O.type)){a("Invalid file type. Only images (JPEG, PNG, GIF, WebP), videos (MP4, WebM, MOV), audio (MP3), and PDFs are allowed.");return}const _=100*1024*1024;if(O.size>_){a("File too large. Maximum size is 100MB.");return}h(!0),a(null),l(null);try{const I=new FormData;I.append("file",O),I.append("type",c==="music"?"music":"general");const D=await fetch("/api/images/upload.php",{method:"POST",credentials:"same-origin",body:I});if(!D.ok){const L=await D.json();throw new Error(L.error||"Upload failed")}const $=await D.json();l(`File "${O.name}" uploaded successfully!`),console.log("Upload response:",$),await x(),m.current&&(m.current.value="")}catch(I){a(I.message||"Upload failed")}finally{h(!1)}},v=E=>{E.preventDefault(),p(!0)},w=E=>{E.preventDefault(),p(!1)},j=E=>{E.preventDefault(),p(!1),y(E.dataTransfer.files)},N=E=>{y(E.target.files)},k=E=>{if(E===0)return"0 Bytes";const O=1024,A=["Bytes","KB","MB","GB"],_=Math.floor(Math.log(E)/Math.log(O));return parseFloat((E/Math.pow(O,_)).toFixed(2))+" "+A[_]},S=E=>new Date(E*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),C=()=>e.covers.length+e.pagebreaks.length+e.general.length+e.music.length,P=()=>{const E=[...e.covers,...e.pagebreaks,...e.general,...e.music].reduce((O,A)=>O+A.size,0);return k(E)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Upload Manager"}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[C()," files  ",P()," total"]})]}),i.jsx("button",{onClick:x,disabled:r,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:r?"Refreshing...":"Refresh"})]}),s&&i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg",children:s}),o&&i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400 px-4 py-3 rounded-lg",children:o}),i.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsx("nav",{className:"-mb-px flex space-x-8",children:["covers","pagebreaks","general","music"].map(E=>i.jsxs("button",{onClick:()=>d(E),className:`py-2 px-1 border-b-2 font-medium text-sm capitalize transition-colors ${c===E?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[E," (",e[E].length,")"]},E))})}),(c==="general"||c==="music")&&i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow mb-6",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Upload Files"}),i.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${f?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,onDragOver:v,onDragLeave:w,onDrop:j,children:[i.jsx("input",{ref:m,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp,video/mp4,video/webm,video/quicktime,audio/mpeg,audio/mp3,application/pdf",onChange:N,className:"hidden"}),u?i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"animate-spin mx-auto h-8 w-8 border-2 border-blue-600 border-t-transparent rounded-full"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Uploading..."})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:i.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Drag and drop a file here, or"," ",i.jsx("button",{onClick:()=>{var E;return(E=m.current)==null?void 0:E.click()},className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"browse to upload"})]}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:"Supports images (JPEG, PNG, GIF, WebP), videos (MP4, WebM, MOV), audio (MP3), and PDFs - max 100MB"})]})]})]})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:i.jsx("div",{className:"p-6",children:r?i.jsx("div",{className:"text-center py-8",children:"Loading uploads..."}):e[c].length===0?i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsxs("p",{children:["No ",c," found"]}),c==="general"?i.jsx("p",{className:"text-sm mt-2",children:"Use the upload area above to add files."}):i.jsxs("p",{className:"text-sm mt-2",children:["Upload some ",c," to see them here."]})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e[c].map((E,O)=>{const A=E.type.startsWith("video/"),_=E.type.startsWith("audio/"),I=E.type.startsWith("image/"),D=E.type==="application/pdf";return i.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[i.jsxs("div",{className:"aspect-w-16 aspect-h-9 bg-gray-100 dark:bg-gray-700",children:[I&&i.jsx("img",{src:E.url,alt:E.filename,className:"w-full h-32 object-cover",onError:$=>{var M;const L=$.target;L.style.display="none",(M=L.nextElementSibling)==null||M.classList.remove("hidden")}}),A&&i.jsx("video",{src:E.url,className:"w-full h-32 object-cover",controls:!0}),_&&i.jsxs("div",{className:"w-full h-32 flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-700 p-4",children:[i.jsx("svg",{className:"w-8 h-8 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),i.jsx("audio",{src:E.url,controls:!0,className:"w-full max-w-xs"})]}),D&&i.jsxs("div",{className:"w-full h-32 flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-700",children:[i.jsxs("svg",{className:"w-12 h-12 text-red-500 mb-2",fill:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z"}),i.jsx("path",{d:"M14 2v6h6M9.5 14.5v-3M9.5 17v.5M12 14v3.5M12 11.5v.5M14.5 14.5v-3M14.5 17v.5",stroke:"white",strokeWidth:"0.5"})]}),i.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"PDF"})]}),!I&&!A&&!_&&!D&&i.jsx("div",{className:"w-full h-32 flex items-center justify-center bg-gray-100 dark:bg-gray-700",children:i.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",title:E.filename,children:E.filename}),i.jsxs("div",{className:"mt-2 space-y-1 text-xs text-gray-500 dark:text-gray-400",children:[i.jsxs("p",{children:["Size: ",k(E.size)]}),i.jsxs("p",{children:["Modified: ",S(E.modified)]})]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("a",{href:E.url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 text-white text-xs px-3 py-2 rounded hover:bg-blue-700 transition-colors text-center",children:"View"}),i.jsx("button",{onClick:()=>b(E),className:"flex-1 bg-red-600 text-white text-xs px-3 py-2 rounded hover:bg-red-700 transition-colors",children:"Delete"})]})]})]},O)})})})})]})}function vD(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=vD(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ct(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=vD(e))&&(n&&(n+=" "),n+=t);return n}var QX=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function ON(e){if(typeof e!="string")return!1;var t=QX;return t.includes(e)}var eJ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function wD(e){if(typeof e!="string")return!1;var t=eJ;return t.includes(e)}function kD(e){return typeof e=="string"&&e.startsWith("data-")}function cs(e){var t=Object.entries(e).filter(r=>{var[n]=r;return wD(n)||kD(n)});return Object.fromEntries(t)}function zl(e){if(e==null)return null;if(g.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return cs(t)}return typeof e=="object"&&!Array.isArray(e)?cs(e):null}function jn(e){var t=Object.entries(e).filter(r=>{var[n]=r;return wD(n)||kD(n)||ON(n)});return Object.fromEntries(t)}function tJ(e){return e==null?null:g.isValidElement(e)?jn(e.props):typeof e=="object"&&!Array.isArray(e)?jn(e):null}var rJ=["children","width","height","viewBox","className","style","title","desc"];function D1(){return D1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D1.apply(null,arguments)}function nJ(e,t){if(e==null)return{};var r,n,s=sJ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function sJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $N=g.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:a,className:o,style:l,title:c,desc:d}=e,u=nJ(e,rJ),h=a||{width:n,height:s,x:0,y:0},f=ct("recharts-surface",o);return g.createElement("svg",D1({},jn(u),{className:f,width:n,height:s,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),g.createElement("title",null,c),g.createElement("desc",null,d),r)}),aJ=["children","className"];function I1(){return I1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I1.apply(null,arguments)}function iJ(e,t){if(e==null)return{};var r,n,s=oJ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Yr=g.forwardRef((e,t)=>{var{children:r,className:n}=e,s=iJ(e,aJ),a=ct("recharts-layer",n);return g.createElement("g",I1({className:a},jn(s),{ref:t}),r)}),jD=g.createContext(null),lJ=()=>g.useContext(jD);function Nt(e){return function(){return e}}const ND=Math.cos,_g=Math.sin,ga=Math.sqrt,Eg=Math.PI,Rx=2*Eg,L1=Math.PI,R1=2*L1,nl=1e-6,cJ=R1-nl;function SD(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function dJ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return SD;const r=10**t;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class uJ{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?SD:dJ(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,a,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+a},${this._y1=+o}`}arcTo(t,r,n,s,a){if(t=+t,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=n-t,d=s-r,u=o-t,h=l-r,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>nl)if(!(Math.abs(h*c-d*u)>nl)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,m=s-l,x=c*c+d*d,b=p*p+m*m,y=Math.sqrt(x),v=Math.sqrt(f),w=a*Math.tan((L1-Math.acos((x+f-b)/(2*y*v)))/2),j=w/v,N=w/y;Math.abs(j-1)>nl&&this._append`L${t+j*u},${r+j*h}`,this._append`A${a},${a},0,0,${+(h*p>u*m)},${this._x1=t+N*c},${this._y1=r+N*d}`}}arc(t,r,n,s,a,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),d=t+l,u=r+c,h=1^o,f=o?s-a:a-s;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>nl||Math.abs(this._y1-u)>nl)&&this._append`L${d},${u}`,n&&(f<0&&(f=f%R1+R1),f>cJ?this._append`A${n},${n},0,1,${h},${t-l},${r-c}A${n},${n},0,1,${h},${this._x1=d},${this._y1=u}`:f>nl&&this._append`A${n},${n},0,${+(f>=L1)},${h},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function DN(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new uJ(t)}function IN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function CD(e){this._context=e}CD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Bx(e){return new CD(e)}function _D(e){return e[0]}function ED(e){return e[1]}function AD(e,t){var r=Nt(!0),n=null,s=Bx,a=null,o=DN(l);e=typeof e=="function"?e:e===void 0?_D:Nt(e),t=typeof t=="function"?t:t===void 0?ED:Nt(t);function l(c){var d,u=(c=IN(c)).length,h,f=!1,p;for(n==null&&(a=s(p=o())),d=0;d<=u;++d)!(d<u&&r(h=c[d],d,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(h,d,c),+t(h,d,c));if(p)return a=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Nt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Nt(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Nt(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(a=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=a=null:a=s(n=c),l):n},l}function Rp(e,t,r){var n=null,s=Nt(!0),a=null,o=Bx,l=null,c=DN(d);e=typeof e=="function"?e:e===void 0?_D:Nt(+e),t=typeof t=="function"?t:Nt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?ED:Nt(+r);function d(h){var f,p,m,x=(h=IN(h)).length,b,y=!1,v,w=new Array(x),j=new Array(x);for(a==null&&(l=o(v=c())),f=0;f<=x;++f){if(!(f<x&&s(b=h[f],f,h))===y)if(y=!y)p=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=f-1;m>=p;--m)l.point(w[m],j[m]);l.lineEnd(),l.areaEnd()}y&&(w[f]=+e(b,f,h),j[f]=+t(b,f,h),l.point(n?+n(b,f,h):w[f],r?+r(b,f,h):j[f]))}if(v)return l=null,v+""||null}function u(){return AD().defined(s).curve(o).context(a)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:Nt(+h),n=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Nt(+h),d):e},d.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Nt(+h),d):n},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:Nt(+h),r=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Nt(+h),d):t},d.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Nt(+h),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(n).y(t)},d.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Nt(!!h),d):s},d.curve=function(h){return arguments.length?(o=h,a!=null&&(l=o(a)),d):o},d.context=function(h){return arguments.length?(h==null?a=l=null:l=o(a=h),d):a},d}class TD{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function hJ(e){return new TD(e,!0)}function fJ(e){return new TD(e,!1)}const LN={draw(e,t){const r=ga(t/Eg);e.moveTo(r,0),e.arc(0,0,r,0,Rx)}},pJ={draw(e,t){const r=ga(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},PD=ga(1/3),mJ=PD*2,gJ={draw(e,t){const r=ga(t/mJ),n=r*PD;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},xJ={draw(e,t){const r=ga(t),n=-r/2;e.rect(n,n,r,r)}},bJ=.8908130915292852,MD=_g(Eg/10)/_g(7*Eg/10),yJ=_g(Rx/10)*MD,vJ=-ND(Rx/10)*MD,wJ={draw(e,t){const r=ga(t*bJ),n=yJ*r,s=vJ*r;e.moveTo(0,-r),e.lineTo(n,s);for(let a=1;a<5;++a){const o=Rx*a/5,l=ND(o),c=_g(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},cv=ga(3),kJ={draw(e,t){const r=-ga(t/(cv*3));e.moveTo(0,r*2),e.lineTo(-cv*r,-r),e.lineTo(cv*r,-r),e.closePath()}},xs=-.5,bs=ga(3)/2,B1=1/ga(12),jJ=(B1/2+1)*3,NJ={draw(e,t){const r=ga(t/jJ),n=r/2,s=r*B1,a=n,o=r*B1+r,l=-a,c=o;e.moveTo(n,s),e.lineTo(a,o),e.lineTo(l,c),e.lineTo(xs*n-bs*s,bs*n+xs*s),e.lineTo(xs*a-bs*o,bs*a+xs*o),e.lineTo(xs*l-bs*c,bs*l+xs*c),e.lineTo(xs*n+bs*s,xs*s-bs*n),e.lineTo(xs*a+bs*o,xs*o-bs*a),e.lineTo(xs*l+bs*c,xs*c-bs*l),e.closePath()}};function SJ(e,t){let r=null,n=DN(s);e=typeof e=="function"?e:Nt(e||LN),t=typeof t=="function"?t:Nt(t===void 0?64:+t);function s(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return s.type=function(a){return arguments.length?(e=typeof a=="function"?a:Nt(a),s):e},s.size=function(a){return arguments.length?(t=typeof a=="function"?a:Nt(+a),s):t},s.context=function(a){return arguments.length?(r=a??null,s):r},s}function Ag(){}function Tg(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function OD(e){this._context=e}OD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Tg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Tg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function CJ(e){return new OD(e)}function $D(e){this._context=e}$D.prototype={areaStart:Ag,areaEnd:Ag,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Tg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _J(e){return new $D(e)}function DD(e){this._context=e}DD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Tg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function EJ(e){return new DD(e)}function ID(e){this._context=e}ID.prototype={areaStart:Ag,areaEnd:Ag,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function AJ(e){return new ID(e)}function pA(e){return e<0?-1:1}function mA(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(a*s+o*n)/(n+s);return(pA(a)+pA(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function gA(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function dv(e,t,r){var n=e._x0,s=e._y0,a=e._x1,o=e._y1,l=(a-n)/3;e._context.bezierCurveTo(n+l,s+l*t,a-l,o-l*r,a,o)}function Pg(e){this._context=e}Pg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:dv(this,this._t0,gA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,dv(this,gA(this,r=mA(this,e,t)),r);break;default:dv(this,this._t0,r=mA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function LD(e){this._context=new RD(e)}(LD.prototype=Object.create(Pg.prototype)).point=function(e,t){Pg.prototype.point.call(this,t,e)};function RD(e){this._context=e}RD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}};function TJ(e){return new Pg(e)}function PJ(e){return new LD(e)}function BD(e){this._context=e}BD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=xA(e),s=xA(t),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function xA(e){var t,r=e.length-1,n,s=new Array(r),a=new Array(r),o=new Array(r);for(s[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/a[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/a[t];for(a[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function MJ(e){return new BD(e)}function zx(e,t){this._context=e,this._t=t}zx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function OJ(e){return new zx(e,.5)}function $J(e){return new zx(e,0)}function DJ(e){return new zx(e,1)}function hd(e,t){if((o=e.length)>1)for(var r=1,n,s,a=e[t[0]],o,l=a.length;r<o;++r)for(s=a,a=e[t[r]],n=0;n<l;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function z1(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function IJ(e,t){return e[t]}function LJ(e){const t=[];return t.key=e,t}function RJ(){var e=Nt([]),t=z1,r=hd,n=IJ;function s(a){var o=Array.from(e.apply(this,arguments),LJ),l,c=o.length,d=-1,u;for(const h of a)for(l=0,++d;l<c;++l)(o[l][d]=[0,+n(h,o[l].key,d,a)]).data=h;for(l=0,u=IN(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Nt(Array.from(a)),s):e},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:Nt(+a),s):n},s.order=function(a){return arguments.length?(t=a==null?z1:typeof a=="function"?a:Nt(Array.from(a)),s):t},s.offset=function(a){return arguments.length?(r=a??hd,s):r},s}function BJ(e,t){if((n=e.length)>0){for(var r,n,s=0,a=e[0].length,o;s<a;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}hd(e,t)}}function zJ(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,a=n.length;r<a;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}hd(e,t)}}function FJ(e,t){if(!(!((o=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,a,o;n<a;++n){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],h=u[n][1]||0,f=u[n-1][1]||0,p=(h-f)/2,m=0;m<l;++m){var x=e[t[m]],b=x[n][1]||0,y=x[n-1][1]||0;p+=b-y}c+=h,d+=p*h}s[n-1][1]+=s[n-1][0]=r,c&&(r-=d/c)}s[n-1][1]+=s[n-1][0]=r,hd(e,t)}}var Fx={},zD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(zD);var RN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(RN);var Hx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Hx);var Ux={},FD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(FD);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FD,r=Hx;function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const a=[],o=s.length;if(o===0)return a;let l=0,c="",d="",u=!1;for(s.charCodeAt(0)===46&&(a.push(""),l++);l<o;){const h=s[l];d?h==="\\"&&l+1<o?(l++,c+=s[l]):h===d?d="":c+=h:u?h==='"'||h==="'"?d=h:h==="]"?(u=!1,a.push(c),c=""):c+=h:h==="["?(u=!0,c&&(a.push(c),c="")):h==="."?c&&(a.push(c),c=""):c+=h,l++}return c&&a.push(c),a}e.toPath=n})(Ux);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zD,r=RN,n=Hx,s=Ux;function a(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?r.isDeepKey(c)?a(l,s.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let h=0;h<c.length;h++){if(u==null||t.isUnsafeProperty(c[h]))return d;u=u[c[h]]}return u===void 0?d:u}e.get=a})(Fx);var HJ=Fx.get;const Fl=Vn(HJ);var _r=e=>e===0?0:e>0?1:-1,zs=e=>typeof e=="number"&&e!=+e,xi=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Oe=e=>(typeof e=="number"||e instanceof Number)&&!zs(e),Da=e=>Oe(e)||typeof e=="string",UJ=0,Uh=e=>{var t=++UJ;return"".concat(e||"").concat(t)},an=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Oe(t)&&typeof t!="string")return n;var a;if(xi(t)){if(r==null)return n;var o=t.indexOf("%");a=r*parseFloat(t.slice(0,o))/100}else a=+t;return zs(a)&&(a=n),s&&r!=null&&a>r&&(a=r),a},HD=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Zt(e,t,r){return Oe(e)&&Oe(t)?e+r*(t-e):t}function UD(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Fl(n,t))===r)}var Lt=e=>e===null||typeof e>"u",Ef=e=>Lt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),WJ=["type","size","sizeType"];function F1(){return F1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F1.apply(null,arguments)}function bA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(r),!0).forEach(function(n){VJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VJ(e,t,r){return(t=qJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qJ(e){var t=GJ(e,"string");return typeof t=="symbol"?t:t+""}function GJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KJ(e,t){if(e==null)return{};var r,n,s=YJ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function YJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var WD={symbolCircle:LN,symbolCross:pJ,symbolDiamond:gJ,symbolSquare:xJ,symbolStar:wJ,symbolTriangle:kJ,symbolWye:NJ},XJ=Math.PI/180,JJ=e=>{var t="symbol".concat(Ef(e));return WD[t]||LN},ZJ=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*XJ;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},QJ=(e,t)=>{WD["symbol".concat(Ef(e))]=t},BN=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=KJ(e,WJ),a=yA(yA({},s),{},{type:t,size:r,sizeType:n}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var f=JJ(o),p=SJ().type(f).size(ZJ(r,n,o)),m=p();if(m!==null)return m},{className:c,cx:d,cy:u}=a,h=jn(a);return d===+d&&u===+u&&r===+r?g.createElement("path",F1({},h,{className:ct("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(u,")"),d:l()})):null};BN.registerSymbol=QJ;var zN=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(g.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{ON(s)&&(n[s]=a=>r[s](r,a))}),n},eZ=(e,t,r)=>n=>(e(t,r,n),null),Af=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var a=e[s];ON(s)&&typeof a=="function"&&(n||(n={}),n[s]=eZ(a,t,r))}),n};function H1(){return H1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H1.apply(null,arguments)}function vA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(r),!0).forEach(function(n){FN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FN(e,t,r){return(t=rZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rZ(e){var t=nZ(e,"string");return typeof t=="symbol"?t:t+""}function nZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ys=32;class HN extends g.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,s=ys/2,a=ys/6,o=ys/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return g.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:s,x2:ys,y2:s,className:"recharts-legend-icon"});if(c==="line")return g.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(ys,"M").concat(2*o,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(c==="rect")return g.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ys/8,"h").concat(ys,"v").concat(ys*3/4,"h").concat(-ys,"z"),className:"recharts-legend-icon"});if(g.isValidElement(t.legendIcon)){var d=tZ({},t);return delete d.legendIcon,g.cloneElement(t.legendIcon,d)}return g.createElement(BN,{fill:l,cx:s,cy:s,size:ys,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:s,inactiveColor:a,iconType:o}=this.props,l={x:0,y:0,width:ys,height:ys},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,h)=>{var f=u.formatter||s,p=ct({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:u.inactive});if(u.type==="none")return null;var m=u.inactive?a:u.color,x=f?f(u.value,u,h):u.value;return g.createElement("li",H1({className:p,style:c,key:"legend-item-".concat(h)},Af(this.props,u,h)),g.createElement($N,{width:r,height:r,viewBox:l,style:d,"aria-label":"".concat(x," legend icon")},this.renderIcon(u,o)),g.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},x))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return g.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}FN(HN,"displayName","Legend");FN(HN,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var VD={},qD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let a=0;a<r.length;a++){const o=r[a],l=n(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}e.uniqBy=t})(qD);var UN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(UN);var GD={},Wx={},KD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(KD);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KD;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Wx);var YD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(YD);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wx,r=YD;function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(GD);var XD={},JD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fx;function r(n){return function(s){return t.get(s,n)}}e.property=r})(JD);var ZD={},uv={},hv={},WN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(WN);var VN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(VN);var qN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(qN);var wA;function sZ(){return wA||(wA=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GN(),r=WN,n=VN,s=qN;function a(h,f,p){return typeof p!="function"?t.isMatch(h,f):o(h,f,function m(x,b,y,v,w,j){const N=p(x,b,y,v,w,j);return N!==void 0?!!N:o(x,b,m,j)},new Map)}function o(h,f,p,m){if(f===h)return!0;switch(typeof f){case"object":return l(h,f,p,m);case"function":return Object.keys(f).length>0?o(h,{...f},p,m):s.eq(h,f);default:return r.isObject(h)?typeof f=="string"?f==="":!0:s.eq(h,f)}}function l(h,f,p,m){if(f==null)return!0;if(Array.isArray(f))return d(h,f,p,m);if(f instanceof Map)return c(h,f,p,m);if(f instanceof Set)return u(h,f,p,m);const x=Object.keys(f);if(h==null)return x.length===0;if(x.length===0)return!0;if(m&&m.has(f))return m.get(f)===h;m&&m.set(f,h);try{for(let b=0;b<x.length;b++){const y=x[b];if(!n.isPrimitive(h)&&!(y in h)||f[y]===void 0&&h[y]!==void 0||f[y]===null&&h[y]!==null||!p(h[y],f[y],y,h,f,m))return!1}return!0}finally{m&&m.delete(f)}}function c(h,f,p,m){if(f.size===0)return!0;if(!(h instanceof Map))return!1;for(const[x,b]of f.entries()){const y=h.get(x);if(p(y,b,x,h,f,m)===!1)return!1}return!0}function d(h,f,p,m){if(f.length===0)return!0;if(!Array.isArray(h))return!1;const x=new Set;for(let b=0;b<f.length;b++){const y=f[b];let v=!1;for(let w=0;w<h.length;w++){if(x.has(w))continue;const j=h[w];let N=!1;if(p(j,y,b,h,f,m)&&(N=!0),N){x.add(w),v=!0;break}}if(!v)return!1}return!0}function u(h,f,p,m){return f.size===0?!0:h instanceof Set?d([...h],[...f],p,m):!1}e.isMatchWith=a,e.isSetMatch=u}(hv)),hv}var kA;function GN(){return kA||(kA=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sZ();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r}(uv)),uv}var QD={},KN={},eI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(eI);var YN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(YN);var XN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",a="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",h="[object Function]",f="[object ArrayBuffer]",p="[object Object]",m="[object Error]",x="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",v="[object Uint16Array]",w="[object Uint32Array]",j="[object BigUint64Array]",N="[object Int8Array]",k="[object Int16Array]",S="[object Int32Array]",C="[object BigInt64Array]",P="[object Float32Array]",E="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=f,e.arrayTag=u,e.bigInt64ArrayTag=C,e.bigUint64ArrayTag=j,e.booleanTag=s,e.dataViewTag=x,e.dateTag=l,e.errorTag=m,e.float32ArrayTag=P,e.float64ArrayTag=E,e.functionTag=h,e.int16ArrayTag=k,e.int32ArrayTag=S,e.int8ArrayTag=N,e.mapTag=c,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=d,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=v,e.uint32ArrayTag=w,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y})(XN);var tI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(tI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eI,r=YN,n=XN,s=VN,a=tI;function o(u,h){return l(u,void 0,u,new Map,h)}function l(u,h,f,p=new Map,m=void 0){const x=m==null?void 0:m(u,h,f,p);if(x!==void 0)return x;if(s.isPrimitive(u))return u;if(p.has(u))return p.get(u);if(Array.isArray(u)){const b=new Array(u.length);p.set(u,b);for(let y=0;y<u.length;y++)b[y]=l(u[y],y,f,p,m);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;p.set(u,b);for(const[y,v]of u)b.set(y,l(v,y,f,p,m));return b}if(u instanceof Set){const b=new Set;p.set(u,b);for(const y of u)b.add(l(y,void 0,f,p,m));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(a.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);p.set(u,b);for(let y=0;y<u.length;y++)b[y]=l(u[y],y,f,p,m);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return p.set(u,b),c(b,u,f,p,m),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return p.set(u,b),c(b,u,f,p,m),b}if(typeof Blob<"u"&&u instanceof Blob){const b=new Blob([u],{type:u.type});return p.set(u,b),c(b,u,f,p,m),b}if(u instanceof Error){const b=new u.constructor;return p.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,c(b,u,f,p,m),b}if(u instanceof Boolean){const b=new Boolean(u.valueOf());return p.set(u,b),c(b,u,f,p,m),b}if(u instanceof Number){const b=new Number(u.valueOf());return p.set(u,b),c(b,u,f,p,m),b}if(u instanceof String){const b=new String(u.valueOf());return p.set(u,b),c(b,u,f,p,m),b}if(typeof u=="object"&&d(u)){const b=Object.create(Object.getPrototypeOf(u));return p.set(u,b),c(b,u,f,p,m),b}return u}function c(u,h,f=u,p,m){const x=[...Object.keys(h),...t.getSymbols(h)];for(let b=0;b<x.length;b++){const y=x[b],v=Object.getOwnPropertyDescriptor(u,y);(v==null||v.writable)&&(u[y]=l(h[y],y,f,p,m))}}function d(u){switch(r.getTag(u)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(KN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KN;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(QD);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GN(),r=QD;function n(s){return s=r.cloneDeep(s),a=>t.isMatch(a,s)}e.matches=n})(ZD);var rI={},nI={},sI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KN,r=XN;function n(s,a){return t.cloneDeepWith(s,(o,l,c,d)=>{const u=a==null?void 0:a(o,l,c,d);if(u!==void 0)return u;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(h,s),h}case r.argumentsTag:{const h={};return t.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}e.cloneDeepWith=n})(sI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sI;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(nI);var aI={},JN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(JN);var iI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YN;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(iI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RN,r=JN,n=iI,s=Ux;function a(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=s.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const h=c[u];if((d==null||!Object.hasOwn(d,h))&&!((Array.isArray(d)||n.isArguments(d))&&r.isIndex(h)&&h<d.length))return!1;d=d[h]}return!0}e.has=a})(aI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GN(),r=Hx,n=nI,s=Fx,a=aI;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(d){const u=s.get(d,l);return u===void 0?a.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o})(rI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UN,r=JD,n=ZD,s=rI;function a(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=a})(XD);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qD,r=UN,n=GD,s=XD;function a(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(l)):[]}e.uniqBy=a})(VD);var aZ=VD.uniqBy;const jA=Vn(aZ);function oI(e,t,r){return t===!0?jA(e,r):typeof t=="function"?jA(e,t):e}var lI={exports:{}},cI={},dI={exports:{}},uI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fd=g;function iZ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oZ=typeof Object.is=="function"?Object.is:iZ,lZ=fd.useState,cZ=fd.useEffect,dZ=fd.useLayoutEffect,uZ=fd.useDebugValue;function hZ(e,t){var r=t(),n=lZ({inst:{value:r,getSnapshot:t}}),s=n[0].inst,a=n[1];return dZ(function(){s.value=r,s.getSnapshot=t,fv(s)&&a({inst:s})},[e,r,t]),cZ(function(){return fv(s)&&a({inst:s}),e(function(){fv(s)&&a({inst:s})})},[e]),uZ(r),r}function fv(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!oZ(e,r)}catch{return!0}}function fZ(e,t){return t()}var pZ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fZ:hZ;uI.useSyncExternalStore=fd.useSyncExternalStore!==void 0?fd.useSyncExternalStore:pZ;dI.exports=uI;var ZN=dI.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx=g,mZ=ZN;function gZ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xZ=typeof Object.is=="function"?Object.is:gZ,bZ=mZ.useSyncExternalStore,yZ=Vx.useRef,vZ=Vx.useEffect,wZ=Vx.useMemo,kZ=Vx.useDebugValue;cI.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var a=yZ(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=wZ(function(){function c(p){if(!d){if(d=!0,u=p,p=n(p),s!==void 0&&o.hasValue){var m=o.value;if(s(m,p))return h=m}return h=p}if(m=h,xZ(u,p))return m;var x=n(p);return s!==void 0&&s(m,x)?(u=p,m):(u=p,h=x)}var d=!1,u,h,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,s]);var l=bZ(e,a[0],a[1]);return vZ(function(){o.hasValue=!0,o.value=l},[l]),kZ(l),l};lI.exports=cI;var hI=lI.exports,QN=g.createContext(null),jZ=e=>e,Rt=()=>{var e=g.useContext(QN);return e?e.store.dispatch:jZ},Im=()=>{},NZ=()=>Im,SZ=(e,t)=>e===t;function Pe(e){var t=g.useContext(QN);return hI.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:NZ,t?t.store.getState:Im,t?t.store.getState:Im,t?e:Im,SZ)}function CZ(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function _Z(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function EZ(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var NA=e=>Array.isArray(e)?e:[e];function AZ(e){const t=Array.isArray(e[0])?e[0]:e;return EZ(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function TZ(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var PZ=class{constructor(e){this.value=e}deref(){return this.value}},MZ=typeof WeakRef<"u"?WeakRef:PZ,OZ=0,SA=1;function Bp(){return{s:OZ,v:void 0,o:null,p:null}}function fI(e,t={}){let r=Bp();const{resultEqualityCheck:n}=t;let s,a=0;function o(){var h;let l=r;const{length:c}=arguments;for(let f=0,p=c;f<p;f++){const m=arguments[f];if(typeof m=="function"||typeof m=="object"&&m!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const b=x.get(m);b===void 0?(l=Bp(),x.set(m,l)):l=b}else{let x=l.p;x===null&&(l.p=x=new Map);const b=x.get(m);b===void 0?(l=Bp(),x.set(m,l)):l=b}}const d=l;let u;if(l.s===SA)u=l.v;else if(u=e.apply(null,arguments),a++,n){const f=((h=s==null?void 0:s.deref)==null?void 0:h.call(s))??s;f!=null&&n(f,u)&&(u=f,a!==0&&a--),s=typeof u=="object"&&u!==null||typeof u=="function"?new MZ(u):u}return d.s=SA,d.v=u,u}return o.clearCache=()=>{r=Bp(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function $Z(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let a=0,o=0,l,c={},d=s.pop();typeof d=="object"&&(c=d,d=s.pop()),CZ(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...r,...c},{memoize:h,memoizeOptions:f=[],argsMemoize:p=fI,argsMemoizeOptions:m=[]}=u,x=NA(f),b=NA(m),y=AZ(s),v=h(function(){return a++,d.apply(null,arguments)},...x),w=p(function(){o++;const N=TZ(y,arguments);return l=v.apply(null,N),l},...b);return Object.assign(w,{resultFunc:d,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var Q=$Z(fI),DZ=Object.assign((e,t=Q)=>{_Z(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>DZ}),pI={},mI={},gI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,a)=>{if(n!==s){const o=t(n),l=t(s);if(o===l&&o===0){if(n<s)return a==="desc"?1:-1;if(n>s)return a==="desc"?-1:1}return a==="desc"?l-o:o-l}return 0};e.compareValues=r})(gI);var xI={},e2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(e2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e2,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||o!=null&&Object.hasOwn(o,a)}e.isKey=s})(xI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gI,r=xI,n=Ux;function s(a,o,l,c){if(a==null)return[];l=c?void 0:l,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(p=>String(p));const d=(p,m)=>{let x=p;for(let b=0;b<m.length&&x!=null;++b)x=x[m[b]];return x},u=(p,m)=>m==null||p==null?m:typeof p=="object"&&"key"in p?Object.hasOwn(m,p.key)?m[p.key]:d(m,p.path):typeof p=="function"?p(m):Array.isArray(p)?d(m,p):typeof m=="object"?m[p]:m,h=o.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return a.map(p=>({original:p,criteria:h.map(m=>u(m,p))})).slice().sort((p,m)=>{for(let x=0;x<h.length;x++){const b=t.compareValues(p.criteria[x],m.criteria[x],l[x]);if(b!==0)return b}return 0}).map(p=>p.original)}e.orderBy=s})(mI);var bI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],a=Math.floor(n),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<a?o(u,c+1):s.push(u)}};return o(r,0),s}e.flatten=t})(bI);var t2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JN,r=Wx,n=WN,s=qN;function a(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],o):!1}e.isIterateeCall=a})(t2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mI,r=bI,n=t2;function s(a,...o){const l=o.length;return l>1&&n.isIterateeCall(a,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(a,r.flatten(o),["asc"])}e.sortBy=s})(pI);var IZ=pI.sortBy;const qx=Vn(IZ);var yI=e=>e.legend.settings,LZ=e=>e.legend.size,RZ=e=>e.legend.payload,BZ=Q([RZ,yI],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?qx(n,r):n});function zZ(){return Pe(BZ)}var zp=1;function vI(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=g.useState({height:0,left:0,top:0,width:0}),n=g.useCallback(s=>{if(s!=null){var a=s.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-t.height)>zp||Math.abs(o.left-t.left)>zp||Math.abs(o.top-t.top)>zp||Math.abs(o.width-t.width)>zp)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function zr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var FZ=typeof Symbol=="function"&&Symbol.observable||"@@observable",CA=FZ,pv=()=>Math.random().toString(36).substring(7).split("").join("."),HZ={INIT:`@@redux/INIT${pv()}`,REPLACE:`@@redux/REPLACE${pv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${pv()}`},Mg=HZ;function r2(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function wI(e,t,r){if(typeof e!="function")throw new Error(zr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(zr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(zr(1));return r(wI)(e,t)}let n=e,s=t,a=new Map,o=a,l=0,c=!1;function d(){o===a&&(o=new Map,a.forEach((b,y)=>{o.set(y,b)}))}function u(){if(c)throw new Error(zr(3));return s}function h(b){if(typeof b!="function")throw new Error(zr(4));if(c)throw new Error(zr(5));let y=!0;d();const v=l++;return o.set(v,b),function(){if(y){if(c)throw new Error(zr(6));y=!1,d(),o.delete(v),a=null}}}function f(b){if(!r2(b))throw new Error(zr(7));if(typeof b.type>"u")throw new Error(zr(8));if(typeof b.type!="string")throw new Error(zr(17));if(c)throw new Error(zr(9));try{c=!0,s=n(s,b)}finally{c=!1}return(a=o).forEach(v=>{v()}),b}function p(b){if(typeof b!="function")throw new Error(zr(10));n=b,f({type:Mg.REPLACE})}function m(){const b=h;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(zr(11));function v(){const j=y;j.next&&j.next(u())}return v(),{unsubscribe:b(v)}},[CA](){return this}}}return f({type:Mg.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:p,[CA]:m}}function UZ(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Mg.INIT})>"u")throw new Error(zr(12));if(typeof r(void 0,{type:Mg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(zr(13))})}function kI(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const o=t[a];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{UZ(r)}catch(a){s=a}return function(o={},l){if(s)throw s;let c=!1;const d={};for(let u=0;u<n.length;u++){const h=n[u],f=r[h],p=o[h],m=f(p,l);if(typeof m>"u")throw l&&l.type,new Error(zr(14));d[h]=m,c=c||m!==p}return c=c||n.length!==Object.keys(o).length,c?d:o}}function Og(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function WZ(...e){return t=>(r,n)=>{const s=t(r,n);let a=()=>{throw new Error(zr(15))};const o={getState:s.getState,dispatch:(c,...d)=>a(c,...d)},l=e.map(c=>c(o));return a=Og(...l)(s.dispatch),{...s,dispatch:a}}}function jI(e){return r2(e)&&"type"in e&&typeof e.type=="string"}var NI=Symbol.for("immer-nothing"),_A=Symbol.for("immer-draftable"),ds=Symbol.for("immer-state");function ta(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var pd=Object.getPrototypeOf;function Hl(e){return!!e&&!!e[ds]}function bi(e){var t;return e?SI(e)||Array.isArray(e)||!!e[_A]||!!((t=e.constructor)!=null&&t[_A])||Tf(e)||Kx(e):!1}var VZ=Object.prototype.constructor.toString();function SI(e){if(!e||typeof e!="object")return!1;const t=pd(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===VZ}function $g(e,t){Gx(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function Gx(e){const t=e[ds];return t?t.type_:Array.isArray(e)?1:Tf(e)?2:Kx(e)?3:0}function U1(e,t){return Gx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function CI(e,t,r){const n=Gx(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function qZ(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Tf(e){return e instanceof Map}function Kx(e){return e instanceof Set}function sl(e){return e.copy_||e.base_}function W1(e,t){if(Tf(e))return new Map(e);if(Kx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=SI(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[ds];let s=Reflect.ownKeys(n);for(let a=0;a<s.length;a++){const o=s[a],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(pd(e),n)}else{const n=pd(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function n2(e,t=!1){return Yx(e)||Hl(e)||!bi(e)||(Gx(e)>1&&Object.defineProperties(e,{set:{value:Fp},add:{value:Fp},clear:{value:Fp},delete:{value:Fp}}),Object.freeze(e),t&&Object.values(e).forEach(r=>n2(r,!0))),e}function Fp(){ta(2)}function Yx(e){return Object.isFrozen(e)}var GZ={};function Ul(e){const t=GZ[e];return t||ta(0,e),t}var Wh;function _I(){return Wh}function KZ(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function EA(e,t){t&&(Ul("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function V1(e){q1(e),e.drafts_.forEach(YZ),e.drafts_=null}function q1(e){e===Wh&&(Wh=e.parent_)}function AA(e){return Wh=KZ(Wh,e)}function YZ(e){const t=e[ds];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function TA(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[ds].modified_&&(V1(t),ta(4)),bi(e)&&(e=Dg(t,e),t.parent_||Ig(t,e)),t.patches_&&Ul("Patches").generateReplacementPatches_(r[ds].base_,e,t.patches_,t.inversePatches_)):e=Dg(t,r,[]),V1(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==NI?e:void 0}function Dg(e,t,r){if(Yx(t))return t;const n=t[ds];if(!n)return $g(t,(s,a)=>PA(e,n,t,s,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Ig(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let a=s,o=!1;n.type_===3&&(a=new Set(s),s.clear(),o=!0),$g(a,(l,c)=>PA(e,n,s,l,c,r,o)),Ig(e,s,!1),r&&e.patches_&&Ul("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function PA(e,t,r,n,s,a,o){if(Hl(s)){const l=a&&t&&t.type_!==3&&!U1(t.assigned_,n)?a.concat(n):void 0,c=Dg(e,s,l);if(CI(r,n,c),Hl(c))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(bi(s)&&!Yx(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Dg(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Tf(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Ig(e,s)}}function Ig(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&n2(t,r)}function XZ(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:_I(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,a=s2;r&&(s=[n],a=Vh);const{revoke:o,proxy:l}=Proxy.revocable(s,a);return n.draft_=l,n.revoke_=o,l}var s2={get(e,t){if(t===ds)return e;const r=sl(e);if(!U1(r,t))return JZ(e,r,t);const n=r[t];return e.finalized_||!bi(n)?n:n===mv(e.base_,t)?(gv(e),e.copy_[t]=K1(n,e)):n},has(e,t){return t in sl(e)},ownKeys(e){return Reflect.ownKeys(sl(e))},set(e,t,r){const n=EI(sl(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=mv(sl(e),t),a=s==null?void 0:s[ds];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(qZ(r,s)&&(r!==void 0||U1(e.base_,t)))return!0;gv(e),G1(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return mv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,gv(e),G1(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=sl(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ta(11)},getPrototypeOf(e){return pd(e.base_)},setPrototypeOf(){ta(12)}},Vh={};$g(s2,(e,t)=>{Vh[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Vh.deleteProperty=function(e,t){return Vh.set.call(this,e,t,void 0)};Vh.set=function(e,t,r){return s2.set.call(this,e[0],t,r,e[0])};function mv(e,t){const r=e[ds];return(r?sl(r):e)[t]}function JZ(e,t,r){var s;const n=EI(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function EI(e,t){if(!(t in e))return;let r=pd(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=pd(r)}}function G1(e){e.modified_||(e.modified_=!0,e.parent_&&G1(e.parent_))}function gv(e){e.copy_||(e.copy_=W1(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ZZ=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const o=this;return function(c=a,...d){return o.produce(c,u=>r.call(this,u,...d))}}typeof r!="function"&&ta(6),n!==void 0&&typeof n!="function"&&ta(7);let s;if(bi(t)){const a=AA(this),o=K1(t,void 0);let l=!0;try{s=r(o),l=!1}finally{l?V1(a):q1(a)}return EA(a,n),TA(s,a)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===NI&&(s=void 0),this.autoFreeze_&&n2(s,!0),n){const a=[],o=[];Ul("Patches").generateReplacementPatches_(t,s,a,o),n(a,o)}return s}else ta(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,s;return[this.produce(t,r,(o,l)=>{n=o,s=l}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){bi(e)||ta(8),Hl(e)&&(e=li(e));const t=AA(this),r=K1(e,void 0);return r[ds].isManual_=!0,q1(t),r}finishDraft(e,t){const r=e&&e[ds];(!r||!r.isManual_)&&ta(9);const{scope_:n}=r;return EA(n,t),TA(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Ul("Patches").applyPatches_;return Hl(e)?n(e,t):this.produce(e,s=>n(s,t))}};function K1(e,t){const r=Tf(e)?Ul("MapSet").proxyMap_(e,t):Kx(e)?Ul("MapSet").proxySet_(e,t):XZ(e,t);return(t?t.scope_:_I()).drafts_.push(r),r}function li(e){return Hl(e)||ta(10,e),AI(e)}function AI(e){if(!bi(e)||Yx(e))return e;const t=e[ds];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=W1(e,t.scope_.immer_.useStrictShallowCopy_)}else r=W1(e,!0);return $g(r,(n,s)=>{CI(r,n,AI(s))}),t&&(t.finalized_=!1),r}var QZ=new ZZ,TI=QZ.produce;function PI(e){return({dispatch:r,getState:n})=>s=>a=>typeof a=="function"?a(r,n,e):s(a)}var eQ=PI(),tQ=PI,rQ=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Og:Og.apply(null,arguments)};function Fs(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(ns(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>jI(n)&&n.type===e,r}var MI=class Uu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Uu.prototype)}static get[Symbol.species](){return Uu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Uu(...t[0].concat(this)):new Uu(...t.concat(this))}};function MA(e){return bi(e)?TI(e,()=>{}):e}function Hp(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function nQ(e){return typeof e=="boolean"}var sQ=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=t??{};let o=new MI;return r&&(nQ(r)?o.push(eQ):o.push(tQ(r.extraArgument))),o},OI="RTK_autoBatch",mn=()=>e=>({payload:e,meta:{[OI]:!0}}),OA=e=>t=>{setTimeout(t,e)},$I=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,a=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:OA(10):e.type==="callback"?e.queueNotification:OA(e.timeout),d=()=>{o=!1,a&&(a=!1,l.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const h=()=>s&&u(),f=n.subscribe(h);return l.add(u),()=>{f(),l.delete(u)}},dispatch(u){var h;try{return s=!((h=u==null?void 0:u.meta)!=null&&h[OI]),a=!s,a&&(o||(o=!0,c(d))),n.dispatch(u)}finally{s=!0}}})},aQ=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new MI(e);return n&&s.push($I(typeof n=="object"?n:void 0)),s};function iQ(e){const t=sQ(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:a=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(r2(r))l=kI(r);else throw new Error(ns(1));let c;typeof n=="function"?c=n(t):c=t();let d=Og;s&&(d=rQ({trace:!1,...typeof s=="object"&&s}));const u=WZ(...c),h=aQ(u);let f=typeof o=="function"?o(h):h();const p=d(...f);return wI(l,a,p)}function DI(e){const t={},r=[];let n;const s={addCase(a,o){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(ns(28));if(l in t)throw new Error(ns(29));return t[l]=o,s},addAsyncThunk(a,o){return o.pending&&(t[a.pending.type]=o.pending),o.rejected&&(t[a.rejected.type]=o.rejected),o.fulfilled&&(t[a.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:a.settled,reducer:o.settled}),s},addMatcher(a,o){return r.push({matcher:a,reducer:o}),s},addDefaultCase(a){return n=a,s}};return e(s),[t,r,n]}function oQ(e){return typeof e=="function"}function lQ(e,t){let[r,n,s]=DI(t),a;if(oQ(e))a=()=>MA(e());else{const l=MA(e);a=()=>l}function o(l=a(),c){let d=[r[c.type],...n.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[s]),d.reduce((u,h)=>{if(h)if(Hl(u)){const p=h(u,c);return p===void 0?u:p}else{if(bi(u))return TI(u,f=>h(f,c));{const f=h(u,c);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},l)}return o.getInitialState=a,o}var cQ="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",dQ=(e=21)=>{let t="",r=e;for(;r--;)t+=cQ[Math.random()*64|0];return t},uQ=Symbol.for("rtk-slice-createasyncthunk");function hQ(e,t){return`${e}/${t}`}function fQ({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[uQ];return function(s){const{name:a,reducerPath:o=a}=s;if(!a)throw new Error(ns(11));const l=(typeof s.reducers=="function"?s.reducers(mQ()):s.reducers)||{},c=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(j,N){const k=typeof j=="string"?j:j.type;if(!k)throw new Error(ns(12));if(k in d.sliceCaseReducersByType)throw new Error(ns(13));return d.sliceCaseReducersByType[k]=N,u},addMatcher(j,N){return d.sliceMatchers.push({matcher:j,reducer:N}),u},exposeAction(j,N){return d.actionCreators[j]=N,u},exposeCaseReducer(j,N){return d.sliceCaseReducersByName[j]=N,u}};c.forEach(j=>{const N=l[j],k={reducerName:j,type:hQ(a,j),createNotation:typeof s.reducers=="function"};xQ(N)?yQ(k,N,u,t):gQ(k,N,u)});function h(){const[j={},N=[],k=void 0]=typeof s.extraReducers=="function"?DI(s.extraReducers):[s.extraReducers],S={...j,...d.sliceCaseReducersByType};return lQ(s.initialState,C=>{for(let P in S)C.addCase(P,S[P]);for(let P of d.sliceMatchers)C.addMatcher(P.matcher,P.reducer);for(let P of N)C.addMatcher(P.matcher,P.reducer);k&&C.addDefaultCase(k)})}const f=j=>j,p=new Map,m=new WeakMap;let x;function b(j,N){return x||(x=h()),x(j,N)}function y(){return x||(x=h()),x.getInitialState()}function v(j,N=!1){function k(C){let P=C[j];return typeof P>"u"&&N&&(P=Hp(m,k,y)),P}function S(C=f){const P=Hp(p,N,()=>new WeakMap);return Hp(P,C,()=>{const E={};for(const[O,A]of Object.entries(s.selectors??{}))E[O]=pQ(A,C,()=>Hp(m,C,y),N);return E})}return{reducerPath:j,getSelectors:S,get selectors(){return S(k)},selectSlice:k}}const w={name:a,reducer:b,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:y,...v(o),injectInto(j,{reducerPath:N,...k}={}){const S=N??o;return j.inject({reducerPath:S,reducer:b},k),{...w,...v(S,!0)}}};return w}}function pQ(e,t,r,n){function s(a,...o){let l=t(a);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return s.unwrapped=e,s}var fs=fQ();function mQ(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function gQ({type:e,reducerName:t,createNotation:r},n,s){let a,o;if("reducer"in n){if(r&&!bQ(n))throw new Error(ns(17));a=n.reducer,o=n.prepare}else a=n;s.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,o?Fs(e,o):Fs(e))}function xQ(e){return e._reducerDefinitionType==="asyncThunk"}function bQ(e){return e._reducerDefinitionType==="reducerWithPrepare"}function yQ({type:e,reducerName:t},r,n,s){if(!s)throw new Error(ns(18));const{payloadCreator:a,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=r,h=s(e,a,u);n.exposeAction(t,h),o&&n.addCase(h.fulfilled,o),l&&n.addCase(h.pending,l),c&&n.addCase(h.rejected,c),d&&n.addMatcher(h.settled,d),n.exposeCaseReducer(t,{fulfilled:o||Up,pending:l||Up,rejected:c||Up,settled:d||Up})}function Up(){}var vQ="task",II="listener",LI="completed",a2="cancelled",wQ=`task-${a2}`,kQ=`task-${LI}`,Y1=`${II}-${a2}`,jQ=`${II}-${LI}`,Xx=class{constructor(e){Ye(this,"name","TaskAbortError");Ye(this,"message");this.code=e,this.message=`${vQ} ${a2} (reason: ${e})`}},i2=(e,t)=>{if(typeof e!="function")throw new TypeError(ns(32))},Lg=()=>{},RI=(e,t=Lg)=>(e.catch(t),e),BI=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),kl=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},jl=e=>{if(e.aborted){const{reason:t}=e;throw new Xx(t)}};function zI(e,t){let r=Lg;return new Promise((n,s)=>{const a=()=>s(new Xx(e.reason));if(e.aborted){a();return}r=BI(e,a),t.finally(()=>r()).then(n,s)}).finally(()=>{r=Lg})}var NQ=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Xx?"cancelled":"rejected",error:r}}finally{t==null||t()}},Rg=e=>t=>RI(zI(e,t).then(r=>(jl(e),r))),FI=e=>{const t=Rg(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Yc}=Object,$A={},Jx="listenerMiddleware",SQ=(e,t)=>{const r=n=>BI(e,()=>kl(n,e.reason));return(n,s)=>{i2(n);const a=new AbortController;r(a);const o=NQ(async()=>{jl(e),jl(a.signal);const l=await n({pause:Rg(a.signal),delay:FI(a.signal),signal:a.signal});return jl(a.signal),l},()=>kl(a,kQ));return s!=null&&s.autoJoin&&t.push(o.catch(Lg)),{result:Rg(e)(o),cancel(){kl(a,wQ)}}}},CQ=(e,t)=>{const r=async(n,s)=>{jl(t);let a=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:n,effect:(h,f)=>{f.unsubscribe(),c([h,f.getState(),f.getOriginalState()])}});a=()=>{u(),d()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await zI(t,Promise.race(l));return jl(t),c}finally{a()}};return(n,s)=>RI(r(n,s))},HI=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:a}=e;if(t)s=Fs(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(ns(21));return i2(a),{predicate:s,type:t,effect:a}},UI=Yc(e=>{const{type:t,predicate:r,effect:n}=HI(e);return{id:dQ(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ns(22))}}},{withTypes:()=>UI}),DA=(e,t)=>{const{type:r,effect:n,predicate:s}=HI(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===s)&&a.effect===n)},X1=e=>{e.pending.forEach(t=>{kl(t,Y1)})},_Q=(e,t)=>()=>{for(const r of t.keys())X1(r);e.clear()},IA=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},WI=Yc(Fs(`${Jx}/add`),{withTypes:()=>WI}),EQ=Fs(`${Jx}/removeAll`),VI=Yc(Fs(`${Jx}/remove`),{withTypes:()=>VI}),AQ=(...e)=>{console.error(`${Jx}/error`,...e)},Pf=(e={})=>{const t=new Map,r=new Map,n=p=>{const m=r.get(p)??0;r.set(p,m+1)},s=p=>{const m=r.get(p)??1;m===1?r.delete(p):r.set(p,m-1)},{extra:a,onError:o=AQ}=e;i2(o);const l=p=>(p.unsubscribe=()=>t.delete(p.id),t.set(p.id,p),m=>{p.unsubscribe(),m!=null&&m.cancelActive&&X1(p)}),c=p=>{const m=DA(t,p)??UI(p);return l(m)};Yc(c,{withTypes:()=>c});const d=p=>{const m=DA(t,p);return m&&(m.unsubscribe(),p.cancelActive&&X1(m)),!!m};Yc(d,{withTypes:()=>d});const u=async(p,m,x,b)=>{const y=new AbortController,v=CQ(c,y.signal),w=[];try{p.pending.add(y),n(p),await Promise.resolve(p.effect(m,Yc({},x,{getOriginalState:b,condition:(j,N)=>v(j,N).then(Boolean),take:v,delay:FI(y.signal),pause:Rg(y.signal),extra:a,signal:y.signal,fork:SQ(y.signal,w),unsubscribe:p.unsubscribe,subscribe:()=>{t.set(p.id,p)},cancelActiveListeners:()=>{p.pending.forEach((j,N,k)=>{j!==y&&(kl(j,Y1),k.delete(j))})},cancel:()=>{kl(y,Y1),p.pending.delete(y)},throwIfCancelled:()=>{jl(y.signal)}})))}catch(j){j instanceof Xx||IA(o,j,{raisedBy:"effect"})}finally{await Promise.all(w),kl(y,jQ),s(p),p.pending.delete(y)}},h=_Q(t,r);return{middleware:p=>m=>x=>{if(!jI(x))return m(x);if(WI.match(x))return c(x.payload);if(EQ.match(x)){h();return}if(VI.match(x))return d(x.payload);let b=p.getState();const y=()=>{if(b===$A)throw new Error(ns(23));return b};let v;try{if(v=m(x),t.size>0){const w=p.getState(),j=Array.from(t.values());for(const N of j){let k=!1;try{k=N.predicate(x,w,b)}catch(S){k=!1,IA(o,S,{raisedBy:"predicate"})}k&&u(N,x,p,y)}}}finally{b=$A}return v},startListening:c,stopListening:d,clearListeners:h}};function ns(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var TQ={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},qI=fs({name:"chartLayout",initialState:TQ,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:PQ,setLayout:MQ,setChartSize:OQ,setScale:$Q}=qI.actions,DQ=qI.reducer;function LA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function RA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LA(Object(r),!0).forEach(function(n){IQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IQ(e,t,r){return(t=LQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LQ(e){var t=RQ(e,"string");return typeof t=="symbol"?t:t+""}function RQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bg=Math.PI/180,BQ=e=>e*180/Math.PI,cr=(e,t,r,n)=>({x:e+Math.cos(-Bg*n)*r,y:t+Math.sin(-Bg*n)*r}),GI=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},zQ=(e,t)=>{var{x:r,y:n}=e,{x:s,y:a}=t;return Math.sqrt((r-s)**2+(n-a)**2)},FQ=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:a}=t,o=zQ({x:r,y:n},{x:s,y:a});if(o<=0)return{radius:o,angle:0};var l=(r-s)/o,c=Math.acos(l);return n>a&&(c=2*Math.PI-c),{radius:o,angle:BQ(c),angleInRadian:c}},HQ=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(n,s);return{startAngle:t-a*360,endAngle:r-a*360}},UQ=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),a=Math.floor(n/360),o=Math.min(s,a);return e+o*360},WQ=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:a}=FQ({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(s<o||s>l||s===0)return null;var{startAngle:c,endAngle:d}=HQ(t),u=a,h;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;h=u>=d&&u<=c}return h?RA(RA({},t),{},{radius:s,angle:UQ(u,t)}):null};function KI(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function BA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(r),!0).forEach(function(n){VQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VQ(e,t,r){return(t=qQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qQ(e){var t=GQ(e,"string");return typeof t=="symbol"?t:t+""}function GQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ct(e,t,r){return Lt(e)||Lt(t)?r:Da(t)?Fl(e,t,r):typeof t=="function"?t(e):r}var KQ=(e,t,r,n,s)=>{var a,o=-1,l=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<l;c++){var d=c>0?r[c-1].coordinate:r[l-1].coordinate,u=r[c].coordinate,h=c>=l-1?r[0].coordinate:r[c+1].coordinate,f=void 0;if(_r(u-d)!==_r(h-u)){var p=[];if(_r(h-u)===_r(s[1]-s[0])){f=h;var m=u+s[1]-s[0];p[0]=Math.min(m,(m+d)/2),p[1]=Math.max(m,(m+d)/2)}else{f=d;var x=h+s[1]-s[0];p[0]=Math.min(u,(x+u)/2),p[1]=Math.max(u,(x+u)/2)}var b=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:o}=r[c]);break}}else{var y=Math.min(d,h),v=Math.max(d,h);if(e>(y+u)/2&&e<=(v+u)/2){({index:o}=r[c]);break}}}else if(t){for(var w=0;w<l;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:o}=t[w]);break}}return o},YQ=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:a,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&a!=="center"&&Oe(e[a]))return Es(Es({},e),{},{[a]:e[a]+(n||0)});if((l==="horizontal"||l==="vertical"&&a==="center")&&o!=="middle"&&Oe(e[o]))return Es(Es({},e),{},{[o]:e[o]+(s||0)})}return e},Ho=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",YI=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var s,a,o=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===r&&(a=!0),l.coordinate));return s||o.push(t),a||o.push(r),o},XI=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:a,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:h,niceTicks:f,axisType:p}=e;if(!o)return null;var m=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=s==="category"&&o.bandwidth?o.bandwidth()/m:0;if(x=p==="angleAxis"&&a&&a.length>=2?_r(a[0]-a[1])*2*x:x,h||f){var b=(h||f||[]).map((y,v)=>{var w=n?n.indexOf(y):y;return{coordinate:o(w)+x,value:y,offset:x,index:v}});return b.filter(y=>!zs(y.coordinate))}return c&&d?d.map((y,v)=>({coordinate:o(y)+x,value:y,index:v,offset:x})):o.ticks&&u!=null?o.ticks(u).map((y,v)=>({coordinate:o(y)+x,value:y,offset:x,index:v})):o.domain().map((y,v)=>({coordinate:o(y)+x,value:n?n[y]:y,index:v,offset:x}))},zA=1e-4,XQ=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-zA,a=Math.max(n[0],n[1])+zA,o=e(t[0]),l=e(t[r-1]);(o<s||o>a||l<s||l>a)&&e.domain([t[0],t[r-1]])}},JQ=(e,t)=>{if(!t||t.length!==2||!Oe(t[0])||!Oe(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!Oe(e[0])||e[0]<r)&&(s[0]=r),(!Oe(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},ZQ=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0,o=0;o<t;++o){var l=zs(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1])}},QQ=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0;a<t;++a){var o=zs(e[a][r][1])?e[a][r][0]:e[a][r][1];o>=0?(e[a][r][0]=s,e[a][r][1]=s+o,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},eee={sign:ZQ,expand:BJ,none:hd,silhouette:zJ,wiggle:FJ,positive:QQ},tee=(e,t,r)=>{var n=eee[r],s=RJ().keys(t).value((a,o)=>+Ct(a,o,0)).order(z1).offset(n);return s(e)};function ree(e){return e==null?void 0:String(e)}function FA(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:a,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Lt(s[t.dataKey])){var l=UD(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var c=Ct(s,Lt(o)?t.dataKey:o);return Lt(c)?null:t.scale(c)}var HA=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:a,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=Ct(a,t.dataKey,t.scale.domain()[o]);return Lt(l)?null:t.scale(l)-s/2+n},nee=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},see=e=>{var t=e.flat(2).filter(Oe);return[Math.min(...t),Math.max(...t)]},aee=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],iee=(e,t,r)=>{if(e!=null)return aee(Object.keys(e).reduce((n,s)=>{var a=e[s],{stackedData:o}=a,l=o.reduce((c,d)=>{var u=KI(d,t,r),h=see(u);return[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},UA=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,WA=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,qh=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=qx(t,u=>u.coordinate),a=1/0,o=1,l=s.length;o<l;o++){var c=s[o],d=s[o-1];a=Math.min((c.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function VA(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:a}=e;return Es(Es({},t),{},{dataKey:r,payload:n,value:s,name:a})}function zd(e,t){if(e)return String(e);if(typeof t=="string")return t}function oee(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var a=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return a?{x:e,y:t}:null}return n?WQ({x:e,y:t},n):null}var lee=(e,t,r,n)=>{var s=t.find(d=>d&&d.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,{radius:o}=n;return Es(Es(Es({},n),cr(n.cx,n.cy,o,a)),{},{angle:a,radius:o})}var l=s.coordinate,{angle:c}=n;return Es(Es(Es({},n),cr(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},cee=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Si=e=>e.layout.width,Ci=e=>e.layout.height,dee=e=>e.layout.scale,JI=e=>e.layout.margin,Zx=Q(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Qx=Q(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),ZI="data-recharts-item-index",QI="data-recharts-item-data-key",Mf=60;function qA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qA(Object(r),!0).forEach(function(n){uee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uee(e,t,r){return(t=hee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hee(e){var t=fee(e,"string");return typeof t=="symbol"?t:t+""}function fee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pee=e=>e.brush.height;function mee(e){var t=Qx(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Mf;return r+s}return r},0)}function gee(e){var t=Qx(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Mf;return r+s}return r},0)}function xee(e){var t=Zx(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function bee(e){var t=Zx(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var br=Q([Si,Ci,JI,pee,mee,gee,xee,bee,yI,LZ],(e,t,r,n,s,a,o,l,c,d)=>{var u={left:(r.left||0)+s,right:(r.right||0)+a},h={top:(r.top||0)+o,bottom:(r.bottom||0)+l},f=Wp(Wp({},h),u),p=f.bottom;f.bottom+=n,f=YQ(f,c,d);var m=e-f.left-f.right,x=t-f.top-f.bottom;return Wp(Wp({brushBottom:p},f),{},{width:Math.max(m,0),height:Math.max(x,0)})}),yee=Q(br,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),o2=Q(Si,Ci,(e,t)=>({x:0,y:0,width:e,height:t})),vee=g.createContext(null),An=()=>g.useContext(vee)!=null,eb=e=>e.brush,tb=Q([eb,br,JI],(e,t,r)=>({height:e.height,x:Oe(e.x)?e.x:t.left,y:Oe(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Oe(e.width)?e.width:t.width})),eL={},tL={},rL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:a}={}){let o,l=null;const c=a!=null&&a.includes("leading"),d=a==null||a.includes("trailing"),u=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},h=()=>{d&&u(),x()};let f=null;const p=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,h()},n)},m=()=>{f!==null&&(clearTimeout(f),f=null)},x=()=>{m(),o=void 0,l=null},b=()=>{u()},y=function(...v){if(s!=null&&s.aborted)return;o=this,l=v;const w=f==null;p(),c&&w&&u()};return y.schedule=p,y.cancel=x,y.flush=b,s==null||s.addEventListener("abort",x,{once:!0}),y}e.debounce=t})(rL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rL;function r(n,s=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:l=!0,maxWait:c}=a,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let u,h=null;const f=t.debounce(function(...x){u=n.apply(this,x),h=null},s,{edges:d}),p=function(...x){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(u=n.apply(this,x),h=Date.now(),f.cancel(),f.schedule(),u):(f.apply(this,x),u)},m=()=>(f.flush(),u);return p.cancel=f.cancel,p.flush=m,p}e.debounce=r})(tL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tL;function r(n,s=0,a={}){const{leading:o=!0,trailing:l=!0}=a;return t.debounce(n,s,{leading:o,maxWait:s,trailing:l})}e.throttle=r})(eL);var wee=eL.throttle;const kee=Vn(wee);var zg=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]},nL=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:a,maxHeight:o}=r,l=xi(n)?e:Number(n),c=xi(s)?t:Number(s);return a&&a>0&&(l?c=l/a:c&&(l=c*a),o&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},jee={width:0,height:0,overflow:"visible"},Nee={width:0,overflowX:"visible"},See={height:0,overflowY:"visible"},Cee={},_ee=e=>{var{width:t,height:r}=e,n=xi(t),s=xi(r);return n&&s?jee:n?Nee:s?See:Cee};function Eee(e){var{width:t,height:r,aspect:n}=e,s=t,a=r;return s===void 0&&a===void 0?(s="100%",a="100%"):s===void 0?s=n&&n>0?void 0:"100%":a===void 0&&(a=n&&n>0?void 0:"100%"),{width:s,height:a}}function cn(e){return Number.isFinite(e)}function md(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function J1(){return J1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J1.apply(null,arguments)}function GA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function KA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GA(Object(r),!0).forEach(function(n){Aee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Aee(e,t,r){return(t=Tee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tee(e){var t=Pee(e,"string");return typeof t=="symbol"?t:t+""}function Pee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sL=g.createContext({width:-1,height:-1});function aL(e){var{children:t,width:r,height:n}=e,s=g.useMemo(()=>({width:r,height:n}),[r,n]);return r<=0||n<=0?null:g.createElement(sL.Provider,{value:s},t)}var l2=()=>g.useContext(sL),Mee=g.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:a,minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:h,className:f,onResize:p,style:m={}}=e,x=g.useRef(null),b=g.useRef();b.current=p,g.useImperativeHandle(t,()=>x.current);var[y,v]=g.useState({containerWidth:n.width,containerHeight:n.height}),w=g.useCallback((C,P)=>{v(E=>{var O=Math.round(C),A=Math.round(P);return E.containerWidth===O&&E.containerHeight===A?E:{containerWidth:O,containerHeight:A}})},[]);g.useEffect(()=>{var C=A=>{var _,{width:I,height:D}=A[0].contentRect;w(I,D),(_=b.current)===null||_===void 0||_.call(b,I,D)};u>0&&(C=kee(C,u,{trailing:!0,leading:!1}));var P=new ResizeObserver(C),{width:E,height:O}=x.current.getBoundingClientRect();return w(E,O),P.observe(x.current),()=>{P.disconnect()}},[w,u]);var{containerWidth:j,containerHeight:N}=y;zg(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:k,calculatedHeight:S}=nL(j,N,{width:s,height:a,aspect:r,maxHeight:c});return zg(k>0||S>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,S,s,a,o,l,r),g.createElement("div",{id:h?"".concat(h):void 0,className:ct("recharts-responsive-container",f),style:KA(KA({},m),{},{width:s,height:a,minWidth:o,minHeight:l,maxHeight:c}),ref:x},g.createElement("div",{style:_ee({width:s,height:a})},g.createElement(aL,{width:k,height:S},d)))}),Ys=g.forwardRef((e,t)=>{var r=l2();if(md(r.width)&&md(r.height))return e.children;var{width:n,height:s}=Eee({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:o}=nL(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return Oe(a)&&Oe(o)?g.createElement(aL,{width:a,height:o},e.children):g.createElement(Mee,J1({},e,{width:n,height:s,ref:t}))}),rb=()=>{var e,t=An(),r=Pe(yee),n=Pe(tb),s=(e=Pe(eb))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},Oee={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},iL=()=>{var e;return(e=Pe(br))!==null&&e!==void 0?e:Oee},c2=()=>Pe(Si),d2=()=>Pe(Ci),$ee=()=>Pe(e=>e.layout.margin),nt=e=>e.layout.layoutType,nb=()=>Pe(nt),sb=e=>{var t=Rt(),r=An(),{width:n,height:s}=e,a=l2(),o=n,l=s;return a&&(o=a.width>0?a.width:n,l=a.height>0?a.height:s),g.useEffect(()=>{!r&&md(o)&&md(l)&&t(OQ({width:o,height:l}))},[t,r,o,l]),null},Dee={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},oL=fs({name:"legend",initialState:Dee,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:mn()},removeLegendPayload:{reducer(e,t){var r=li(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:mn()}}}),{setLegendSize:YA,setLegendSettings:Iee,addLegendPayload:lL,removeLegendPayload:cL}=oL.actions,Lee=oL.reducer,Ree=["contextPayload"];function Z1(){return Z1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z1.apply(null,arguments)}function XA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XA(Object(r),!0).forEach(function(n){u2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u2(e,t,r){return(t=Bee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bee(e){var t=zee(e,"string");return typeof t=="symbol"?t:t+""}function zee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fee(e,t){if(e==null)return{};var r,n,s=Hee(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Hee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Uee(e){return e.value}function Wee(e){var{contextPayload:t}=e,r=Fee(e,Ree),n=oI(t,e.payloadUniqBy,Uee),s=gd(gd({},r),{},{payload:n});return g.isValidElement(e.content)?g.cloneElement(e.content,s):typeof e.content=="function"?g.createElement(e.content,s):g.createElement(HN,s)}function Vee(e,t,r,n,s,a){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((n||0)-a.width)/2}:d=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((s||0)-a.height)/2}:u=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),gd(gd({},d),u)}function qee(e){var t=Rt();return g.useEffect(()=>{t(Iee(e))},[t,e]),null}function Gee(e){var t=Rt();return g.useEffect(()=>(t(YA(e)),()=>{t(YA({width:0,height:0}))}),[t,e]),null}function Kee(e){var t=zZ(),r=lJ(),n=$ee(),{width:s,height:a,wrapperStyle:o,portal:l}=e,[c,d]=vI([t]),u=c2(),h=d2();if(u==null||h==null)return null;var f=u-(n.left||0)-(n.right||0),p=Ea.getWidthOrHeight(e.layout,a,s,f),m=l?o:gd(gd({position:"absolute",width:(p==null?void 0:p.width)||s||"auto",height:(p==null?void 0:p.height)||a||"auto"},Vee(o,e,n,u,h,c)),o),x=l??r;if(x==null)return null;var b=g.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:d},g.createElement(qee,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),g.createElement(Gee,{width:c.width,height:c.height}),g.createElement(Wee,Z1({},e,p,{margin:n,chartWidth:u,chartHeight:h,contextPayload:t})));return kf.createPortal(b,x)}class Ea extends g.PureComponent{static getWidthOrHeight(t,r,n,s){return t==="vertical"&&Oe(r)?{height:r}:t==="horizontal"?{width:n||s}:null}render(){return g.createElement(Kee,this.props)}}u2(Ea,"displayName","Legend");u2(Ea,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Q1(){return Q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q1.apply(null,arguments)}function JA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JA(Object(r),!0).forEach(function(n){Yee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yee(e,t,r){return(t=Xee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xee(e){var t=Jee(e,"string");return typeof t=="symbol"?t:t+""}function Jee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zee(e){return Array.isArray(e)&&Da(e[0])&&Da(e[1])?e.join(" ~ "):e}var Qee=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:a,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:h,accessibilityLayer:f=!1}=e,p=()=>{if(a&&a.length){var N={padding:0,margin:0},k=(l?qx(a,l):a).map((S,C)=>{if(S.type==="none")return null;var P=S.formatter||o||Zee,{value:E,name:O}=S,A=E,_=O;if(P){var I=P(E,O,S,C,a);if(Array.isArray(I))[A,_]=I;else if(I!=null)A=I;else return null}var D=xv({display:"block",paddingTop:4,paddingBottom:4,color:S.color||"#000"},n);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:D},Da(_)?g.createElement("span",{className:"recharts-tooltip-item-name"},_):null,Da(_)?g.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,g.createElement("span",{className:"recharts-tooltip-item-value"},A),g.createElement("span",{className:"recharts-tooltip-item-unit"},S.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:N},k)}return null},m=xv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=xv({margin:0},s),b=!Lt(u),y=b?u:"",v=ct("recharts-default-tooltip",c),w=ct("recharts-tooltip-label",d);b&&h&&a!==void 0&&a!==null&&(y=h(u,a));var j=f?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",Q1({className:v,style:m},j),g.createElement("p",{className:w,style:x},g.isValidElement(y)?y:"".concat(y)),p())},ku="recharts-tooltip-wrapper",ete={visibility:"hidden"};function tte(e){var{coordinate:t,translateX:r,translateY:n}=e;return ct(ku,{["".concat(ku,"-right")]:Oe(r)&&t&&Oe(t.x)&&r>=t.x,["".concat(ku,"-left")]:Oe(r)&&t&&Oe(t.x)&&r<t.x,["".concat(ku,"-bottom")]:Oe(n)&&t&&Oe(t.y)&&n>=t.y,["".concat(ku,"-top")]:Oe(n)&&t&&Oe(t.y)&&n<t.y})}function ZA(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:a,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(a&&Oe(a[n]))return a[n];var u=r[n]-l-(s>0?s:0),h=r[n]+s;if(t[n])return o[n]?u:h;var f=c[n];if(f==null)return 0;if(o[n]){var p=u,m=f;return p<m?Math.max(h,f):Math.max(u,f)}if(d==null)return 0;var x=h+l,b=f+d;return x>b?Math.max(u,f):Math.max(h,f)}function rte(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function nte(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:a,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,h;return o.height>0&&o.width>0&&r?(u=ZA({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=ZA({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=rte({translateX:u,translateY:h,useTranslate3d:l})):d=ete,{cssProperties:d,cssClasses:tte({translateX:u,translateY:h,coordinate:r})}}function QA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(r),!0).forEach(function(n){ek(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ek(e,t,r){return(t=ste(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ste(e){var t=ate(e,"string");return typeof t=="symbol"?t:t+""}function ate(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ite extends g.PureComponent{constructor(){super(...arguments),ek(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),ek(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:a,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:h,useTranslate3d:f,viewBox:p,wrapperStyle:m,lastBoundingBox:x,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:v,cssProperties:w}=nte({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:f,viewBox:p}),j=y?{}:Vp(Vp({transition:c&&t?"transform ".concat(n,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),N=Vp(Vp({},j),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},m);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:v,style:N,ref:b},a)}}var ote=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Uo={devToolsEnabled:!1,isSsr:ote()},dL=()=>Pe(e=>e.rootProps.accessibilityLayer);function tk(){return tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tk.apply(null,arguments)}function eT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eT(Object(r),!0).forEach(function(n){lte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lte(e,t,r){return(t=cte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cte(e){var t=dte(e,"string");return typeof t=="symbol"?t:t+""}function dte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rT={curveBasisClosed:_J,curveBasisOpen:EJ,curveBasis:CJ,curveBumpX:hJ,curveBumpY:fJ,curveLinearClosed:AJ,curveLinear:Bx,curveMonotoneX:TJ,curveMonotoneY:PJ,curveNatural:MJ,curveStep:OJ,curveStepAfter:DJ,curveStepBefore:$J},qp=e=>cn(e.x)&&cn(e.y),ju=e=>e.x,Nu=e=>e.y,ute=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Ef(e));return(r==="curveMonotone"||r==="curveBump")&&t?rT["".concat(r).concat(t==="vertical"?"Y":"X")]:rT[r]||Bx},hte=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:a=!1}=e,o=ute(t,s),l=a?r.filter(qp):r,c;if(Array.isArray(n)){var d=a?n.filter(h=>qp(h)):n,u=l.map((h,f)=>tT(tT({},h),{},{base:d[f]}));return s==="vertical"?c=Rp().y(Nu).x1(ju).x0(h=>h.base.x):c=Rp().x(ju).y1(Nu).y0(h=>h.base.y),c.defined(qp).curve(o),c(u)}return s==="vertical"&&Oe(n)?c=Rp().y(Nu).x1(ju).x0(n):Oe(n)?c=Rp().x(ju).y1(Nu).y0(n):c=AD().x(ju).y(Nu),c.defined(qp).curve(o),c(l)},h2=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?hte(e):n;return g.createElement("path",tk({},cs(e),zN(e),{className:ct("recharts-curve",t),d:a===null?void 0:a,ref:s}))},fte=["x","y","top","left","width","height","className"];function rk(){return rk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rk.apply(null,arguments)}function nT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pte(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nT(Object(r),!0).forEach(function(n){mte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mte(e,t,r){return(t=gte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gte(e){var t=xte(e,"string");return typeof t=="symbol"?t:t+""}function xte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bte(e,t){if(e==null)return{};var r,n,s=yte(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vte=(e,t,r,n,s,a)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),wte=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:a=0,height:o=0,className:l}=e,c=bte(e,fte),d=pte({x:t,y:r,top:n,left:s,width:a,height:o},c);return!Oe(t)||!Oe(r)||!Oe(a)||!Oe(o)||!Oe(n)||!Oe(s)?null:g.createElement("path",rk({},jn(d),{className:ct("recharts-cross",l),d:vte(t,r,a,o,n,s)}))};function kte(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function sT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jte(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sT(Object(r),!0).forEach(function(n){Nte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nte(e,t,r){return(t=Ste(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ste(e){var t=Cte(e,"string");return typeof t=="symbol"?t:t+""}function Cte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jr(e,t){var r=jte({},e),n=t,s=Object.keys(t),a=s.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return a}function _te(){}function Ete(e){return e!=null}function aT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function iT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aT(Object(r),!0).forEach(function(n){Ate(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ate(e,t,r){return(t=Tte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tte(e){var t=Pte(e,"string");return typeof t=="symbol"?t:t+""}function Pte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mte=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),uL=(e,t,r)=>e.map(n=>"".concat(Mte(n)," ").concat(t,"ms ").concat(r)).join(","),Ote=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Gh=(e,t)=>Object.keys(t).reduce((r,n)=>iT(iT({},r),{},{[n]:e(n,t[n])}),{});function oT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ur(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oT(Object(r),!0).forEach(function(n){$te(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $te(e,t,r){return(t=Dte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dte(e){var t=Ite(e,"string");return typeof t=="symbol"?t:t+""}function Ite(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fg=(e,t,r)=>e+(t-e)*r,nk=e=>{var{from:t,to:r}=e;return t!==r},hL=(e,t,r)=>{var n=Gh((s,a)=>{if(nk(a)){var[o,l]=e(a.from,a.to,a.velocity);return Ur(Ur({},a),{},{from:o,velocity:l})}return a},t);return r<1?Gh((s,a)=>nk(a)?Ur(Ur({},a),{},{velocity:Fg(a.velocity,n[s].velocity,r),from:Fg(a.from,n[s].from,r)}):a,t):hL(e,n,r-1)};function Lte(e,t,r,n,s,a){var o,l=n.reduce((f,p)=>Ur(Ur({},f),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),c=()=>Gh((f,p)=>p.from,l),d=()=>!Object.values(l).filter(nk).length,u=null,h=f=>{o||(o=f);var p=f-o,m=p/r.dt;l=hL(r,l,m),s(Ur(Ur(Ur({},e),t),c())),o=f,d()||(u=a.setTimeout(h))};return()=>(u=a.setTimeout(h),()=>{u()})}function Rte(e,t,r,n,s,a,o){var l=null,c=s.reduce((h,f)=>Ur(Ur({},h),{},{[f]:[e[f],t[f]]}),{}),d,u=h=>{d||(d=h);var f=(h-d)/n,p=Gh((x,b)=>Fg(...b,r(f)),c);if(a(Ur(Ur(Ur({},e),t),p)),f<1)l=o.setTimeout(u);else{var m=Gh((x,b)=>Fg(...b,r(1)),c);a(Ur(Ur(Ur({},e),t),m))}};return()=>(l=o.setTimeout(u),()=>{l()})}const Bte=(e,t,r,n,s,a)=>{var o=Ote(e,t);return r.isStepper===!0?Lte(e,t,r,o,s,a):Rte(e,t,r,n,o,s,a)};var Hg=1e-4,fL=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],pL=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),lT=(e,t)=>r=>{var n=fL(e,t);return pL(n,r)},zte=(e,t)=>r=>{var n=fL(e,t),s=[...n.map((a,o)=>a*o).slice(1),0];return pL(s,r)},cT=function(){for(var t,r,n,s,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,s]=c[1].split(")")[0].split(",").map(m=>parseFloat(m)))}}else o.length===4&&([t,n,r,s]=o);var d=lT(t,r),u=lT(n,s),h=zte(t,r),f=m=>m>1?1:m<0?0:m,p=m=>{for(var x=m>1?1:m,b=x,y=0;y<8;++y){var v=d(b)-x,w=h(b);if(Math.abs(v-x)<Hg||w<Hg)return u(b);b=f(b-v/w)}return u(b)};return p.isStepper=!1,p},Fte=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,a=(o,l,c)=>{var d=-(o-l)*r,u=c*n,h=c+(d-u)*s/1e3,f=c*s/1e3+o;return Math.abs(f-l)<Hg&&Math.abs(h)<Hg?[l,0]:[f,h]};return a.isStepper=!0,a.dt=s,a},Hte=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return cT(e);case"spring":return Fte();default:if(e.split("(")[0]==="cubic-bezier")return cT(e)}return typeof e=="function"?e:null};function Ute(e){var t,r=()=>null,n=!1,s=null,a=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){s=e.setTimeout(a.bind(null,d),c);return}a(c),s=e.setTimeout(a.bind(null,d));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),a(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class Wte{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,a=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(a))};return s=requestAnimationFrame(a),()=>{cancelAnimationFrame(s)}}}function Vte(){return Ute(new Wte)}var qte=g.createContext(Vte);function Gte(e,t){var r=g.useContext(qte);return g.useMemo(()=>t??r(e),[e,t,r])}var Kte={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},dT={t:0},bv={t:1};function Of(e){var t=Jr(e,Kte),{isActive:r,canBegin:n,duration:s,easing:a,begin:o,onAnimationEnd:l,onAnimationStart:c,children:d}=t,u=Gte(t.animationId,t.animationManager),[h,f]=g.useState(r?dT:bv),p=g.useRef(null);return g.useEffect(()=>{r||f(bv)},[r]),g.useEffect(()=>{if(!r||!n)return _te;var m=Bte(dT,bv,Hte(a),s,f,u.getTimeoutController()),x=()=>{p.current=m()};return u.start([c,o,x,s,l]),()=>{u.stop(),p.current&&p.current(),l()}},[r,n,s,a,o,c,l,u]),d(h.t)}function $f(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=g.useRef(Uh(t)),n=g.useRef(e);return n.current!==e&&(r.current=Uh(t),n.current=e),r.current}var Yte=["radius"],Xte=["radius"];function uT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uT(Object(r),!0).forEach(function(n){Jte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jte(e,t,r){return(t=Zte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zte(e){var t=Qte(e,"string");return typeof t=="symbol"?t:t+""}function Qte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ug(){return Ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ug.apply(null,arguments)}function fT(e,t){if(e==null)return{};var r,n,s=ere(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ere(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var pT=(e,t,r,n,s)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,d;if(a>0&&s instanceof Array){for(var u=[0,0,0,0],h=0,f=4;h<f;h++)u[h]=s[h]>a?a:s[h];d="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(d+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),d+="L ".concat(e+r-l*u[1],",").concat(t),u[1]>0&&(d+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*u[1])),d+="L ".concat(e+r,",").concat(t+n-o*u[2]),u[2]>0&&(d+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+r-l*u[2],",").concat(t+n)),d+="L ".concat(e+l*u[3],",").concat(t+n),u[3]>0&&(d+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*u[3])),d+="Z"}else if(a>0&&s===+s&&s>0){var p=Math.min(a,s);d="M ".concat(e,",").concat(t+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+l*p,",").concat(t,`
            L `).concat(e+r-l*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*p,`
            L `).concat(e+r,",").concat(t+n-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-l*p,",").concat(t+n,`
            L `).concat(e+l*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*p," Z")}else d="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return d},tre={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},mL=e=>{var t=Jr(e,tre),r=g.useRef(null),[n,s]=g.useState(-1);g.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var L=r.current.getTotalLength();L&&s(L)}catch{}},[]);var{x:a,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:p,isAnimationActive:m,isUpdateAnimationActive:x}=t,b=g.useRef(l),y=g.useRef(c),v=g.useRef(a),w=g.useRef(o),j=g.useMemo(()=>({x:a,y:o,width:l,height:c,radius:d}),[a,o,l,c,d]),N=$f(j,"rectangle-");if(a!==+a||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var k=ct("recharts-rectangle",u);if(!x){var S=jn(t),{radius:C}=S,P=fT(S,Yte);return g.createElement("path",Ug({},P,{radius:typeof d=="number"?d:void 0,className:k,d:pT(a,o,l,c,d)}))}var E=b.current,O=y.current,A=v.current,_=w.current,I="0px ".concat(n===-1?1:n,"px"),D="".concat(n,"px 0px"),$=uL(["strokeDasharray"],f,typeof h=="string"?h:void 0);return g.createElement(Of,{animationId:N,key:N,canBegin:n>0,duration:f,easing:h,isActive:x,begin:p},L=>{var M=Zt(E,l,L),T=Zt(O,c,L),G=Zt(A,a,L),Y=Zt(_,o,L);r.current&&(b.current=M,y.current=T,v.current=G,w.current=Y);var ee;m?L>0?ee={transition:$,strokeDasharray:D}:ee={strokeDasharray:I}:ee={strokeDasharray:D};var R=jn(t),{radius:B}=R,q=fT(R,Xte);return g.createElement("path",Ug({},q,{radius:typeof d=="number"?d:void 0,className:k,d:pT(G,Y,M,T,d),ref:r,style:hT(hT({},ee),t.style)}))})};function gL(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:a}=e,o=cr(t,r,n,s),l=cr(t,r,n,a);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function sk(){return sk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sk.apply(null,arguments)}var rre=(e,t)=>{var r=_r(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Gp=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:a,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+n,u=Math.asin(l/d)/Bg,h=c?s:s+a*u,f=cr(t,r,d,h),p=cr(t,r,n,h),m=c?s-a*u:s,x=cr(t,r,d*Math.cos(u*Bg),m);return{center:f,circleTangency:p,lineTangency:x,theta:u}},xL=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:a,endAngle:o}=e,l=rre(a,o),c=a+l,d=cr(t,r,s,a),u=cr(t,r,s,c),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(n>0){var f=cr(t,r,n,a),p=cr(t,r,n,c);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},nre=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=_r(d-c),{circleTangency:h,lineTangency:f,theta:p}=Gp({cx:t,cy:r,radius:s,angle:c,sign:u,cornerRadius:a,cornerIsExternal:l}),{circleTangency:m,lineTangency:x,theta:b}=Gp({cx:t,cy:r,radius:s,angle:d,sign:-u,cornerRadius:a,cornerIsExternal:l}),y=l?Math.abs(c-d):Math.abs(c-d)-p-b;if(y<0)return o?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):xL({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:d});var v="M ".concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(y>180),",").concat(+(u<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:w,lineTangency:j,theta:N}=Gp({cx:t,cy:r,radius:n,angle:c,sign:u,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),{circleTangency:k,lineTangency:S,theta:C}=Gp({cx:t,cy:r,radius:n,angle:d,sign:-u,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),P=l?Math.abs(c-d):Math.abs(c-d)-N-C;if(P<0&&a===0)return"".concat(v,"L").concat(t,",").concat(r,"Z");v+="L".concat(S.x,",").concat(S.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(P>180),",").concat(+(u>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(j.x,",").concat(j.y,"Z")}else v+="L".concat(t,",").concat(r,"Z");return v},sre={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},bL=e=>{var t=Jr(e,sre),{cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:h}=t;if(a<s||d===u)return null;var f=ct("recharts-sector",h),p=a-s,m=an(o,p,0,!0),x;return m>0&&Math.abs(d-u)<360?x=nre({cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:Math.min(m,p/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):x=xL({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:d,endAngle:u}),g.createElement("path",sk({},jn(t),{className:f,d:x}))};function are(e,t,r){var n,s,a,o;if(e==="horizontal")n=t.x,a=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,a=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:d,outerRadius:u,angle:h}=t,f=cr(l,c,d,h),p=cr(l,c,u,h);n=f.x,s=f.y,a=p.x,o=p.y}else return gL(t);return[{x:n,y:s},{x:a,y:o}]}var yL={},vL={},wL={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e2;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(wL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wL;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(vL);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t2,r=vL;function n(s,a,o){o&&typeof o!="number"&&t.isIterateeCall(s,a,o)&&(a=o=void 0),s=r.toFinite(s),a===void 0?(a=s,s=0):a=r.toFinite(a),o=o===void 0?s<a?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((a-s)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=s,s+=o;return c}e.range=n})(yL);var ire=yL.range;const kL=Vn(ire);function vo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ore(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function f2(e){let t,r,n;e.length!==2?(t=vo,r=(l,c)=>vo(e(l),c),n=(l,c)=>e(l)-c):(t=e===vo||e===ore?e:lre,r=e,n=e);function s(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function a(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=s(l,c,d,u-1);return h>d&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:s,center:o,right:a}}function lre(){return 0}function jL(e){return e===null?NaN:+e}function*cre(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const dre=f2(vo),Df=dre.right;f2(jL).center;class mT extends Map{constructor(t,r=fre){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(gT(this,t))}has(t){return super.has(gT(this,t))}set(t,r){return super.set(ure(this,t),r)}delete(t){return super.delete(hre(this,t))}}function gT({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function ure({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function hre({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function fre(e){return e!==null&&typeof e=="object"?e.valueOf():e}function pre(e=vo){if(e===vo)return NL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function NL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const mre=Math.sqrt(50),gre=Math.sqrt(10),xre=Math.sqrt(2);function Wg(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),o=a>=mre?10:a>=gre?5:a>=xre?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?Wg(e,t,r*2):[l,c,d]}function ak(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,a,o]=n?Wg(t,e,r):Wg(e,t,r);if(!(a>=s))return[];const l=a-s+1,c=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)c[d]=(a-d)/-o;else for(let d=0;d<l;++d)c[d]=(a-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(s+d)/-o;else for(let d=0;d<l;++d)c[d]=(s+d)*o;return c}function ik(e,t,r){return t=+t,e=+e,r=+r,Wg(e,t,r)[2]}function ok(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?ik(t,e,r):ik(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function xT(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function bT(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function SL(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?NL:pre(s);n>r;){if(n-r>600){const c=n-r+1,d=t-r+1,u=Math.log(c),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),p=Math.max(r,Math.floor(t-d*h/c+f)),m=Math.min(n,Math.floor(t+(c-d)*h/c+f));SL(e,t,p,m,s)}const a=e[t];let o=r,l=n;for(Su(e,r,t),s(e[n],a)>0&&Su(e,r,n);o<l;){for(Su(e,o,l),++o,--l;s(e[o],a)<0;)++o;for(;s(e[l],a)>0;)--l}s(e[r],a)===0?Su(e,r,l):(++l,Su(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Su(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function bre(e,t,r){if(e=Float64Array.from(cre(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return bT(e);if(t>=1)return xT(e);var n,s=(n-1)*t,a=Math.floor(s),o=xT(SL(e,a).subarray(0,a+1)),l=bT(e.subarray(a+1));return o+(l-o)*(s-a)}}function yre(e,t,r=jL){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),o=+r(e[a],a,e),l=+r(e[a+1],a+1,e);return o+(l-o)*(s-a)}}function vre(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(s);++n<s;)a[n]=e+n*r;return a}function Vs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function _i(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const lk=Symbol("implicit");function p2(){var e=new mT,t=[],r=[],n=lk;function s(a){let o=e.get(a);if(o===void 0){if(n!==lk)return n;e.set(a,o=t.push(a)-1)}return r[o%r.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new mT;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return p2(t,r).unknown(n)},Vs.apply(s,arguments),s}function m2(){var e=p2().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,a,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var f=t().length,p=s<n,m=p?s:n,x=p?n:s;a=(x-m)/Math.max(1,f-c+d*2),l&&(a=Math.floor(a)),m+=(x-m-a*(f-c))*u,o=a*(1-c),l&&(m=Math.round(m),o=Math.round(o));var b=vre(f).map(function(y){return m+a*y});return r(p?b.reverse():b)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([n,s]=f,n=+n,s=+s,h()):[n,s]},e.rangeRound=function(f){return[n,s]=f,n=+n,s=+s,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(f){return arguments.length?(l=!!f,h()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(d=+f,h()):d},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},e.copy=function(){return m2(t(),[n,s]).round(l).paddingInner(c).paddingOuter(d).align(u)},Vs.apply(h(),arguments)}function CL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return CL(t())},e}function wre(){return CL(m2.apply(null,arguments).paddingInner(1))}function g2(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function _L(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function If(){}var Kh=.7,Vg=1/Kh,Xc="\\s*([+-]?\\d+)\\s*",Yh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kre=/^#([0-9a-f]{3,8})$/,jre=new RegExp(`^rgb\\(${Xc},${Xc},${Xc}\\)$`),Nre=new RegExp(`^rgb\\(${Oa},${Oa},${Oa}\\)$`),Sre=new RegExp(`^rgba\\(${Xc},${Xc},${Xc},${Yh}\\)$`),Cre=new RegExp(`^rgba\\(${Oa},${Oa},${Oa},${Yh}\\)$`),_re=new RegExp(`^hsl\\(${Yh},${Oa},${Oa}\\)$`),Ere=new RegExp(`^hsla\\(${Yh},${Oa},${Oa},${Yh}\\)$`),yT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};g2(If,Xh,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vT,formatHex:vT,formatHex8:Are,formatHsl:Tre,formatRgb:wT,toString:wT});function vT(){return this.rgb().formatHex()}function Are(){return this.rgb().formatHex8()}function Tre(){return EL(this).formatHsl()}function wT(){return this.rgb().formatRgb()}function Xh(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=kre.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?kT(t):r===3?new zn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Kp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Kp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=jre.exec(e))?new zn(t[1],t[2],t[3],1):(t=Nre.exec(e))?new zn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Sre.exec(e))?Kp(t[1],t[2],t[3],t[4]):(t=Cre.exec(e))?Kp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_re.exec(e))?ST(t[1],t[2]/100,t[3]/100,1):(t=Ere.exec(e))?ST(t[1],t[2]/100,t[3]/100,t[4]):yT.hasOwnProperty(e)?kT(yT[e]):e==="transparent"?new zn(NaN,NaN,NaN,0):null}function kT(e){return new zn(e>>16&255,e>>8&255,e&255,1)}function Kp(e,t,r,n){return n<=0&&(e=t=r=NaN),new zn(e,t,r,n)}function Pre(e){return e instanceof If||(e=Xh(e)),e?(e=e.rgb(),new zn(e.r,e.g,e.b,e.opacity)):new zn}function ck(e,t,r,n){return arguments.length===1?Pre(e):new zn(e,t,r,n??1)}function zn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}g2(zn,ck,_L(If,{brighter(e){return e=e==null?Vg:Math.pow(Vg,e),new zn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Kh:Math.pow(Kh,e),new zn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new zn(Nl(this.r),Nl(this.g),Nl(this.b),qg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jT,formatHex:jT,formatHex8:Mre,formatRgb:NT,toString:NT}));function jT(){return`#${ul(this.r)}${ul(this.g)}${ul(this.b)}`}function Mre(){return`#${ul(this.r)}${ul(this.g)}${ul(this.b)}${ul((isNaN(this.opacity)?1:this.opacity)*255)}`}function NT(){const e=qg(this.opacity);return`${e===1?"rgb(":"rgba("}${Nl(this.r)}, ${Nl(this.g)}, ${Nl(this.b)}${e===1?")":`, ${e})`}`}function qg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ul(e){return e=Nl(e),(e<16?"0":"")+e.toString(16)}function ST(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ra(e,t,r,n)}function EL(e){if(e instanceof ra)return new ra(e.h,e.s,e.l,e.opacity);if(e instanceof If||(e=Xh(e)),!e)return new ra;if(e instanceof ra)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),o=NaN,l=a-s,c=(a+s)/2;return l?(t===a?o=(r-n)/l+(r<n)*6:r===a?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?a+s:2-a-s,o*=60):l=c>0&&c<1?0:o,new ra(o,l,c,e.opacity)}function Ore(e,t,r,n){return arguments.length===1?EL(e):new ra(e,t,r,n??1)}function ra(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}g2(ra,Ore,_L(If,{brighter(e){return e=e==null?Vg:Math.pow(Vg,e),new ra(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kh:Math.pow(Kh,e),new ra(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new zn(yv(e>=240?e-240:e+120,s,n),yv(e,s,n),yv(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new ra(CT(this.h),Yp(this.s),Yp(this.l),qg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qg(this.opacity);return`${e===1?"hsl(":"hsla("}${CT(this.h)}, ${Yp(this.s)*100}%, ${Yp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function CT(e){return e=(e||0)%360,e<0?e+360:e}function Yp(e){return Math.max(0,Math.min(1,e||0))}function yv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const x2=e=>()=>e;function $re(e,t){return function(r){return e+r*t}}function Dre(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Ire(e){return(e=+e)==1?AL:function(t,r){return r-t?Dre(t,r,e):x2(isNaN(t)?r:t)}}function AL(e,t){var r=t-e;return r?$re(e,r):x2(isNaN(e)?t:e)}const _T=function e(t){var r=Ire(t);function n(s,a){var o=r((s=ck(s)).r,(a=ck(a)).r),l=r(s.g,a.g),c=r(s.b,a.b),d=AL(s.opacity,a.opacity);return function(u){return s.r=o(u),s.g=l(u),s.b=c(u),s.opacity=d(u),s+""}}return n.gamma=e,n}(1);function Lre(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=e[s]*(1-a)+t[s]*a;return n}}function Rre(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Bre(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)s[o]=Fd(e[o],t[o]);for(;o<r;++o)a[o]=t[o];return function(l){for(o=0;o<n;++o)a[o]=s[o](l);return a}}function zre(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Gg(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Fre(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Fd(e[s],t[s]):n[s]=t[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var dk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vv=new RegExp(dk.source,"g");function Hre(e){return function(){return e}}function Ure(e){return function(t){return e(t)+""}}function Wre(e,t){var r=dk.lastIndex=vv.lastIndex=0,n,s,a,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=dk.exec(e))&&(s=vv.exec(t));)(a=s.index)>r&&(a=t.slice(r,a),l[o]?l[o]+=a:l[++o]=a),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:Gg(n,s)})),r=vv.lastIndex;return r<t.length&&(a=t.slice(r),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?Ure(c[0].x):Hre(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function Fd(e,t){var r=typeof t,n;return t==null||r==="boolean"?x2(t):(r==="number"?Gg:r==="string"?(n=Xh(t))?(t=n,_T):Wre:t instanceof Xh?_T:t instanceof Date?zre:Rre(t)?Lre:Array.isArray(t)?Bre:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Fre:Gg)(e,t)}function b2(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Vre(e,t){t===void 0&&(t=e,e=Fd);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return a[l](o-l)}}function qre(e){return function(){return e}}function Kg(e){return+e}var ET=[0,1];function bn(e){return e}function uk(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:qre(isNaN(t)?NaN:.5)}function Gre(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Kre(e,t,r){var n=e[0],s=e[1],a=t[0],o=t[1];return s<n?(n=uk(s,n),a=r(o,a)):(n=uk(n,s),a=r(a,o)),function(l){return a(n(l))}}function Yre(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=uk(e[o],e[o+1]),a[o]=r(t[o],t[o+1]);return function(l){var c=Df(e,l,1,n)-1;return a[c](s[c](l))}}function Lf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ab(){var e=ET,t=ET,r=Fd,n,s,a,o=bn,l,c,d;function u(){var f=Math.min(e.length,t.length);return o!==bn&&(o=Gre(e[0],e[f-1])),l=f>2?Yre:Kre,c=d=null,h}function h(f){return f==null||isNaN(f=+f)?a:(c||(c=l(e.map(n),t,r)))(n(o(f)))}return h.invert=function(f){return o(s((d||(d=l(t,e.map(n),Gg)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,Kg),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),r=b2,u()},h.clamp=function(f){return arguments.length?(o=f?!0:bn,u()):o!==bn},h.interpolate=function(f){return arguments.length?(r=f,u()):r},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,p){return n=f,s=p,u()}}function y2(){return ab()(bn,bn)}function Xre(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Yg(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function xd(e){return e=Yg(Math.abs(e)),e?e[1]:NaN}function Jre(e,t){return function(r,n){for(var s=r.length,a=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),a.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function Zre(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Qre=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jh(e){if(!(t=Qre.exec(e)))throw new Error("invalid format: "+e);var t;return new v2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Jh.prototype=v2.prototype;function v2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}v2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ene(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var TL;function tne(e,t){var r=Yg(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(TL=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Yg(e,Math.max(0,t+a-1))[0]}function AT(e,t){var r=Yg(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const TT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Xre,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>AT(e*100,t),r:AT,s:tne,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function PT(e){return e}var MT=Array.prototype.map,OT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function rne(e){var t=e.grouping===void 0||e.thousands===void 0?PT:Jre(MT.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?PT:Zre(MT.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=Jh(h);var f=h.fill,p=h.align,m=h.sign,x=h.symbol,b=h.zero,y=h.width,v=h.comma,w=h.precision,j=h.trim,N=h.type;N==="n"?(v=!0,N="g"):TT[N]||(w===void 0&&(w=12),j=!0,N="g"),(b||f==="0"&&p==="=")&&(b=!0,f="0",p="=");var k=x==="$"?r:x==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",S=x==="$"?n:/[%p]/.test(N)?o:"",C=TT[N],P=/[defgprs%]/.test(N);w=w===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function E(O){var A=k,_=S,I,D,$;if(N==="c")_=C(O)+_,O="";else{O=+O;var L=O<0||1/O<0;if(O=isNaN(O)?c:C(Math.abs(O),w),j&&(O=ene(O)),L&&+O==0&&m!=="+"&&(L=!1),A=(L?m==="("?m:l:m==="-"||m==="("?"":m)+A,_=(N==="s"?OT[8+TL/3]:"")+_+(L&&m==="("?")":""),P){for(I=-1,D=O.length;++I<D;)if($=O.charCodeAt(I),48>$||$>57){_=($===46?s+O.slice(I+1):O.slice(I))+_,O=O.slice(0,I);break}}}v&&!b&&(O=t(O,1/0));var M=A.length+O.length+_.length,T=M<y?new Array(y-M+1).join(f):"";switch(v&&b&&(O=t(T+O,T.length?y-_.length:1/0),T=""),p){case"<":O=A+O+_+T;break;case"=":O=A+T+O+_;break;case"^":O=T.slice(0,M=T.length>>1)+A+O+_+T.slice(M);break;default:O=T+A+O+_;break}return a(O)}return E.toString=function(){return h+""},E}function u(h,f){var p=d((h=Jh(h),h.type="f",h)),m=Math.max(-8,Math.min(8,Math.floor(xd(f)/3)))*3,x=Math.pow(10,-m),b=OT[8+m/3];return function(y){return p(x*y)+b}}return{format:d,formatPrefix:u}}var Xp,w2,PL;nne({thousands:",",grouping:[3],currency:["$",""]});function nne(e){return Xp=rne(e),w2=Xp.format,PL=Xp.formatPrefix,Xp}function sne(e){return Math.max(0,-xd(Math.abs(e)))}function ane(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xd(t)/3)))*3-xd(Math.abs(e)))}function ine(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xd(t)-xd(e))+1}function ML(e,t,r,n){var s=ok(e,t,r),a;switch(n=Jh(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=ane(s,o))&&(n.precision=a),PL(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=ine(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=sne(s))&&(n.precision=a-(n.type==="%")*2);break}}return w2(n)}function Wo(e){var t=e.domain;return e.ticks=function(r){var n=t();return ak(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return ML(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,a=n.length-1,o=n[s],l=n[a],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=s,s=a,a=d);u-- >0;){if(d=ik(o,l,r),d===c)return n[s]=o,n[a]=l,t(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function OL(){var e=y2();return e.copy=function(){return Lf(e,OL())},Vs.apply(e,arguments),Wo(e)}function $L(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Kg),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return $L(e).unknown(t)},e=arguments.length?Array.from(e,Kg):[0,1],Wo(r)}function DL(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],a=e[n],o;return a<s&&(o=r,r=n,n=o,o=s,s=a,a=o),e[r]=t.floor(s),e[n]=t.ceil(a),e}function $T(e){return Math.log(e)}function DT(e){return Math.exp(e)}function one(e){return-Math.log(-e)}function lne(e){return-Math.exp(-e)}function cne(e){return isFinite(e)?+("1e"+e):e<0?0:e}function dne(e){return e===10?cne:e===Math.E?Math.exp:t=>Math.pow(e,t)}function une(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function IT(e){return(t,r)=>-e(-t,r)}function k2(e){const t=e($T,DT),r=t.domain;let n=10,s,a;function o(){return s=une(n),a=dne(n),r()[0]<0?(s=IT(s),a=IT(a),e(one,lne)):e($T,DT),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let f=s(d),p=s(u),m,x;const b=l==null?10:+l;let y=[];if(!(n%1)&&p-f<b){if(f=Math.floor(f),p=Math.ceil(p),d>0){for(;f<=p;++f)for(m=1;m<n;++m)if(x=f<0?m/a(-f):m*a(f),!(x<d)){if(x>u)break;y.push(x)}}else for(;f<=p;++f)for(m=n-1;m>=1;--m)if(x=f>0?m/a(-f):m*a(f),!(x<d)){if(x>u)break;y.push(x)}y.length*2<b&&(y=ak(d,u,b))}else y=ak(f,p,Math.min(p-f,b)).map(a);return h?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Jh(c)).precision==null&&(c.trim=!0),c=w2(c)),l===1/0)return c;const d=Math.max(1,n*l/t.ticks().length);return u=>{let h=u/a(Math.round(s(u)));return h*n<n-.5&&(h*=n),h<=d?c(u):""}},t.nice=()=>r(DL(r(),{floor:l=>a(Math.floor(s(l))),ceil:l=>a(Math.ceil(s(l)))})),t}function IL(){const e=k2(ab()).domain([1,10]);return e.copy=()=>Lf(e,IL()).base(e.base()),Vs.apply(e,arguments),e}function LT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function RT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function j2(e){var t=1,r=e(LT(t),RT(t));return r.constant=function(n){return arguments.length?e(LT(t=+n),RT(t)):t},Wo(r)}function LL(){var e=j2(ab());return e.copy=function(){return Lf(e,LL()).constant(e.constant())},Vs.apply(e,arguments)}function BT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function hne(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function fne(e){return e<0?-e*e:e*e}function N2(e){var t=e(bn,bn),r=1;function n(){return r===1?e(bn,bn):r===.5?e(hne,fne):e(BT(r),BT(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Wo(t)}function S2(){var e=N2(ab());return e.copy=function(){return Lf(e,S2()).exponent(e.exponent())},Vs.apply(e,arguments),e}function pne(){return S2.apply(null,arguments).exponent(.5)}function zT(e){return Math.sign(e)*e*e}function mne(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function RL(){var e=y2(),t=[0,1],r=!1,n;function s(a){var o=mne(e(a));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(a){return e.invert(zT(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,Kg)).map(zT)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return RL(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Vs.apply(s,arguments),Wo(s)}function BL(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=yre(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?n:t[Df(r,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(vo),s()},a.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return BL().domain(e).range(t).unknown(n)},Vs.apply(a,arguments)}function zL(){var e=0,t=1,r=1,n=[.5],s=[0,1],a;function o(c){return c!=null&&c<=c?s[Df(n,c,0,r)]:a}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return zL().domain([e,t]).range(s).unknown(a)},Vs.apply(Wo(o),arguments)}function FL(){var e=[.5],t=[0,1],r,n=1;function s(a){return a!=null&&a<=a?t[Df(e,a,0,n)]:r}return s.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return FL().domain(e).range(t).unknown(r)},Vs.apply(s,arguments)}const wv=new Date,kv=new Date;function yr(e,t,r,n){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const o=s(a),l=s.ceil(a);return a-o<l-a?o:l},s.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),s.range=(a,o,l)=>{const c=[];if(a=s.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let d;do c.push(d=new Date(+a)),t(a,l),e(a);while(d<a&&a<o);return c},s.filter=a=>yr(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),r&&(s.count=(a,o)=>(wv.setTime(+a),kv.setTime(+o),e(wv),e(kv),Math.floor(r(wv,kv))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?o=>n(o)%a===0:o=>s.count(0,o)%a===0):s)),s}const Xg=yr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Xg.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?yr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Xg);Xg.range;const ni=1e3,Ps=ni*60,si=Ps*60,yi=si*24,C2=yi*7,FT=yi*30,jv=yi*365,hl=yr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ni)},(e,t)=>(t-e)/ni,e=>e.getUTCSeconds());hl.range;const _2=yr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ni)},(e,t)=>{e.setTime(+e+t*Ps)},(e,t)=>(t-e)/Ps,e=>e.getMinutes());_2.range;const E2=yr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ps)},(e,t)=>(t-e)/Ps,e=>e.getUTCMinutes());E2.range;const A2=yr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ni-e.getMinutes()*Ps)},(e,t)=>{e.setTime(+e+t*si)},(e,t)=>(t-e)/si,e=>e.getHours());A2.range;const T2=yr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*si)},(e,t)=>(t-e)/si,e=>e.getUTCHours());T2.range;const Rf=yr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ps)/yi,e=>e.getDate()-1);Rf.range;const ib=yr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/yi,e=>e.getUTCDate()-1);ib.range;const HL=yr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/yi,e=>Math.floor(e/yi));HL.range;function oc(e){return yr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ps)/C2)}const ob=oc(0),Jg=oc(1),gne=oc(2),xne=oc(3),bd=oc(4),bne=oc(5),yne=oc(6);ob.range;Jg.range;gne.range;xne.range;bd.range;bne.range;yne.range;function lc(e){return yr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/C2)}const lb=lc(0),Zg=lc(1),vne=lc(2),wne=lc(3),yd=lc(4),kne=lc(5),jne=lc(6);lb.range;Zg.range;vne.range;wne.range;yd.range;kne.range;jne.range;const P2=yr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());P2.range;const M2=yr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());M2.range;const vi=yr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());vi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});vi.range;const wi=yr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());wi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});wi.range;function UL(e,t,r,n,s,a){const o=[[hl,1,ni],[hl,5,5*ni],[hl,15,15*ni],[hl,30,30*ni],[a,1,Ps],[a,5,5*Ps],[a,15,15*Ps],[a,30,30*Ps],[s,1,si],[s,3,3*si],[s,6,6*si],[s,12,12*si],[n,1,yi],[n,2,2*yi],[r,1,C2],[t,1,FT],[t,3,3*FT],[e,1,jv]];function l(d,u,h){const f=u<d;f&&([d,u]=[u,d]);const p=h&&typeof h.range=="function"?h:c(d,u,h),m=p?p.range(d,+u+1):[];return f?m.reverse():m}function c(d,u,h){const f=Math.abs(u-d)/h,p=f2(([,,b])=>b).right(o,f);if(p===o.length)return e.every(ok(d/jv,u/jv,h));if(p===0)return Xg.every(Math.max(ok(d,u,h),1));const[m,x]=o[f/o[p-1][2]<o[p][2]/f?p-1:p];return m.every(x)}return[l,c]}const[Nne,Sne]=UL(wi,M2,lb,HL,T2,E2),[Cne,_ne]=UL(vi,P2,ob,Rf,A2,_2);function Nv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Sv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Cu(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Ene(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=_u(s),u=Eu(s),h=_u(a),f=Eu(a),p=_u(o),m=Eu(o),x=_u(l),b=Eu(l),y=_u(c),v=Eu(c),w={a:L,A:M,b:T,B:G,c:null,d:GT,e:GT,f:Jne,g:ose,G:cse,H:Kne,I:Yne,j:Xne,L:WL,m:Zne,M:Qne,p:Y,q:ee,Q:XT,s:JT,S:ese,u:tse,U:rse,V:nse,w:sse,W:ase,x:null,X:null,y:ise,Y:lse,Z:dse,"%":YT},j={a:R,A:B,b:q,B:X,c:null,d:KT,e:KT,f:pse,g:Nse,G:Cse,H:use,I:hse,j:fse,L:qL,m:mse,M:gse,p:ue,q:U,Q:XT,s:JT,S:xse,u:bse,U:yse,V:vse,w:wse,W:kse,x:null,X:null,y:jse,Y:Sse,Z:_se,"%":YT},N={a:E,A:O,b:A,B:_,c:I,d:VT,e:VT,f:Wne,g:WT,G:UT,H:qT,I:qT,j:zne,L:Une,m:Bne,M:Fne,p:P,q:Rne,Q:qne,s:Gne,S:Hne,u:One,U:$ne,V:Dne,w:Mne,W:Ine,x:D,X:$,y:WT,Y:UT,Z:Lne,"%":Vne};w.x=k(r,w),w.X=k(n,w),w.c=k(t,w),j.x=k(r,j),j.X=k(n,j),j.c=k(t,j);function k(V,ge){return function(te){var z=[],le=-1,ne=0,be=V.length,ye,Se,He;for(te instanceof Date||(te=new Date(+te));++le<be;)V.charCodeAt(le)===37&&(z.push(V.slice(ne,le)),(Se=HT[ye=V.charAt(++le)])!=null?ye=V.charAt(++le):Se=ye==="e"?" ":"0",(He=ge[ye])&&(ye=He(te,Se)),z.push(ye),ne=le+1);return z.push(V.slice(ne,le)),z.join("")}}function S(V,ge){return function(te){var z=Cu(1900,void 0,1),le=C(z,V,te+="",0),ne,be;if(le!=te.length)return null;if("Q"in z)return new Date(z.Q);if("s"in z)return new Date(z.s*1e3+("L"in z?z.L:0));if(ge&&!("Z"in z)&&(z.Z=0),"p"in z&&(z.H=z.H%12+z.p*12),z.m===void 0&&(z.m="q"in z?z.q:0),"V"in z){if(z.V<1||z.V>53)return null;"w"in z||(z.w=1),"Z"in z?(ne=Sv(Cu(z.y,0,1)),be=ne.getUTCDay(),ne=be>4||be===0?Zg.ceil(ne):Zg(ne),ne=ib.offset(ne,(z.V-1)*7),z.y=ne.getUTCFullYear(),z.m=ne.getUTCMonth(),z.d=ne.getUTCDate()+(z.w+6)%7):(ne=Nv(Cu(z.y,0,1)),be=ne.getDay(),ne=be>4||be===0?Jg.ceil(ne):Jg(ne),ne=Rf.offset(ne,(z.V-1)*7),z.y=ne.getFullYear(),z.m=ne.getMonth(),z.d=ne.getDate()+(z.w+6)%7)}else("W"in z||"U"in z)&&("w"in z||(z.w="u"in z?z.u%7:"W"in z?1:0),be="Z"in z?Sv(Cu(z.y,0,1)).getUTCDay():Nv(Cu(z.y,0,1)).getDay(),z.m=0,z.d="W"in z?(z.w+6)%7+z.W*7-(be+5)%7:z.w+z.U*7-(be+6)%7);return"Z"in z?(z.H+=z.Z/100|0,z.M+=z.Z%100,Sv(z)):Nv(z)}}function C(V,ge,te,z){for(var le=0,ne=ge.length,be=te.length,ye,Se;le<ne;){if(z>=be)return-1;if(ye=ge.charCodeAt(le++),ye===37){if(ye=ge.charAt(le++),Se=N[ye in HT?ge.charAt(le++):ye],!Se||(z=Se(V,te,z))<0)return-1}else if(ye!=te.charCodeAt(z++))return-1}return z}function P(V,ge,te){var z=d.exec(ge.slice(te));return z?(V.p=u.get(z[0].toLowerCase()),te+z[0].length):-1}function E(V,ge,te){var z=p.exec(ge.slice(te));return z?(V.w=m.get(z[0].toLowerCase()),te+z[0].length):-1}function O(V,ge,te){var z=h.exec(ge.slice(te));return z?(V.w=f.get(z[0].toLowerCase()),te+z[0].length):-1}function A(V,ge,te){var z=y.exec(ge.slice(te));return z?(V.m=v.get(z[0].toLowerCase()),te+z[0].length):-1}function _(V,ge,te){var z=x.exec(ge.slice(te));return z?(V.m=b.get(z[0].toLowerCase()),te+z[0].length):-1}function I(V,ge,te){return C(V,t,ge,te)}function D(V,ge,te){return C(V,r,ge,te)}function $(V,ge,te){return C(V,n,ge,te)}function L(V){return o[V.getDay()]}function M(V){return a[V.getDay()]}function T(V){return c[V.getMonth()]}function G(V){return l[V.getMonth()]}function Y(V){return s[+(V.getHours()>=12)]}function ee(V){return 1+~~(V.getMonth()/3)}function R(V){return o[V.getUTCDay()]}function B(V){return a[V.getUTCDay()]}function q(V){return c[V.getUTCMonth()]}function X(V){return l[V.getUTCMonth()]}function ue(V){return s[+(V.getUTCHours()>=12)]}function U(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var ge=k(V+="",w);return ge.toString=function(){return V},ge},parse:function(V){var ge=S(V+="",!1);return ge.toString=function(){return V},ge},utcFormat:function(V){var ge=k(V+="",j);return ge.toString=function(){return V},ge},utcParse:function(V){var ge=S(V+="",!0);return ge.toString=function(){return V},ge}}}var HT={"-":"",_:" ",0:"0"},Ir=/^\s*\d+/,Ane=/^%/,Tne=/[\\^$*+?|[\]().{}]/g;function dt(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function Pne(e){return e.replace(Tne,"\\$&")}function _u(e){return new RegExp("^(?:"+e.map(Pne).join("|")+")","i")}function Eu(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Mne(e,t,r){var n=Ir.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function One(e,t,r){var n=Ir.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function $ne(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Dne(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Ine(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function UT(e,t,r){var n=Ir.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function WT(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Lne(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Rne(e,t,r){var n=Ir.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Bne(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function VT(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function zne(e,t,r){var n=Ir.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function qT(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Fne(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Hne(e,t,r){var n=Ir.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Une(e,t,r){var n=Ir.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Wne(e,t,r){var n=Ir.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Vne(e,t,r){var n=Ane.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function qne(e,t,r){var n=Ir.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Gne(e,t,r){var n=Ir.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function GT(e,t){return dt(e.getDate(),t,2)}function Kne(e,t){return dt(e.getHours(),t,2)}function Yne(e,t){return dt(e.getHours()%12||12,t,2)}function Xne(e,t){return dt(1+Rf.count(vi(e),e),t,3)}function WL(e,t){return dt(e.getMilliseconds(),t,3)}function Jne(e,t){return WL(e,t)+"000"}function Zne(e,t){return dt(e.getMonth()+1,t,2)}function Qne(e,t){return dt(e.getMinutes(),t,2)}function ese(e,t){return dt(e.getSeconds(),t,2)}function tse(e){var t=e.getDay();return t===0?7:t}function rse(e,t){return dt(ob.count(vi(e)-1,e),t,2)}function VL(e){var t=e.getDay();return t>=4||t===0?bd(e):bd.ceil(e)}function nse(e,t){return e=VL(e),dt(bd.count(vi(e),e)+(vi(e).getDay()===4),t,2)}function sse(e){return e.getDay()}function ase(e,t){return dt(Jg.count(vi(e)-1,e),t,2)}function ise(e,t){return dt(e.getFullYear()%100,t,2)}function ose(e,t){return e=VL(e),dt(e.getFullYear()%100,t,2)}function lse(e,t){return dt(e.getFullYear()%1e4,t,4)}function cse(e,t){var r=e.getDay();return e=r>=4||r===0?bd(e):bd.ceil(e),dt(e.getFullYear()%1e4,t,4)}function dse(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+dt(t/60|0,"0",2)+dt(t%60,"0",2)}function KT(e,t){return dt(e.getUTCDate(),t,2)}function use(e,t){return dt(e.getUTCHours(),t,2)}function hse(e,t){return dt(e.getUTCHours()%12||12,t,2)}function fse(e,t){return dt(1+ib.count(wi(e),e),t,3)}function qL(e,t){return dt(e.getUTCMilliseconds(),t,3)}function pse(e,t){return qL(e,t)+"000"}function mse(e,t){return dt(e.getUTCMonth()+1,t,2)}function gse(e,t){return dt(e.getUTCMinutes(),t,2)}function xse(e,t){return dt(e.getUTCSeconds(),t,2)}function bse(e){var t=e.getUTCDay();return t===0?7:t}function yse(e,t){return dt(lb.count(wi(e)-1,e),t,2)}function GL(e){var t=e.getUTCDay();return t>=4||t===0?yd(e):yd.ceil(e)}function vse(e,t){return e=GL(e),dt(yd.count(wi(e),e)+(wi(e).getUTCDay()===4),t,2)}function wse(e){return e.getUTCDay()}function kse(e,t){return dt(Zg.count(wi(e)-1,e),t,2)}function jse(e,t){return dt(e.getUTCFullYear()%100,t,2)}function Nse(e,t){return e=GL(e),dt(e.getUTCFullYear()%100,t,2)}function Sse(e,t){return dt(e.getUTCFullYear()%1e4,t,4)}function Cse(e,t){var r=e.getUTCDay();return e=r>=4||r===0?yd(e):yd.ceil(e),dt(e.getUTCFullYear()%1e4,t,4)}function _se(){return"+0000"}function YT(){return"%"}function XT(e){return+e}function JT(e){return Math.floor(+e/1e3)}var xc,KL,YL;Ese({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ese(e){return xc=Ene(e),KL=xc.format,xc.parse,YL=xc.utcFormat,xc.utcParse,xc}function Ase(e){return new Date(e)}function Tse(e){return e instanceof Date?+e:+new Date(+e)}function O2(e,t,r,n,s,a,o,l,c,d){var u=y2(),h=u.invert,f=u.domain,p=d(".%L"),m=d(":%S"),x=d("%I:%M"),b=d("%I %p"),y=d("%a %d"),v=d("%b %d"),w=d("%B"),j=d("%Y");function N(k){return(c(k)<k?p:l(k)<k?m:o(k)<k?x:a(k)<k?b:n(k)<k?s(k)<k?y:v:r(k)<k?w:j)(k)}return u.invert=function(k){return new Date(h(k))},u.domain=function(k){return arguments.length?f(Array.from(k,Tse)):f().map(Ase)},u.ticks=function(k){var S=f();return e(S[0],S[S.length-1],k??10)},u.tickFormat=function(k,S){return S==null?N:d(S)},u.nice=function(k){var S=f();return(!k||typeof k.range!="function")&&(k=t(S[0],S[S.length-1],k??10)),k?f(DL(S,k)):u},u.copy=function(){return Lf(u,O2(e,t,r,n,s,a,o,l,c,d))},u}function Pse(){return Vs.apply(O2(Cne,_ne,vi,P2,ob,Rf,A2,_2,hl,KL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Mse(){return Vs.apply(O2(Nne,Sne,wi,M2,lb,ib,T2,E2,hl,YL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function cb(){var e=0,t=1,r,n,s,a,o=bn,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(a(h)-r)*s,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,r=a(e=+e),n=a(t=+t),s=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(f){var p,m;return arguments.length?([p,m]=f,o=h(p,m),d):[o(0),o(1)]}}return d.range=u(Fd),d.rangeRound=u(b2),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return a=h,r=h(e),n=h(t),s=r===n?0:1/(n-r),d}}function Vo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function XL(){var e=Wo(cb()(bn));return e.copy=function(){return Vo(e,XL())},_i.apply(e,arguments)}function JL(){var e=k2(cb()).domain([1,10]);return e.copy=function(){return Vo(e,JL()).base(e.base())},_i.apply(e,arguments)}function ZL(){var e=j2(cb());return e.copy=function(){return Vo(e,ZL()).constant(e.constant())},_i.apply(e,arguments)}function $2(){var e=N2(cb());return e.copy=function(){return Vo(e,$2()).exponent(e.exponent())},_i.apply(e,arguments)}function Ose(){return $2.apply(null,arguments).exponent(.5)}function QL(){var e=[],t=bn;function r(n){if(n!=null&&!isNaN(n=+n))return t((Df(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(vo),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>bre(e,a/n))},r.copy=function(){return QL(t).domain(e)},_i.apply(r,arguments)}function db(){var e=0,t=.5,r=1,n=1,s,a,o,l,c,d=bn,u,h=!1,f;function p(x){return isNaN(x=+x)?f:(x=.5+((x=+u(x))-a)*(n*x<n*a?l:c),d(h?Math.max(0,Math.min(1,x)):x))}p.domain=function(x){return arguments.length?([e,t,r]=x,s=u(e=+e),a=u(t=+t),o=u(r=+r),l=s===a?0:.5/(a-s),c=a===o?0:.5/(o-a),n=a<s?-1:1,p):[e,t,r]},p.clamp=function(x){return arguments.length?(h=!!x,p):h},p.interpolator=function(x){return arguments.length?(d=x,p):d};function m(x){return function(b){var y,v,w;return arguments.length?([y,v,w]=b,d=Vre(x,[y,v,w]),p):[d(0),d(.5),d(1)]}}return p.range=m(Fd),p.rangeRound=m(b2),p.unknown=function(x){return arguments.length?(f=x,p):f},function(x){return u=x,s=x(e),a=x(t),o=x(r),l=s===a?0:.5/(a-s),c=a===o?0:.5/(o-a),n=a<s?-1:1,p}}function e6(){var e=Wo(db()(bn));return e.copy=function(){return Vo(e,e6())},_i.apply(e,arguments)}function t6(){var e=k2(db()).domain([.1,1,10]);return e.copy=function(){return Vo(e,t6()).base(e.base())},_i.apply(e,arguments)}function r6(){var e=j2(db());return e.copy=function(){return Vo(e,r6()).constant(e.constant())},_i.apply(e,arguments)}function D2(){var e=N2(db());return e.copy=function(){return Vo(e,D2()).exponent(e.exponent())},_i.apply(e,arguments)}function $se(){return D2.apply(null,arguments).exponent(.5)}const Wu=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:m2,scaleDiverging:e6,scaleDivergingLog:t6,scaleDivergingPow:D2,scaleDivergingSqrt:$se,scaleDivergingSymlog:r6,scaleIdentity:$L,scaleImplicit:lk,scaleLinear:OL,scaleLog:IL,scaleOrdinal:p2,scalePoint:wre,scalePow:S2,scaleQuantile:BL,scaleQuantize:zL,scaleRadial:RL,scaleSequential:XL,scaleSequentialLog:JL,scaleSequentialPow:$2,scaleSequentialQuantile:QL,scaleSequentialSqrt:Ose,scaleSequentialSymlog:ZL,scaleSqrt:pne,scaleSymlog:LL,scaleThreshold:FL,scaleTime:Pse,scaleUtc:Mse,tickFormat:ML},Symbol.toStringTag,{value:"Module"}));var qo=e=>e.chartData,I2=Q([qo],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),ub=(e,t,r,n)=>n?I2(e):qo(e);function Wl(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(cn(t)&&cn(r))return!0}return!1}function ZT(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function n6(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,a;if(cn(r))s=r;else if(typeof r=="function")return;if(cn(n))a=n;else if(typeof n=="function")return;var o=[s,a];if(Wl(o))return o}}function Dse(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Wl(n))return ZT(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,a]=e,o,l;if(s==="auto")t!=null&&(o=Math.min(...t));else if(Oe(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&UA.test(s)){var c=UA.exec(s);if(c==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t==null?void 0:t[0];if(a==="auto")t!=null&&(l=Math.max(...t));else if(Oe(a))l=a;else if(typeof a=="function")try{t!=null&&(l=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&WA.test(a)){var u=WA.exec(a);if(u==null||t==null)l=void 0;else{var h=+u[1];l=t[1]+h}}else l=t==null?void 0:t[1];var f=[o,l];if(Wl(f))return t==null?f:ZT(f,t,r)}}}var Hd=1e9,Ise={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},R2,It=!0,Hs="[DecimalError] ",Sl=Hs+"Invalid argument: ",L2=Hs+"Exponent out of range: ",Ud=Math.floor,al=Math.pow,Lse=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zn,Nr=1e7,Tt=7,s6=9007199254740991,Qg=Ud(s6/Tt),Ae={};Ae.absoluteValue=Ae.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ae.comparedTo=Ae.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};Ae.decimalPlaces=Ae.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Tt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ae.dividedBy=Ae.div=function(e){return ci(this,new this.constructor(e))};Ae.dividedToIntegerBy=Ae.idiv=function(e){var t=this,r=t.constructor;return wt(ci(t,new r(e),0,1),r.precision)};Ae.equals=Ae.eq=function(e){return!this.cmp(e)};Ae.exponent=function(){return ur(this)};Ae.greaterThan=Ae.gt=function(e){return this.cmp(e)>0};Ae.greaterThanOrEqualTo=Ae.gte=function(e){return this.cmp(e)>=0};Ae.isInteger=Ae.isint=function(){return this.e>this.d.length-2};Ae.isNegative=Ae.isneg=function(){return this.s<0};Ae.isPositive=Ae.ispos=function(){return this.s>0};Ae.isZero=function(){return this.s===0};Ae.lessThan=Ae.lt=function(e){return this.cmp(e)<0};Ae.lessThanOrEqualTo=Ae.lte=function(e){return this.cmp(e)<1};Ae.logarithm=Ae.log=function(e){var t,r=this,n=r.constructor,s=n.precision,a=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Zn))throw Error(Hs+"NaN");if(r.s<1)throw Error(Hs+(r.s?"NaN":"-Infinity"));return r.eq(Zn)?new n(0):(It=!1,t=ci(Zh(r,a),Zh(e,a),a),It=!0,wt(t,s))};Ae.minus=Ae.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?o6(t,e):a6(t,(e.s=-e.s,e))};Ae.modulo=Ae.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Hs+"NaN");return r.s?(It=!1,t=ci(r,e,0,1).times(e),It=!0,r.minus(t)):wt(new n(r),s)};Ae.naturalExponential=Ae.exp=function(){return i6(this)};Ae.naturalLogarithm=Ae.ln=function(){return Zh(this)};Ae.negated=Ae.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ae.plus=Ae.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?a6(t,e):o6(t,(e.s=-e.s,e))};Ae.precision=Ae.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Sl+e);if(t=ur(s)+1,n=s.d.length-1,r=n*Tt+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ae.squareRoot=Ae.sqrt=function(){var e,t,r,n,s,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Hs+"NaN")}for(e=ur(l),It=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Ta(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Ud((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(a=n,n=a.plus(ci(l,a,o+2)).times(.5),Ta(a.d).slice(0,o)===(t=Ta(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(wt(a,r+1,0),a.times(a).eq(l)){n=a;break}}else if(t!="9999")break;o+=4}return It=!0,wt(n,r)};Ae.times=Ae.mul=function(e){var t,r,n,s,a,o,l,c,d,u=this,h=u.constructor,f=u.d,p=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,c=f.length,d=p.length,c<d&&(a=f,f=p,p=a,o=c,c=d,d=o),a=[],o=c+d,n=o;n--;)a.push(0);for(n=d;--n>=0;){for(t=0,s=c+n;s>n;)l=a[s]+p[n]*f[s-n-1]+t,a[s--]=l%Nr|0,t=l/Nr|0;a[s]=(a[s]+t)%Nr|0}for(;!a[--o];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,It?wt(e,h.precision):e};Ae.toDecimalPlaces=Ae.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ia(e,0,Hd),t===void 0?t=n.rounding:Ia(t,0,8),wt(r,e+ur(r)+1,t))};Ae.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Vl(n,!0):(Ia(e,0,Hd),t===void 0?t=s.rounding:Ia(t,0,8),n=wt(new s(n),e+1,t),r=Vl(n,!0,e+1)),r};Ae.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?Vl(s):(Ia(e,0,Hd),t===void 0?t=a.rounding:Ia(t,0,8),n=wt(new a(s),e+ur(s)+1,t),r=Vl(n.abs(),!1,e+ur(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ae.toInteger=Ae.toint=function(){var e=this,t=e.constructor;return wt(new t(e),ur(e)+1,t.rounding)};Ae.toNumber=function(){return+this};Ae.toPower=Ae.pow=function(e){var t,r,n,s,a,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Zn);if(l=new c(l),!l.s){if(e.s<1)throw Error(Hs+"Infinity");return l}if(l.eq(Zn))return l;if(n=c.precision,e.eq(Zn))return wt(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,a=l.s,o){if((r=u<0?-u:u)<=s6){for(s=new c(Zn),t=Math.ceil(n/Tt+4),It=!1;r%2&&(s=s.times(l),e3(s.d,t)),r=Ud(r/2),r!==0;)l=l.times(l),e3(l.d,t);return It=!0,e.s<0?new c(Zn).div(s):wt(s,n)}}else if(a<0)throw Error(Hs+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,It=!1,s=e.times(Zh(l,n+d)),It=!0,s=i6(s),s.s=a,s};Ae.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?(r=ur(s),n=Vl(s,r<=a.toExpNeg||r>=a.toExpPos)):(Ia(e,1,Hd),t===void 0?t=a.rounding:Ia(t,0,8),s=wt(new a(s),e,t),r=ur(s),n=Vl(s,e<=r||r<=a.toExpNeg,e)),n};Ae.toSignificantDigits=Ae.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ia(e,1,Hd),t===void 0?t=n.rounding:Ia(t,0,8)),wt(new n(r),e,t)};Ae.toString=Ae.valueOf=Ae.val=Ae.toJSON=Ae[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ur(e),r=e.constructor;return Vl(e,t<=r.toExpNeg||t>=r.toExpPos)};function a6(e,t){var r,n,s,a,o,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),It?wt(t,h):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),a=o-s,a){for(a<0?(n=c,a=-a,l=d.length):(n=d,s=o,l=c.length),o=Math.ceil(h/Tt),l=o>l?o+1:l+1,a>l&&(a=l,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(l=c.length,a=d.length,l-a<0&&(a=l,n=d,d=c,c=n),r=0;a;)r=(c[--a]=c[a]+d[a]+r)/Nr|0,c[a]%=Nr;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,It?wt(t,h):t}function Ia(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Sl+e)}function Ta(e){var t,r,n,s=e.length-1,a="",o=e[0];if(s>0){for(a+=o,t=1;t<s;t++)n=e[t]+"",r=Tt-n.length,r&&(a+=Vi(r)),a+=n;o=e[t],n=o+"",r=Tt-n.length,r&&(a+=Vi(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var ci=function(){function e(n,s){var a,o=0,l=n.length;for(n=n.slice();l--;)a=n[l]*s+o,n[l]=a%Nr|0,o=a/Nr|0;return o&&n.unshift(o),n}function t(n,s,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,a){for(var o=0;a--;)n[a]-=o,o=n[a]<s[a]?1:0,n[a]=o*Nr+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,o){var l,c,d,u,h,f,p,m,x,b,y,v,w,j,N,k,S,C,P=n.constructor,E=n.s==s.s?1:-1,O=n.d,A=s.d;if(!n.s)return new P(n);if(!s.s)throw Error(Hs+"Division by zero");for(c=n.e-s.e,S=A.length,N=O.length,p=new P(E),m=p.d=[],d=0;A[d]==(O[d]||0);)++d;if(A[d]>(O[d]||0)&&--c,a==null?v=a=P.precision:o?v=a+(ur(n)-ur(s))+1:v=a,v<0)return new P(0);if(v=v/Tt+2|0,d=0,S==1)for(u=0,A=A[0],v++;(d<N||u)&&v--;d++)w=u*Nr+(O[d]||0),m[d]=w/A|0,u=w%A|0;else{for(u=Nr/(A[0]+1)|0,u>1&&(A=e(A,u),O=e(O,u),S=A.length,N=O.length),j=S,x=O.slice(0,S),b=x.length;b<S;)x[b++]=0;C=A.slice(),C.unshift(0),k=A[0],A[1]>=Nr/2&&++k;do u=0,l=t(A,x,S,b),l<0?(y=x[0],S!=b&&(y=y*Nr+(x[1]||0)),u=y/k|0,u>1?(u>=Nr&&(u=Nr-1),h=e(A,u),f=h.length,b=x.length,l=t(h,x,f,b),l==1&&(u--,r(h,S<f?C:A,f))):(u==0&&(l=u=1),h=A.slice()),f=h.length,f<b&&h.unshift(0),r(x,h,b),l==-1&&(b=x.length,l=t(A,x,S,b),l<1&&(u++,r(x,S<b?C:A,b))),b=x.length):l===0&&(u++,x=[0]),m[d++]=u,l&&x[0]?x[b++]=O[j]||0:(x=[O[j]],b=1);while((j++<N||x[0]!==void 0)&&v--)}return m[0]||m.shift(),p.e=c,wt(p,o?a+ur(p)+1:a)}}();function i6(e,t){var r,n,s,a,o,l,c=0,d=0,u=e.constructor,h=u.precision;if(ur(e)>16)throw Error(L2+ur(e));if(!e.s)return new u(Zn);for(It=!1,l=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(n=Math.log(al(2,d))/Math.LN10*2+5|0,l+=n,r=s=a=new u(Zn),u.precision=l;;){if(s=wt(s.times(e),l),r=r.times(++c),o=a.plus(ci(s,r,l)),Ta(o.d).slice(0,l)===Ta(a.d).slice(0,l)){for(;d--;)a=wt(a.times(a),l);return u.precision=h,t==null?(It=!0,wt(a,h)):a}a=o}}function ur(e){for(var t=e.e*Tt,r=e.d[0];r>=10;r/=10)t++;return t}function Cv(e,t,r){if(t>e.LN10.sd())throw It=!0,r&&(e.precision=r),Error(Hs+"LN10 precision limit exceeded");return wt(new e(e.LN10),t)}function Vi(e){for(var t="";e--;)t+="0";return t}function Zh(e,t){var r,n,s,a,o,l,c,d,u,h=1,f=10,p=e,m=p.d,x=p.constructor,b=x.precision;if(p.s<1)throw Error(Hs+(p.s?"NaN":"-Infinity"));if(p.eq(Zn))return new x(0);if(t==null?(It=!1,d=b):d=t,p.eq(10))return t==null&&(It=!0),Cv(x,d);if(d+=f,x.precision=d,r=Ta(m),n=r.charAt(0),a=ur(p),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=Ta(p.d),n=r.charAt(0),h++;a=ur(p),n>1?(p=new x("0."+r),a++):p=new x(n+"."+r.slice(1))}else return c=Cv(x,d+2,b).times(a+""),p=Zh(new x(n+"."+r.slice(1)),d-f).plus(c),x.precision=b,t==null?(It=!0,wt(p,b)):p;for(l=o=p=ci(p.minus(Zn),p.plus(Zn),d),u=wt(p.times(p),d),s=3;;){if(o=wt(o.times(u),d),c=l.plus(ci(o,new x(s),d)),Ta(c.d).slice(0,d)===Ta(l.d).slice(0,d))return l=l.times(2),a!==0&&(l=l.plus(Cv(x,d+2,b).times(a+""))),l=ci(l,new x(h),d),x.precision=b,t==null?(It=!0,wt(l,b)):l;l=c,s+=2}}function QT(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Ud(r/Tt),e.d=[],n=(r+1)%Tt,r<0&&(n+=Tt),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Tt;n<s;)e.d.push(+t.slice(n,n+=Tt));t=t.slice(n),n=Tt-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),It&&(e.e>Qg||e.e<-Qg))throw Error(L2+r)}else e.s=0,e.e=0,e.d=[0];return e}function wt(e,t,r){var n,s,a,o,l,c,d,u,h=e.d;for(o=1,a=h[0];a>=10;a/=10)o++;if(n=t-o,n<0)n+=Tt,s=t,d=h[u=0];else{if(u=Math.ceil((n+1)/Tt),a=h.length,u>=a)return e;for(d=a=h[u],o=1;a>=10;a/=10)o++;n%=Tt,s=n-Tt+o}if(r!==void 0&&(a=al(10,o-s-1),l=d/a%10|0,c=t<0||h[u+1]!==void 0||d%a,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?d/al(10,o-s):0:h[u-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return c?(a=ur(e),h.length=1,t=t-a-1,h[0]=al(10,(Tt-t%Tt)%Tt),e.e=Ud(-t/Tt)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(n==0?(h.length=u,a=1,u--):(h.length=u+1,a=al(10,Tt-n),h[u]=s>0?(d/al(10,o-s)%al(10,s)|0)*a:0),c)for(;;)if(u==0){(h[0]+=a)==Nr&&(h[0]=1,++e.e);break}else{if(h[u]+=a,h[u]!=Nr)break;h[u--]=0,a=1}for(n=h.length;h[--n]===0;)h.pop();if(It&&(e.e>Qg||e.e<-Qg))throw Error(L2+ur(e));return e}function o6(e,t){var r,n,s,a,o,l,c,d,u,h,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),It?wt(t,p):t;if(c=e.d,h=t.d,n=t.e,d=e.e,c=c.slice(),o=d-n,o){for(u=o<0,u?(r=c,o=-o,l=h.length):(r=h,n=d,l=c.length),s=Math.max(Math.ceil(p/Tt),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=h.length,u=s<l,u&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){u=c[s]<h[s];break}o=0}for(u&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(a=s;a&&c[--a]===0;)c[a]=Nr-1;--c[a],c[s]+=Nr}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,It?wt(t,p):t):new f(0)}function Vl(e,t,r){var n,s=ur(e),a=Ta(e.d),o=a.length;return t?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+Vi(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+Vi(-s-1)+a,r&&(n=r-o)>0&&(a+=Vi(n))):s>=o?(a+=Vi(s+1-o),r&&(n=r-s-1)>0&&(a=a+"."+Vi(n))):((n=s+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(a+="."),a+=Vi(n))),e.s<0?"-"+a:a}function e3(e,t){if(e.length>t)return e.length=t,!0}function l6(e){var t,r,n;function s(a){var o=this;if(!(o instanceof s))return new s(a);if(o.constructor=s,a instanceof s){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Sl+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return QT(o,a.toString())}else if(typeof a!="string")throw Error(Sl+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,Lse.test(a))QT(o,a);else throw Error(Sl+a)}if(s.prototype=Ae,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=l6,s.config=s.set=Rse,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function Rse(e){if(!e||typeof e!="object")throw Error(Hs+"Object expected");var t,r,n,s=["precision",1,Hd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Ud(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Sl+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Sl+r+": "+n);return this}var R2=l6(Ise);Zn=new R2(1);const gt=R2;var Bse=e=>e,c6={},d6=e=>e===c6,t3=e=>function t(){return arguments.length===0||arguments.length===1&&d6(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},u6=(e,t)=>e===1?t:t3(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=n.filter(o=>o!==c6).length;return a>=e?t(...n):u6(e-a,t3(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=n.map(u=>d6(u)?l.shift():u);return t(...d,...l)}))}),hb=e=>u6(e.length,e),hk=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},zse=hb((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),Fse=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Bse;var s=r.reverse(),a=s[0],o=s.slice(1);return function(){return o.reduce((l,c)=>c(l),a(...arguments))}},fk=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),h6=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t&&s.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=s,r=e(...s)),r}};function f6(e){var t;return e===0?t=1:t=Math.floor(new gt(e).abs().log(10).toNumber())+1,t}function p6(e,t,r){for(var n=new gt(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}hb((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});hb((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});hb((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var m6=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},g6=(e,t,r)=>{if(e.lte(0))return new gt(0);var n=f6(e.toNumber()),s=new gt(10).pow(n),a=e.div(s),o=n!==1?.05:.1,l=new gt(Math.ceil(a.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?new gt(c.toNumber()):new gt(Math.ceil(c.toNumber()))},Hse=(e,t,r)=>{var n=new gt(1),s=new gt(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new gt(10).pow(f6(e)-1),s=new gt(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new gt(Math.floor(e)))}else e===0?s=new gt(Math.floor((t-1)/2)):r||(s=new gt(Math.floor(e)));var o=Math.floor((t-1)/2),l=Fse(zse(c=>s.add(new gt(c-o).mul(n)).toNumber()),hk);return l(0,t)},x6=function(t,r,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new gt(0),tickMin:new gt(0),tickMax:new gt(0)};var o=g6(new gt(r).sub(t).div(n-1),s,a),l;t<=0&&r>=0?l=new gt(0):(l=new gt(t).add(r).div(2),l=l.sub(new gt(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new gt(r).sub(l).div(o).toNumber()),u=c+d+1;return u>n?x6(t,r,n,s,a+1):(u<n&&(d=r>0?d+(n-u):d,c=r>0?c:c+(n-u)),{step:o,tickMin:l.sub(new gt(c).mul(o)),tickMax:l.add(new gt(d).mul(o))})};function Use(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[o,l]=m6([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...hk(0,n-1).map(()=>1/0)]:[...hk(0,n-1).map(()=>-1/0),l];return t>r?fk(c):c}if(o===l)return Hse(o,n,s);var{step:d,tickMin:u,tickMax:h}=x6(o,l,a,s,0),f=p6(u,h.add(new gt(.1).mul(d)),d);return t>r?fk(f):f}function Wse(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=m6([r,n]);if(a===-1/0||o===1/0)return[r,n];if(a===o)return[a];var l=Math.max(t,2),c=g6(new gt(o).sub(a).div(l-1),s,0),d=[...p6(new gt(a),new gt(o),c),o];return s===!1&&(d=d.map(u=>Math.round(u))),r>n?fk(d):d}var Vse=h6(Use),qse=h6(Wse),b6=e=>e.rootProps.maxBarSize,Gse=e=>e.rootProps.barGap,y6=e=>e.rootProps.barCategoryGap,Kse=e=>e.rootProps.barSize,Bf=e=>e.rootProps.stackOffset,B2=e=>e.options.chartName,z2=e=>e.rootProps.syncId,v6=e=>e.rootProps.syncMethod,F2=e=>e.options.eventEmitter,Ja={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Xn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},fb=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Yse={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ja.angleAxisId,includeHidden:!1,name:void 0,reversed:Ja.reversed,scale:Ja.scale,tick:Ja.tick,tickCount:void 0,ticks:void 0,type:Ja.type,unit:void 0},Xse={allowDataOverflow:Xn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Xn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xn.scale,tick:Xn.tick,tickCount:Xn.tickCount,ticks:void 0,type:Xn.type,unit:void 0},Jse={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ja.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ja.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ja.scale,tick:Ja.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Zse={allowDataOverflow:Xn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Xn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xn.scale,tick:Xn.tick,tickCount:Xn.tickCount,ticks:void 0,type:"category",unit:void 0},H2=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Jse:Yse,U2=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Zse:Xse,pb=e=>e.polarOptions,W2=Q([Si,Ci,br],GI),w6=Q([pb,W2],(e,t)=>{if(e!=null)return an(e.innerRadius,t,0)}),k6=Q([pb,W2],(e,t)=>{if(e!=null)return an(e.outerRadius,t,t*.8)}),Qse=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},j6=Q([pb],Qse);Q([H2,j6],fb);var N6=Q([W2,w6,k6],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Q([U2,N6],fb);var S6=Q([nt,pb,w6,k6,Si,Ci],(e,t,r,n,s,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:an(o,s,s/2),cy:an(l,a,a/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:d,clockWise:!1}}}),Bt=(e,t)=>t,zf=(e,t,r)=>r;function V2(e){return e==null?void 0:e.id}var vr=e=>{var t=nt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Wd=e=>e.tooltip.settings.axisId,wr=e=>{var t=vr(e),r=Wd(e);return Ff(e,t,r)},C6=Q([wr],e=>e==null?void 0:e.dataKey);function _6(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:a}=r,o=new Map;return e.forEach(l=>{var c,d=(c=l.data)!==null&&c!==void 0?c:n;if(!(d==null||d.length===0)){var u=V2(l);d.forEach((h,f)=>{var p=a==null||s?f:String(Ct(h,a,null)),m=Ct(h,l.dataKey,0),x;o.has(p)?x=o.get(p):x={},Object.assign(x,{[u]:m}),o.set(p,x)})}}),Array.from(o.values())}function mb(e){return e.stackId!=null&&e.dataKey!=null}var gb=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function xb(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function r3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function e0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r3(Object(r),!0).forEach(function(n){eae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eae(e,t,r){return(t=tae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tae(e){var t=rae(e,"string");return typeof t=="symbol"?t:t+""}function rae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pk=[0,"auto"],Gn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},E6=(e,t)=>e.cartesianAxis.xAxis[t],Ei=(e,t)=>{var r=E6(e,t);return r??Gn},Kn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:pk,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Mf},A6=(e,t)=>e.cartesianAxis.yAxis[t],Ai=(e,t)=>{var r=A6(e,t);return r??Kn},nae={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},q2=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??nae},Vt=(e,t,r)=>{switch(t){case"xAxis":return Ei(e,r);case"yAxis":return Ai(e,r);case"zAxis":return q2(e,r);case"angleAxis":return H2(e,r);case"radiusAxis":return U2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},sae=(e,t,r)=>{switch(t){case"xAxis":return Ei(e,r);case"yAxis":return Ai(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Ff=(e,t,r)=>{switch(t){case"xAxis":return Ei(e,r);case"yAxis":return Ai(e,r);case"angleAxis":return H2(e,r);case"radiusAxis":return U2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},T6=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function G2(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var bb=e=>e.graphicalItems.cartesianItems,aae=Q([Bt,zf],G2),K2=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Hf=Q([bb,Vt,aae],K2,{memoizeOptions:{resultEqualityCheck:xb}}),P6=Q([Hf],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(mb)),M6=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),iae=Q([Hf],M6),Y2=e=>e.map(t=>t.data).filter(Boolean).flat(1),oae=Q([Hf],Y2,{memoizeOptions:{resultEqualityCheck:xb}}),X2=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},J2=Q([oae,ub],X2),Z2=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ct(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Ct(s,n)}))):e.map(n=>({value:n})),yb=Q([J2,Vt,Hf],Z2);function O6(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Lm(e){if(Da(e)||e instanceof Date){var t=Number(e);if(cn(t))return t}}function n3(e){if(Array.isArray(e)){var t=[Lm(e[0]),Lm(e[1])];return Wl(t)?t:void 0}var r=Lm(e);if(r!=null)return[r,r]}function Vd(e){return e.map(Lm).filter(Ete)}function lae(e,t,r){return!r||typeof t!="number"||zs(t)?[]:r.length?Vd(r.flatMap(n=>{var s=Ct(e,n.dataKey),a,o;if(Array.isArray(s)?[a,o]=s:a=o=s,!(!cn(a)||!cn(o)))return[t-a,t+o]})):[]}var cae=Q([P6,ub,wr],_6),$6=(e,t,r)=>{var n={},s=t.reduce((a,o)=>(o.stackId==null||(a[o.stackId]==null&&(a[o.stackId]=[]),a[o.stackId].push(o)),a),n);return Object.fromEntries(Object.entries(s).map(a=>{var[o,l]=a,c=l.map(V2);return[o,{stackedData:tee(e,c,r),graphicalItems:l}]}))},mk=Q([cae,P6,Bf],$6),D6=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:a}=t;if(n==null&&r!=="zAxis"){var o=iee(e,s,a);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},dae=Q([Vt],e=>e.allowDataOverflow),Q2=e=>{var t;if(e==null||!("domain"in e))return pk;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Vd(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:pk},eS=Q([Vt],Q2),tS=Q([eS,dae],n6),uae=Q([mk,qo,Bt,tS],D6,{memoizeOptions:{resultEqualityCheck:gb}}),vb=e=>e.errorBars,hae=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>O6(r,n)),t0=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var a=s.flat(),o=Math.min(...a),l=Math.max(...a);return[o,l]}},rS=(e,t,r,n,s)=>{var a,o;if(r.length>0&&e.forEach(l=>{r.forEach(c=>{var d,u,h=(d=n[c.id])===null||d===void 0?void 0:d.filter(y=>O6(s,y)),f=Ct(l,(u=t.dataKey)!==null&&u!==void 0?u:c.dataKey),p=lae(l,f,h);if(p.length>=2){var m=Math.min(...p),x=Math.max(...p);(a==null||m<a)&&(a=m),(o==null||x>o)&&(o=x)}var b=n3(f);b!=null&&(a=a==null?b[0]:Math.min(a,b[0]),o=o==null?b[1]:Math.max(o,b[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(l=>{var c=n3(Ct(l,t.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),cn(a)&&cn(o))return[a,o]},fae=Q([J2,Vt,iae,vb,Bt],rS,{memoizeOptions:{resultEqualityCheck:gb}});function pae(e){var{value:t}=e;if(Da(t)||t instanceof Date)return t}var mae=(e,t,r)=>{var n=e.map(pae).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&HD(n))?kL(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},I6=e=>e.referenceElements.dots,qd=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),gae=Q([I6,Bt,zf],qd),L6=e=>e.referenceElements.areas,xae=Q([L6,Bt,zf],qd),R6=e=>e.referenceElements.lines,bae=Q([R6,Bt,zf],qd),B6=(e,t)=>{var r=Vd(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},yae=Q(gae,Bt,B6),z6=(e,t)=>{var r=Vd(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},vae=Q([xae,Bt],z6),F6=(e,t)=>{var r=Vd(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},wae=Q(bae,Bt,F6),kae=Q(yae,wae,vae,(e,t,r)=>t0(e,r,t)),nS=(e,t,r,n,s,a,o,l)=>{if(r!=null)return r;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=c?t0(n,a,s):t0(a,s);return Dse(t,d,e.allowDataOverflow)},jae=Q([Vt,eS,tS,uae,fae,kae,nt,Bt],nS,{memoizeOptions:{resultEqualityCheck:gb}}),Nae=[0,1],sS=(e,t,r,n,s,a,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,d=Ho(t,a);return d&&l==null?kL(0,r.length):c==="category"?mae(n,e,d):s==="expand"?Nae:o}},aS=Q([Vt,nt,J2,yb,Bf,Bt,jae],sS),H6=(e,t,r,n,s)=>{if(e!=null){var{scale:a,type:o}=e;if(a==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof a=="string"){var l="scale".concat(Ef(a));return l in Wu?l:"point"}}},Gd=Q([Vt,nt,T6,B2,Bt],H6);function Sae(e){if(e!=null){if(e in Wu)return Wu[e]();var t="scale".concat(Ef(e));if(t in Wu)return Wu[t]()}}function iS(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=Sae(t);if(s!=null){var a=s.domain(r).range(n);return XQ(a),a}}}var oS=(e,t,r)=>{var n=Q2(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Wl(e))return Vse(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Wl(e))return qse(e,t.tickCount,t.allowDecimals)}},lS=Q([aS,Ff,Gd],oS),cS=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Wl(t)&&Array.isArray(r)&&r.length>0){var s=t[0],a=r[0],o=t[1],l=r[r.length-1];return[Math.min(s,a),Math.max(o,l)]}return t},Cae=Q([Vt,aS,lS,Bt],cS),_ae=Q(yb,Vt,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Vd(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var a=0;a<n.length-1;a++){var o=n[a+1]-n[a];r=Math.min(r,o)}return r/s}}),U6=Q(_ae,nt,y6,br,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!cn(e))return 0;var a=t==="vertical"?n.height:n.width;if(s==="gap")return e*a/2;if(s==="no-gap"){var o=an(r,e*a),l=e*a/2;return l-o-(l-o)/a*o}return 0}),Eae=(e,t)=>{var r=Ei(e,t);return r==null||typeof r.padding!="string"?0:U6(e,"xAxis",t,r.padding)},Aae=(e,t)=>{var r=Ai(e,t);return r==null||typeof r.padding!="string"?0:U6(e,"yAxis",t,r.padding)},Tae=Q(Ei,Eae,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),Pae=Q(Ai,Aae,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),Mae=Q([br,Tae,tb,eb,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:a}=n;return s?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),Oae=Q([br,nt,Pae,tb,eb,(e,t,r)=>r],(e,t,r,n,s,a)=>{var{padding:o}=s;return a?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Uf=(e,t,r,n)=>{var s;switch(t){case"xAxis":return Mae(e,r,n);case"yAxis":return Oae(e,r,n);case"zAxis":return(s=q2(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return j6(e);case"radiusAxis":return N6(e,r);default:return}},W6=Q([Vt,Uf],fb),Kd=Q([Vt,Gd,Cae,W6],iS);Q([Hf,vb,Bt],hae);function V6(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var wb=(e,t)=>t,kb=(e,t,r)=>r,$ae=Q(Zx,wb,kb,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(V6)),Dae=Q(Qx,wb,kb,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(V6)),q6=(e,t)=>({width:e.width,height:t.height}),Iae=(e,t)=>{var r=typeof t.width=="number"?t.width:Mf;return{width:r,height:e.height}},G6=Q(br,Ei,q6),Lae=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Rae=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Bae=Q(Ci,br,$ae,wb,kb,(e,t,r,n,s)=>{var a={},o;return r.forEach(l=>{var c=q6(t,l);o==null&&(o=Lae(t,n,e));var d=n==="top"&&!s||n==="bottom"&&s;a[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),a}),zae=Q(Si,br,Dae,wb,kb,(e,t,r,n,s)=>{var a={},o;return r.forEach(l=>{var c=Iae(t,l);o==null&&(o=Rae(t,n,e));var d=n==="left"&&!s||n==="right"&&s;a[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),a}),Fae=(e,t)=>{var r=Ei(e,t);if(r!=null)return Bae(e,r.orientation,r.mirror)},Hae=Q([br,Ei,Fae,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),Uae=(e,t)=>{var r=Ai(e,t);if(r!=null)return zae(e,r.orientation,r.mirror)},Wae=Q([br,Ai,Uae,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),K6=Q(br,Ai,(e,t)=>{var r=typeof t.width=="number"?t.width:Mf;return{width:r,height:e.height}}),s3=(e,t,r)=>{switch(t){case"xAxis":return G6(e,r).width;case"yAxis":return K6(e,r).height;default:return}},Y6=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:a,dataKey:o}=r,l=Ho(e,n),c=t.map(d=>d.value);if(o&&l&&a==="category"&&s&&HD(c))return c}},dS=Q([nt,yb,Vt,Bt],Y6),X6=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:a}=r,o=Ho(e,n);if(o&&(s==="number"||a!=="auto"))return t.map(l=>l.value)}},uS=Q([nt,yb,Ff,Bt],X6),a3=Q([nt,sae,Gd,Kd,dS,uS,Uf,lS,Bt],(e,t,r,n,s,a,o,l,c)=>{if(t==null)return null;var d=Ho(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:a,duplicateDomain:s,isCategorical:d,niceTicks:l,range:o,realScaleType:r,scale:n}}),Vae=(e,t,r,n,s,a,o,l,c)=>{if(!(t==null||n==null)){var d=Ho(e,c),{type:u,ticks:h,tickCount:f}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,m=u==="category"&&n.bandwidth?n.bandwidth()/p:0;m=c==="angleAxis"&&a!=null&&a.length>=2?_r(a[0]-a[1])*2*m:m;var x=h||s;if(x){var b=x.map((y,v)=>{var w=o?o.indexOf(y):y;return{index:v,coordinate:n(w)+m,value:y,offset:m}});return b.filter(y=>!zs(y.coordinate))}return d&&l?l.map((y,v)=>({coordinate:n(y)+m,value:y,index:v,offset:m})):n.ticks?n.ticks(f).map(y=>({coordinate:n(y)+m,value:y,offset:m})):n.domain().map((y,v)=>({coordinate:n(y)+m,value:o?o[y]:y,index:v,offset:m}))}},J6=Q([nt,Ff,Gd,Kd,lS,Uf,dS,uS,Bt],Vae),qae=(e,t,r,n,s,a,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=Ho(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&(n==null?void 0:n.length)>=2?_r(n[0]-n[1])*2*d:d,l&&a?a.map((u,h)=>({coordinate:r(u)+d,value:u,index:h,offset:d})):r.ticks?r.ticks(c).map(u=>({coordinate:r(u)+d,value:u,offset:d})):r.domain().map((u,h)=>({coordinate:r(u)+d,value:s?s[u]:u,index:h,offset:d}))}},Ao=Q([nt,Ff,Kd,Uf,dS,uS,Bt],qae),To=Q(Vt,Kd,(e,t)=>{if(!(e==null||t==null))return e0(e0({},e),{},{scale:t})}),Gae=Q([Vt,Gd,aS,W6],iS);Q((e,t,r)=>q2(e,r),Gae,(e,t)=>{if(!(e==null||t==null))return e0(e0({},e),{},{scale:t})});var Kae=Q([nt,Zx,Qx],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Z6=e=>e.options.defaultTooltipEventType,Q6=e=>e.options.validateTooltipEventTypes;function eR(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function hS(e,t){var r=Z6(e),n=Q6(e);return eR(t,r,n)}function Yae(e){return Pe(t=>hS(t,e))}var tR=(e,t)=>{var r,n=Number(t);if(!(zs(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Xae=e=>e.tooltip.settings,Zi={active:!1,index:null,dataKey:void 0,coordinate:void 0},Jae={itemInteraction:{click:Zi,hover:Zi},axisInteraction:{click:Zi,hover:Zi},keyboardInteraction:Zi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},rR=fs({name:"tooltip",initialState:Jae,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:mn()},removeTooltipEntrySettings:{reducer(e,t){var r=li(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:mn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Zae,removeTooltipEntrySettings:Qae,setTooltipSettingsState:eie,setActiveMouseOverItemIndex:nR,mouseLeaveItem:tie,mouseLeaveChart:sR,setActiveClickItemIndex:rie,setMouseOverAxisIndex:aR,setMouseClickAxisIndex:nie,setSyncInteraction:gk,setKeyboardInteraction:xk}=rR.actions,sie=rR.reducer;function i3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Jp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i3(Object(r),!0).forEach(function(n){aie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aie(e,t,r){return(t=iie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iie(e){var t=oie(e,"string");return typeof t=="symbol"?t:t+""}function oie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lie(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function cie(e){return e.index!=null}var iR=(e,t,r,n)=>{if(t==null)return Zi;var s=lie(e,t,r);if(s==null)return Zi;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(cie(s)){if(a)return Jp(Jp({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Jp(Jp({},Zi),{},{coordinate:s.coordinate})},fS=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!cn(n))return r;var s=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(s,Math.min(n,a)))},oR=(e,t,r,n,s,a,o,l)=>{if(!(a==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,a);if(d!=null)return d;var u=s==null?void 0:s[Number(a)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},lR=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var o;return((o=a.settings)===null||o===void 0?void 0:o.dataKey)===s})},Wf=e=>e.options.tooltipPayloadSearcher,Yd=e=>e.tooltip;function o3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function l3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o3(Object(r),!0).forEach(function(n){die(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function die(e,t,r){return(t=uie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uie(e){var t=hie(e,"string");return typeof t=="symbol"?t:t+""}function hie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fie(e,t){return e??t}var cR=(e,t,r,n,s,a,o)=>{if(!(t==null||a==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=r,h=[];return e.reduce((f,p)=>{var m,{dataDefinedOnItem:x,settings:b}=p,y=fie(x,l),v=Array.isArray(y)?KI(y,d,u):y,w=(m=b==null?void 0:b.dataKey)!==null&&m!==void 0?m:n,j=b==null?void 0:b.nameKey,N;if(n&&Array.isArray(v)&&!Array.isArray(v[0])&&o==="axis"?N=UD(v,n,s):N=a(v,t,c,j),Array.isArray(N))N.forEach(S=>{var C=l3(l3({},b),{},{name:S.name,unit:S.unit,color:void 0,fill:void 0});f.push(VA({tooltipEntrySettings:C,dataKey:S.dataKey,payload:S.payload,value:Ct(S.payload,S.dataKey),name:S.name}))});else{var k;f.push(VA({tooltipEntrySettings:b,dataKey:w,payload:N,value:Ct(N,w),name:(k=Ct(N,j))!==null&&k!==void 0?k:b==null?void 0:b.name}))}return f},h)}},pS=Q([wr,nt,T6,B2,vr],H6),pie=Q([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),mie=Q([vr,Wd],G2),Vf=Q([pie,wr,mie],K2,{memoizeOptions:{resultEqualityCheck:xb}}),gie=Q([Vf],e=>e.filter(mb)),xie=Q([Vf],Y2,{memoizeOptions:{resultEqualityCheck:xb}}),Xd=Q([xie,qo],X2),bie=Q([gie,qo,wr],_6),mS=Q([Xd,wr,Vf],Z2),dR=Q([wr],Q2),yie=Q([wr],e=>e.allowDataOverflow),uR=Q([dR,yie],n6),vie=Q([Vf],e=>e.filter(mb)),wie=Q([bie,vie,Bf],$6),kie=Q([wie,qo,vr,uR],D6),jie=Q([Vf],M6),Nie=Q([Xd,wr,jie,vb,vr],rS,{memoizeOptions:{resultEqualityCheck:gb}}),Sie=Q([I6,vr,Wd],qd),Cie=Q([Sie,vr],B6),_ie=Q([L6,vr,Wd],qd),Eie=Q([_ie,vr],z6),Aie=Q([R6,vr,Wd],qd),Tie=Q([Aie,vr],F6),Pie=Q([Cie,Tie,Eie],t0),Mie=Q([wr,dR,uR,kie,Nie,Pie,nt,vr],nS),hR=Q([wr,nt,Xd,mS,Bf,vr,Mie],sS),Oie=Q([hR,wr,pS],oS),$ie=Q([wr,hR,Oie,vr],cS),fR=e=>{var t=vr(e),r=Wd(e),n=!1;return Uf(e,t,r,n)},pR=Q([wr,fR],fb),mR=Q([wr,pS,$ie,pR],iS),Die=Q([nt,mS,wr,vr],Y6),Iie=Q([nt,mS,wr,vr],X6),Lie=(e,t,r,n,s,a,o,l)=>{if(t){var{type:c}=t,d=Ho(e,l);if(n){var u=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=c==="category"&&n.bandwidth?n.bandwidth()/u:0;return h=l==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?_r(s[0]-s[1])*2*h:h,d&&o?o.map((f,p)=>({coordinate:n(f)+h,value:f,index:p,offset:h})):n.domain().map((f,p)=>({coordinate:n(f)+h,value:a?a[f]:f,index:p,offset:h}))}}},Ti=Q([nt,wr,pS,mR,fR,Die,Iie,vr],Lie),gS=Q([Z6,Q6,Xae],(e,t,r)=>eR(r.shared,e,t)),gR=e=>e.tooltip.settings.trigger,xS=e=>e.tooltip.settings.defaultIndex,jb=Q([Yd,gS,gR,xS],iR),Po=Q([jb,Xd],fS),xR=Q([Ti,Po],tR),bR=Q([jb],e=>{if(e)return e.dataKey}),yR=Q([Yd,gS,gR,xS],lR),Rie=Q([Si,Ci,nt,br,Ti,xS,yR,Wf],oR),Bie=Q([jb,Rie],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),zie=Q([jb],e=>e.active),Fie=Q([yR,Po,qo,C6,xR,Wf,gS],cR),Hie=Q([Fie],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function c3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function d3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c3(Object(r),!0).forEach(function(n){Uie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uie(e,t,r){return(t=Wie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wie(e){var t=Vie(e,"string");return typeof t=="symbol"?t:t+""}function Vie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qie=()=>Pe(wr),Gie=()=>{var e=qie(),t=Pe(Ti),r=Pe(mR);return qh(d3(d3({},e),{},{scale:r}),t)},Kie=()=>Pe(B2),bS=(e,t)=>t,vR=(e,t,r)=>r,yS=(e,t,r,n)=>n,Yie=Q(Ti,e=>qx(e,t=>t.coordinate)),vS=Q([Yd,bS,vR,yS],iR),wR=Q([vS,Xd],fS),Xie=(e,t,r)=>{if(t!=null){var n=Yd(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},kR=Q([Yd,bS,vR,yS],lR),r0=Q([Si,Ci,nt,br,Ti,yS,kR,Wf],oR),Jie=Q([vS,r0],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),jR=Q(Ti,wR,tR),Zie=Q([kR,wR,qo,C6,jR,Wf,bS],cR),Qie=Q([vS],e=>({isActive:e.active,activeIndex:e.index})),eoe=(e,t,r,n,s,a,o,l)=>{if(!(!e||!t||!n||!s||!a)){var c=oee(e.chartX,e.chartY,t,r,l);if(c){var d=cee(c,t),u=KQ(d,o,a,n,s),h=lee(t,a,u,c);return{activeIndex:String(u),activeCoordinate:h}}}};function bk(){return bk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bk.apply(null,arguments)}function u3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u3(Object(r),!0).forEach(function(n){toe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function toe(e,t,r){return(t=roe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function roe(e){var t=noe(e,"string");return typeof t=="symbol"?t:t+""}function noe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function soe(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:a,layout:o,cursor:l,tooltipEventType:c,chartName:d}=e,u=t,h=r,f=n;if(!l||!u||d!=="ScatterChart"&&c!=="axis")return null;var p,m;if(d==="ScatterChart")p=u,m=wte;else if(d==="BarChart")p=kte(o,u,s,a),m=mL;else if(o==="radial"){var{cx:x,cy:b,radius:y,startAngle:v,endAngle:w}=gL(u);p={cx:x,cy:b,startAngle:v,endAngle:w,innerRadius:y,outerRadius:y},m=bL}else p={points:are(o,u,s)},m=h2;var j=typeof l=="object"&&"className"in l?l.className:void 0,N=Zp(Zp(Zp(Zp({stroke:"#ccc",pointerEvents:"none"},s),p),zl(l)),{},{payload:h,payloadIndex:f,className:ct("recharts-tooltip-cursor",j)});return g.isValidElement(l)?g.cloneElement(l,N):g.createElement(m,N)}function aoe(e){var t=Gie(),r=iL(),n=nb(),s=Kie();return g.createElement(soe,bk({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var NR=g.createContext(null),ioe=()=>g.useContext(NR),SR={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function a(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,h||c,f),m=r?r+d:d;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],p]:c._events[m].push(p):(c._events[m]=p,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,p=h.length,m=new Array(p);f<p;f++)m[f]=h[f].fn;return m},l.prototype.listenerCount=function(d){var u=r?r+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,f,p,m){var x=r?r+d:d;if(!this._events[x])return!1;var b=this._events[x],y=arguments.length,v,w;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,h),!0;case 4:return b.fn.call(b.context,u,h,f),!0;case 5:return b.fn.call(b.context,u,h,f,p),!0;case 6:return b.fn.call(b.context,u,h,f,p,m),!0}for(w=1,v=new Array(y-1);w<y;w++)v[w-1]=arguments[w];b.fn.apply(b.context,v)}else{var j=b.length,N;for(w=0;w<j;w++)switch(b[w].once&&this.removeListener(d,b[w].fn,void 0,!0),y){case 1:b[w].fn.call(b[w].context);break;case 2:b[w].fn.call(b[w].context,u);break;case 3:b[w].fn.call(b[w].context,u,h);break;case 4:b[w].fn.call(b[w].context,u,h,f);break;default:if(!v)for(N=1,v=new Array(y-1);N<y;N++)v[N-1]=arguments[N];b[w].fn.apply(b[w].context,v)}}return!0},l.prototype.on=function(d,u,h){return a(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return a(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,f){var p=r?r+d:d;if(!this._events[p])return this;if(!u)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===u&&(!f||m.once)&&(!h||m.context===h)&&o(this,p);else{for(var x=0,b=[],y=m.length;x<y;x++)(m[x].fn!==u||f&&!m[x].once||h&&m[x].context!==h)&&b.push(m[x]);b.length?this._events[p]=b.length===1?b[0]:b:o(this,p)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(SR);var ooe=SR.exports;const loe=Vn(ooe);var Qh=new loe,yk="recharts.syncEvent.tooltip",h3="recharts.syncEvent.brush";function wS(e,t){if(t){var r=Number.parseInt(t,10);if(!zs(r))return e==null?void 0:e[r]}}var coe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},CR=fs({name:"options",initialState:coe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),doe=CR.reducer,{createEventEmitter:uoe}=CR.actions;function hoe(e){return e.tooltip.syncInteraction}var foe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},_R=fs({name:"chartData",initialState:foe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:f3,setDataStartEndIndexes:poe,setComputedData:BSe}=_R.actions,moe=_R.reducer,goe=["x","y"];function p3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p3(Object(r),!0).forEach(function(n){xoe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xoe(e,t,r){return(t=boe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function boe(e){var t=yoe(e,"string");return typeof t=="symbol"?t:t+""}function yoe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function voe(e,t){if(e==null)return{};var r,n,s=woe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function woe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ER=()=>{};function koe(){var e=Pe(z2),t=Pe(F2),r=Rt(),n=Pe(v6),s=Pe(Ti),a=nb(),o=rb(),l=Pe(c=>c.rootProps.className);g.useEffect(()=>{if(e==null)return ER;var c=(d,u,h)=>{if(t!==h&&e===d){if(n==="index"){var f;if(o&&u!==null&&u!==void 0&&(f=u.payload)!==null&&f!==void 0&&f.coordinate&&u.payload.sourceViewBox){var p=u.payload.coordinate,{x:m,y:x}=p,b=voe(p,goe),{x:y,y:v,width:w,height:j}=u.payload.sourceViewBox,N=bc(bc({},b),{},{x:o.x+(w?(m-y)/w:0)*o.width,y:o.y+(j?(x-v)/j:0)*o.height});r(bc(bc({},u),{},{payload:bc(bc({},u.payload),{},{coordinate:N})}))}else r(u);return}if(s!=null){var k;if(typeof n=="function"){var S={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},C=n(s,S);k=s[C]}else n==="value"&&(k=s.find($=>String($.value)===u.payload.label));var{coordinate:P}=u.payload;if(k==null||u.payload.active===!1||P==null||o==null){r(gk({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:E,y:O}=P,A=Math.min(E,o.x+o.width),_=Math.min(O,o.y+o.height),I={x:a==="horizontal"?k.coordinate:A,y:a==="horizontal"?_:k.coordinate},D=gk({active:u.payload.active,coordinate:I,dataKey:u.payload.dataKey,index:String(k.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox});r(D)}}};return Qh.on(yk,c),()=>{Qh.off(yk,c)}},[l,r,t,e,n,s,a,o])}function joe(){var e=Pe(z2),t=Pe(F2),r=Rt();g.useEffect(()=>{if(e==null)return ER;var n=(s,a,o)=>{t!==o&&e===s&&r(poe(a))};return Qh.on(h3,n),()=>{Qh.off(h3,n)}},[r,t,e])}function Noe(){var e=Rt();g.useEffect(()=>{e(uoe())},[e]),koe(),joe()}function Soe(e,t,r,n,s,a){var o=Pe(p=>Xie(p,e,t)),l=Pe(F2),c=Pe(z2),d=Pe(v6),u=Pe(hoe),h=u==null?void 0:u.active,f=rb();g.useEffect(()=>{if(!h&&c!=null&&l!=null){var p=gk({active:a,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:f});Qh.emit(yk,c,p,l)}},[h,r,o,s,n,l,c,d,a,f])}function m3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function g3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m3(Object(r),!0).forEach(function(n){Coe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Coe(e,t,r){return(t=_oe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _oe(e){var t=Eoe(e,"string");return typeof t=="symbol"?t:t+""}function Eoe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Aoe(e){return e.dataKey}function Toe(e,t){return g.isValidElement(e)?g.cloneElement(e,t):typeof e=="function"?g.createElement(e,t):g.createElement(Qee,t)}var x3=[],Poe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Uo.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Xs(e){var t=Jr(e,Poe),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:a,content:o,filterNull:l,isAnimationActive:c,offset:d,payloadUniqBy:u,position:h,reverseDirection:f,useTranslate3d:p,wrapperStyle:m,cursor:x,shared:b,trigger:y,defaultIndex:v,portal:w,axisId:j}=t,N=Rt(),k=typeof v=="number"?String(v):v;g.useEffect(()=>{N(eie({shared:b,trigger:y,axisId:j,active:r,defaultIndex:k}))},[N,b,y,j,r,k]);var S=rb(),C=dL(),P=Yae(b),{activeIndex:E,isActive:O}=Pe(q=>Qie(q,P,y,k)),A=Pe(q=>Zie(q,P,y,k)),_=Pe(q=>jR(q,P,y,k)),I=Pe(q=>Jie(q,P,y,k)),D=A,$=ioe(),L=r??O,[M,T]=vI([D,L]),G=P==="axis"?_:void 0;Soe(P,y,I,G,E,L);var Y=w??$;if(Y==null)return null;var ee=D??x3;L||(ee=x3),l&&ee.length&&(ee=oI(D.filter(q=>q.value!=null&&(q.hide!==!0||t.includeHidden)),u,Aoe));var R=ee.length>0,B=g.createElement(ite,{allowEscapeViewBox:n,animationDuration:s,animationEasing:a,isAnimationActive:c,active:L,coordinate:I,hasPayload:R,offset:d,position:h,reverseDirection:f,useTranslate3d:p,viewBox:S,wrapperStyle:m,lastBoundingBox:M,innerRef:T,hasPortalFromProps:!!w},Toe(o,g3(g3({},t),{},{payload:ee,label:G,active:L,coordinate:I,accessibilityLayer:C})));return g.createElement(g.Fragment,null,kf.createPortal(B,Y),L&&g.createElement(aoe,{cursor:x,tooltipEventType:P,coordinate:I,payload:D,index:E}))}var Cl=e=>null;Cl.displayName="Cell";function Moe(e,t,r){return(t=Ooe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ooe(e){var t=$oe(e,"string");return typeof t=="symbol"?t:t+""}function $oe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Doe{constructor(t){Moe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function b3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ioe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b3(Object(r),!0).forEach(function(n){Loe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Loe(e,t,r){return(t=Roe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Roe(e){var t=Boe(e,"string");return typeof t=="symbol"?t:t+""}function Boe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zoe={cacheSize:2e3,enableCache:!0},AR=Ioe({},zoe),y3=new Doe(AR.cacheSize),Foe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},v3="recharts_measurement_span";function Hoe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",a=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(o,"|").concat(l)}var w3=(e,t)=>{try{var r=document.getElementById(v3);r||(r=document.createElement("span"),r.setAttribute("id",v3),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Foe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},ih=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Uo.isSsr)return{width:0,height:0};if(!AR.enableCache)return w3(t,r);var n=Hoe(t,r),s=y3.get(n);if(s)return s;var a=w3(t,r);return y3.set(n,a),a},k3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,j3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Uoe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Woe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,TR={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Voe=Object.keys(TR),Bc="NaN";function qoe(e,t){return e*TR[t]}class Dn{static parse(t){var r,[,n,s]=(r=Woe.exec(t))!==null&&r!==void 0?r:[];return new Dn(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,zs(t)&&(this.unit=""),r!==""&&!Uoe.test(r)&&(this.num=NaN,this.unit=""),Voe.includes(r)&&(this.num=qoe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Dn(NaN,""):new Dn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Dn(NaN,""):new Dn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Dn(NaN,""):new Dn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Dn(NaN,""):new Dn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return zs(this.num)}}function PR(e){if(e.includes(Bc))return Bc;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,a]=(r=k3.exec(t))!==null&&r!==void 0?r:[],o=Dn.parse(n??""),l=Dn.parse(a??""),c=s==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Bc;t=t.replace(k3,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,h,f]=(d=j3.exec(t))!==null&&d!==void 0?d:[],p=Dn.parse(u??""),m=Dn.parse(f??""),x=h==="+"?p.add(m):p.subtract(m);if(x.isNaN())return Bc;t=t.replace(j3,x.toString())}return t}var N3=/\(([^()]*)\)/;function Goe(e){for(var t=e,r;(r=N3.exec(t))!=null;){var[,n]=r;t=t.replace(N3,PR(n))}return t}function Koe(e){var t=e.replace(/\s+/g,"");return t=Goe(t),t=PR(t),t}function Yoe(e){try{return Koe(e)}catch{return Bc}}function _v(e){var t=Yoe(e.slice(5,-1));return t===Bc?"":t}var Xoe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Joe=["dx","dy","angle","className","breakAll"];function vk(){return vk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vk.apply(null,arguments)}function S3(e,t){if(e==null)return{};var r,n,s=Zoe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Zoe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MR=/[ \f\n\r\t\v\u2028\u2029]+/,OR=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Lt(t)||(r?s=t.toString().split(""):s=t.toString().split(MR));var a=s.map(l=>({word:l,width:ih(l,n).width})),o=r?0:ih("",n).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},Qoe=(e,t,r,n,s)=>{var{maxLines:a,children:o,style:l,breakAll:c}=e,d=Oe(a),u=o,h=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return O.reduce((A,_)=>{var{word:I,width:D}=_,$=A[A.length-1];if($&&(n==null||s||$.width+D+r<Number(n)))$.words.push(I),$.width+=D+r;else{var L={words:[I],width:D};A.push(L)}return A},[])},f=h(t),p=E=>E.reduce((O,A)=>O.width>A.width?O:A);if(!d||s)return f;var m=f.length>a||p(f).width>Number(n);if(!m)return f;for(var x="",b=E=>{var O=u.slice(0,E),A=OR({breakAll:c,style:l,children:O+x}).wordsWithComputedWidth,_=h(A),I=_.length>a||p(_).width>Number(n);return[I,_]},y=0,v=u.length-1,w=0,j;y<=v&&w<=u.length-1;){var N=Math.floor((y+v)/2),k=N-1,[S,C]=b(k),[P]=b(N);if(!S&&!P&&(y=N+1),S&&P&&(v=N-1),!S&&P){j=C;break}w++}return j||f},C3=e=>{var t=Lt(e)?[]:e.toString().split(MR);return[{words:t}]},ele=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:a,maxLines:o}=e;if((t||r)&&!Uo.isSsr){var l,c,d=OR({breakAll:a,children:n,style:s});if(d){var{wordsWithComputedWidth:u,spaceWidth:h}=d;l=u,c=h}else return C3(n);return Qoe({breakAll:a,children:n,maxLines:o,style:s},l,c,t,r)}return C3(n)},_3="#808080",Nb=g.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:a="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:d=_3}=e,u=S3(e,Xoe),h=g.useMemo(()=>ele({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:f,dy:p,angle:m,className:x,breakAll:b}=u,y=S3(u,Joe);if(!Da(r)||!Da(n)||h.length===0)return null;var v=r+(Oe(f)?f:0),w=n+(Oe(p)?p:0),j;switch(c){case"start":j=_v("calc(".concat(a,")"));break;case"middle":j=_v("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:j=_v("calc(".concat(h.length-1," * -").concat(s,")"));break}var N=[];if(o){var k=h[0].width,{width:S}=u;N.push("scale(".concat(Oe(S)?S/k:1,")"))}return m&&N.push("rotate(".concat(m,", ").concat(v,", ").concat(w,")")),N.length&&(y.transform=N.join(" ")),g.createElement("text",vk({},jn(y),{ref:t,x:v,y:w,className:ct("recharts-text",x),textAnchor:l,fill:d.includes("url")?_3:d}),h.map((C,P)=>{var E=C.words.join(b?"":" ");return g.createElement("tspan",{x:v,dy:P===0?j:s,key:"".concat(E,"-").concat(P)},E)}))});Nb.displayName="Text";var tle=["labelRef"];function rle(e,t){if(e==null)return{};var r,n,s=nle(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nle(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function E3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E3(Object(r),!0).forEach(function(n){sle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sle(e,t,r){return(t=ale(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ale(e){var t=ile(e,"string");return typeof t=="symbol"?t:t+""}function ile(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Za(){return Za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Za.apply(null,arguments)}var $R=g.createContext(null),ole=e=>{var{x:t,y:r,width:n,height:s,children:a}=e,o=g.useMemo(()=>({x:t,y:r,width:n,height:s}),[t,r,n,s]);return g.createElement($R.Provider,{value:o},a)},DR=()=>{var e=g.useContext($R),t=rb();return e||t},lle=g.createContext(null),cle=()=>{var e=g.useContext(lle),t=Pe(S6);return e||t},dle=e=>{var{value:t,formatter:r}=e,n=Lt(e.children)?t:e.children;return typeof r=="function"?r(n):n},kS=e=>e!=null&&typeof e=="function",ule=(e,t)=>{var r=_r(t-e),n=Math.min(Math.abs(t-e),360);return r*n},hle=(e,t,r,n,s)=>{var{offset:a,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:h,endAngle:f,clockWise:p}=s,m=(d+u)/2,x=ule(h,f),b=x>=0?1:-1,y,v;switch(t){case"insideStart":y=h+b*a,v=p;break;case"insideEnd":y=f-b*a,v=!p;break;case"end":y=f+b*a,v=p;break;default:throw new Error("Unsupported position ".concat(t))}v=x<=0?v:!v;var w=cr(l,c,m,y),j=cr(l,c,m,y+(v?1:-1)*359),N="M".concat(w.x,",").concat(w.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(v?0:1,`,
    `).concat(j.x,",").concat(j.y),k=Lt(e.id)?Uh("recharts-radial-line-"):e.id;return g.createElement("text",Za({},n,{dominantBaseline:"central",className:ct("recharts-radial-bar-label",o)}),g.createElement("defs",null,g.createElement("path",{id:k,d:N})),g.createElement("textPath",{xlinkHref:"#".concat(k)},r))},fle=(e,t,r)=>{var{cx:n,cy:s,innerRadius:a,outerRadius:o,startAngle:l,endAngle:c}=e,d=(l+c)/2;if(r==="outside"){var{x:u,y:h}=cr(n,s,o+t,d);return{x:u,y:h,textAnchor:u>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var f=(a+o)/2,{x:p,y:m}=cr(n,s,f,d);return{x:p,y:m,textAnchor:"middle",verticalAnchor:"middle"}},IR=e=>"cx"in e&&Oe(e.cx),ple=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,a;r!=null&&!IR(r)&&(a=r);var{x:o,y:l,width:c,height:d}=t,u=d>=0?1:-1,h=u*n,f=u>0?"end":"start",p=u>0?"start":"end",m=c>=0?1:-1,x=m*n,b=m>0?"end":"start",y=m>0?"start":"end";if(s==="top"){var v={x:o+c/2,y:l-u*n,textAnchor:"middle",verticalAnchor:f};return tr(tr({},v),a?{height:Math.max(l-a.y,0),width:c}:{})}if(s==="bottom"){var w={x:o+c/2,y:l+d+h,textAnchor:"middle",verticalAnchor:p};return tr(tr({},w),a?{height:Math.max(a.y+a.height-(l+d),0),width:c}:{})}if(s==="left"){var j={x:o-x,y:l+d/2,textAnchor:b,verticalAnchor:"middle"};return tr(tr({},j),a?{width:Math.max(j.x-a.x,0),height:d}:{})}if(s==="right"){var N={x:o+c+x,y:l+d/2,textAnchor:y,verticalAnchor:"middle"};return tr(tr({},N),a?{width:Math.max(a.x+a.width-N.x,0),height:d}:{})}var k=a?{width:c,height:d}:{};return s==="insideLeft"?tr({x:o+x,y:l+d/2,textAnchor:y,verticalAnchor:"middle"},k):s==="insideRight"?tr({x:o+c-x,y:l+d/2,textAnchor:b,verticalAnchor:"middle"},k):s==="insideTop"?tr({x:o+c/2,y:l+h,textAnchor:"middle",verticalAnchor:p},k):s==="insideBottom"?tr({x:o+c/2,y:l+d-h,textAnchor:"middle",verticalAnchor:f},k):s==="insideTopLeft"?tr({x:o+x,y:l+h,textAnchor:y,verticalAnchor:p},k):s==="insideTopRight"?tr({x:o+c-x,y:l+h,textAnchor:b,verticalAnchor:p},k):s==="insideBottomLeft"?tr({x:o+x,y:l+d-h,textAnchor:y,verticalAnchor:f},k):s==="insideBottomRight"?tr({x:o+c-x,y:l+d-h,textAnchor:b,verticalAnchor:f},k):s&&typeof s=="object"&&(Oe(s.x)||xi(s.x))&&(Oe(s.y)||xi(s.y))?tr({x:o+an(s.x,c),y:l+an(s.y,d),textAnchor:"end",verticalAnchor:"end"},k):tr({x:o+c/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},k)},mle={offset:5};function qi(e){var t=Jr(e,mle),{viewBox:r,position:n,value:s,children:a,content:o,className:l="",textBreakAll:c,labelRef:d}=t,u=cle(),h=DR(),f=n==="center"?h:u??h,p=r||f;if(!p||Lt(s)&&Lt(a)&&!g.isValidElement(o)&&typeof o!="function")return null;var m=tr(tr({},t),{},{viewBox:p});if(g.isValidElement(o)){var{labelRef:x}=m,b=rle(m,tle);return g.cloneElement(o,b)}var y;if(typeof o=="function"){if(y=g.createElement(o,m),g.isValidElement(y))return y}else y=dle(t);var v=IR(p),w=jn(t);if(v&&(n==="insideStart"||n==="insideEnd"||n==="end"))return hle(t,n,y,w,p);var j=v?fle(p,t.offset,t.position):ple(t,p);return g.createElement(Nb,Za({ref:d,className:ct("recharts-label",l)},w,j,{breakAll:c}),y)}qi.displayName="Label";var gle=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?g.createElement(qi,Za({key:"label-implicit"},n)):Da(e)?g.createElement(qi,Za({key:"label-implicit",value:e},n)):g.isValidElement(e)?e.type===qi?g.cloneElement(e,tr({key:"label-implicit"},n)):g.createElement(qi,Za({key:"label-implicit",content:e},n)):kS(e)?g.createElement(qi,Za({key:"label-implicit",content:e},n)):e&&typeof e=="object"?g.createElement(qi,Za({},e,{key:"label-implicit"},n)):null};function xle(e){var{label:t,labelRef:r}=e,n=DR();return gle(t,n,r)||null}var LR={},RR={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(RR);var BR={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(BR);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RR,r=BR,n=Wx;function s(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=s})(LR);var ble=LR.last;const yle=Vn(ble);var vle=["valueAccessor"],wle=["dataKey","clockWise","id","textBreakAll"];function n0(){return n0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n0.apply(null,arguments)}function A3(e,t){if(e==null)return{};var r,n,s=kle(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function kle(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jle=e=>Array.isArray(e.value)?yle(e.value):e.value,zR=g.createContext(void 0),FR=zR.Provider,HR=g.createContext(void 0),Nle=HR.Provider;function Sle(){return g.useContext(zR)}function Cle(){return g.useContext(HR)}function Rm(e){var{valueAccessor:t=jle}=e,r=A3(e,vle),{dataKey:n,clockWise:s,id:a,textBreakAll:o}=r,l=A3(r,wle),c=Sle(),d=Cle(),u=c||d;return!u||!u.length?null:g.createElement(Yr,{className:"recharts-label-list"},u.map((h,f)=>{var p,m=Lt(n)?t(h,f):Ct(h&&h.payload,n),x=Lt(a)?{}:{id:"".concat(a,"-").concat(f)};return g.createElement(qi,n0({key:"label-".concat(f)},jn(h),l,x,{fill:(p=r.fill)!==null&&p!==void 0?p:h.fill,parentViewBox:h.parentViewBox,value:m,textBreakAll:o,viewBox:h.viewBox,index:f}))}))}Rm.displayName="LabelList";function jS(e){var{label:t}=e;return t?t===!0?g.createElement(Rm,{key:"labelList-implicit"}):g.isValidElement(t)||kS(t)?g.createElement(Rm,{key:"labelList-implicit",content:t}):typeof t=="object"?g.createElement(Rm,n0({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function wk(){return wk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wk.apply(null,arguments)}var UR=e=>{var{cx:t,cy:r,r:n,className:s}=e,a=ct("recharts-dot",s);return t===+t&&r===+r&&n===+n?g.createElement("circle",wk({},cs(e),zN(e),{className:a,cx:t,cy:r,r:n})):null},WR=e=>e.graphicalItems.polarItems,_le=Q([Bt,zf],G2),Sb=Q([WR,Vt,_le],K2),Ele=Q([Sb],Y2),Cb=Q([Ele,I2],X2),Ale=Q([Cb,Vt,Sb],Z2);Q([Cb,Vt,Sb],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(s=>{var a,o=Ct(n,(a=t.dataKey)!==null&&a!==void 0?a:s.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ct(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var T3=()=>{},Tle=Q([Cb,Vt,Sb,vb,Bt],rS),Ple=Q([Vt,eS,tS,T3,Tle,T3,nt,Bt],nS),VR=Q([Vt,nt,Cb,Ale,Bf,Bt,Ple],sS),Mle=Q([VR,Vt,Gd],oS);Q([Vt,VR,Mle,Bt],cS);var Ole={radiusAxis:{},angleAxis:{}},qR=fs({name:"polarAxis",initialState:Ole,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:zSe,removeRadiusAxis:FSe,addAngleAxis:HSe,removeAngleAxis:USe}=qR.actions,$le=qR.reducer;function P3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function M3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P3(Object(r),!0).forEach(function(n){Dle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dle(e,t,r){return(t=Ile(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ile(e){var t=Lle(e,"string");return typeof t=="symbol"?t:t+""}function Lle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rle=(e,t)=>t,NS=Q([WR,Rle],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),Ble=[],SS=(e,t,r)=>(r==null?void 0:r.length)===0?Ble:r,GR=Q([I2,NS,SS],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var s;if((t==null?void 0:t.data)!=null&&t.data.length>0?s=t.data:s=n,(!s||!s.length)&&r!=null&&(s=r.map(a=>M3(M3({},t.presentationProps),a.props))),s!=null)return s}}),zle=Q([GR,NS,SS],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,s)=>{var a,o=Ct(n,t.nameKey,t.name),l;return r!=null&&(a=r[s])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?l=r[s].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=t.fill,{value:zd(o,t.dataKey),color:l,payload:n,type:t.legendType}})}),Fle=Q([GR,NS,SS,br],(e,t,r,n)=>{if(!(t==null||e==null))return Bce({offset:n,pieSettings:t,displayedData:e,cells:r})}),KR={exports:{}},kt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CS=Symbol.for("react.transitional.element"),_S=Symbol.for("react.portal"),_b=Symbol.for("react.fragment"),Eb=Symbol.for("react.strict_mode"),Ab=Symbol.for("react.profiler"),Tb=Symbol.for("react.consumer"),Pb=Symbol.for("react.context"),Mb=Symbol.for("react.forward_ref"),Ob=Symbol.for("react.suspense"),$b=Symbol.for("react.suspense_list"),Db=Symbol.for("react.memo"),Ib=Symbol.for("react.lazy"),Hle=Symbol.for("react.view_transition"),Ule=Symbol.for("react.client.reference");function qs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case CS:switch(e=e.type,e){case _b:case Ab:case Eb:case Ob:case $b:case Hle:return e;default:switch(e=e&&e.$$typeof,e){case Pb:case Mb:case Ib:case Db:return e;case Tb:return e;default:return t}}case _S:return t}}}kt.ContextConsumer=Tb;kt.ContextProvider=Pb;kt.Element=CS;kt.ForwardRef=Mb;kt.Fragment=_b;kt.Lazy=Ib;kt.Memo=Db;kt.Portal=_S;kt.Profiler=Ab;kt.StrictMode=Eb;kt.Suspense=Ob;kt.SuspenseList=$b;kt.isContextConsumer=function(e){return qs(e)===Tb};kt.isContextProvider=function(e){return qs(e)===Pb};kt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===CS};kt.isForwardRef=function(e){return qs(e)===Mb};kt.isFragment=function(e){return qs(e)===_b};kt.isLazy=function(e){return qs(e)===Ib};kt.isMemo=function(e){return qs(e)===Db};kt.isPortal=function(e){return qs(e)===_S};kt.isProfiler=function(e){return qs(e)===Ab};kt.isStrictMode=function(e){return qs(e)===Eb};kt.isSuspense=function(e){return qs(e)===Ob};kt.isSuspenseList=function(e){return qs(e)===$b};kt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===_b||e===Ab||e===Eb||e===Ob||e===$b||typeof e=="object"&&e!==null&&(e.$$typeof===Ib||e.$$typeof===Db||e.$$typeof===Pb||e.$$typeof===Tb||e.$$typeof===Mb||e.$$typeof===Ule||e.getModuleId!==void 0)};kt.typeOf=qs;KR.exports=kt;var Wle=KR.exports,O3=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",$3=null,Ev=null,YR=e=>{if(e===$3&&Array.isArray(Ev))return Ev;var t=[];return g.Children.forEach(e,r=>{Lt(r)||(Wle.isFragment(r)?t=t.concat(YR(r.props.children)):t.push(r))}),Ev=t,$3=e,t};function ES(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>O3(s)):n=[O3(t)],YR(e).forEach(s=>{var a=Fl(s,"type.displayName")||Fl(s,"type.name");n.indexOf(a)!==-1&&r.push(s)}),r}var XR=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,JR={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(JR);var Vle=JR.isPlainObject;const qle=Vn(Vle);function D3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function I3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D3(Object(r),!0).forEach(function(n){Gle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gle(e,t,r){return(t=Kle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kle(e){var t=Yle(e,"string");return typeof t=="symbol"?t:t+""}function Yle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s0(){return s0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s0.apply(null,arguments)}var L3=(e,t,r,n,s)=>{var a=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-a/2,",").concat(t+s),o+="L ".concat(e+r-a/2-n,",").concat(t+s),o+="L ".concat(e,",").concat(t," Z"),o},Xle={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Jle=e=>{var t=Jr(e,Xle),{x:r,y:n,upperWidth:s,lowerWidth:a,height:o,className:l}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:h}=t,f=g.useRef(null),[p,m]=g.useState(-1),x=g.useRef(s),b=g.useRef(a),y=g.useRef(o),v=g.useRef(r),w=g.useRef(n),j=$f(e,"trapezoid-");if(g.useEffect(()=>{if(f.current&&f.current.getTotalLength)try{var I=f.current.getTotalLength();I&&m(I)}catch{}},[]),r!==+r||n!==+n||s!==+s||a!==+a||o!==+o||s===0&&a===0||o===0)return null;var N=ct("recharts-trapezoid",l);if(!h)return g.createElement("g",null,g.createElement("path",s0({},jn(t),{className:N,d:L3(r,n,s,a,o)})));var k=x.current,S=b.current,C=y.current,P=v.current,E=w.current,O="0px ".concat(p===-1?1:p,"px"),A="".concat(p,"px 0px"),_=uL(["strokeDasharray"],d,c);return g.createElement(Of,{animationId:j,key:j,canBegin:p>0,duration:d,easing:c,isActive:h,begin:u},I=>{var D=Zt(k,s,I),$=Zt(S,a,I),L=Zt(C,o,I),M=Zt(P,r,I),T=Zt(E,n,I);f.current&&(x.current=D,b.current=$,y.current=L,v.current=M,w.current=T);var G=I>0?{transition:_,strokeDasharray:A}:{strokeDasharray:O};return g.createElement("path",s0({},jn(t),{className:N,d:L3(M,T,D,$,L),ref:f,style:I3(I3({},G),t.style)}))})},Zle=["option","shapeType","propTransformer","activeClassName","isActive"];function Qle(e,t){if(e==null)return{};var r,n,s=ece(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ece(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function R3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function a0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R3(Object(r),!0).forEach(function(n){tce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tce(e,t,r){return(t=rce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rce(e){var t=nce(e,"string");return typeof t=="symbol"?t:t+""}function nce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sce(e,t){return a0(a0({},t),e)}function ace(e,t){return e==="symbols"}function B3(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return g.createElement(mL,r);case"trapezoid":return g.createElement(Jle,r);case"sector":return g.createElement(bL,r);case"symbols":if(ace(t))return g.createElement(BN,r);break;default:return null}}function ice(e){return g.isValidElement(e)?e.props:e}function ZR(e){var{option:t,shapeType:r,propTransformer:n=sce,activeClassName:s="recharts-active-shape",isActive:a}=e,o=Qle(e,Zle),l;if(g.isValidElement(t))l=g.cloneElement(t,a0(a0({},o),ice(t)));else if(typeof t=="function")l=t(o);else if(qle(t)&&typeof t!="boolean"){var c=n(t,o);l=g.createElement(B3,{shapeType:r,elementProps:c})}else{var d=o;l=g.createElement(B3,{shapeType:r,elementProps:d})}return a?g.createElement(Yr,{className:s},l):l}var AS=(e,t)=>{var r=Rt();return(n,s)=>a=>{e==null||e(n,s,a),r(nR({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},TS=e=>{var t=Rt();return(r,n)=>s=>{e==null||e(r,n,s),t(tie())}},PS=(e,t)=>{var r=Rt();return(n,s)=>a=>{e==null||e(n,s,a),r(rie({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function MS(e){var{fn:t,args:r}=e,n=Rt(),s=An();return g.useLayoutEffect(()=>{if(!s){var a=t(r);return n(Zae(a)),()=>{n(Qae(a))}}},[t,r,n,s]),null}var QR=()=>{};function e8(e){var{legendPayload:t}=e,r=Rt(),n=An();return g.useLayoutEffect(()=>n?QR:(r(lL(t)),()=>{r(cL(t))}),[r,n,t]),null}function oce(e){var{legendPayload:t}=e,r=Rt(),n=Pe(nt);return g.useLayoutEffect(()=>n!=="centric"&&n!=="radial"?QR:(r(lL(t)),()=>{r(cL(t))}),[r,n,t]),null}var Av,lce=()=>{var[e]=g.useState(()=>Uh("uid-"));return e},cce=(Av=IM.useId)!==null&&Av!==void 0?Av:lce;function dce(e,t){var r=cce();return t||(e?"".concat(e,"-").concat(r):r)}var uce=g.createContext(void 0),OS=e=>{var{id:t,type:r,children:n}=e,s=dce("recharts-".concat(r),t);return g.createElement(uce.Provider,{value:s},n(s))},hce={cartesianItems:[],polarItems:[]},t8=fs({name:"graphicalItems",initialState:hce,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:mn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=li(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:mn()},removeCartesianGraphicalItem:{reducer(e,t){var r=li(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:mn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:mn()},removePolarGraphicalItem:{reducer(e,t){var r=li(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:mn()}}}),{addCartesianGraphicalItem:fce,replaceCartesianGraphicalItem:pce,removeCartesianGraphicalItem:mce,addPolarGraphicalItem:gce,removePolarGraphicalItem:xce}=t8.actions,bce=t8.reducer;function r8(e){var t=Rt(),r=g.useRef(null);return g.useLayoutEffect(()=>{r.current===null?t(fce(e)):r.current!==e&&t(pce({prev:r.current,next:e})),r.current=e},[t,e]),g.useLayoutEffect(()=>()=>{r.current&&(t(mce(r.current)),r.current=null)},[t]),null}function yce(e){var t=Rt();return g.useLayoutEffect(()=>(t(gce(e)),()=>{t(xce(e))}),[t,e]),null}var vce=["onMouseEnter","onClick","onMouseLeave"],wce=["id"],kce=["id"];function $S(e,t){if(e==null)return{};var r,n,s=jce(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function jce(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function z3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z3(Object(r),!0).forEach(function(n){Nce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nce(e,t,r){return(t=Sce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sce(e){var t=Cce(e,"string");return typeof t=="symbol"?t:t+""}function Cce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mo(){return Mo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mo.apply(null,arguments)}function _ce(e){var t=g.useMemo(()=>ES(e.children,Cl),[e.children]),r=Pe(n=>zle(n,e.id,t));return r==null?null:g.createElement(oce,{legendPayload:r})}function Ece(e){var{dataKey:t,nameKey:r,sectors:n,stroke:s,strokeWidth:a,fill:o,name:l,hide:c,tooltipType:d}=e;return{dataDefinedOnItem:n.map(u=>u.tooltipPayload),positions:n.map(u=>u.tooltipPosition),settings:{stroke:s,strokeWidth:a,fill:o,dataKey:t,nameKey:r,name:zd(l,t),hide:c,type:d,color:o,unit:""}}}var Ace=(e,t)=>e>t?"start":e<t?"end":"middle",Tce=(e,t,r)=>an(typeof t=="function"?t(e):t,r,r*.8),Pce=(e,t,r)=>{var{top:n,left:s,width:a,height:o}=t,l=GI(a,o),c=s+an(e.cx,a,a/2),d=n+an(e.cy,o,o/2),u=an(e.innerRadius,l,0),h=Tce(r,e.outerRadius,l),f=e.maxRadius||Math.sqrt(a*a+o*o)/2;return{cx:c,cy:d,innerRadius:u,outerRadius:h,maxRadius:f}},Mce=(e,t)=>{var r=_r(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function Oce(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var $ce=(e,t)=>{if(g.isValidElement(e))return g.cloneElement(e,t);if(typeof e=="function")return e(t);var r=ct("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return g.createElement(h2,Mo({},t,{type:"linear",className:r}))},Dce=(e,t,r)=>{if(g.isValidElement(e))return g.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),g.isValidElement(n)))return n;var s=ct("recharts-pie-label-text",Oce(e));return g.createElement(Nb,Mo({},t,{alignmentBaseline:"middle",className:s}),n)};function Ice(e){var{sectors:t,props:r,showLabels:n}=e,{label:s,labelLine:a,dataKey:o}=r;if(!n||!s||!t)return null;var l=cs(r),c=zl(s),d=zl(a),u=typeof s=="object"&&"offsetRadius"in s&&typeof s.offsetRadius=="number"&&s.offsetRadius||20,h=t.map((f,p)=>{var m=(f.startAngle+f.endAngle)/2,x=cr(f.cx,f.cy,f.outerRadius+u,m),b=Ot(Ot(Ot(Ot({},l),f),{},{stroke:"none"},c),{},{index:p,textAnchor:Ace(x.x,f.cx)},x),y=Ot(Ot(Ot(Ot({},l),f),{},{fill:"none",stroke:f.fill},d),{},{index:p,points:[cr(f.cx,f.cy,f.outerRadius,m),x],key:"line"});return g.createElement(Yr,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(p)},a&&$ce(a,y),Dce(s,b,Ct(f,o)))});return g.createElement(Yr,{className:"recharts-pie-labels"},h)}function Lce(e){var{sectors:t,props:r,showLabels:n}=e,{label:s}=r;return typeof s=="object"&&s!=null&&"position"in s?g.createElement(jS,{label:s}):g.createElement(Ice,{sectors:t,props:r,showLabels:n})}function Rce(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:s}=e,a=Pe(Po),{onMouseEnter:o,onClick:l,onMouseLeave:c}=s,d=$S(s,vce),u=AS(o,s.dataKey),h=TS(c),f=PS(l,s.dataKey);return t==null||t.length===0?null:g.createElement(g.Fragment,null,t.map((p,m)=>{if((p==null?void 0:p.startAngle)===0&&(p==null?void 0:p.endAngle)===0&&t.length!==1)return null;var x=r&&String(m)===a,b=a?n:null,y=x?r:b,v=Ot(Ot({},p),{},{stroke:p.stroke,tabIndex:-1,[ZI]:m,[QI]:s.dataKey});return g.createElement(Yr,Mo({key:"sector-".concat(p==null?void 0:p.startAngle,"-").concat(p==null?void 0:p.endAngle,"-").concat(p.midAngle,"-").concat(m),tabIndex:-1,className:"recharts-pie-sector"},Af(d,p,m),{onMouseEnter:u(p,m),onMouseLeave:h(p,m),onClick:f(p,m)}),g.createElement(ZR,Mo({option:y,isActive:x,shapeType:"sector"},v)))}))}function Bce(e){var t,{pieSettings:r,displayedData:n,cells:s,offset:a}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:d,nameKey:u,tooltipType:h}=r,f=Math.abs(r.minAngle),p=Mce(l,c),m=Math.abs(p),x=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=n.filter(k=>Ct(k,d,0)!==0).length,y=(m>=360?b:b-1)*x,v=m-b*f-y,w=n.reduce((k,S)=>{var C=Ct(S,d,0);return k+(Oe(C)?C:0)},0),j;if(w>0){var N;j=n.map((k,S)=>{var C=Ct(k,d,0),P=Ct(k,u,S),E=Pce(r,a,k),O=(Oe(C)?C:0)/w,A,_=Ot(Ot({},k),s&&s[S]&&s[S].props);S?A=N.endAngle+_r(p)*x*(C!==0?1:0):A=l;var I=A+_r(p)*((C!==0?f:0)+O*v),D=(A+I)/2,$=(E.innerRadius+E.outerRadius)/2,L=[{name:P,value:C,payload:_,dataKey:d,type:h}],M=cr(E.cx,E.cy,$,D);return N=Ot(Ot(Ot(Ot({},r.presentationProps),{},{percent:O,cornerRadius:o,name:P,tooltipPayload:L,midAngle:D,middleRadius:$,tooltipPosition:M},_),E),{},{value:C,startAngle:A,endAngle:I,payload:_,paddingAngle:_r(p)*x}),N})}return j}function zce(e){var{showLabels:t,sectors:r,children:n}=e,s=g.useMemo(()=>!t||!r?[]:r.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[r,t]);return g.createElement(Nle,{value:t?s:void 0},n)}function Fce(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:s,animationBegin:a,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:d,onAnimationStart:u,onAnimationEnd:h}=t,f=$f(t,"recharts-pie-"),p=r.current,[m,x]=g.useState(!1),b=g.useCallback(()=>{typeof h=="function"&&h(),x(!1)},[h]),y=g.useCallback(()=>{typeof u=="function"&&u(),x(!0)},[u]);return g.createElement(zce,{showLabels:!m,sectors:n},g.createElement(Of,{animationId:f,begin:a,duration:o,isActive:s,easing:l,onAnimationStart:y,onAnimationEnd:b,key:f},v=>{var w=[],j=n&&n[0],N=j==null?void 0:j.startAngle;return n==null||n.forEach((k,S)=>{var C=p&&p[S],P=S>0?Fl(k,"paddingAngle",0):0;if(C){var E=Zt(C.endAngle-C.startAngle,k.endAngle-k.startAngle,v),O=Ot(Ot({},k),{},{startAngle:N+P,endAngle:N+E+P});w.push(O),N=O.endAngle}else{var{endAngle:A,startAngle:_}=k,I=Zt(0,A-_,v),D=Ot(Ot({},k),{},{startAngle:N+P,endAngle:N+I+P});w.push(D),N=D.endAngle}}),r.current=w,g.createElement(Yr,null,g.createElement(Rce,{sectors:w,activeShape:c,inactiveShape:d,allOtherPieProps:t}))}),g.createElement(Lce,{showLabels:!m,sectors:n,props:t}),t.children)}var Hce={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Uo.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Uce(e){var{id:t}=e,r=$S(e,wce),{hide:n,className:s,rootTabIndex:a}=e,o=g.useMemo(()=>ES(e.children,Cl),[e.children]),l=Pe(u=>Fle(u,t,o)),c=g.useRef(null),d=ct("recharts-pie",s);return n||l==null?(c.current=null,g.createElement(Yr,{tabIndex:a,className:d})):g.createElement(g.Fragment,null,g.createElement(MS,{fn:Ece,args:Ot(Ot({},e),{},{sectors:l})}),g.createElement(Yr,{tabIndex:a,className:d},g.createElement(Fce,{props:Ot(Ot({},r),{},{sectors:l}),previousSectorsRef:c})))}function kk(e){var t=Jr(e,Hce),{id:r}=t,n=$S(t,kce),s=cs(n);return g.createElement(OS,{id:r,type:"pie"},a=>g.createElement(g.Fragment,null,g.createElement(yce,{type:"pie",id:a,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:s,maxRadius:t.maxRadius}),g.createElement(_ce,Mo({},n,{id:a})),g.createElement(Uce,Mo({},n,{id:a}))))}kk.displayName="Pie";function F3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function H3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F3(Object(r),!0).forEach(function(n){Wce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wce(e,t,r){return(t=Vce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vce(e){var t=qce(e,"string");return typeof t=="symbol"?t:t+""}function qce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gce={xAxis:{},yAxis:{},zAxis:{}},n8=fs({name:"cartesianAxis",initialState:Gce,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:mn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:mn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:mn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:mn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:mn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:mn()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var a=s.widthHistory||[];if(a.length===3&&a[0]===a[2]&&n===a[1]&&n!==s.width&&Math.abs(n-a[0])<=1)return;var o=[...a,n].slice(-3);e.yAxis[r]=H3(H3({},e.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:Kce,removeXAxis:Yce,addYAxis:Xce,removeYAxis:Jce,addZAxis:WSe,removeZAxis:VSe,updateYAxisWidth:Zce}=n8.actions,Qce=n8.reducer,ede=Q([br],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),tde=Q([ede,Si,Ci],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),DS=()=>Pe(tde),rde=()=>Pe(Hie);function U3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function W3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U3(Object(r),!0).forEach(function(n){nde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nde(e,t,r){return(t=sde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sde(e){var t=ade(e,"string");return typeof t=="symbol"?t:t+""}function ade(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ide=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:a}=e;if(s===!1||t.x==null||t.y==null)return null;var o=W3(W3({index:r,dataKey:a,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},zl(s)),zN(s)),l;return g.isValidElement(s)?l=g.cloneElement(s,o):typeof s=="function"?l=s(o):l=g.createElement(UR,o),g.createElement(Yr,{className:"recharts-active-dot"},l)};function ode(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,a=Pe(Po),o=rde();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return Lt(l)?null:ide({point:l,childIndex:Number(a),mainColor:r,dataKey:s,activeDot:n})}var lde="Invariant failed";function s8(e,t){throw new Error(lde)}var cde=["x","y"];function jk(){return jk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jk.apply(null,arguments)}function V3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Au(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V3(Object(r),!0).forEach(function(n){dde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dde(e,t,r){return(t=ude(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ude(e){var t=hde(e,"string");return typeof t=="symbol"?t:t+""}function hde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fde(e,t){if(e==null)return{};var r,n,s=pde(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function pde(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mde(e,t){var{x:r,y:n}=e,s=fde(e,cde),a="".concat(r),o=parseInt(a,10),l="".concat(n),c=parseInt(l,10),d="".concat(t.height||s.height),u=parseInt(d,10),h="".concat(t.width||s.width),f=parseInt(h,10);return Au(Au(Au(Au(Au({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function IS(e){return g.createElement(ZR,jk({shapeType:"rectangle",propTransformer:mde,activeClassName:"recharts-active-bar"},e))}var gde=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(Oe(t))return t;var a=Oe(n)||Lt(n);return a?t(n,s):(a||s8(),r)}},xde={},a8=fs({name:"errorBars",initialState:xde,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?s:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:qSe,replaceErrorBar:GSe,removeErrorBar:KSe}=a8.actions,bde=a8.reducer,yde=["children"];function vde(e,t){if(e==null)return{};var r,n,s=wde(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function wde(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kde={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},jde=g.createContext(kde);function i8(e){var{children:t}=e,r=vde(e,yde);return g.createElement(jde.Provider,{value:r},t)}function LS(e,t){var r,n,s=Pe(d=>Ei(d,e)),a=Pe(d=>Ai(d,t)),o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Gn.allowDataOverflow,l=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:Kn.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function o8(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=DS(),{needClipX:a,needClipY:o,needClip:l}=LS(t,r);if(!l)return null;var{x:c,y:d,width:u,height:h}=s;return g.createElement("clipPath",{id:"clipPath-".concat(n)},g.createElement("rect",{x:a?c:c-u/2,y:o?d:d-h/2,width:a?u:u*2,height:o?h:h*2}))}var Nde=["onMouseEnter","onMouseLeave","onClick"],Sde=["value","background","tooltipPosition"],Cde=["id"],_de=["onMouseEnter","onClick","onMouseLeave"];function Oo(){return Oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oo.apply(null,arguments)}function q3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q3(Object(r),!0).forEach(function(n){Ede(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ede(e,t,r){return(t=Ade(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ade(e){var t=Tde(e,"string");return typeof t=="symbol"?t:t+""}function Tde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i0(e,t){if(e==null)return{};var r,n,s=Pde(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Pde(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Mde=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:n,value:zd(r,t),payload:e}]};function Ode(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:a,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:zd(a,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function $de(e){var t=Pe(Po),{data:r,dataKey:n,background:s,allOtherBarProps:a}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=a,d=i0(a,Nde),u=AS(o,n),h=TS(l),f=PS(c,n);if(!s||r==null)return null;var p=zl(s);return g.createElement(g.Fragment,null,r.map((m,x)=>{var{value:b,background:y,tooltipPosition:v}=m,w=i0(m,Sde);if(!y)return null;var j=u(m,x),N=h(m,x),k=f(m,x),S=gn(gn(gn(gn(gn({option:s,isActive:String(x)===t},w),{},{fill:"#eee"},y),p),Af(d,m,x)),{},{onMouseEnter:j,onMouseLeave:N,onClick:k,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return g.createElement(IS,Oo({key:"background-bar-".concat(x)},S))}))}function Dde(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(a=>{var o={x:a.x,y:a.y,width:a.width,height:a.height};return gn(gn({},o),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:o,fill:a.fill})});return g.createElement(FR,{value:t?s:void 0},r)}function Ide(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:a,dataKey:o}=e,l=Pe(Po),c=Pe(bR),d=r&&String(a)===l&&(c==null||o===c),u=d?r:t;return g.createElement(IS,Oo({},n,{name:String(n.name)},s,{isActive:d,option:u,index:a,dataKey:o}))}function Lde(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:a}=e;return g.createElement(IS,Oo({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:a}))}function Rde(e){var{data:t,props:r}=e,n=cs(r),{id:s}=n,a=i0(n,Cde),{shape:o,dataKey:l,activeBar:c}=r,{onMouseEnter:d,onClick:u,onMouseLeave:h}=r,f=i0(r,_de),p=AS(d,l),m=TS(h),x=PS(u,l);return t?g.createElement(g.Fragment,null,t.map((b,y)=>g.createElement(Yr,Oo({key:"rectangle-".concat(b==null?void 0:b.x,"-").concat(b==null?void 0:b.y,"-").concat(b==null?void 0:b.value,"-").concat(y),className:"recharts-bar-rectangle"},Af(f,b,y),{onMouseEnter:p(b,y),onMouseLeave:m(b,y),onClick:x(b,y)}),c?g.createElement(Ide,{shape:o,activeBar:c,baseProps:a,entry:b,index:y,dataKey:l}):g.createElement(Lde,{shape:o,baseProps:a,entry:b,index:y,dataKey:l})))):null}function Bde(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:a,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,h=r.current,f=$f(t,"recharts-bar-"),[p,m]=g.useState(!1),x=!p,b=g.useCallback(()=>{typeof d=="function"&&d(),m(!1)},[d]),y=g.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return g.createElement(Dde,{showLabels:x,rects:n},g.createElement(Of,{animationId:f,begin:o,duration:l,isActive:a,easing:c,onAnimationEnd:b,onAnimationStart:y,key:f},v=>{var w=v===1?n:n==null?void 0:n.map((j,N)=>{var k=h&&h[N];if(k)return gn(gn({},j),{},{x:Zt(k.x,j.x,v),y:Zt(k.y,j.y,v),width:Zt(k.width,j.width,v),height:Zt(k.height,j.height,v)});if(s==="horizontal"){var S=Zt(0,j.height,v);return gn(gn({},j),{},{y:j.y+j.height-S,height:S})}var C=Zt(0,j.width,v);return gn(gn({},j),{},{width:C})});return v>0&&(r.current=w??null),w==null?null:g.createElement(Yr,null,g.createElement(Rde,{props:t,data:w}))}),g.createElement(jS,{label:t.label}),t.children)}function zde(e){var t=g.useRef(null);return g.createElement(Bde,{previousRectanglesRef:t,props:e})}var l8=0,Fde=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ct(e,t)}};class Hde extends g.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:a,yAxisId:o,needClip:l,background:c,id:d}=this.props;if(t||r==null)return null;var u=ct("recharts-bar",s),h=d;return g.createElement(Yr,{className:u,id:d},l&&g.createElement("defs",null,g.createElement(o8,{clipPathId:h,xAxisId:a,yAxisId:o})),g.createElement(Yr,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(h,")"):void 0},g.createElement($de,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),g.createElement(zde,this.props)))}}var Ude={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Uo.isSsr,legendType:"rect",minPointSize:l8,xAxisId:0,yAxisId:0};function Wde(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:a,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u}=e,{needClip:h}=LS(t,r),f=nb(),p=An(),m=ES(e.children,Cl),x=Pe(v=>bue(v,t,r,p,e.id,m));if(f!=="vertical"&&f!=="horizontal")return null;var b,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?b=0:b=f==="vertical"?y.height/2:y.width/2,g.createElement(i8,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:Fde,errorBarOffset:b},g.createElement(Hde,Oo({},e,{layout:f,needClip:h,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:a,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u})))}function Vde(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:a,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:d,stackedData:u,displayedData:h,offset:f,cells:p,parentViewBox:m}=e,x=t==="horizontal"?l:o,b=u?x.scale.domain():null,y=nee({numericAxis:x});return h.map((v,w)=>{var j,N,k,S,C,P;u?j=JQ(u[w],b):(j=Ct(v,r),Array.isArray(j)||(j=[y,j]));var E=gde(n,l8)(j[1],w);if(t==="horizontal"){var O,[A,_]=[l.scale(j[0]),l.scale(j[1])];N=HA({axis:o,ticks:c,bandSize:a,offset:s.offset,entry:v,index:w}),k=(O=_??A)!==null&&O!==void 0?O:void 0,S=s.size;var I=A-_;if(C=zs(I)?0:I,P={x:N,y:f.top,width:S,height:f.height},Math.abs(E)>0&&Math.abs(C)<Math.abs(E)){var D=_r(C||E)*(Math.abs(E)-Math.abs(C));k-=D,C+=D}}else{var[$,L]=[o.scale(j[0]),o.scale(j[1])];if(N=$,k=HA({axis:l,ticks:d,bandSize:a,offset:s.offset,entry:v,index:w}),S=L-$,C=s.size,P={x:f.left,y:k,width:f.width,height:C},Math.abs(E)>0&&Math.abs(S)<Math.abs(E)){var M=_r(S||E)*(Math.abs(E)-Math.abs(S));S+=M}}if(N==null||k==null||S==null||C==null)return null;var T=gn(gn({},v),{},{x:N,y:k,width:S,height:C,value:u?j:j[1],payload:v,background:P,tooltipPosition:{x:N+S/2,y:k+C/2},parentViewBox:m},p&&p[w]&&p[w].props);return T}).filter(Boolean)}function qde(e){var t=Jr(e,Ude),r=An();return g.createElement(OS,{id:t.id,type:"bar"},n=>g.createElement(g.Fragment,null,g.createElement(e8,{legendPayload:Mde(t)}),g.createElement(MS,{fn:Ode,args:t}),g.createElement(r8,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:ree(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),g.createElement(Wde,Oo({},t,{id:n}))))}var qa=g.memo(qde);qa.displayName="Bar";function G3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G3(Object(r),!0).forEach(function(n){Gde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gde(e,t,r){return(t=Kde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kde(e){var t=Yde(e,"string");return typeof t=="symbol"?t:t+""}function Yde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xde=(e,t)=>t,Jde=(e,t,r)=>r,Zde=(e,t,r,n)=>n,Qde=(e,t,r,n,s)=>s,qf=Q([bb,Qde],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),eue=Q([qf],e=>e==null?void 0:e.maxBarSize),tue=(e,t,r,n,s,a)=>a,K3=(e,t,r)=>{var n=r??e;if(!Lt(n))return an(n,t,0)},rue=Q([nt,bb,Xde,Jde,Zde],(e,t,r,n,s)=>t.filter(a=>e==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===s).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),nue=(e,t,r,n)=>{var s=nt(e);return s==="horizontal"?mk(e,"yAxis",r,n):mk(e,"xAxis",t,n)},sue=(e,t,r)=>{var n=nt(e);return n==="horizontal"?s3(e,"xAxis",t):s3(e,"yAxis",r)},aue=(e,t,r)=>{var n={},s=e.filter(mb),a=e.filter(d=>d.stackId==null),o=s.reduce((d,u)=>(d[u.stackId]||(d[u.stackId]=[]),d[u.stackId].push(u),d),n),l=Object.entries(o).map(d=>{var[u,h]=d,f=h.map(m=>m.dataKey),p=K3(t,r,h[0].barSize);return{stackId:u,dataKeys:f,barSize:p}}),c=a.map(d=>{var u=[d.dataKey].filter(f=>f!=null),h=K3(t,r,d.barSize);return{stackId:void 0,dataKeys:u,barSize:h}});return[...l,...c]},iue=Q([rue,Kse,sue],aue),oue=(e,t,r,n,s)=>{var a,o,l=qf(e,t,r,n,s);if(l!=null){var c=nt(e),d=b6(e),{maxBarSize:u}=l,h=Lt(u)?d:u,f,p;return c==="horizontal"?(f=To(e,"xAxis",t,n),p=Ao(e,"xAxis",t,n)):(f=To(e,"yAxis",r,n),p=Ao(e,"yAxis",r,n)),(a=(o=qh(f,p,!0))!==null&&o!==void 0?o:h)!==null&&a!==void 0?a:0}},c8=(e,t,r,n)=>{var s=nt(e),a,o;return s==="horizontal"?(a=To(e,"xAxis",t,n),o=Ao(e,"xAxis",t,n)):(a=To(e,"yAxis",r,n),o=Ao(e,"yAxis",r,n)),qh(a,o)};function lue(e,t,r,n,s){var a=n.length;if(!(a<1)){var o=an(e,r,0,!0),l,c=[];if(cn(n[0].barSize)){var d=!1,u=r/a,h=n.reduce((y,v)=>y+(v.barSize||0),0);h+=(a-1)*o,h>=r&&(h-=(a-1)*o,o=0),h>=r&&u>0&&(d=!0,u*=.9,h=a*u);var f=(r-h)/2>>0,p={offset:f-o,size:0};l=n.reduce((y,v)=>{var w,j={stackId:v.stackId,dataKeys:v.dataKeys,position:{offset:p.offset+p.size+o,size:d?u:(w=v.barSize)!==null&&w!==void 0?w:0}},N=[...y,j];return p=N[N.length-1].position,N},c)}else{var m=an(t,r,0,!0);r-2*m-(a-1)*o<=0&&(o=0);var x=(r-2*m-(a-1)*o)/a;x>1&&(x>>=0);var b=cn(s)?Math.min(x,s):x;l=n.reduce((y,v,w)=>[...y,{stackId:v.stackId,dataKeys:v.dataKeys,position:{offset:m+(x+o)*w+(x-b)/2,size:b}}],c)}return l}}var cue=(e,t,r,n,s,a,o)=>{var l=Lt(o)?t:o,c=lue(r,n,s!==a?s:a,e,l);return s!==a&&c!=null&&(c=c.map(d=>Qp(Qp({},d),{},{position:Qp(Qp({},d.position),{},{offset:d.position.offset-s/2})}))),c},due=Q([iue,b6,Gse,y6,oue,c8,eue],cue),uue=(e,t,r,n)=>To(e,"xAxis",t,n),hue=(e,t,r,n)=>To(e,"yAxis",r,n),fue=(e,t,r,n)=>Ao(e,"xAxis",t,n),pue=(e,t,r,n)=>Ao(e,"yAxis",r,n),mue=Q([due,qf],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),gue=(e,t)=>{var r=V2(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:a}=s;if(a)return a.find(o=>o.key===r)}}}},xue=Q([nue,qf],gue),bue=Q([br,o2,uue,hue,fue,pue,mue,nt,ub,c8,xue,qf,tue],(e,t,r,n,s,a,o,l,c,d,u,h,f)=>{var{chartData:p,dataStartIndex:m,dataEndIndex:x}=c;if(!(h==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||s==null||a==null||d==null)){var{data:b}=h,y;if(b!=null&&b.length>0?y=b:y=p==null?void 0:p.slice(m,x+1),y!=null)return Vde({layout:l,barSettings:h,pos:o,parentViewBox:t,bandSize:d,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,stackedData:u,displayedData:y,offset:e,cells:f})}}),d8=e=>{var{chartData:t}=e,r=Rt(),n=An();return g.useEffect(()=>n?()=>{}:(r(f3(t)),()=>{r(f3(void 0))}),[t,r,n]),null},Y3={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},u8=fs({name:"brush",initialState:Y3,reducers:{setBrushSettings(e,t){return t.payload==null?Y3:t.payload}}}),{setBrushSettings:YSe}=u8.actions,yue=u8.reducer;function vue(e,t,r){return(t=wue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wue(e){var t=kue(e,"string");return typeof t=="symbol"?t:t+""}function kue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class RS{static create(t){return new RS(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}vue(RS,"EPS",1e-4);function jue(e){return(e%180+180)%180}var Nue=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=jue(s),o=a*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Sue={dots:[],areas:[],lines:[]},h8=fs({name:"referenceElements",initialState:Sue,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=li(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=li(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=li(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:XSe,removeDot:JSe,addArea:ZSe,removeArea:QSe,addLine:eCe,removeLine:tCe}=h8.actions,Cue=h8.reducer,_ue=g.createContext(void 0),Eue=e=>{var{children:t}=e,[r]=g.useState("".concat(Uh("recharts"),"-clip")),n=DS();if(n==null)return null;var{x:s,y:a,width:o,height:l}=n;return g.createElement(_ue.Provider,{value:r},g.createElement("defs",null,g.createElement("clipPath",{id:r},g.createElement("rect",{x:s,y:a,height:l,width:o}))),t)};function vd(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function f8(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function Aue(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Nue(n,r)}function Tue(e,t,r){var n=r==="width",{x:s,y:a,width:o,height:l}=e;return t===1?{start:n?s:a,end:n?s+o:a+l}:{start:n?s+o:a+l,end:n?s:a}}function o0(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function Pue(e,t){return f8(e,t+1)}function Mue(e,t,r,n,s){for(var a=(n||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,h=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:f8(n,d)};var x=c,b,y=()=>(b===void 0&&(b=r(m,x)),b),v=m.coordinate,w=c===0||o0(e,v,y,u,l);w||(c=0,u=o,d+=1),w&&(u=v+e*(y()/2+s),c+=d)},f;d<=a.length;)if(f=h(),f)return f.v;return[]}function X3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X3(Object(r),!0).forEach(function(n){Oue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oue(e,t,r){return(t=$ue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ue(e){var t=Due(e,"string");return typeof t=="symbol"?t:t+""}function Due(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Iue(e,t,r,n,s){for(var a=(n||[]).slice(),o=a.length,{start:l}=t,{end:c}=t,d=function(f){var p=a[f],m,x=()=>(m===void 0&&(m=r(p,f)),m);if(f===o-1){var b=e*(p.coordinate+e*x()/2-c);a[f]=p=tn(tn({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else a[f]=p=tn(tn({},p),{},{tickCoord:p.coordinate});var y=o0(e,p.tickCoord,x,l,c);y&&(c=p.tickCoord-e*(x()/2+s),a[f]=tn(tn({},p),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return a}function Lue(e,t,r,n,s,a){var o=(n||[]).slice(),l=o.length,{start:c,end:d}=t;if(a){var u=n[l-1],h=r(u,l-1),f=e*(u.coordinate+e*h/2-d);o[l-1]=u=tn(tn({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var p=o0(e,u.tickCoord,()=>h,c,d);p&&(d=u.tickCoord-e*(h/2+s),o[l-1]=tn(tn({},u),{},{isShow:!0}))}for(var m=a?l-1:l,x=function(v){var w=o[v],j,N=()=>(j===void 0&&(j=r(w,v)),j);if(v===0){var k=e*(w.coordinate-e*N()/2-c);o[v]=w=tn(tn({},w),{},{tickCoord:k<0?w.coordinate-k*e:w.coordinate})}else o[v]=w=tn(tn({},w),{},{tickCoord:w.coordinate});var S=o0(e,w.tickCoord,N,c,d);S&&(c=w.tickCoord+e*(N()/2+s),o[v]=tn(tn({},w),{},{isShow:!0}))},b=0;b<m;b++)x(b);return o}function BS(e,t,r){var{tick:n,ticks:s,viewBox:a,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:h}=e;if(!s||!s.length||!n)return[];if(Oe(c)||Uo.isSsr){var f;return(f=Pue(s,Oe(c)?c:0))!==null&&f!==void 0?f:[]}var p=[],m=l==="top"||l==="bottom"?"width":"height",x=u&&m==="width"?ih(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(w,j)=>{var N=typeof d=="function"?d(w.value,j):w.value;return m==="width"?Aue(ih(N,{fontSize:t,letterSpacing:r}),x,h):ih(N,{fontSize:t,letterSpacing:r})[m]},y=s.length>=2?_r(s[1].coordinate-s[0].coordinate):1,v=Tue(a,y,m);return c==="equidistantPreserveStart"?Mue(y,v,b,s,o):(c==="preserveStart"||c==="preserveStartEnd"?p=Lue(y,v,b,s,o,c==="preserveStartEnd"):p=Iue(y,v,b,s,o),p.filter(w=>w.isShow))}var Rue=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:a=0}=e,o=0;if(t){Array.from(t).forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=r?r.getBoundingClientRect().width:0,c=s+a,d=o+c+l+(r?n:0);return Math.round(d)}return 0},Bue=["axisLine","width","height","className","hide","ticks"],zue=["viewBox"],Fue=["viewBox"];function Nk(e,t){if(e==null)return{};var r,n,s=Hue(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Hue(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ql(){return ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ql.apply(null,arguments)}function J3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J3(Object(r),!0).forEach(function(n){Uue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uue(e,t,r){return(t=Wue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wue(e){var t=Vue(e,"string");return typeof t=="symbol"?t:t+""}function Vue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zS={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function que(e){var{x:t,y:r,width:n,height:s,orientation:a,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var d=gr(gr(gr({},c),cs(l)),{},{fill:"none"});if(a==="top"||a==="bottom"){var u=+(a==="top"&&!o||a==="bottom"&&o);d=gr(gr({},d),{},{x1:t,y1:r+u*s,x2:t+n,y2:r+u*s})}else{var h=+(a==="left"&&!o||a==="right"&&o);d=gr(gr({},d),{},{x1:t+h*n,y1:r,x2:t+h*n,y2:r+s})}return g.createElement("line",ql({},d,{className:ct("recharts-cartesian-axis-line",Fl(l,"className"))}))}function Gue(e,t,r,n,s,a,o,l,c){var d,u,h,f,p,m,x=l?-1:1,b=e.tickSize||o,y=Oe(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":d=u=e.coordinate,f=r+ +!l*s,h=f-x*b,m=h-x*c,p=y;break;case"left":h=f=e.coordinate,u=t+ +!l*n,d=u-x*b,p=d-x*c,m=y;break;case"right":h=f=e.coordinate,u=t+ +l*n,d=u+x*b,p=d+x*c,m=y;break;default:d=u=e.coordinate,f=r+ +l*s,h=f+x*b,m=h+x*c,p=y;break}return{line:{x1:d,y1:h,x2:u,y2:f},tick:{x:p,y:m}}}function Kue(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Yue(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Xue(e){var{option:t,tickProps:r,value:n}=e,s,a=ct(r.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(t))s=g.cloneElement(t,gr(gr({},r),{},{className:a}));else if(typeof t=="function")s=t(gr(gr({},r),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=ct(o,t==null?void 0:t.className)),s=g.createElement(Nb,ql({},r,{className:o}),n)}return s}function Jue(e){var{ticks:t=[],tick:r,tickLine:n,stroke:s,tickFormatter:a,unit:o,padding:l,tickTextProps:c,orientation:d,mirror:u,x:h,y:f,width:p,height:m,tickSize:x,tickMargin:b,fontSize:y,letterSpacing:v,getTicksConfig:w,events:j}=e,N=BS(gr(gr({},w),{},{ticks:t}),y,v),k=Kue(d,u),S=Yue(d,u),C=cs(w),P=zl(r),E={};typeof n=="object"&&(E=n);var O=gr(gr({},C),{},{fill:"none"},E),A=N.map((_,I)=>{var{line:D,tick:$}=Gue(_,h,f,p,m,d,x,u,b),L=gr(gr(gr(gr({textAnchor:k,verticalAnchor:S},C),{},{stroke:"none",fill:s},P),$),{},{index:I,payload:_,visibleTicksCount:N.length,tickFormatter:a,padding:l},c);return g.createElement(Yr,ql({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Af(j,_,I)),n&&g.createElement("line",ql({},O,D,{className:ct("recharts-cartesian-axis-tick-line",Fl(n,"className"))})),r&&g.createElement(Xue,{option:r,tickProps:L,value:"".concat(typeof a=="function"?a(_.value,I):_.value).concat(o||"")}))});return A.length>0?g.createElement("g",{className:"recharts-cartesian-axis-ticks"},A):null}var Zue=g.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:a,hide:o,ticks:l}=e,c=Nk(e,Bue),[d,u]=g.useState(""),[h,f]=g.useState(""),p=g.useRef(null);g.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var x;return Rue({ticks:p.current,label:(x=e.labelRef)===null||x===void 0?void 0:x.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var m=g.useCallback(x=>{if(x){var b=x.getElementsByClassName("recharts-cartesian-axis-tick-value");p.current=b;var y=b[0];if(y){var v=window.getComputedStyle(y),w=v.fontSize,j=v.letterSpacing;(w!==d||j!==h)&&(u(w),f(j))}}},[d,h]);return o||n!=null&&n<=0||s!=null&&s<=0?null:g.createElement(Yr,{className:ct("recharts-cartesian-axis",a),ref:m},g.createElement(que,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:cs(e)}),g.createElement(Jue,{ticks:l,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:d,letterSpacing:h,getTicksConfig:e,events:c}),g.createElement(ole,{x:e.x,y:e.y,width:e.width,height:e.height},g.createElement(xle,{label:e.label,labelRef:e.labelRef}),e.children))}),Que=g.memo(Zue,(e,t)=>{var{viewBox:r}=e,n=Nk(e,zue),{viewBox:s}=t,a=Nk(t,Fue);return vd(r,s)&&vd(n,a)}),FS=g.forwardRef((e,t)=>{var r=Jr(e,zS);return g.createElement(Que,ql({},r,{ref:t}))});FS.displayName="CartesianAxis";var ehe=["x1","y1","x2","y2","key"],the=["offset"],rhe=["xAxisId","yAxisId"],nhe=["xAxisId","yAxisId"];function Z3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z3(Object(r),!0).forEach(function(n){she(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function she(e,t,r){return(t=ahe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ahe(e){var t=ihe(e,"string");return typeof t=="symbol"?t:t+""}function ihe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fl(){return fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fl.apply(null,arguments)}function l0(e,t){if(e==null)return{};var r,n,s=ohe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ohe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var lhe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:a,height:o,ry:l}=e;return g.createElement("rect",{x:n,y:s,ry:l,width:a,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function p8(e,t){var r;if(g.isValidElement(e))r=g.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:a,y2:o,key:l}=t,c=l0(t,ehe),d=cs(c),{offset:u}=d,h=l0(d,the);r=g.createElement("line",fl({},h,{x1:n,y1:s,x2:a,y2:o,fill:"none",key:l}))}return r}function che(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:o}=e,l=l0(e,rhe),c=s.map((d,u)=>{var h=sn(sn({},l),{},{x1:t,y1:d,x2:t+r,y2:d,key:"line-".concat(u),index:u});return p8(n,h)});return g.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function dhe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:o}=e,l=l0(e,nhe),c=s.map((d,u)=>{var h=sn(sn({},l),{},{x1:d,y1:t,x2:d,y2:t+r,key:"line-".concat(u),index:u});return p8(n,h)});return g.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function uhe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:a,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var d=l.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==d[0]&&d.unshift(0);var u=d.map((h,f)=>{var p=!d[f+1],m=p?s+o-h:d[f+1]-h;if(m<=0)return null;var x=f%t.length;return g.createElement("rect",{key:"react-".concat(f),y:h,x:n,height:m,width:a,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function hhe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:a,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var d=c.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==d[0]&&d.unshift(0);var u=d.map((h,f)=>{var p=!d[f+1],m=p?s+o-h:d[f+1]-h;if(m<=0)return null;var x=f%r.length;return g.createElement("rect",{key:"react-".concat(f),x:h,y:a,width:m,height:l,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var fhe=(e,t)=>{var{xAxis:r,width:n,height:s,offset:a}=e;return YI(BS(sn(sn(sn({},zS),r),{},{ticks:XI(r),viewBox:{x:0,y:0,width:n,height:s}})),a.left,a.left+a.width,t)},phe=(e,t)=>{var{yAxis:r,width:n,height:s,offset:a}=e;return YI(BS(sn(sn(sn({},zS),r),{},{ticks:XI(r),viewBox:{x:0,y:0,width:n,height:s}})),a.top,a.top+a.height,t)},mhe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function wa(e){var t=c2(),r=d2(),n=iL(),s=sn(sn({},Jr(e,mhe)),{},{x:Oe(e.x)?e.x:n.left,y:Oe(e.y)?e.y:n.top,width:Oe(e.width)?e.width:n.width,height:Oe(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:h,horizontalValues:f,verticalValues:p}=s,m=An(),x=Pe(P=>a3(P,"xAxis",a,m)),b=Pe(P=>a3(P,"yAxis",o,m));if(!Oe(d)||d<=0||!Oe(u)||u<=0||!Oe(l)||l!==+l||!Oe(c)||c!==+c)return null;var y=s.verticalCoordinatesGenerator||fhe,v=s.horizontalCoordinatesGenerator||phe,{horizontalPoints:w,verticalPoints:j}=s;if((!w||!w.length)&&typeof v=="function"){var N=f&&f.length,k=v({yAxis:b?sn(sn({},b),{},{ticks:N?f:b.ticks}):void 0,width:t,height:r,offset:n},N?!0:h);zg(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(w=k)}if((!j||!j.length)&&typeof y=="function"){var S=p&&p.length,C=y({xAxis:x?sn(sn({},x),{},{ticks:S?p:x.ticks}):void 0,width:t,height:r,offset:n},S?!0:h);zg(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(j=C)}return g.createElement("g",{className:"recharts-cartesian-grid"},g.createElement(lhe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),g.createElement(uhe,fl({},s,{horizontalPoints:w})),g.createElement(hhe,fl({},s,{verticalPoints:j})),g.createElement(che,fl({},s,{offset:n,horizontalPoints:w,xAxis:x,yAxis:b})),g.createElement(dhe,fl({},s,{offset:n,verticalPoints:j,xAxis:x,yAxis:b})))}wa.displayName="CartesianGrid";var m8=(e,t,r,n)=>To(e,"xAxis",t,n),g8=(e,t,r,n)=>Ao(e,"xAxis",t,n),x8=(e,t,r,n)=>To(e,"yAxis",r,n),b8=(e,t,r,n)=>Ao(e,"yAxis",r,n),ghe=Q([nt,m8,x8,g8,b8],(e,t,r,n,s)=>Ho(e,"xAxis")?qh(t,n,!1):qh(r,s,!1)),xhe=(e,t,r,n,s)=>s;function bhe(e){return e.type==="line"}var yhe=Q([bb,xhe],(e,t)=>e.filter(bhe).find(r=>r.id===t)),vhe=Q([nt,m8,x8,g8,b8,yhe,ghe,ub],(e,t,r,n,s,a,o,l)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:u}=l;if(!(a==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||o==null)){var{dataKey:h,data:f}=a,p;if(f!=null&&f.length>0?p=f:p=c==null?void 0:c.slice(d,u+1),p!=null)return Uhe({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:h,bandSize:o,displayedData:p})}});function whe(e){var t=zl(e),r=3,n=2;if(t!=null){var{r:s,strokeWidth:a}=t,o=Number(s),l=Number(a);return(Number.isNaN(o)||o<0)&&(o=r),(Number.isNaN(l)||l<0)&&(l=n),{r:o,strokeWidth:l}}return{r,strokeWidth:n}}var khe=["id"],jhe=["type","layout","connectNulls","needClip"],Nhe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Q3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Jn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q3(Object(r),!0).forEach(function(n){She(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function She(e,t,r){return(t=Che(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Che(e){var t=_he(e,"string");return typeof t=="symbol"?t:t+""}function _he(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HS(e,t){if(e==null)return{};var r,n,s=Ehe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Ehe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Gl(){return Gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gl.apply(null,arguments)}var Ahe=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:n,value:zd(r,t),payload:e}]};function The(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:a,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:a,dataKey:t,nameKey:void 0,name:zd(o,t),hide:l,type:e.tooltipType,color:e.stroke,unit:c}}}var y8=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Phe(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var Mhe=(e,t,r)=>{var n=r.reduce((h,f)=>h+f);if(!n)return y8(t,e);for(var s=Math.floor(e/n),a=e%n,o=t-e,l=[],c=0,d=0;c<r.length;d+=r[c],++c)if(d+r[c]>a){l=[...r.slice(0,c),a-d];break}var u=l.length%2===0?[0,o]:[o];return[...Phe(r,s),...l,...u].map(h=>"".concat(h,"px")).join(", ")};function Ohe(e,t){var r;if(g.isValidElement(e))r=g.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=ct("recharts-line-dot",typeof e!="boolean"?e.className:"");r=g.createElement(UR,Gl({},t,{className:n}))}return r}function $he(e,t){return e==null?!1:t?!0:e.length===1}function Dhe(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:a,needClip:o}=n;if(!$he(r,s))return null;var{id:l}=n,c=HS(n,khe),d=XR(s),u=cs(c),h=tJ(s),f=r.map((m,x)=>{var b=Jn(Jn(Jn({key:"dot-".concat(x),r:3},u),h),{},{index:x,cx:m.x,cy:m.y,dataKey:a,value:m.value,payload:m.payload,points:r});return Ohe(s,b)}),p={clipPath:o?"url(#clipPath-".concat(d?"":"dots-").concat(t,")"):void 0};return g.createElement(Yr,Gl({className:"recharts-line-dots",key:"dots"},p),f)}function Ihe(e){var{showLabels:t,children:r,points:n}=e,s=g.useMemo(()=>n==null?void 0:n.map(a=>{var o={x:a.x,y:a.y,width:0,height:0};return Jn(Jn({},o),{},{value:a.value,payload:a.payload,viewBox:o,parentViewBox:void 0,fill:void 0})}),[n]);return g.createElement(FR,{value:t?s:null},r)}function eP(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:a}=e,{type:o,layout:l,connectNulls:c,needClip:d}=a,u=HS(a,jhe),h=Jn(Jn({},jn(u)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:n,type:o,layout:l,connectNulls:c,strokeDasharray:s??a.strokeDasharray});return g.createElement(g.Fragment,null,(n==null?void 0:n.length)>1&&g.createElement(h2,Gl({},h,{pathRef:r})),g.createElement(Dhe,{points:n,clipPathId:t,props:a}))}function Lhe(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function Rhe(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:a}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:h,animateNewValues:f,width:p,height:m,onAnimationEnd:x,onAnimationStart:b}=r,y=s.current,v=$f(r,"recharts-line-"),[w,j]=g.useState(!1),N=!w,k=g.useCallback(()=>{typeof x=="function"&&x(),j(!1)},[x]),S=g.useCallback(()=>{typeof b=="function"&&b(),j(!0)},[b]),C=Lhe(n.current),P=a.current;return g.createElement(Ihe,{points:o,showLabels:N},r.children,g.createElement(Of,{animationId:v,begin:d,duration:u,isActive:c,easing:h,onAnimationEnd:k,onAnimationStart:S,key:v},E=>{var O=Zt(P,C+P,E),A=Math.min(O,C),_;if(c)if(l){var I="".concat(l).split(/[,\s]+/gim).map(L=>parseFloat(L));_=Mhe(A,C,I)}else _=y8(C,A);else _=l==null?void 0:String(l);if(y){var D=y.length/o.length,$=E===1?o:o.map((L,M)=>{var T=Math.floor(M*D);if(y[T]){var G=y[T];return Jn(Jn({},L),{},{x:Zt(G.x,L.x,E),y:Zt(G.y,L.y,E)})}return f?Jn(Jn({},L),{},{x:Zt(p*2,L.x,E),y:Zt(m/2,L.y,E)}):Jn(Jn({},L),{},{x:L.x,y:L.y})});return s.current=$,g.createElement(eP,{props:r,points:$,clipPathId:t,pathRef:n,strokeDasharray:_})}return E>0&&C>0&&(s.current=o,a.current=A),g.createElement(eP,{props:r,points:o,clipPathId:t,pathRef:n,strokeDasharray:_})}),g.createElement(jS,{label:r.label}))}function Bhe(e){var{clipPathId:t,props:r}=e,n=g.useRef(null),s=g.useRef(0),a=g.useRef(null);return g.createElement(Rhe,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:s,pathRef:a})}var zhe=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Ct(e.payload,t)});class Fhe extends g.Component{render(){var{hide:t,dot:r,points:n,className:s,xAxisId:a,yAxisId:o,top:l,left:c,width:d,height:u,id:h,needClip:f}=this.props;if(t)return null;var p=ct("recharts-line",s),m=h,{r:x,strokeWidth:b}=whe(r),y=XR(r),v=x*2+b;return g.createElement(g.Fragment,null,g.createElement(Yr,{className:p},f&&g.createElement("defs",null,g.createElement(o8,{clipPathId:m,xAxisId:a,yAxisId:o}),!y&&g.createElement("clipPath",{id:"clipPath-dots-".concat(m)},g.createElement("rect",{x:c-v/2,y:l-v/2,width:d+v,height:u+v}))),g.createElement(i8,{xAxisId:a,yAxisId:o,data:n,dataPointFormatter:zhe,errorBarOffset:0},g.createElement(Bhe,{props:this.props,clipPathId:m}))),g.createElement(ode,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var v8={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Uo.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function Hhe(e){var t=Jr(e,v8),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:o,connectNulls:l,dot:c,hide:d,isAnimationActive:u,label:h,legendType:f,xAxisId:p,yAxisId:m,id:x}=t,b=HS(t,Nhe),{needClip:y}=LS(p,m),v=DS(),w=nb(),j=An(),N=Pe(E=>vhe(E,p,m,j,x));if(w!=="horizontal"&&w!=="vertical"||N==null||v==null)return null;var{height:k,width:S,x:C,y:P}=v;return g.createElement(Fhe,Gl({},b,{id:x,connectNulls:l,dot:c,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:o,isAnimationActive:u,hide:d,label:h,legendType:f,xAxisId:p,yAxisId:m,points:N,layout:w,height:k,width:S,left:C,top:P,needClip:y}))}function Uhe(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((d,u)=>{var h=Ct(d,o);if(t==="horizontal"){var f=FA({axis:r,ticks:s,bandSize:l,entry:d,index:u}),p=Lt(h)?null:n.scale(h);return{x:f,y:p,value:h,payload:d}}var m=Lt(h)?null:r.scale(h),x=FA({axis:n,ticks:a,bandSize:l,entry:d,index:u});return m==null||x==null?null:{x:m,y:x,value:h,payload:d}}).filter(Boolean)}function Whe(e){var t=Jr(e,v8),r=An();return g.createElement(OS,{id:t.id,type:"line"},n=>g.createElement(g.Fragment,null,g.createElement(e8,{legendPayload:Ahe(t)}),g.createElement(MS,{fn:The,args:t}),g.createElement(r8,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),g.createElement(Hhe,Gl({},t,{id:n}))))}var zi=g.memo(Whe);zi.displayName="Line";var Vhe=["dangerouslySetInnerHTML","ticks"],qhe=["id"],Ghe=["domain"],Khe=["domain"];function Sk(){return Sk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sk.apply(null,arguments)}function c0(e,t){if(e==null)return{};var r,n,s=Yhe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Yhe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Xhe(e){var t=Rt();return g.useLayoutEffect(()=>(t(Kce(e)),()=>{t(Yce(e))}),[e,t]),null}var Jhe=e=>{var{xAxisId:t,className:r}=e,n=Pe(o2),s=An(),a="xAxis",o=Pe(b=>Kd(b,a,t,s)),l=Pe(b=>J6(b,a,t,s)),c=Pe(b=>G6(b,t)),d=Pe(b=>Hae(b,t)),u=Pe(b=>E6(b,t));if(c==null||d==null||u==null)return null;var{dangerouslySetInnerHTML:h,ticks:f}=e,p=c0(e,Vhe),{id:m}=u,x=c0(u,qhe);return g.createElement(FS,Sk({},p,x,{scale:o,x:d.x,y:d.y,width:c.width,height:c.height,className:ct("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:l}))},Zhe={allowDataOverflow:Gn.allowDataOverflow,allowDecimals:Gn.allowDecimals,allowDuplicatedCategory:Gn.allowDuplicatedCategory,height:Gn.height,hide:!1,mirror:Gn.mirror,orientation:Gn.orientation,padding:Gn.padding,reversed:Gn.reversed,scale:Gn.scale,tickCount:Gn.tickCount,type:Gn.type,xAxisId:0},Qhe=e=>{var t,r,n,s,a,o=Jr(e,Zhe);return g.createElement(g.Fragment,null,g.createElement(Xhe,{interval:(t=o.interval)!==null&&t!==void 0?t:"preserveEnd",id:o.xAxisId,scale:o.scale,type:o.type,padding:o.padding,allowDataOverflow:o.allowDataOverflow,domain:o.domain,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,height:o.height,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(s=o.minTickGap)!==null&&s!==void 0?s:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),g.createElement(Jhe,o))},efe=(e,t)=>{var{domain:r}=e,n=c0(e,Ghe),{domain:s}=t,a=c0(t,Khe);return vd(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:vd({domain:r},{domain:s}):!1},ka=g.memo(Qhe,efe);ka.displayName="XAxis";var tfe=["dangerouslySetInnerHTML","ticks"],rfe=["id"],nfe=["domain"],sfe=["domain"];function Ck(){return Ck=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ck.apply(null,arguments)}function d0(e,t){if(e==null)return{};var r,n,s=afe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function afe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ife(e){var t=Rt();return g.useLayoutEffect(()=>(t(Xce(e)),()=>{t(Jce(e))}),[e,t]),null}var ofe=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,a=g.useRef(null),o=g.useRef(null),l=Pe(o2),c=An(),d=Rt(),u="yAxis",h=Pe(N=>Kd(N,u,t,c)),f=Pe(N=>K6(N,t)),p=Pe(N=>Wae(N,t)),m=Pe(N=>J6(N,u,t,c)),x=Pe(N=>A6(N,t));if(g.useLayoutEffect(()=>{if(!(n!=="auto"||!f||kS(s)||g.isValidElement(s)||x==null)){var N=a.current;if(N){var k=N.getCalculatedWidth();Math.round(f.width)!==Math.round(k)&&d(Zce({id:t,width:k}))}}},[m,f,d,s,t,n,x]),f==null||p==null||x==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,v=d0(e,tfe),{id:w}=x,j=d0(x,rfe);return g.createElement(FS,Ck({},v,j,{ref:a,labelRef:o,scale:h,x:p.x,y:p.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:ct("recharts-".concat(u," ").concat(u),r),viewBox:l,ticks:m}))},lfe={allowDataOverflow:Kn.allowDataOverflow,allowDecimals:Kn.allowDecimals,allowDuplicatedCategory:Kn.allowDuplicatedCategory,hide:!1,mirror:Kn.mirror,orientation:Kn.orientation,padding:Kn.padding,reversed:Kn.reversed,scale:Kn.scale,tickCount:Kn.tickCount,type:Kn.type,width:Kn.width,yAxisId:0},cfe=e=>{var t,r,n,s,a,o=Jr(e,lfe);return g.createElement(g.Fragment,null,g.createElement(ife,{interval:(t=o.interval)!==null&&t!==void 0?t:"preserveEnd",id:o.yAxisId,scale:o.scale,type:o.type,domain:o.domain,allowDataOverflow:o.allowDataOverflow,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,padding:o.padding,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,width:o.width,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(s=o.minTickGap)!==null&&s!==void 0?s:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),g.createElement(ofe,o))},dfe=(e,t)=>{var{domain:r}=e,n=d0(e,nfe),{domain:s}=t,a=d0(t,sfe);return vd(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:vd({domain:r},{domain:s}):!1},ja=g.memo(cfe,dfe);ja.displayName="YAxis";var ufe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gf=g;function hfe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ffe=typeof Object.is=="function"?Object.is:hfe,pfe=Gf.useSyncExternalStore,mfe=Gf.useRef,gfe=Gf.useEffect,xfe=Gf.useMemo,bfe=Gf.useDebugValue;ufe.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var a=mfe(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=xfe(function(){function c(p){if(!d){if(d=!0,u=p,p=n(p),s!==void 0&&o.hasValue){var m=o.value;if(s(m,p))return h=m}return h=p}if(m=h,ffe(u,p))return m;var x=n(p);return s!==void 0&&s(m,x)?(u=p,m):(u=p,h=x)}var d=!1,u,h,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,s]);var l=pfe(e,a[0],a[1]);return gfe(function(){o.hasValue=!0,o.value=l},[l]),bfe(l),l};function yfe(e){e()}function vfe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){yfe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var tP={notify(){},get:()=>[]};function wfe(e,t){let r,n=tP,s=0,a=!1;function o(x){u();const b=n.subscribe(x);let y=!1;return()=>{y||(y=!0,b(),h())}}function l(){n.notify()}function c(){m.onStateChange&&m.onStateChange()}function d(){return a}function u(){s++,r||(r=e.subscribe(c),n=vfe())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=tP)}function f(){a||(a=!0,u())}function p(){a&&(a=!1,h())}const m={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>n};return m}var kfe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jfe=kfe(),Nfe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Sfe=Nfe(),Cfe=()=>jfe||Sfe?g.useLayoutEffect:g.useEffect,_fe=Cfe(),Tv=Symbol.for("react-redux-context"),Pv=typeof globalThis<"u"?globalThis:{};function Efe(){if(!g.createContext)return{};const e=Pv[Tv]??(Pv[Tv]=new Map);let t=e.get(g.createContext);return t||(t=g.createContext(null),e.set(g.createContext,t)),t}var Afe=Efe();function Tfe(e){const{children:t,context:r,serverState:n,store:s}=e,a=g.useMemo(()=>{const c=wfe(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),o=g.useMemo(()=>s.getState(),[s]);_fe(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,o]);const l=r||Afe;return g.createElement(l.Provider,{value:a},t)}var Pfe=Tfe,Mfe=(e,t)=>t,US=Q([Mfe,nt,S6,vr,pR,Ti,Yie,br],eoe),WS=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},w8=Fs("mouseClick"),k8=Pf();k8.startListening({actionCreator:w8,effect:(e,t)=>{var r=e.payload,n=US(t.getState(),WS(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(nie({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var _k=Fs("mouseMove"),j8=Pf();j8.startListening({actionCreator:_k,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=hS(n,n.tooltip.settings.shared),a=US(n,WS(r));s==="axis"&&((a==null?void 0:a.activeIndex)!=null?t.dispatch(aR({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(sR()))}});var rP={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},N8=fs({name:"rootProps",initialState:rP,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:rP.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Ofe=N8.reducer,{updateOptions:$fe}=N8.actions,S8=fs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Dfe}=S8.actions,Ife=S8.reducer,C8=Fs("keyDown"),_8=Fs("focus"),VS=Pf();VS.startListening({actionCreator:C8,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=Number(fS(s,Xd(r))),l=Ti(r);if(a==="Enter"){var c=r0(r,"axis","hover",String(s.index));t.dispatch(xk({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var d=Kae(r),u=d==="left-to-right"?1:-1,h=a==="ArrowRight"?1:-1,f=o+h*u;if(!(l==null||f>=l.length||f<0)){var p=r0(r,"axis","hover",String(f));t.dispatch(xk({active:!0,activeIndex:f.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});VS.startListening({actionCreator:_8,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var a="0",o=r0(r,"axis","hover",String(a));t.dispatch(xk({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:o}))}}}});var ks=Fs("externalEvent"),E8=Pf();E8.startListening({actionCreator:ks,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:Bie(r),activeDataKey:bR(r),activeIndex:Po(r),activeLabel:xR(r),activeTooltipIndex:Po(r),isTooltipActive:zie(r)};e.payload.handler(n,e.payload.reactEvent)}}});var Lfe=Q([Yd],e=>e.tooltipItemPayloads),Rfe=Q([Lfe,Wf,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(l=>l.settings.dataKey===n);if(s!=null){var{positions:a}=s;if(a!=null){var o=t(a,r);return o}}}),A8=Fs("touchMove"),T8=Pf();T8.startListening({actionCreator:A8,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=hS(n,n.tooltip.settings.shared);if(s==="axis"){var a=US(n,WS({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(aR({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(ZI),u=(o=c.getAttribute(QI))!==null&&o!==void 0?o:void 0,h=Rfe(t.getState(),d,u);t.dispatch(nR({activeDataKey:u,activeIndex:d,activeCoordinate:h}))}}});var Bfe=kI({brush:yue,cartesianAxis:Qce,chartData:moe,errorBars:bde,graphicalItems:bce,layout:DQ,legend:Lee,options:doe,polarAxis:$le,polarOptions:Ife,referenceElements:Cue,rootProps:Ofe,tooltip:sie}),zfe=function(t){return iQ({reducer:Bfe,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([k8.middleware,j8.middleware,VS.middleware,E8.middleware,T8.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat($I({type:"raf"}))},devTools:Uo.devToolsEnabled})};function P8(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=An(),a=g.useRef(null);if(s)return r;a.current==null&&(a.current=zfe(t));var o=QN;return g.createElement(Pfe,{context:o,store:a.current},r)}function M8(e){var{layout:t,margin:r}=e,n=Rt(),s=An();return g.useEffect(()=>{s||(n(MQ(t)),n(PQ(r)))},[n,s,t,r]),null}function O8(e){var t=Rt();return g.useEffect(()=>{t($fe(e))},[t,e]),null}var Ffe=["children"];function Hfe(e,t){if(e==null)return{};var r,n,s=Ufe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Ufe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function u0(){return u0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u0.apply(null,arguments)}var Wfe={width:"100%",height:"100%",display:"block"},Vfe=g.forwardRef((e,t)=>{var r=c2(),n=d2(),s=dL();if(!md(r)||!md(n))return null;var{children:a,otherAttributes:o,title:l,desc:c}=e,d,u;return typeof o.tabIndex=="number"?d=o.tabIndex:d=s?0:void 0,typeof o.role=="string"?u=o.role:u=s?"application":void 0,g.createElement($N,u0({},o,{title:l,desc:c,role:u,tabIndex:d,width:r,height:n,style:Wfe,ref:t}),a)}),qfe=e=>{var{children:t}=e,r=Pe(tb);if(!r)return null;var{width:n,height:s,y:a,x:o}=r;return g.createElement($N,{width:n,height:s,x:o,y:a},t)},nP=g.forwardRef((e,t)=>{var{children:r}=e,n=Hfe(e,Ffe),s=An();return s?g.createElement(qfe,null,r):g.createElement(Vfe,u0({ref:t},n),r)});function Gfe(){var e=Rt(),[t,r]=g.useState(null),n=Pe(dee);return g.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),a=s.width/t.offsetWidth;cn(a)&&a!==n&&e($Q(a))}},[t,e,n]),r}function sP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Kfe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sP(Object(r),!0).forEach(function(n){Yfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yfe(e,t,r){return(t=Xfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xfe(e){var t=Jfe(e,"string");return typeof t=="symbol"?t:t+""}function Jfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kl(){return Kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kl.apply(null,arguments)}var Zfe=()=>(Noe(),null);function h0(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Qfe=g.forwardRef((e,t)=>{var r,n,s=g.useRef(null),[a,o]=g.useState({containerWidth:h0((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:h0((n=e.style)===null||n===void 0?void 0:n.height)}),l=g.useCallback((d,u)=>{o(h=>{var f=Math.round(d),p=Math.round(u);return h.containerWidth===f&&h.containerHeight===p?h:{containerWidth:f,containerHeight:p}})},[]),c=g.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:u,height:h}=d.getBoundingClientRect();l(u,h);var f=m=>{var{width:x,height:b}=m[0].contentRect;l(x,b)},p=new ResizeObserver(f);p.observe(d),s.current=p}},[t,l]);return g.useEffect(()=>()=>{var d=s.current;d!=null&&d.disconnect()},[l]),g.createElement(g.Fragment,null,g.createElement(sb,{width:a.containerWidth,height:a.containerHeight}),g.createElement("div",Kl({ref:c},e)))}),epe=g.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,a]=g.useState({containerWidth:h0(r),containerHeight:h0(n)}),o=g.useCallback((c,d)=>{a(u=>{var h=Math.round(c),f=Math.round(d);return u.containerWidth===h&&u.containerHeight===f?u:{containerWidth:h,containerHeight:f}})},[]),l=g.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:d,height:u}=c.getBoundingClientRect();o(d,u)}},[t,o]);return g.createElement(g.Fragment,null,g.createElement(sb,{width:s.containerWidth,height:s.containerHeight}),g.createElement("div",Kl({ref:l},e)))}),tpe=g.forwardRef((e,t)=>{var{width:r,height:n}=e;return g.createElement(g.Fragment,null,g.createElement(sb,{width:r,height:n}),g.createElement("div",Kl({ref:t},e)))}),rpe=g.forwardRef((e,t)=>{var{width:r,height:n}=e;return xi(r)||xi(n)?g.createElement(epe,Kl({},e,{ref:t})):g.createElement(tpe,Kl({},e,{ref:t}))});function npe(e){return e===!0?Qfe:rpe}var spe=g.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:a,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:h,onMouseUp:f,onTouchEnd:p,onTouchMove:m,onTouchStart:x,style:b,width:y,responsive:v,dispatchTouchEvents:w=!0}=e,j=g.useRef(null),N=Rt(),[k,S]=g.useState(null),[C,P]=g.useState(null),E=Gfe(),O=l2(),A=(O==null?void 0:O.width)>0?O.width:y,_=(O==null?void 0:O.height)>0?O.height:s,I=g.useCallback(V=>{E(V),typeof t=="function"&&t(V),S(V),P(V),V!=null&&(j.current=V)},[E,t,S,P]),D=g.useCallback(V=>{N(w8(V)),N(ks({handler:a,reactEvent:V}))},[N,a]),$=g.useCallback(V=>{N(_k(V)),N(ks({handler:d,reactEvent:V}))},[N,d]),L=g.useCallback(V=>{N(sR()),N(ks({handler:u,reactEvent:V}))},[N,u]),M=g.useCallback(V=>{N(_k(V)),N(ks({handler:h,reactEvent:V}))},[N,h]),T=g.useCallback(()=>{N(_8())},[N]),G=g.useCallback(V=>{N(C8(V.key))},[N]),Y=g.useCallback(V=>{N(ks({handler:o,reactEvent:V}))},[N,o]),ee=g.useCallback(V=>{N(ks({handler:l,reactEvent:V}))},[N,l]),R=g.useCallback(V=>{N(ks({handler:c,reactEvent:V}))},[N,c]),B=g.useCallback(V=>{N(ks({handler:f,reactEvent:V}))},[N,f]),q=g.useCallback(V=>{N(ks({handler:x,reactEvent:V}))},[N,x]),X=g.useCallback(V=>{w&&N(A8(V)),N(ks({handler:m,reactEvent:V}))},[N,w,m]),ue=g.useCallback(V=>{N(ks({handler:p,reactEvent:V}))},[N,p]),U=npe(v);return g.createElement(NR.Provider,{value:k},g.createElement(jD.Provider,{value:C},g.createElement(U,{width:A??(b==null?void 0:b.width),height:_??(b==null?void 0:b.height),className:ct("recharts-wrapper",n),style:Kfe({position:"relative",cursor:"default",width:A,height:_},b),onClick:D,onContextMenu:Y,onDoubleClick:ee,onFocus:T,onKeyDown:G,onMouseDown:R,onMouseEnter:$,onMouseLeave:L,onMouseMove:M,onMouseUp:B,onTouchEnd:ue,onTouchMove:X,onTouchStart:q,ref:I},g.createElement(Zfe,null),r)))}),ape=["width","height","responsive","children","className","style","compact","title","desc"];function ipe(e,t){if(e==null)return{};var r,n,s=ope(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ope(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $8=g.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:a,className:o,style:l,compact:c,title:d,desc:u}=e,h=ipe(e,ape),f=cs(h);return c?g.createElement(g.Fragment,null,g.createElement(sb,{width:r,height:n}),g.createElement(nP,{otherAttributes:f,title:d,desc:u},a)):g.createElement(spe,{className:o,style:l,width:r,height:n,responsive:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},g.createElement(nP,{otherAttributes:f,title:d,desc:u,ref:t},g.createElement(Eue,null,a)))});function Ek(){return Ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ek.apply(null,arguments)}var lpe={top:5,right:5,bottom:5,left:5},cpe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:lpe,reverseStackOrder:!1,syncMethod:"index",responsive:!1},D8=g.forwardRef(function(t,r){var n,s=Jr(t.categoricalChartProps,cpe),{chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:d}=t,u={chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return g.createElement(P8,{preloadedState:{options:u},reduxStoreName:(n=d.id)!==null&&n!==void 0?n:a},g.createElement(d8,{chartData:d.data}),g.createElement(M8,{layout:s.layout,margin:s.margin}),g.createElement(O8,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),g.createElement($8,Ek({},s,{ref:r})))}),dpe=["axis"],em=g.forwardRef((e,t)=>g.createElement(D8,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:dpe,tooltipPayloadSearcher:wS,categoricalChartProps:e,ref:t})),upe=["axis","item"],Tu=g.forwardRef((e,t)=>g.createElement(D8,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:upe,tooltipPayloadSearcher:wS,categoricalChartProps:e,ref:t}));function hpe(e){var t=Rt();return g.useEffect(()=>{t(Dfe(e))},[t,e]),null}var fpe=["layout"];function Ak(){return Ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ak.apply(null,arguments)}function ppe(e,t){if(e==null)return{};var r,n,s=mpe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function mpe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gpe={top:5,right:5,bottom:5,left:5},xpe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:gpe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},bpe=g.forwardRef(function(t,r){var n,s=Jr(t.categoricalChartProps,xpe),{layout:a}=s,o=ppe(s,fpe),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u}=t,h={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u,eventEmitter:void 0};return g.createElement(P8,{preloadedState:{options:h},reduxStoreName:(n=s.id)!==null&&n!==void 0?n:l},g.createElement(d8,{chartData:s.data}),g.createElement(M8,{layout:a,margin:s.margin}),g.createElement(O8,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),g.createElement(hpe,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),g.createElement($8,Ak({},o,{ref:r})))}),ype=["item"],vpe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},aP=g.forwardRef((e,t)=>{var r=Jr(e,vpe);return g.createElement(bpe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:ype,tooltipPayloadSearcher:wS,categoricalChartProps:r,ref:t})});const iP=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#84cc16"];function wpe(){const[e,t]=g.useState(null),[r,n]=g.useState(null),[s,a]=g.useState(null),[o,l]=g.useState(null),[c,d]=g.useState(null),[u,h]=g.useState(null),[f,p]=g.useState(null),[m,x]=g.useState(!0),[b,y]=g.useState(""),[v,w]=g.useState(30),[j,N]=g.useState("overview"),[k,S]=g.useState(null),[C,P]=g.useState(null),[E,O]=g.useState(null);g.useEffect(()=>{D()},[v]),g.useEffect(()=>{j==="stories"&&_()},[j,k,v]),g.useEffect(()=>{j==="galleries"&&I()},[j,C,v]),g.useEffect(()=>{j==="blog"&&A()},[j,E,v]);const A=async()=>{try{const T=E?`/api/admin/analytics/blog-details.php?days=${v}&post_id=${E}`:`/api/admin/analytics/blog-details.php?days=${v}`,G=await fetch(T,{credentials:"same-origin"});if(G.ok){const Y=await G.json();Y.success&&p(Y.data)}}catch(T){console.error("Failed to load blog data:",T)}},_=async()=>{try{const T=k?`/api/admin/analytics/story-details.php?days=${v}&story_id=${k}`:`/api/admin/analytics/story-details.php?days=${v}`,G=await fetch(T,{credentials:"same-origin"});if(G.ok){const Y=await G.json();Y.success&&d(Y.data)}}catch(T){console.error("Failed to load story data:",T)}},I=async()=>{try{const T=C?`/api/admin/analytics/gallery-details.php?days=${v}&gallery_id=${C}`:`/api/admin/analytics/gallery-details.php?days=${v}`,G=await fetch(T,{credentials:"same-origin"});if(G.ok){const Y=await G.json();Y.success&&h(Y.data)}}catch(T){console.error("Failed to load gallery data:",T)}},D=async()=>{x(!0),y("");try{const[T,G,Y,ee]=await Promise.all([fetch(`/api/admin/analytics/summary.php?days=${v}`,{credentials:"same-origin"}),fetch(`/api/admin/analytics/visitors.php?days=${v}`,{credentials:"same-origin"}),fetch(`/api/admin/analytics/geography.php?days=${v}`,{credentials:"same-origin"}),fetch(`/api/admin/analytics/activity.php?days=${v}`,{credentials:"same-origin"})]);if(!T.ok)throw new Error("Failed to load summary data");const R=await T.json();if(R.success&&t(R.data),G.ok){const B=await G.json();B.success&&n(B.data)}if(Y.ok){const B=await Y.json();B.success&&a(B.data)}if(ee.ok){const B=await ee.json();B.success&&l(B.data)}}catch(T){y(T instanceof Error?T.message:"Failed to load analytics data")}finally{x(!1)}},$=T=>new Intl.NumberFormat().format(T),L=T=>{const G=Math.floor(T/60),Y=T%60;return G===0?`${Y}s`:`${G}m ${Y}s`},M=T=>`${T}%`;return m?i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsx("div",{className:"px-4 py-5 sm:p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),i.jsx("div",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Loading analytics..."})]})})}):b?i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Error: ",b]}),i.jsx("button",{onClick:D,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Retry"})]})}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 sm:mb-0",children:"Analytics Dashboard"}),i.jsxs("div",{className:"flex flex-wrap gap-4",children:[i.jsxs("select",{value:v,onChange:T=>w(Number(T.target.value)),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[i.jsx("option",{value:7,children:"Last 7 days"}),i.jsx("option",{value:30,children:"Last 30 days"}),i.jsx("option",{value:90,children:"Last 90 days"}),i.jsx("option",{value:365,children:"Last year"})]}),i.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Refresh"})]})]}),i.jsx("div",{className:"mt-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-8",children:[i.jsx("button",{onClick:()=>N("overview"),className:`${j==="overview"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Overview"}),i.jsx("button",{onClick:()=>N("visitors"),className:`${j==="visitors"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Visitors"}),i.jsx("button",{onClick:()=>N("geography"),className:`${j==="geography"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Geography"}),i.jsx("button",{onClick:()=>N("activity"),className:`${j==="activity"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Activity"}),i.jsx("button",{onClick:()=>{N("stories"),S(null)},className:`${j==="stories"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Stories"}),i.jsx("button",{onClick:()=>{N("galleries"),P(null)},className:`${j==="galleries"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Galleries"}),i.jsx("button",{onClick:()=>{N("blog"),O(null)},className:`${j==="blog"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Blog"})]})})]})}),j==="overview"&&e&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx(jr,{title:"Total Views",value:$(e.summary.total_views),subtitle:`${e.period_days} days`,icon:""}),i.jsx(jr,{title:"Unique Visitors",value:$(e.summary.unique_visitors),subtitle:`${e.period_days} days`,icon:""}),i.jsx(jr,{title:"Story Views",value:$(e.summary.story_views),subtitle:"Story page visits",icon:""}),i.jsx(jr,{title:"Chapter Views",value:$(e.summary.chapter_views),subtitle:"Chapter reads",icon:""}),i.jsx(jr,{title:"Gallery Views",value:$(e.summary.gallery_views),subtitle:"Gallery visits",icon:""}),i.jsx(jr,{title:"Avg Reading Depth",value:M(e.summary.avg_reading_depth),subtitle:"Chapter completion",icon:""})]}),e.daily_trend.length>0&&i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Daily Views Trend"}),i.jsx(Ys,{width:"100%",height:300,children:i.jsxs(em,{data:e.daily_trend,children:[i.jsx(wa,{strokeDasharray:"3 3"}),i.jsx(ka,{dataKey:"date"}),i.jsx(ja,{}),i.jsx(Xs,{}),i.jsx(Ea,{}),i.jsx(zi,{type:"monotone",dataKey:"views",stroke:"#3b82f6",strokeWidth:2})]})})]})}),e.top_stories.length>0&&i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Top Stories (",e.period_days," days)"]}),i.jsx("div",{className:"space-y-3",children:e.top_stories.slice(0,10).map((T,G)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 w-6",children:["#",G+1]}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white ml-3",children:T.story_slug})]}),i.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[$(T.views)," views"]})]},T.story_slug))})]})})]}),j==="visitors"&&r&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(jr,{title:"Unique Visitors",value:$(r.unique_visitors),subtitle:"By IP address",icon:""}),i.jsx(jr,{title:"Total Sessions",value:$(r.total_sessions),subtitle:"Visit sessions",icon:""}),i.jsx(jr,{title:"Repeat Visitor Rate",value:M(r.repeat_visitor_rate),subtitle:`${$(r.repeat_visitors)} repeat visitors`,icon:""}),i.jsx(jr,{title:"Avg Session Duration",value:L(r.avg_session_duration),subtitle:`${r.avg_pages_per_session} pages/session`,icon:""})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"New vs Returning Visitors"}),i.jsx(Ys,{width:"100%",height:250,children:i.jsxs(aP,{children:[i.jsxs(kk,{data:[{name:"New Visitors",value:r.new_visitors},{name:"Returning Visitors",value:r.returning_visitors}],cx:"50%",cy:"50%",labelLine:!1,label:T=>`${T.name}: ${(T.percent*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[i.jsx(Cl,{fill:"#10b981"}),i.jsx(Cl,{fill:"#3b82f6"})]}),i.jsx(Xs,{})]})}),i.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:$(r.new_visitors)}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"New"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:$(r.returning_visitors)}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Returning"})]})]})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Daily Unique Visitors"}),i.jsx(Ys,{width:"100%",height:250,children:i.jsxs(em,{data:r.daily_visitors,children:[i.jsx(wa,{strokeDasharray:"3 3"}),i.jsx(ka,{dataKey:"date"}),i.jsx(ja,{}),i.jsx(Xs,{}),i.jsx(Ea,{}),i.jsx(zi,{type:"monotone",dataKey:"unique_visitors",stroke:"#3b82f6",name:"Unique Visitors"}),i.jsx(zi,{type:"monotone",dataKey:"sessions",stroke:"#10b981",name:"Sessions"})]})})]})})]})]}),j==="geography"&&s&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Top Countries"}),i.jsx(Ys,{width:"100%",height:400,children:i.jsxs(Tu,{data:s.top_countries.slice(0,10),children:[i.jsx(wa,{strokeDasharray:"3 3"}),i.jsx(ka,{dataKey:"country_code"}),i.jsx(ja,{}),i.jsx(Xs,{}),i.jsx(Ea,{}),i.jsx(qa,{dataKey:"unique_visitors",fill:"#3b82f6",name:"Unique Visitors"}),i.jsx(qa,{dataKey:"sessions",fill:"#10b981",name:"Sessions"})]})})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Country Details"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Rank"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Country"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unique Visitors"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Sessions"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total Events"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:s.top_countries.map((T,G)=>i.jsxs("tr",{children:[i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:["#",G+1]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:T.country_code}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.unique_visitors)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.sessions)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.total_events)})]},T.country_code))})]})})]})}),s.top_cities.length>0&&i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Top Cities"}),i.jsx("div",{className:"space-y-3",children:s.top_cities.slice(0,15).map((T,G)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 w-6",children:["#",G+1]}),i.jsxs("span",{className:"text-sm text-gray-900 dark:text-white ml-3",children:[T.city,", ",T.region," (",T.country_code,")"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[$(T.unique_visitors)," visitors"]}),i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[$(T.sessions)," sessions"]})]})]},`${T.city}-${T.country_code}`))})]})})]}),j==="activity"&&o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Device Types"}),i.jsx(Ys,{width:"100%",height:250,children:i.jsxs(aP,{children:[i.jsx(kk,{data:o.device_breakdown,cx:"50%",cy:"50%",labelLine:!1,label:T=>`${T.device_type}: ${(T.percent*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"unique_visitors",nameKey:"device_type",children:o.device_breakdown.map((T,G)=>i.jsx(Cl,{fill:iP[G%iP.length]},`cell-${G}`))}),i.jsx(Xs,{})]})})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Browsers"}),i.jsx(Ys,{width:"100%",height:250,children:i.jsxs(Tu,{data:o.browser_breakdown,children:[i.jsx(wa,{strokeDasharray:"3 3"}),i.jsx(ka,{dataKey:"browser"}),i.jsx(ja,{}),i.jsx(Xs,{}),i.jsx(qa,{dataKey:"unique_visitors",fill:"#3b82f6"})]})})]})})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Activity by Hour of Day"}),i.jsx(Ys,{width:"100%",height:300,children:i.jsxs(Tu,{data:o.hourly_activity,children:[i.jsx(wa,{strokeDasharray:"3 3"}),i.jsx(ka,{dataKey:"hour",label:{value:"Hour (24h)",position:"insideBottom",offset:-5}}),i.jsx(ja,{}),i.jsx(Xs,{}),i.jsx(Ea,{}),i.jsx(qa,{dataKey:"unique_visitors",fill:"#3b82f6",name:"Unique Visitors"}),i.jsx(qa,{dataKey:"sessions",fill:"#10b981",name:"Sessions"})]})})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Activity by Day of Week"}),i.jsx(Ys,{width:"100%",height:300,children:i.jsxs(Tu,{data:o.weekly_activity,children:[i.jsx(wa,{strokeDasharray:"3 3"}),i.jsx(ka,{dataKey:"day_name"}),i.jsx(ja,{}),i.jsx(Xs,{}),i.jsx(Ea,{}),i.jsx(qa,{dataKey:"unique_visitors",fill:"#3b82f6",name:"Unique Visitors"}),i.jsx(qa,{dataKey:"sessions",fill:"#10b981",name:"Sessions"})]})})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Top Traffic Sources"}),i.jsx("div",{className:"space-y-3",children:o.referrer_breakdown.slice(0,10).map((T,G)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 w-6",children:["#",G+1]}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white ml-3 font-mono",children:T.referrer})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[$(T.sessions)," sessions"]}),i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[$(T.unique_visitors)," visitors"]})]})]},T.referrer))})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Recent Visitor Sessions"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"First Seen"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Duration"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Pages"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Device"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:o.recent_sessions.slice(0,20).map(T=>{const G=T.user_agent.includes("Mobile")||T.user_agent.includes("Android")||T.user_agent.includes("iPhone"),Y=T.user_agent.includes("Tablet")||T.user_agent.includes("iPad"),ee=G||Y?"":"";return i.jsxs("tr",{children:[i.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white",children:[i.jsx("div",{className:"font-medium",children:T.country_code}),T.city&&i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[T.city,", ",T.region]})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:new Date(T.first_seen).toLocaleString()}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:L(T.duration_seconds)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:T.page_views}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:ee})]},T.session_id)})})]})})]})})]}),j==="stories"&&c&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsx("div",{className:"px-4 py-5 sm:p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 sm:mb-0",children:k&&c.story?`${c.story.title} - Chapter Analytics`:"Stories Overview"}),c.stories&&c.stories.length>0&&i.jsxs("select",{value:k||"",onChange:T=>S(T.target.value?Number(T.target.value):null),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[i.jsx("option",{value:"",children:"All Stories Overview"}),c.stories.map(T=>i.jsx("option",{value:T.id,children:T.title},T.id))]})]})})}),!k&&c.stories&&i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["All Stories (",c.period_days," days)"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Story"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Likes"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Comments"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total Views"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Story Views"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Chapter Views"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unique Readers"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Avg Depth"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Chapters"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:c.stories.map(T=>i.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>S(T.id),children:[i.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:T.title}),i.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:T.slug})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.total_likes)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.total_comments)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.total_views)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.story_views)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.chapter_views)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.unique_readers)}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[T.avg_reading_depth,"%"]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.total_chapters)})]},T.id))})]})})]})}),k&&c.chapters&&i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Chapters (",c.period_days," days)"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Chapter"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Likes"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Comments"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Views"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unique Readers"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Avg Depth"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Avg Time"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:c.chapters.map(T=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white",children:i.jsxs("div",{children:[i.jsxs("div",{className:"font-medium",children:["Ch. ",T.chapter_number,": ",T.title]}),i.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:T.chapter_slug})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.likes)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.comments)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.views)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.unique_readers)}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[T.avg_reading_depth,"%"]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[Math.round(T.avg_time_spent),"s"]})]},T.id))})]})})]})})]}),j==="galleries"&&u&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsx("div",{className:"px-4 py-5 sm:p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 sm:mb-0",children:C&&u.gallery?`${u.gallery.title} - Image Analytics`:"Galleries Overview"}),u.galleries&&u.galleries.length>0&&i.jsxs("select",{value:C||"",onChange:T=>P(T.target.value?Number(T.target.value):null),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[i.jsx("option",{value:"",children:"All Galleries Overview"}),u.galleries.map(T=>i.jsx("option",{value:T.id,children:T.title},T.id))]})]})})}),!C&&u.galleries&&i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["All Galleries (",u.period_days," days)"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Gallery"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Likes"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Comments"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total Views"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Gallery Views"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Image Views"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unique Visitors"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Images"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:u.galleries.map(T=>i.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>P(T.id),children:[i.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:T.title}),i.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:T.slug})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.total_likes)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.total_comments)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.total_views)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.gallery_views)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.image_views)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.unique_visitors)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.total_images)})]},T.id))})]})})]})}),C&&u.images&&i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Images (",u.period_days," days)"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Image"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Likes"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Comments"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Views"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unique Viewers"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:u.images.map((T,G)=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white",children:i.jsxs("div",{children:[i.jsxs("div",{className:"font-medium",children:["#",G+1," ",T.title||T.filename]}),i.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:T.filename})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.likes)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.comments)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.views)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.unique_viewers)})]},T.id))})]})})]})})]}),j==="blog"&&f&&i.jsxs(i.Fragment,{children:[!E&&f.summary&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(jr,{title:"Total Views",value:$(f.summary.total_views||0),subtitle:`${f.period_days} days`,icon:""}),i.jsx(jr,{title:"Total Likes",value:$(f.summary.total_likes||0),subtitle:"Reader engagement",icon:""}),i.jsx(jr,{title:"Unique Visitors",value:$(f.summary.unique_visitors||0),subtitle:"Unique readers",icon:""}),i.jsx(jr,{title:"Published Posts",value:$(f.summary.published_count||0),subtitle:`${f.summary.draft_count||0} drafts, ${f.summary.scheduled_count||0} scheduled`,icon:""})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsx("div",{className:"px-4 py-5 sm:p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 sm:mb-0",children:E&&f.post?`${f.post.title} - Analytics`:"Blog Posts Overview"}),f.posts&&f.posts.length>0&&i.jsxs("select",{value:E||"",onChange:T=>O(T.target.value?Number(T.target.value):null),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[i.jsx("option",{value:"",children:"All Posts Overview"}),f.posts.map(T=>i.jsx("option",{value:T.id,children:T.title},T.id))]})]})})}),!E&&f.daily_trend&&f.daily_trend.length>0&&i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Daily Blog Views"}),i.jsx(Ys,{width:"100%",height:300,children:i.jsxs(em,{data:f.daily_trend,children:[i.jsx(wa,{strokeDasharray:"3 3"}),i.jsx(ka,{dataKey:"date"}),i.jsx(ja,{}),i.jsx(Xs,{}),i.jsx(Ea,{}),i.jsx(zi,{type:"monotone",dataKey:"views",stroke:"#3b82f6",name:"Views",strokeWidth:2}),i.jsx(zi,{type:"monotone",dataKey:"likes",stroke:"#ef4444",name:"Likes",strokeWidth:2})]})})]})}),!E&&f.posts&&i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["All Blog Posts (",f.period_days," days)"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Post"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period Views"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period Likes"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unique Visitors"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total Views"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total Likes"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f.posts.map(T=>i.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>O(T.id),children:[i.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:T.title}),i.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:T.slug})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T.status==="published"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":T.status==="scheduled"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:T.status})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.period_views)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.period_likes)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.unique_visitors)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.view_count)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$(T.like_count)})]},T.id))})]})})]})}),E&&f.post&&i.jsxs(i.Fragment,{children:[f.totals&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(jr,{title:"Period Views",value:$(f.totals.total_views||0),subtitle:`Last ${f.period_days} days`,icon:""}),i.jsx(jr,{title:"Period Likes",value:$(f.totals.total_likes||0),subtitle:`Last ${f.period_days} days`,icon:""}),i.jsx(jr,{title:"Shares",value:$(f.totals.total_shares||0),subtitle:"Social shares",icon:""}),i.jsx(jr,{title:"Unique Visitors",value:$(f.totals.unique_visitors||0),subtitle:"Unique readers",icon:""})]}),f.daily_stats&&f.daily_stats.length>0&&i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Daily Views & Likes"}),i.jsx(Ys,{width:"100%",height:300,children:i.jsxs(em,{data:f.daily_stats,children:[i.jsx(wa,{strokeDasharray:"3 3"}),i.jsx(ka,{dataKey:"date"}),i.jsx(ja,{}),i.jsx(Xs,{}),i.jsx(Ea,{}),i.jsx(zi,{type:"monotone",dataKey:"views",stroke:"#3b82f6",name:"Views",strokeWidth:2}),i.jsx(zi,{type:"monotone",dataKey:"likes",stroke:"#ef4444",name:"Likes",strokeWidth:2})]})})]})}),f.referrers&&f.referrers.length>0&&i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Traffic Sources"}),i.jsx("div",{className:"space-y-3",children:f.referrers.map((T,G)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 w-6",children:["#",G+1]}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white ml-3",children:T.source})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[$(T.count)," views"]}),i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[$(T.unique_visitors)," visitors"]})]})]},T.source))})]})}),f.countries&&f.countries.length>0&&i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Top Countries"}),i.jsx(Ys,{width:"100%",height:250,children:i.jsxs(Tu,{data:f.countries.slice(0,10),children:[i.jsx(wa,{strokeDasharray:"3 3"}),i.jsx(ka,{dataKey:"country_code"}),i.jsx(ja,{}),i.jsx(Xs,{}),i.jsx(qa,{dataKey:"views",fill:"#3b82f6",name:"Views"})]})})]})})]})]})]})}function jr({title:e,value:t,subtitle:r,icon:n}){return i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsx("div",{className:"p-5",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("span",{className:"text-2xl",children:n})}),i.jsx("div",{className:"ml-5 w-0 flex-1",children:i.jsxs("dl",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:e}),i.jsx("dd",{className:"text-lg font-medium text-gray-900 dark:text-white",children:t}),i.jsx("dd",{className:"text-sm text-gray-500 dark:text-gray-400",children:r})]})})]})})})}const I8={recruit:{id:1,slug:"recruit",name:"Recruit",description:"Starter class that serves as an introductory class for newly integrated individuals, guiding them into the system and paving the way for potential specialization through upgrades at level 10.",tier:1,unlockLevel:1,abilityIds:[311]},scout:{id:9,slug:"scout",name:"Scout",description:"A stealth-oriented class specializing in infiltration, using both ranged and melee weapons to eliminate targets.",tier:2,unlockLevel:10,prerequisiteClassId:1,statBonuses:{PER:1},primaryAttribute:"PER",abilityIds:[201,203,101,18]},hunter:{id:12,slug:"hunter",name:"Hunter",description:"Long-range engagement specialist with mobility and tracking overlays.",tier:2,unlockLevel:10,prerequisiteClassId:1,statBonuses:{DEX:1},primaryAttribute:"DEX",abilityIds:[40,39,312,43]},operative:{id:10,slug:"operative",name:"Operative",description:"Expert in reconnaissance and gathering intelligence, utilizing stealth and agility.",tier:3,unlockLevel:32,prerequisiteClassId:9,statBonuses:{PER:1,INT:1},primaryAttribute:"PER",secondaryAttribute:"INT",abilityIds:[20,601,205,35]},infiltrator:{id:11,slug:"infiltrator",name:"Infiltrator",description:"Master of silent infiltration, capable of bypassing security systems, guards, and traps. Experts in stealth, subterfuge, and close combat takedowns.",tier:4,unlockLevel:66,prerequisiteClassId:10,statBonuses:{PER:2,MEM:1},primaryAttribute:"PER",secondaryAttribute:"MEM",abilityIds:[21,207,602,304]}};Object.fromEntries(Object.values(I8).map(e=>[e.id,e]));const yc=({label:e,children:t})=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e}),t]});function kpe(){const[e,t]=g.useState(!1),[r,n]=g.useState(!1),[s,a]=g.useState(null),[o,l]=g.useState(null),[c,d]=g.useState([]),[u,h]=g.useState(null),[f,p]=g.useState(!1),[m,x]=g.useState(null),b=Object.values(I8);g.useEffect(()=>{y()},[]),g.useEffect(()=>{if(o){const A=setTimeout(()=>l(null),3e3);return()=>clearTimeout(A)}},[o]);const y=async()=>{t(!0),a(null);const A=await J$();A.success?d(A.characters):a(A.error||"Failed to load characters"),t(!1)},v=async A=>{n(!0),a(null);try{const _=f?await Z$(A):await Q$(A);_!=null&&_.success?(l(f?"Created successfully!":"Updated successfully!"),h(null),p(!1),y()):a((_==null?void 0:_.error)||"Operation failed")}catch(_){a("Save failed: "+String(_))}n(!1)},w=async A=>{n(!0),a(null);try{const _=await SY(A);_!=null&&_.success?(l("Deleted successfully!"),x(null),y()):a((_==null?void 0:_.error)||"Delete failed")}catch(_){a("Delete failed: "+String(_))}n(!1)},j=A=>{h(A),p(!1)},N=()=>{p(!0),h({name:"",level:1,xp_current:0,credits:0,status:"active",stats:{STR:3,PER:3,DEX:3,MEM:3,INT:3,CHA:3}})},k="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",S=["STR","PER","DEX","MEM","INT","CHA"],C=(A,_)=>{const D={...u.stats||{},[A]:_};h({...u,stats:D})},P=()=>i.jsxs(i.Fragment,{children:[i.jsx(yc,{label:"Name *",children:i.jsx("input",{type:"text",value:u.name||"",onChange:A=>h({...u,name:A.target.value}),className:k})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(yc,{label:"Level",children:i.jsx("input",{type:"number",value:u.level||1,onChange:A=>h({...u,level:parseInt(A.target.value)||1}),className:k})}),i.jsx(yc,{label:"XP",children:i.jsx("input",{type:"number",value:u.xp_current||0,onChange:A=>h({...u,xp_current:parseInt(A.target.value)||0}),className:k})})]}),i.jsx(yc,{label:"Class",children:i.jsxs("select",{value:u.class_id||"",onChange:A=>h({...u,class_id:A.target.value?parseInt(A.target.value):null}),className:k,children:[i.jsx("option",{value:"",children:"None (Recruit)"}),b.map(A=>i.jsxs("option",{value:A.id,children:[A.name," (Tier ",A.tier,")"]},A.id))]})}),i.jsx(yc,{label:"Credits",children:i.jsx("input",{type:"number",value:u.credits||0,onChange:A=>h({...u,credits:parseInt(A.target.value)||0}),className:k})}),i.jsx(yc,{label:"Status",children:i.jsxs("select",{value:u.status||"active",onChange:A=>h({...u,status:A.target.value}),className:k,children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"inactive",children:"Inactive"})]})}),i.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4 mt-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Character Stats"}),i.jsx("div",{className:"grid grid-cols-3 gap-3",children:S.map(A=>{var _;return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("label",{className:"w-12 text-sm font-medium text-gray-600 dark:text-gray-400",children:[A,":"]}),i.jsx("input",{type:"number",value:((_=u.stats)==null?void 0:_[A])||3,onChange:I=>C(A,parseInt(I.target.value)||3),className:"w-16 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm dark:bg-gray-700 dark:text-white",min:1,max:99})]},A)})})]})]}),E=()=>{if(!u)return null;const A=f?"Create Character":"Edit Character";return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:A}),i.jsx("button",{onClick:()=>{h(null),p(!1)},className:"text-gray-500 hover:text-gray-700",children:i.jsx(Dt,{size:20})})]}),i.jsxs("div",{className:"p-4 space-y-4",children:[s&&i.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded text-sm",children:s}),P()]}),i.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-700",children:[i.jsx("button",{onClick:()=>{h(null),p(!1)},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:"Cancel"}),i.jsxs("button",{onClick:()=>v(u),disabled:r,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[r&&i.jsx(Tr,{size:16,className:"animate-spin"}),f?"Create":"Save"]})]})]})})},O=()=>m?i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Confirm Delete"}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["Are you sure you want to delete ",i.jsx("strong",{children:m.name}),"? This action cannot be undone."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>x(null),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:"Cancel"}),i.jsxs("button",{onClick:()=>w(m.id),disabled:r,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",children:[r&&i.jsx(Tr,{size:16,className:"animate-spin"}),"Delete"]})]})]})}):null;return i.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:[i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[i.jsx(Ix,{className:"text-cyan-400"}),"LitRPG Character Manager"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded text-sm",children:[i.jsx(ma,{size:14}),"Add Character"]}),i.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded text-sm",children:[i.jsx(yo,{size:14,className:e?"animate-spin":""}),"Refresh"]})]})]}),o&&i.jsx("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded text-sm",children:o}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Manage player and NPC characters. Other game data (classes, abilities, monsters, items) is managed via constants files."}),i.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:e?i.jsxs("div",{className:"flex items-center justify-center py-12",children:[i.jsx(Tr,{size:32,className:"animate-spin text-blue-400 mr-3"}),i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Loading characters..."})]}):s&&!u?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("p",{className:"text-red-500 mb-4",children:s}),i.jsx("button",{onClick:y,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:"Retry"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left",children:"Name"}),i.jsx("th",{className:"px-4 py-3 text-left",children:"Level"}),i.jsx("th",{className:"px-4 py-3 text-left",children:"Class"}),i.jsx("th",{className:"px-4 py-3 text-left",children:"Credits"}),i.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),i.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:c.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:"No characters found"})}):c.map(A=>i.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[i.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white",children:A.name}),i.jsx("td",{className:"px-4 py-3",children:A.level}),i.jsx("td",{className:"px-4 py-3",children:A.class_name||"Recruit"}),i.jsx("td",{className:"px-4 py-3",children:A.credits.toLocaleString()}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${A.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:A.status})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex gap-1 justify-end",children:[i.jsx("button",{onClick:()=>j(A),className:"text-blue-500 hover:text-blue-700 p-1",title:"Edit",children:i.jsx(R$,{size:16})}),i.jsx("button",{onClick:()=>x({id:A.id,name:A.name}),className:"text-red-500 hover:text-red-700 p-1",title:"Delete",children:i.jsx(oi,{size:16})})]})})]},A.id))})]})})})]}),E(),O()]})}const oP={id:null,hero_title:"Step into the worlds of",hero_tagline:"Shared Multiverse Portal",hero_description:"Starships, sky-pirates, cursed knights, and reluctant warlocks.",featured_story_id:null,show_featured_story:!0,show_activity_feed:!0,show_tools_section:!0,newsletter_cta_text:"Join the Newsletter",newsletter_url:"",brand_color:"#10b981",brand_color_dark:"#10b981"};function jpe(){const[e,t]=g.useState(oP),[r,n]=g.useState([]),[s,a]=g.useState(!0),[o,l]=g.useState(!1),[c,d]=g.useState(""),[u,h]=g.useState("");g.useEffect(()=>{f()},[]);const f=async()=>{try{const[x,b]=await Promise.all([fetch("/api/homepage/settings.php"),fetch("/api/stories/list.php")]),y=await x.json(),v=await b.json();if(y.success&&y.settings&&t({...oP,...y.settings}),v.success&&v.stories){const w=v.stories.filter(j=>j.status==="published").sort((j,N)=>(j.display_order??999)-(N.display_order??999));n(w)}}catch{d("Failed to load settings")}finally{a(!1)}},p=()=>{var v,w,j,N,k;const x=[];(v=e.hero_title)!=null&&v.trim()||x.push("Hero title is required"),(w=e.hero_tagline)!=null&&w.trim()||x.push("Hero tagline is required"),(j=e.newsletter_cta_text)!=null&&j.trim()||x.push("Newsletter CTA text is required"),(N=e.brand_color)!=null&&N.trim()||x.push("Brand color (light) is required"),(k=e.brand_color_dark)!=null&&k.trim()||x.push("Brand color (dark) is required");const b=/^#(?:[0-9a-fA-F]{3}){1,2}$/;e.brand_color&&!b.test(e.brand_color)&&x.push("Brand color (light) must be a valid hex (e.g., #10b981)"),e.brand_color_dark&&!b.test(e.brand_color_dark)&&x.push("Brand color (dark) must be a valid hex (e.g., #10b981)");const y=/^https?:\/\/.+/i;return e.newsletter_url&&!y.test(e.newsletter_url)&&x.push("Newsletter URL must start with http:// or https://"),x},m=async()=>{const x=p();if(x.length>0){d(x.join(". "));return}l(!0),d(""),h("");try{const y=await(await fetch("/api/homepage/settings.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(e)})).json();y.success?(h("Settings saved successfully!"),setTimeout(()=>h(""),3e3)):d(y.error||"Failed to save settings")}catch{d("Network error occurred")}finally{l(!1)}};return s?i.jsx("div",{className:"text-center py-8",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"Hero Settings"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Configure the homepage hero section"})]}),c&&i.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/20 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-400 rounded",children:c}),u&&i.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 border border-green-400 dark:border-green-800 text-green-700 dark:text-green-400 rounded",children:u}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hero Title *"}),i.jsx("input",{type:"text",value:e.hero_title,onChange:x=>t({...e,hero_title:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Step into the worlds of"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hero Tagline *"}),i.jsx("input",{type:"text",value:e.hero_tagline,onChange:x=>t({...e,hero_tagline:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Shared Multiverse Portal"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hero Description"}),i.jsx("textarea",{value:e.hero_description,onChange:x=>t({...e,hero_description:x.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Describe your shared universe..."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Featured Story"}),i.jsxs("select",{value:e.featured_story_id??"",onChange:x=>t({...e,featured_story_id:x.target.value?Number(x.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"",children:"Auto-select first story"}),r.map(x=>i.jsx("option",{value:x.id,children:x.title},x.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Brand Color (Light Theme) *"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"color",value:e.brand_color,onChange:x=>t({...e,brand_color:x.target.value}),className:"h-10 w-16 rounded border border-gray-300 dark:border-gray-600 cursor-pointer"}),i.jsx("input",{type:"text",value:e.brand_color,onChange:x=>t({...e,brand_color:x.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"#10b981"})]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Used for buttons, links, and accents in light mode"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Brand Color (Dark Theme) *"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"color",value:e.brand_color_dark,onChange:x=>t({...e,brand_color_dark:x.target.value}),className:"h-10 w-16 rounded border border-gray-300 dark:border-gray-600 cursor-pointer"}),i.jsx("input",{type:"text",value:e.brand_color_dark,onChange:x=>t({...e,brand_color_dark:x.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"#10b981"})]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Used for buttons, links, and accents in dark mode"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Newsletter CTA Text *"}),i.jsx("input",{type:"text",value:e.newsletter_cta_text,onChange:x=>t({...e,newsletter_cta_text:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Join the Newsletter"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Newsletter URL"}),i.jsx("input",{type:"url",value:e.newsletter_url,onChange:x=>t({...e,newsletter_url:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"https://..."})]})]}),i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg space-y-4",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Section Visibility"}),i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:e.show_featured_story,onChange:x=>t({...e,show_featured_story:x.target.checked}),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Show Featured Story Card"})]}),i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:e.show_activity_feed,onChange:x=>t({...e,show_activity_feed:x.target.checked}),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Show Activity Feed Section"})]}),i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:e.show_tools_section,onChange:x=>t({...e,show_tools_section:x.target.checked}),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Show Tools Section"})]})]}),i.jsx("div",{className:"pt-4",children:i.jsx("button",{onClick:m,disabled:o,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:o?"Saving...":"Save Settings"})})]})}const Mv={type:"misc",source:"",label:"",title:"",series_title:"",url:"",published_at:new Date().toISOString().slice(0,16),is_active:!0};function Npe(){const[e,t]=g.useState([]),[r,n]=g.useState(!0),[s,a]=g.useState(""),[o,l]=g.useState(""),[c,d]=g.useState(!1),[u,h]=g.useState(null),[f,p]=g.useState(Mv),[m,x]=g.useState(!1);g.useEffect(()=>{b()},[]);const b=async()=>{try{const C=await(await fetch("/api/homepage/activity.php")).json();C.success&&t(C.activities||[])}catch{a("Failed to load activities")}finally{n(!1)}},y=()=>{h(null),p({...Mv,published_at:new Date().toISOString().slice(0,16)}),d(!0)},v=S=>{var C;h(S),p({type:S.type,source:S.source,label:S.label||"",title:S.title,series_title:S.series_title||"",url:S.url||"",published_at:((C=S.published_at)==null?void 0:C.slice(0,16))||"",is_active:S.is_active}),d(!0)},w=()=>{d(!1),h(null),p(Mv)},j=async()=>{if(!f.title.trim()||!f.source.trim()){a("Title and Source are required");return}x(!0),a("");try{const S=u?"PUT":"POST",C=u?{...f,id:u.id}:f,E=await(await fetch("/api/homepage/activity.php",{method:S,headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(C)})).json();E.success?(l(u?"Activity updated!":"Activity created!"),setTimeout(()=>l(""),3e3),w(),b()):a(E.error||"Failed to save activity")}catch{a("Network error occurred")}finally{x(!1)}},N=async S=>{if(confirm("Delete this activity item?"))try{const P=await(await fetch("/api/homepage/activity.php",{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:S})})).json();P.success?(l("Activity deleted!"),setTimeout(()=>l(""),3e3),b()):a(P.error||"Failed to delete activity")}catch{a("Network error occurred")}},k=S=>S?new Date(S).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-";return r?i.jsx("div",{className:"text-center py-8",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"Activity Feed"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage homepage activity updates"})]}),i.jsx("button",{onClick:y,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"+ Add Activity"})]}),s&&i.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/20 border border-red-400 text-red-700 dark:text-red-400 rounded",children:s}),o&&i.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 border border-green-400 text-green-700 dark:text-green-400 rounded",children:o}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Type"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Source"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Title"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Date"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:"No activity items yet. Add your first update!"})}):e.map(S=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white capitalize",children:S.type}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:S.source}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white truncate max-w-xs",children:S.title}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:k(S.published_at)}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-1 text-xs rounded ${S.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:S.is_active?"Active":"Hidden"})}),i.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[i.jsx("button",{onClick:()=>v(S),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),i.jsx("button",{onClick:()=>N(S.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]},S.id))})]})}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:w,children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-lg mx-4",onClick:S=>S.stopPropagation(),children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:u?"Edit Activity":"Add Activity"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),i.jsxs("select",{value:f.type,onChange:S=>p({...f,type:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"chapter",children:"Chapter"}),i.jsx("option",{value:"blog",children:"Blog"}),i.jsx("option",{value:"announcement",children:"Announcement"}),i.jsx("option",{value:"misc",children:"Misc"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source *"}),i.jsx("input",{type:"text",value:f.source,onChange:S=>p({...f,source:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"RoyalRoad, Patreon, Blog..."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title *"}),i.jsx("input",{type:"text",value:f.title,onChange:S=>p({...f,title:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"Chapter 142  Signal in the Void"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Label"}),i.jsx("input",{type:"text",value:f.label,onChange:S=>p({...f,label:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"New Chapter"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Series"}),i.jsx("input",{type:"text",value:f.series_title,onChange:S=>p({...f,series_title:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"Destiny Among the Stars"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"URL"}),i.jsx("input",{type:"url",value:f.url,onChange:S=>p({...f,url:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"https://..."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Published At"}),i.jsx("input",{type:"datetime-local",value:f.published_at,onChange:S=>p({...f,published_at:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),i.jsx("div",{className:"flex items-end pb-2",children:i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:f.is_active,onChange:S=>p({...f,is_active:S.target.checked}),className:"h-4 w-4 rounded border-gray-300 text-blue-600"}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Active"})]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[i.jsx("button",{onClick:w,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",children:"Cancel"}),i.jsx("button",{onClick:j,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:m?"Saving...":u?"Update":"Create"})]})]})})]})}function Tk(e,t){return Tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Tk(e,t)}function L8(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Tk(e,t)}function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ze.apply(null,arguments)}function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}function Spe(e,t){if(ef(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cpe(e){var t=Spe(e,"string");return ef(t)=="symbol"?t:t+""}function _pe(e,t,r){return(t=Cpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lP(Object(r),!0).forEach(function(n){_pe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $n(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var dP=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),uP=function(){return Math.random().toString(36).substring(7).split("").join(".")},hP={INIT:"@@redux/INIT"+uP(),REPLACE:"@@redux/REPLACE"+uP()};function Epe(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function R8(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error($n(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error($n(1));return r(R8)(e,t)}if(typeof e!="function")throw new Error($n(2));var s=e,a=t,o=[],l=o,c=!1;function d(){l===o&&(l=o.slice())}function u(){if(c)throw new Error($n(3));return a}function h(x){if(typeof x!="function")throw new Error($n(4));if(c)throw new Error($n(5));var b=!0;return d(),l.push(x),function(){if(b){if(c)throw new Error($n(6));b=!1,d();var v=l.indexOf(x);l.splice(v,1),o=null}}}function f(x){if(!Epe(x))throw new Error($n(7));if(typeof x.type>"u")throw new Error($n(8));if(c)throw new Error($n(9));try{c=!0,a=s(a,x)}finally{c=!1}for(var b=o=l,y=0;y<b.length;y++){var v=b[y];v()}return x}function p(x){if(typeof x!="function")throw new Error($n(10));s=x,f({type:hP.REPLACE})}function m(){var x,b=h;return x={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error($n(11));function w(){v.next&&v.next(u())}w();var j=b(w);return{unsubscribe:j}}},x[dP]=function(){return this},x}return f({type:hP.INIT}),n={dispatch:f,subscribe:h,getState:u,replaceReducer:p},n[dP]=m,n}function fP(e,t){return function(){return t(e.apply(this,arguments))}}function pP(e,t){if(typeof e=="function")return fP(e,t);if(typeof e!="object"||e===null)throw new Error($n(16));var r={};for(var n in e){var s=e[n];typeof s=="function"&&(r[n]=fP(s,t))}return r}function B8(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,s){return function(){return n(s.apply(void 0,arguments))}})}function Ape(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var s=n.apply(void 0,arguments),a=function(){throw new Error($n(15))},o={getState:s.getState,dispatch:function(){return a.apply(void 0,arguments)}},l=t.map(function(c){return c(o)});return a=B8.apply(void 0,l)(s.dispatch),cP(cP({},s),{},{dispatch:a})}}}var z8=Ge.createContext(null);function Tpe(e){e()}var F8=Tpe,Ppe=function(t){return F8=t},Mpe=function(){return F8};function Ope(){var e=Mpe(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var s=t;s;)s.callback(),s=s.next})},get:function(){for(var s=[],a=t;a;)s.push(a),a=a.next;return s},subscribe:function(s){var a=!0,o=r={callback:s,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!a||t===null||(a=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var mP={notify:function(){},get:function(){return[]}};function H8(e,t){var r,n=mP;function s(h){return c(),n.subscribe(h)}function a(){n.notify()}function o(){u.onStateChange&&u.onStateChange()}function l(){return!!r}function c(){r||(r=t?t.addNestedSub(o):e.subscribe(o),n=Ope())}function d(){r&&(r(),r=void 0,n.clear(),n=mP)}var u={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:o,isSubscribed:l,trySubscribe:c,tryUnsubscribe:d,getListeners:function(){return n}};return u}var U8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?g.useLayoutEffect:g.useEffect;function $pe(e){var t=e.store,r=e.context,n=e.children,s=g.useMemo(function(){var l=H8(t);return{store:t,subscription:l}},[t]),a=g.useMemo(function(){return t.getState()},[t]);U8(function(){var l=s.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==t.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[s,a]);var o=r||z8;return Ge.createElement(o.Provider,{value:s},n)}function f0(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var W8={exports:{}},bt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lr=typeof Symbol=="function"&&Symbol.for,qS=Lr?Symbol.for("react.element"):60103,GS=Lr?Symbol.for("react.portal"):60106,Lb=Lr?Symbol.for("react.fragment"):60107,Rb=Lr?Symbol.for("react.strict_mode"):60108,Bb=Lr?Symbol.for("react.profiler"):60114,zb=Lr?Symbol.for("react.provider"):60109,Fb=Lr?Symbol.for("react.context"):60110,KS=Lr?Symbol.for("react.async_mode"):60111,Hb=Lr?Symbol.for("react.concurrent_mode"):60111,Ub=Lr?Symbol.for("react.forward_ref"):60112,Wb=Lr?Symbol.for("react.suspense"):60113,Dpe=Lr?Symbol.for("react.suspense_list"):60120,Vb=Lr?Symbol.for("react.memo"):60115,qb=Lr?Symbol.for("react.lazy"):60116,Ipe=Lr?Symbol.for("react.block"):60121,Lpe=Lr?Symbol.for("react.fundamental"):60117,Rpe=Lr?Symbol.for("react.responder"):60118,Bpe=Lr?Symbol.for("react.scope"):60119;function ps(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case qS:switch(e=e.type,e){case KS:case Hb:case Lb:case Bb:case Rb:case Wb:return e;default:switch(e=e&&e.$$typeof,e){case Fb:case Ub:case qb:case Vb:case zb:return e;default:return t}}case GS:return t}}}function V8(e){return ps(e)===Hb}bt.AsyncMode=KS;bt.ConcurrentMode=Hb;bt.ContextConsumer=Fb;bt.ContextProvider=zb;bt.Element=qS;bt.ForwardRef=Ub;bt.Fragment=Lb;bt.Lazy=qb;bt.Memo=Vb;bt.Portal=GS;bt.Profiler=Bb;bt.StrictMode=Rb;bt.Suspense=Wb;bt.isAsyncMode=function(e){return V8(e)||ps(e)===KS};bt.isConcurrentMode=V8;bt.isContextConsumer=function(e){return ps(e)===Fb};bt.isContextProvider=function(e){return ps(e)===zb};bt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===qS};bt.isForwardRef=function(e){return ps(e)===Ub};bt.isFragment=function(e){return ps(e)===Lb};bt.isLazy=function(e){return ps(e)===qb};bt.isMemo=function(e){return ps(e)===Vb};bt.isPortal=function(e){return ps(e)===GS};bt.isProfiler=function(e){return ps(e)===Bb};bt.isStrictMode=function(e){return ps(e)===Rb};bt.isSuspense=function(e){return ps(e)===Wb};bt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Lb||e===Hb||e===Bb||e===Rb||e===Wb||e===Dpe||typeof e=="object"&&e!==null&&(e.$$typeof===qb||e.$$typeof===Vb||e.$$typeof===zb||e.$$typeof===Fb||e.$$typeof===Ub||e.$$typeof===Lpe||e.$$typeof===Rpe||e.$$typeof===Bpe||e.$$typeof===Ipe)};bt.typeOf=ps;W8.exports=bt;var zpe=W8.exports,YS=zpe,Fpe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Hpe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Upe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},q8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},XS={};XS[YS.ForwardRef]=Upe;XS[YS.Memo]=q8;function gP(e){return YS.isMemo(e)?q8:XS[e.$$typeof]||Fpe}var Wpe=Object.defineProperty,Vpe=Object.getOwnPropertyNames,xP=Object.getOwnPropertySymbols,qpe=Object.getOwnPropertyDescriptor,Gpe=Object.getPrototypeOf,bP=Object.prototype;function G8(e,t,r){if(typeof t!="string"){if(bP){var n=Gpe(t);n&&n!==bP&&G8(e,n,r)}var s=Vpe(t);xP&&(s=s.concat(xP(t)));for(var a=gP(e),o=gP(t),l=0;l<s.length;++l){var c=s[l];if(!Hpe[c]&&!(r&&r[c])&&!(o&&o[c])&&!(a&&a[c])){var d=qpe(t,c);try{Wpe(e,c,d)}catch{}}}}return e}var Kpe=G8;const yP=Vn(Kpe);var K8={exports:{}},jt={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb=60103,Kb=60106,Kf=60107,Yf=60108,Xf=60114,Jf=60109,Zf=60110,Qf=60112,ep=60113,JS=60120,tp=60115,rp=60116,Y8=60121,X8=60122,J8=60117,Z8=60129,Q8=60131;if(typeof Symbol=="function"&&Symbol.for){var Br=Symbol.for;Gb=Br("react.element"),Kb=Br("react.portal"),Kf=Br("react.fragment"),Yf=Br("react.strict_mode"),Xf=Br("react.profiler"),Jf=Br("react.provider"),Zf=Br("react.context"),Qf=Br("react.forward_ref"),ep=Br("react.suspense"),JS=Br("react.suspense_list"),tp=Br("react.memo"),rp=Br("react.lazy"),Y8=Br("react.block"),X8=Br("react.server.block"),J8=Br("react.fundamental"),Z8=Br("react.debug_trace_mode"),Q8=Br("react.legacy_hidden")}function xa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Gb:switch(e=e.type,e){case Kf:case Xf:case Yf:case ep:case JS:return e;default:switch(e=e&&e.$$typeof,e){case Zf:case Qf:case rp:case tp:case Jf:return e;default:return t}}case Kb:return t}}}var Ype=Jf,Xpe=Gb,Jpe=Qf,Zpe=Kf,Qpe=rp,eme=tp,tme=Kb,rme=Xf,nme=Yf,sme=ep;jt.ContextConsumer=Zf;jt.ContextProvider=Ype;jt.Element=Xpe;jt.ForwardRef=Jpe;jt.Fragment=Zpe;jt.Lazy=Qpe;jt.Memo=eme;jt.Portal=tme;jt.Profiler=rme;jt.StrictMode=nme;jt.Suspense=sme;jt.isAsyncMode=function(){return!1};jt.isConcurrentMode=function(){return!1};jt.isContextConsumer=function(e){return xa(e)===Zf};jt.isContextProvider=function(e){return xa(e)===Jf};jt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gb};jt.isForwardRef=function(e){return xa(e)===Qf};jt.isFragment=function(e){return xa(e)===Kf};jt.isLazy=function(e){return xa(e)===rp};jt.isMemo=function(e){return xa(e)===tp};jt.isPortal=function(e){return xa(e)===Kb};jt.isProfiler=function(e){return xa(e)===Xf};jt.isStrictMode=function(e){return xa(e)===Yf};jt.isSuspense=function(e){return xa(e)===ep};jt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Kf||e===Xf||e===Z8||e===Yf||e===ep||e===JS||e===Q8||typeof e=="object"&&e!==null&&(e.$$typeof===rp||e.$$typeof===tp||e.$$typeof===Jf||e.$$typeof===Zf||e.$$typeof===Qf||e.$$typeof===J8||e.$$typeof===Y8||e[0]===X8)};jt.typeOf=xa;K8.exports=jt;var ame=K8.exports,ime=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],ome=["reactReduxForwardedRef"],lme=[],cme=[null,null];function dme(e,t){var r=e[1];return[t.payload,r+1]}function vP(e,t,r){U8(function(){return e.apply(void 0,t)},r)}function ume(e,t,r,n,s,a,o){e.current=n,t.current=s,r.current=!1,a.current&&(a.current=null,o())}function hme(e,t,r,n,s,a,o,l,c,d){if(e){var u=!1,h=null,f=function(){if(!u){var x=t.getState(),b,y;try{b=n(x,s.current)}catch(v){y=v,h=v}y||(h=null),b===a.current?o.current||c():(a.current=b,l.current=b,o.current=!0,d({type:"STORE_UPDATED",payload:{error:y}}))}};r.onStateChange=f,r.trySubscribe(),f();var p=function(){if(u=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h};return p}}var fme=function(){return[null,0]};function pme(e,t){t===void 0&&(t={});var r=t,n=r.getDisplayName,s=n===void 0?function(w){return"ConnectAdvanced("+w+")"}:n,a=r.methodName,o=a===void 0?"connectAdvanced":a,l=r.renderCountProp,c=l===void 0?void 0:l,d=r.shouldHandleStateChanges,u=d===void 0?!0:d,h=r.storeKey,f=h===void 0?"store":h;r.withRef;var p=r.forwardRef,m=p===void 0?!1:p,x=r.context,b=x===void 0?z8:x,y=f0(r,ime),v=b;return function(j){var N=j.displayName||j.name||"Component",k=s(N),S=ze({},y,{getDisplayName:s,methodName:o,renderCountProp:c,shouldHandleStateChanges:u,storeKey:f,displayName:k,wrappedComponentName:N,WrappedComponent:j}),C=y.pure;function P(I){return e(I.dispatch,S)}var E=C?g.useMemo:function(I){return I()};function O(I){var D=g.useMemo(function(){var st=I.reactReduxForwardedRef,H=f0(I,ome);return[I.context,st,H]},[I]),$=D[0],L=D[1],M=D[2],T=g.useMemo(function(){return $&&$.Consumer&&ame.isContextConsumer(Ge.createElement($.Consumer,null))?$:v},[$,v]),G=g.useContext(T),Y=!!I.store&&!!I.store.getState&&!!I.store.dispatch;G&&G.store;var ee=Y?I.store:G.store,R=g.useMemo(function(){return P(ee)},[ee]),B=g.useMemo(function(){if(!u)return cme;var st=H8(ee,Y?null:G.subscription),H=st.notifyNestedSubs.bind(st);return[st,H]},[ee,Y,G]),q=B[0],X=B[1],ue=g.useMemo(function(){return Y?G:ze({},G,{subscription:q})},[Y,G,q]),U=g.useReducer(dme,lme,fme),V=U[0],ge=V[0],te=U[1];if(ge&&ge.error)throw ge.error;var z=g.useRef(),le=g.useRef(M),ne=g.useRef(),be=g.useRef(!1),ye=E(function(){return ne.current&&M===le.current?ne.current:R(ee.getState(),M)},[ee,ge,M]);vP(ume,[le,z,be,M,ye,ne,X]),vP(hme,[u,ee,q,R,le,z,be,ne,X,te],[ee,q,R]);var Se=g.useMemo(function(){return Ge.createElement(j,ze({},ye,{ref:L}))},[L,j,ye]),He=g.useMemo(function(){return u?Ge.createElement(T.Provider,{value:ue},Se):Se},[T,Se,ue]);return He}var A=C?Ge.memo(O):O;if(A.WrappedComponent=j,A.displayName=O.displayName=k,m){var _=Ge.forwardRef(function(D,$){return Ge.createElement(A,ze({},D,{reactReduxForwardedRef:$}))});return _.displayName=k,_.WrappedComponent=j,yP(_,j)}return yP(A,j)}}function wP(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Ov(e,t){if(wP(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!wP(e[r[s]],t[r[s]]))return!1;return!0}function mme(e,t){var r={},n=function(o){var l=e[o];typeof l=="function"&&(r[o]=function(){return t(l.apply(void 0,arguments))})};for(var s in e)n(s);return r}function ZS(e){return function(r,n){var s=e(r,n);function a(){return s}return a.dependsOnOwnProps=!1,a}}function kP(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function e7(e,t){return function(n,s){s.displayName;var a=function(l,c){return a.dependsOnOwnProps?a.mapToProps(l,c):a.mapToProps(l)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,c){a.mapToProps=e,a.dependsOnOwnProps=kP(e);var d=a(l,c);return typeof d=="function"&&(a.mapToProps=d,a.dependsOnOwnProps=kP(d),d=a(l,c)),d},a}}function gme(e){return typeof e=="function"?e7(e):void 0}function xme(e){return e?void 0:ZS(function(t){return{dispatch:t}})}function bme(e){return e&&typeof e=="object"?ZS(function(t){return mme(e,t)}):void 0}const yme=[gme,xme,bme];function vme(e){return typeof e=="function"?e7(e):void 0}function wme(e){return e?void 0:ZS(function(){return{}})}const kme=[vme,wme];function jme(e,t,r){return ze({},r,e,t)}function Nme(e){return function(r,n){n.displayName;var s=n.pure,a=n.areMergedPropsEqual,o=!1,l;return function(d,u,h){var f=e(d,u,h);return o?(!s||!a(f,l))&&(l=f):(o=!0,l=f),l}}}function Sme(e){return typeof e=="function"?Nme(e):void 0}function Cme(e){return e?void 0:function(){return jme}}const _me=[Sme,Cme];var Eme=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Ame(e,t,r,n){return function(a,o){return r(e(a,o),t(n,o),o)}}function Tme(e,t,r,n,s){var a=s.areStatesEqual,o=s.areOwnPropsEqual,l=s.areStatePropsEqual,c=!1,d,u,h,f,p;function m(w,j){return d=w,u=j,h=e(d,u),f=t(n,u),p=r(h,f,u),c=!0,p}function x(){return h=e(d,u),t.dependsOnOwnProps&&(f=t(n,u)),p=r(h,f,u),p}function b(){return e.dependsOnOwnProps&&(h=e(d,u)),t.dependsOnOwnProps&&(f=t(n,u)),p=r(h,f,u),p}function y(){var w=e(d,u),j=!l(w,h);return h=w,j&&(p=r(h,f,u)),p}function v(w,j){var N=!o(j,u),k=!a(w,d,j,u);return d=w,u=j,N&&k?x():N?b():k?y():p}return function(j,N){return c?v(j,N):m(j,N)}}function Pme(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,s=t.initMergeProps,a=f0(t,Eme),o=r(e,a),l=n(e,a),c=s(e,a),d=a.pure?Tme:Ame;return d(o,l,c,e,a)}var Mme=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function $v(e,t,r){for(var n=t.length-1;n>=0;n--){var s=t[n](e);if(s)return s}return function(a,o){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function Ome(e,t){return e===t}function $me(e){var t=e===void 0?{}:e,r=t.connectHOC,n=r===void 0?pme:r,s=t.mapStateToPropsFactories,a=s===void 0?kme:s,o=t.mapDispatchToPropsFactories,l=o===void 0?yme:o,c=t.mergePropsFactories,d=c===void 0?_me:c,u=t.selectorFactory,h=u===void 0?Pme:u;return function(p,m,x,b){b===void 0&&(b={});var y=b,v=y.pure,w=v===void 0?!0:v,j=y.areStatesEqual,N=j===void 0?Ome:j,k=y.areOwnPropsEqual,S=k===void 0?Ov:k,C=y.areStatePropsEqual,P=C===void 0?Ov:C,E=y.areMergedPropsEqual,O=E===void 0?Ov:E,A=f0(y,Mme),_=$v(p,a,"mapStateToProps"),I=$v(m,l,"mapDispatchToProps"),D=$v(x,d,"mergeProps");return n(h,ze({methodName:"connect",getDisplayName:function(L){return"Connect("+L+")"},shouldHandleStateChanges:!!p,initMapStateToProps:_,initMapDispatchToProps:I,initMergeProps:D,pure:w,areStatesEqual:N,areOwnPropsEqual:S,areStatePropsEqual:P,areMergedPropsEqual:O},A))}}const t7=$me();Ppe(kf.unstable_batchedUpdates);function Dme(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function r7(e,t){var r=g.useState(function(){return{inputs:t,result:e()}})[0],n=g.useRef(!0),s=g.useRef(r),a=n.current||!!(t&&s.current.inputs&&Dme(t,s.current.inputs)),o=a?s.current:{inputs:t,result:e()};return g.useEffect(function(){n.current=!1,s.current=o},[o]),o.result}function Ime(e,t){return r7(function(){return e},t)}var ot=r7,De=Ime,aa=function(t){var r=t.top,n=t.right,s=t.bottom,a=t.left,o=n-a,l=s-r,c={top:r,right:n,bottom:s,left:a,width:o,height:l,x:a,y:r,center:{x:(n+a)/2,y:(s+r)/2}};return c},QS=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},jP=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Lme=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Dv={top:0,right:0,bottom:0,left:0},eC=function(t){var r=t.borderBox,n=t.margin,s=n===void 0?Dv:n,a=t.border,o=a===void 0?Dv:a,l=t.padding,c=l===void 0?Dv:l,d=aa(QS(r,s)),u=aa(jP(r,o)),h=aa(jP(u,c));return{marginBox:d,borderBox:aa(r),paddingBox:u,contentBox:h,margin:s,border:o,padding:c}},vs=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var s=Number(r);return isNaN(s)&&s8(),s},Rme=function(){return{x:window.pageXOffset,y:window.pageYOffset}},p0=function(t,r){var n=t.borderBox,s=t.border,a=t.margin,o=t.padding,l=Lme(n,r);return eC({borderBox:l,border:s,margin:a,padding:o})},m0=function(t,r){return r===void 0&&(r=Rme()),p0(t,r)},n7=function(t,r){var n={top:vs(r.marginTop),right:vs(r.marginRight),bottom:vs(r.marginBottom),left:vs(r.marginLeft)},s={top:vs(r.paddingTop),right:vs(r.paddingRight),bottom:vs(r.paddingBottom),left:vs(r.paddingLeft)},a={top:vs(r.borderTopWidth),right:vs(r.borderRightWidth),bottom:vs(r.borderBottomWidth),left:vs(r.borderLeftWidth)};return eC({borderBox:t,margin:n,padding:s,border:a})},s7=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return n7(r,n)},NP=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Bme(e,t){return!!(e===t||NP(e)&&NP(t))}function zme(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!Bme(e[r],t[r]))return!1;return!0}function Pr(e,t){t===void 0&&(t=zme);var r,n=[],s,a=!1;function o(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return a&&r===this&&t(l,n)||(s=e.apply(this,l),a=!0,r=this,n=l),s}return o}var tf=function(t){var r=[],n=null,s=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];r=l,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return s.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},s};function a7(e,t){}a7.bind(null,"warn");a7.bind(null,"error");function wo(){}function Fme(e,t){return ze({},e,{},t)}function Ms(e,t,r){var n=t.map(function(s){var a=Fme(r,s.options);return e.addEventListener(s.eventName,s.fn,a),function(){e.removeEventListener(s.eventName,s.fn,a)}});return function(){n.forEach(function(a){a()})}}var Hme="Invariant failed";function g0(e){this.message=e}g0.prototype.toString=function(){return this.message};function ke(e,t){throw new g0(Hme)}var Ume=function(e){L8(t,e);function t(){for(var n,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,n.callbacks=null,n.unbind=wo,n.onWindowError=function(l){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var d=l.error;d instanceof g0&&l.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(l){n.callbacks=l},n}var r=t.prototype;return r.componentDidMount=function(){this.unbind=Ms(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(s){if(s instanceof g0){this.setState({});return}throw s},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(Ge.Component),Wme=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,x0=function(t){return t+1},Vme=function(t){return`
  You have lifted an item in position `+x0(t.source.index)+`
`},i7=function(t,r){var n=t.droppableId===r.droppableId,s=x0(t.index),a=x0(r.index);return n?`
      You have moved the item from position `+s+`
      to position `+a+`
    `:`
    You have moved the item from position `+s+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+a+`
  `},o7=function(t,r,n){var s=r.droppableId===n.droppableId;return s?`
      The item `+t+`
      has been combined with `+n.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},qme=function(t){var r=t.destination;if(r)return i7(t.source,r);var n=t.combine;return n?o7(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},SP=function(t){return`
  The item has returned to its starting position
  of `+x0(t.index)+`
`},Gme=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+SP(t.source)+`
    `;var r=t.destination,n=t.combine;return r?`
      You have dropped the item.
      `+i7(t.source,r)+`
    `:n?`
      You have dropped the item.
      `+o7(t.draggableId,t.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+SP(t.source)+`
  `},Bm={dragHandleUsageInstructions:Wme,onDragStart:Vme,onDragUpdate:qme,onDragEnd:Gme},Dr={x:0,y:0},qr=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},ts=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},ko=function(t,r){return t.x===r.x&&t.y===r.y},Jd=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},Yl=function(t,r,n){var s;return n===void 0&&(n=0),s={},s[t]=r,s[t==="x"?"y":"x"]=n,s},rf=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},CP=function(t,r){return Math.min.apply(Math,r.map(function(n){return rf(t,n)}))},l7=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},Kme=function(e,t){var r=aa({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},np=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},_P=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},Yme={top:0,right:0,bottom:0,left:0},Xme=function(t,r){return r?np(t,r.scroll.diff.displacement):t},Jme=function(t,r,n){if(n&&n.increasedBy){var s;return ze({},t,(s={},s[r.end]=t[r.end]+n.increasedBy[r.line],s))}return t},Zme=function(t,r){return r&&r.shouldClipSubject?Kme(r.pageMarginBox,t):aa(t)},wd=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,s=e.frame,a=Xme(t.marginBox,s),o=Jme(a,n,r),l=Zme(o,s);return{page:t,withPlaceholder:r,active:l}},tC=function(e,t){e.frame||ke();var r=e.frame,n=ts(t,r.scroll.initial),s=Jd(n),a=ze({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:s},max:r.scroll.max}}),o=wd({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a}),l=ze({},e,{frame:a,subject:o});return l};function b0(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function rC(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function Go(e,t){if(e.find)return e.find(t);var r=rC(e,t);if(r!==-1)return e[r]}function c7(e){return Array.prototype.slice.call(e)}var d7=Pr(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),u7=Pr(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),Yb=Pr(function(e){return b0(e)}),Qme=Pr(function(e){return b0(e)}),Zd=Pr(function(e,t){var r=Qme(t).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,s){return n.descriptor.index-s.descriptor.index});return r});function nC(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Xb(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Jb=Pr(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),ege=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,s=e.insideDestination,a=e.previousImpact;if(!n.isCombineEnabled)return null;var o=nC(a);if(!o)return null;function l(x){var b={type:"COMBINE",combine:{draggableId:x,droppableId:n.descriptor.id}};return ze({},a,{at:b})}var c=a.displaced.all,d=c.length?c[0]:null;if(t)return d?l(d):null;var u=Jb(r,s);if(!d){if(!u.length)return null;var h=u[u.length-1];return l(h.descriptor.id)}var f=rC(u,function(x){return x.descriptor.id===d});f===-1&&ke();var p=f-1;if(p<0)return null;var m=u[p];return l(m.descriptor.id)},Qd=function(e,t){return e.descriptor.droppableId===t.descriptor.id},h7={point:Dr,value:0},nf={invisible:{},visible:{},all:[]},tge={displaced:nf,displacedBy:h7,at:null},$s=function(e,t){return function(r){return e<=r&&r<=t}},f7=function(e){var t=$s(e.top,e.bottom),r=$s(e.left,e.right);return function(n){var s=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);if(s)return!0;var a=t(n.top)||t(n.bottom),o=r(n.left)||r(n.right),l=a&&o;if(l)return!0;var c=n.top<e.top&&n.bottom>e.bottom,d=n.left<e.left&&n.right>e.right,u=c&&d;if(u)return!0;var h=c&&o||d&&a;return h}},rge=function(e){var t=$s(e.top,e.bottom),r=$s(e.left,e.right);return function(n){var s=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);return s}},sC={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},p7={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},nge=function(e){return function(t){var r=$s(t.top,t.bottom),n=$s(t.left,t.right);return function(s){return e===sC?r(s.top)&&r(s.bottom):n(s.left)&&n(s.right)}}},sge=function(t,r){var n=r.frame?r.frame.scroll.diff.displacement:Dr;return np(t,n)},age=function(t,r,n){return r.subject.active?n(r.subject.active)(t):!1},ige=function(t,r,n){return n(r)(t)},aC=function(t){var r=t.target,n=t.destination,s=t.viewport,a=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,l=a?sge(r,n):r;return age(l,n,o)&&ige(l,s,o)},oge=function(t){return aC(ze({},t,{isVisibleThroughFrameFn:f7}))},m7=function(t){return aC(ze({},t,{isVisibleThroughFrameFn:rge}))},lge=function(t){return aC(ze({},t,{isVisibleThroughFrameFn:nge(t.destination.axis)}))},cge=function(t,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var s=r.invisible,a=r.visible;if(s[t])return!1;var o=a[t];return o?o.shouldAnimate:!0};function dge(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return aa(QS(r,n))}function sf(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,s=e.viewport,a=e.forceShouldAnimate,o=e.last;return t.reduce(function(c,d){var u=dge(d,n),h=d.descriptor.id;c.all.push(h);var f=oge({target:u,destination:r,viewport:s,withDroppableDisplacement:!0});if(!f)return c.invisible[d.descriptor.id]=!0,c;var p=cge(h,o,a),m={draggableId:h,shouldAnimate:p};return c.visible[h]=m,c},{all:[],visible:{},invisible:{}})}function uge(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function EP(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,s=e.destination,a=uge(t,{inHomeList:r});return{displaced:nf,displacedBy:n,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function y0(e){var t=e.draggable,r=e.insideDestination,n=e.destination,s=e.viewport,a=e.displacedBy,o=e.last,l=e.index,c=e.forceShouldAnimate,d=Qd(t,n);if(l==null)return EP({insideDestination:r,inHomeList:d,displacedBy:a,destination:n});var u=Go(r,function(x){return x.descriptor.index===l});if(!u)return EP({insideDestination:r,inHomeList:d,displacedBy:a,destination:n});var h=Jb(t,r),f=r.indexOf(u),p=h.slice(f),m=sf({afterDragging:p,destination:n,displacedBy:a,last:o,viewport:s.frame,forceShouldAnimate:c});return{displaced:m,displacedBy:a,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:l}}}}function $o(e,t){return!!t.effected[e]}var hge=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,s=e.combine,a=e.afterCritical;if(!r.isCombineEnabled)return null;var o=s.draggableId,l=n[o],c=l.descriptor.index,d=$o(o,a);return d?t?c:c-1:t?c+1:c},fge=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,s=e.location;if(!n.length)return null;var a=s.index,o=t?a+1:a-1,l=n[0].descriptor.index,c=n[n.length-1].descriptor.index,d=r?c:c+1;return o<l||o>d?null:o},pge=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,s=e.draggables,a=e.destination,o=e.insideDestination,l=e.previousImpact,c=e.viewport,d=e.afterCritical,u=l.at;if(u||ke(),u.type==="REORDER"){var h=fge({isMovingForward:t,isInHomeList:r,location:u.destination,insideDestination:o});return h==null?null:y0({draggable:n,insideDestination:o,destination:a,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:h})}var f=hge({isMovingForward:t,destination:a,displaced:l.displaced,draggables:s,combine:u.combine,afterCritical:d});return f==null?null:y0({draggable:n,insideDestination:o,destination:a,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:f})},mge=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,s=e.displacedBy,a=!!(t.visible[n]||t.invisible[n]);return $o(n,r)?a?Dr:Jd(s.point):a?s.point:Dr},gge=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,s=Xb(r);s||ke();var a=s.draggableId,o=n[a].page.borderBox.center,l=mge({displaced:r.displaced,afterCritical:t,combineWith:a,displacedBy:r.displacedBy});return qr(o,l)},g7=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},xge=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},iC=function(t,r,n){return r[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2},AP=function(t){var r=t.axis,n=t.moveRelativeTo,s=t.isMoving;return Yl(r.line,n.marginBox[r.end]+g7(r,s),iC(r,n.marginBox,s))},TP=function(t){var r=t.axis,n=t.moveRelativeTo,s=t.isMoving;return Yl(r.line,n.marginBox[r.start]-xge(r,s),iC(r,n.marginBox,s))},bge=function(t){var r=t.axis,n=t.moveInto,s=t.isMoving;return Yl(r.line,n.contentBox[r.start]+g7(r,s),iC(r,n.contentBox,s))},yge=function(e){var t=e.impact,r=e.draggable,n=e.draggables,s=e.droppable,a=e.afterCritical,o=Zd(s.descriptor.id,n),l=r.page,c=s.axis;if(!o.length)return bge({axis:c,moveInto:s.page,isMoving:l});var d=t.displaced,u=t.displacedBy,h=d.all[0];if(h){var f=n[h];if($o(h,a))return TP({axis:c,moveRelativeTo:f.page,isMoving:l});var p=p0(f.page,u.point);return TP({axis:c,moveRelativeTo:p,isMoving:l})}var m=o[o.length-1];if(m.descriptor.id===r.descriptor.id)return l.borderBox.center;if($o(m.descriptor.id,a)){var x=p0(m.page,Jd(a.displacedBy.point));return AP({axis:c,moveRelativeTo:x,isMoving:l})}return AP({axis:c,moveRelativeTo:m.page,isMoving:l})},Pk=function(e,t){var r=e.frame;return r?qr(t,r.scroll.diff.displacement):t},vge=function(t){var r=t.impact,n=t.draggable,s=t.droppable,a=t.draggables,o=t.afterCritical,l=n.page.borderBox.center,c=r.at;return!s||!c?l:c.type==="REORDER"?yge({impact:r,draggable:n,draggables:a,droppable:s,afterCritical:o}):gge({impact:r,draggables:a,afterCritical:o})},Zb=function(e){var t=vge(e),r=e.droppable,n=r?Pk(r,t):t;return n},x7=function(e,t){var r=ts(t,e.scroll.initial),n=Jd(r),s=aa({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),a={frame:s,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}};return a};function PP(e,t){return e.map(function(r){return t[r]})}function wge(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}var kge=function(e){var t=e.impact,r=e.viewport,n=e.destination,s=e.draggables,a=e.maxScrollChange,o=x7(r,qr(r.scroll.current,a)),l=n.frame?tC(n,qr(n.frame.scroll.current,a)):n,c=t.displaced,d=sf({afterDragging:PP(c.all,s),destination:n,displacedBy:t.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),u=sf({afterDragging:PP(c.all,s),destination:l,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),h={},f={},p=[c,d,u];c.all.forEach(function(x){var b=wge(x,p);if(b){f[x]=b;return}h[x]=!0});var m=ze({},t,{displaced:{all:c.all,invisible:h,visible:f}});return m},jge=function(e,t){return qr(e.scroll.diff.displacement,t)},oC=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=e.viewport,s=jge(n,t),a=ts(s,r.page.borderBox.center);return qr(r.client.borderBox.center,a)},b7=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,s=e.viewport,a=e.withDroppableDisplacement,o=e.onlyOnMainAxis,l=o===void 0?!1:o,c=ts(n,t.page.borderBox.center),d=np(t.page.borderBox,c),u={target:d,destination:r,withDroppableDisplacement:a,viewport:s};return l?lge(u):m7(u)},Nge=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,s=e.draggables,a=e.previousImpact,o=e.viewport,l=e.previousPageBorderBoxCenter,c=e.previousClientSelection,d=e.afterCritical;if(!n.isEnabled)return null;var u=Zd(n.descriptor.id,s),h=Qd(r,n),f=ege({isMovingForward:t,draggable:r,destination:n,insideDestination:u,previousImpact:a})||pge({isMovingForward:t,isInHomeList:h,draggable:r,draggables:s,destination:n,insideDestination:u,previousImpact:a,viewport:o,afterCritical:d});if(!f)return null;var p=Zb({impact:f,draggable:r,droppable:n,draggables:s,afterCritical:d}),m=b7({draggable:r,destination:n,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(m){var x=oC({pageBorderBoxCenter:p,draggable:r,viewport:o});return{clientSelection:x,impact:f,scrollJumpRequest:null}}var b=ts(p,l),y=kge({impact:f,viewport:o,destination:n,draggables:s,maxScrollChange:b});return{clientSelection:c,impact:y,scrollJumpRequest:b}},fn=function(t){var r=t.subject.active;return r||ke(),r},Sge=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,s=e.droppables,a=e.viewport,o=n.subject.active;if(!o)return null;var l=n.axis,c=$s(o[l.start],o[l.end]),d=Yb(s).filter(function(h){return h!==n}).filter(function(h){return h.isEnabled}).filter(function(h){return!!h.subject.active}).filter(function(h){return f7(a.frame)(fn(h))}).filter(function(h){var f=fn(h);return t?o[l.crossAxisEnd]<f[l.crossAxisEnd]:f[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(h){var f=fn(h),p=$s(f[l.start],f[l.end]);return c(f[l.start])||c(f[l.end])||p(o[l.start])||p(o[l.end])}).sort(function(h,f){var p=fn(h)[l.crossAxisStart],m=fn(f)[l.crossAxisStart];return t?p-m:m-p}).filter(function(h,f,p){return fn(h)[l.crossAxisStart]===fn(p[0])[l.crossAxisStart]});if(!d.length)return null;if(d.length===1)return d[0];var u=d.filter(function(h){var f=$s(fn(h)[l.start],fn(h)[l.end]);return f(r[l.line])});return u.length===1?u[0]:u.length>1?u.sort(function(h,f){return fn(h)[l.start]-fn(f)[l.start]})[0]:d.sort(function(h,f){var p=CP(r,_P(fn(h))),m=CP(r,_P(fn(f)));return p!==m?p-m:fn(h)[l.start]-fn(f)[l.start]})[0]},MP=function(t,r){var n=t.page.borderBox.center;return $o(t.descriptor.id,r)?ts(n,r.displacedBy.point):n},Cge=function(t,r){var n=t.page.borderBox;return $o(t.descriptor.id,r)?np(n,Jd(r.displacedBy.point)):n},_ge=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,s=e.insideDestination,a=e.afterCritical,o=s.filter(function(l){return m7({target:Cge(l,a),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,c){var d=rf(t,Pk(n,MP(l,a))),u=rf(t,Pk(n,MP(c,a)));return d<u?-1:u<d?1:l.descriptor.index-c.descriptor.index});return o[0]||null},sp=Pr(function(t,r){var n=r[t.line];return{value:n,point:Yl(t.line,n)}}),Ege=function(t,r,n){var s=t.axis;if(t.descriptor.mode==="virtual")return Yl(s.line,r[s.line]);var a=t.subject.page.contentBox[s.size],o=Zd(t.descriptor.id,n),l=o.reduce(function(u,h){return u+h.client.marginBox[s.size]},0),c=l+r[s.line],d=c-a;return d<=0?null:Yl(s.line,d)},y7=function(t,r){return ze({},t,{scroll:ze({},t.scroll,{max:r})})},v7=function(t,r,n){var s=t.frame;Qd(r,t)&&ke(),t.subject.withPlaceholder&&ke();var a=sp(t.axis,r.displaceBy).point,o=Ege(t,a,n),l={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!s){var c=wd({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:t.frame});return ze({},t,{subject:c})}var d=o?qr(s.scroll.max,o):s.scroll.max,u=y7(s,d),h=wd({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:u});return ze({},t,{subject:h,frame:u})},Age=function(t){var r=t.subject.withPlaceholder;r||ke();var n=t.frame;if(!n){var s=wd({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return ze({},t,{subject:s})}var a=r.oldFrameMaxScroll;a||ke();var o=y7(n,a),l=wd({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return ze({},t,{subject:l,frame:o})},Tge=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,s=e.draggable,a=e.draggables,o=e.destination,l=e.viewport,c=e.afterCritical;if(!r){if(n.length)return null;var d={displaced:nf,displacedBy:h7,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},u=Zb({impact:d,draggable:s,droppable:o,draggables:a,afterCritical:c}),h=Qd(s,o)?o:v7(o,s,a),f=b7({draggable:s,destination:h,newPageBorderBoxCenter:u,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return f?d:null}var p=t[o.axis.line]<=r.page.borderBox.center[o.axis.line],m=function(){var b=r.descriptor.index;return r.descriptor.id===s.descriptor.id||p?b:b+1}(),x=sp(o.axis,s.displaceBy);return y0({draggable:s,insideDestination:n,destination:o,viewport:l,displacedBy:x,last:nf,index:m})},Pge=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,s=e.isOver,a=e.draggables,o=e.droppables,l=e.viewport,c=e.afterCritical,d=Sge({isMovingForward:t,pageBorderBoxCenter:r,source:s,droppables:o,viewport:l});if(!d)return null;var u=Zd(d.descriptor.id,a),h=_ge({pageBorderBoxCenter:r,viewport:l,destination:d,insideDestination:u,afterCritical:c}),f=Tge({previousPageBorderBoxCenter:r,destination:d,draggable:n,draggables:a,moveRelativeTo:h,insideDestination:u,viewport:l,afterCritical:c});if(!f)return null;var p=Zb({impact:f,draggable:n,droppable:d,draggables:a,afterCritical:c}),m=oC({pageBorderBoxCenter:p,draggable:n,viewport:l});return{clientSelection:m,impact:f,scrollJumpRequest:null}},ss=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},Mge=function(t,r){var n=ss(t);return n?r[n]:null},Oge=function(e){var t=e.state,r=e.type,n=Mge(t.impact,t.dimensions.droppables),s=!!n,a=t.dimensions.droppables[t.critical.droppable.id],o=n||a,l=o.axis.direction,c=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!s)return null;var d=r==="MOVE_DOWN"||r==="MOVE_RIGHT",u=t.dimensions.draggables[t.critical.draggable.id],h=t.current.page.borderBoxCenter,f=t.dimensions,p=f.draggables,m=f.droppables;return c?Nge({isMovingForward:d,previousPageBorderBoxCenter:h,draggable:u,destination:o,draggables:p,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Pge({isMovingForward:d,previousPageBorderBoxCenter:h,draggable:u,isOver:o,draggables:p,droppables:m,viewport:t.viewport,afterCritical:t.afterCritical})};function il(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function w7(e){var t=$s(e.top,e.bottom),r=$s(e.left,e.right);return function(s){return t(s.y)&&r(s.x)}}function $ge(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Dge(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,s=r.page.borderBox.center,a=n.map(function(o){var l=o.axis,c=Yl(o.axis.line,t.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:rf(s,c)}}).sort(function(o,l){return l.distance-o.distance});return a[0]?a[0].id:null}function Ige(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,s=Yb(n).filter(function(a){if(!a.isEnabled)return!1;var o=a.subject.active;if(!o||!$ge(t,o))return!1;if(w7(o)(t.center))return!0;var l=a.axis,c=o.center[l.crossAxisLine],d=t[l.crossAxisStart],u=t[l.crossAxisEnd],h=$s(o[l.crossAxisStart],o[l.crossAxisEnd]),f=h(d),p=h(u);return!f&&!p?!0:f?d<c:u>c});return s.length?s.length===1?s[0].descriptor.id:Dge({pageBorderBox:t,draggable:r,candidates:s}):null}var k7=function(t,r){return aa(np(t,r))},Lge=function(e,t){var r=e.frame;return r?k7(t,r.scroll.diff.value):t};function j7(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function Rge(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var Bge=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,s=e.insideDestination,a=e.last,o=e.viewport,l=e.afterCritical,c=n.axis,d=sp(n.axis,r.displaceBy),u=d.value,h=t[c.start],f=t[c.end],p=Jb(r,s),m=Go(p,function(b){var y=b.descriptor.id,v=b.page.borderBox.center[c.line],w=$o(y,l),j=j7({displaced:a,id:y});return w?j?f<=v:h<v-u:j?f<=v+u:h<v}),x=Rge({draggable:r,closest:m,inHomeList:Qd(r,n)});return y0({draggable:r,insideDestination:s,destination:n,viewport:o,last:a,displacedBy:d,index:x})},zge=4,Fge=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,s=e.destination,a=e.insideDestination,o=e.afterCritical;if(!s.isCombineEnabled)return null;var l=s.axis,c=sp(s.axis,t.displaceBy),d=c.value,u=r[l.start],h=r[l.end],f=Jb(t,a),p=Go(f,function(x){var b=x.descriptor.id,y=x.page.borderBox,v=y[l.size],w=v/zge,j=$o(b,o),N=j7({displaced:n.displaced,id:b});return j?N?h>y[l.start]+w&&h<y[l.end]-w:u>y[l.start]-d+w&&u<y[l.end]-d-w:N?h>y[l.start]+d+w&&h<y[l.end]+d-w:u>y[l.start]+w&&u<y[l.end]-w});if(!p)return null;var m={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:s.descriptor.id}}};return m},N7=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,s=e.droppables,a=e.previousImpact,o=e.viewport,l=e.afterCritical,c=k7(r.page.borderBox,t),d=Ige({pageBorderBox:c,draggable:r,droppables:s});if(!d)return tge;var u=s[d],h=Zd(u.descriptor.id,n),f=Lge(u,c);return Fge({pageBorderBoxWithDroppableScroll:f,draggable:r,previousImpact:a,destination:u,insideDestination:h,afterCritical:l})||Bge({pageBorderBoxWithDroppableScroll:f,draggable:r,destination:u,insideDestination:h,last:a.displaced,viewport:o,afterCritical:l})},lC=function(e,t){var r;return ze({},e,(r={},r[t.descriptor.id]=t,r))},Hge=function(t){var r=t.previousImpact,n=t.impact,s=t.droppables,a=ss(r),o=ss(n);if(!a||a===o)return s;var l=s[a];if(!l.subject.withPlaceholder)return s;var c=Age(l);return lC(s,c)},Uge=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,s=e.previousImpact,a=e.impact,o=Hge({previousImpact:s,impact:a,droppables:n}),l=ss(a);if(!l)return o;var c=n[l];if(Qd(t,c)||c.subject.withPlaceholder)return o;var d=v7(c,t,r);return lC(o,d)},oh=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,s=e.viewport,a=e.impact,o=e.scrollJumpRequest,l=s||t.viewport,c=n||t.dimensions,d=r||t.current.client.selection,u=ts(d,t.initial.client.selection),h={offset:u,selection:d,borderBoxCenter:qr(t.initial.client.borderBoxCenter,u)},f={selection:qr(h.selection,l.scroll.current),borderBoxCenter:qr(h.borderBoxCenter,l.scroll.current),offset:qr(h.offset,l.scroll.diff.value)},p={client:h,page:f};if(t.phase==="COLLECTING")return ze({phase:"COLLECTING"},t,{dimensions:c,viewport:l,current:p});var m=c.draggables[t.critical.draggable.id],x=a||N7({pageOffset:f.offset,draggable:m,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),b=Uge({draggable:m,impact:x,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),y=ze({},t,{current:p,dimensions:{draggables:c.draggables,droppables:b},impact:x,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return y};function Wge(e,t){return e.map(function(r){return t[r]})}var S7=function(e){var t=e.impact,r=e.viewport,n=e.draggables,s=e.destination,a=e.forceShouldAnimate,o=t.displaced,l=Wge(o.all,n),c=sf({afterDragging:l,destination:s,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:a,last:o});return ze({},t,{displaced:c})},C7=function(e){var t=e.impact,r=e.draggable,n=e.droppable,s=e.draggables,a=e.viewport,o=e.afterCritical,l=Zb({impact:t,draggable:r,draggables:s,droppable:n,afterCritical:o});return oC({pageBorderBoxCenter:l,draggable:r,viewport:a})},_7=function(e){var t=e.state,r=e.dimensions,n=e.viewport;t.movementMode!=="SNAP"&&ke();var s=t.impact,a=n||t.viewport,o=r||t.dimensions,l=o.draggables,c=o.droppables,d=l[t.critical.draggable.id],u=ss(s);u||ke();var h=c[u],f=S7({impact:s,viewport:a,destination:h,draggables:l}),p=C7({impact:f,draggable:d,droppable:h,draggables:l,viewport:a,afterCritical:t.afterCritical});return oh({impact:f,clientSelection:p,state:t,dimensions:o,viewport:a})},Vge=function(e){return{index:e.index,droppableId:e.droppableId}},E7=function(e){var t=e.draggable,r=e.home,n=e.draggables,s=e.viewport,a=sp(r.axis,t.displaceBy),o=Zd(r.descriptor.id,n),l=o.indexOf(t);l===-1&&ke();var c=o.slice(l+1),d=c.reduce(function(p,m){return p[m.descriptor.id]=!0,p},{}),u={inVirtualList:r.descriptor.mode==="virtual",displacedBy:a,effected:d},h=sf({afterDragging:c,destination:r,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),f={displaced:h,displacedBy:a,at:{type:"REORDER",destination:Vge(t.descriptor)}};return{impact:f,afterCritical:u}},qge=function(e,t){return{draggables:e.draggables,droppables:lC(e.droppables,t)}},Gge=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,s=p0(t.client,r),a=m0(s,n),o=ze({},t,{placeholder:ze({},t.placeholder,{client:s}),client:s,page:a});return o},Kge=function(e){var t=e.frame;return t||ke(),t},Yge=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,s=n.scroll.diff.value;return t.map(function(a){var o=a.descriptor.droppableId,l=r[o],c=Kge(l),d=c.scroll.diff.value,u=qr(s,d),h=Gge({draggable:a,offset:u,initialWindowScroll:n.scroll.initial});return h})},Xge=function(e){var t=e.state,r=e.published,n=r.modified.map(function(w){var j=t.dimensions.droppables[w.droppableId],N=tC(j,w.scroll);return N}),s=ze({},t.dimensions.droppables,{},d7(n)),a=u7(Yge({additions:r.additions,updatedDroppables:s,viewport:t.viewport})),o=ze({},t.dimensions.draggables,{},a);r.removals.forEach(function(w){delete o[w]});var l={droppables:s,draggables:o},c=ss(t.impact),d=c?l.droppables[c]:null,u=l.draggables[t.critical.draggable.id],h=l.droppables[t.critical.droppable.id],f=E7({draggable:u,home:h,draggables:o,viewport:t.viewport}),p=f.impact,m=f.afterCritical,x=d&&d.isCombineEnabled?t.impact:p,b=N7({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:x,viewport:t.viewport,afterCritical:m}),y=ze({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:b,onLiftImpact:p,dimensions:l,afterCritical:m,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return y;var v=ze({phase:"DROP_PENDING"},y,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return v},Mk=function(t){return t.movementMode==="SNAP"},Iv=function(t,r,n){var s=qge(t.dimensions,r);return!Mk(t)||n?oh({state:t,dimensions:s}):_7({state:t,dimensions:s})};function Lv(e){return e.isDragging&&e.movementMode==="SNAP"?ze({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var OP={phase:"IDLE",completed:null,shouldFlush:!1},Jge=function(e,t){if(e===void 0&&(e=OP),t.type==="FLUSH")return ze({},OP,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ke();var r=t.payload,n=r.critical,s=r.clientSelection,a=r.viewport,o=r.dimensions,l=r.movementMode,c=o.draggables[n.draggable.id],d=o.droppables[n.droppable.id],u={selection:s,borderBoxCenter:c.client.borderBox.center,offset:Dr},h={client:u,page:{selection:qr(u.selection,a.scroll.initial),borderBoxCenter:qr(u.selection,a.scroll.initial),offset:qr(u.selection,a.scroll.diff.value)}},f=Yb(o.droppables).every(function(te){return!te.isFixedOnPage}),p=E7({draggable:c,home:d,draggables:o.draggables,viewport:a}),m=p.impact,x=p.afterCritical,b={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:l,dimensions:o,initial:h,current:h,isWindowScrollAllowed:f,impact:m,afterCritical:x,onLiftImpact:m,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return b}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ke();var y=ze({phase:"COLLECTING"},e,{phase:"COLLECTING"});return y}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ke(),Xge({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;il(e)||ke();var v=t.payload.client;return ko(v,e.current.client.selection)?e:oh({state:e,clientSelection:v,impact:Mk(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Lv(e);il(e)||ke();var w=t.payload,j=w.id,N=w.newScroll,k=e.dimensions.droppables[j];if(!k)return e;var S=tC(k,N);return Iv(e,S,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;il(e)||ke();var C=t.payload,P=C.id,E=C.isEnabled,O=e.dimensions.droppables[P];O||ke(),O.isEnabled===E&&ke();var A=ze({},O,{isEnabled:E});return Iv(e,A,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;il(e)||ke();var _=t.payload,I=_.id,D=_.isCombineEnabled,$=e.dimensions.droppables[I];$||ke(),$.isCombineEnabled===D&&ke();var L=ze({},$,{isCombineEnabled:D});return Iv(e,L,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;il(e)||ke(),e.isWindowScrollAllowed||ke();var M=t.payload.newScroll;if(ko(e.viewport.scroll.current,M))return Lv(e);var T=x7(e.viewport,M);return Mk(e)?_7({state:e,viewport:T}):oh({state:e,viewport:T})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!il(e))return e;var G=t.payload.maxScroll;if(ko(G,e.viewport.scroll.max))return e;var Y=ze({},e.viewport,{scroll:ze({},e.viewport.scroll,{max:G})});return ze({phase:"DRAGGING"},e,{viewport:Y})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ke();var ee=Oge({state:e,type:t.type});return ee?oh({state:e,impact:ee.impact,clientSelection:ee.clientSelection,scrollJumpRequest:ee.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var R=t.payload.reason;e.phase!=="COLLECTING"&&ke();var B=ze({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:R});return B}if(t.type==="DROP_ANIMATE"){var q=t.payload,X=q.completed,ue=q.dropDuration,U=q.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ke();var V={phase:"DROP_ANIMATING",completed:X,dropDuration:ue,newHomeClientOffset:U,dimensions:e.dimensions};return V}if(t.type==="DROP_COMPLETE"){var ge=t.payload.completed;return{phase:"IDLE",completed:ge,shouldFlush:!1}}return e},Zge=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},Qge=function(t){return{type:"LIFT",payload:t}},e0e=function(t){return{type:"INITIAL_PUBLISH",payload:t}},t0e=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},r0e=function(){return{type:"COLLECTION_STARTING",payload:null}},n0e=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},s0e=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},a0e=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},A7=function(t){return{type:"MOVE",payload:t}},i0e=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},o0e=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},l0e=function(){return{type:"MOVE_UP",payload:null}},c0e=function(){return{type:"MOVE_DOWN",payload:null}},d0e=function(){return{type:"MOVE_RIGHT",payload:null}},u0e=function(){return{type:"MOVE_LEFT",payload:null}},cC=function(){return{type:"FLUSH",payload:null}},h0e=function(t){return{type:"DROP_ANIMATE",payload:t}},dC=function(t){return{type:"DROP_COMPLETE",payload:t}},T7=function(t){return{type:"DROP",payload:t}},f0e=function(t){return{type:"DROP_PENDING",payload:t}},P7=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},p0e=function(e){return function(t){var r=t.getState,n=t.dispatch;return function(s){return function(a){if(a.type!=="LIFT"){s(a);return}var o=a.payload,l=o.id,c=o.clientSelection,d=o.movementMode,u=r();u.phase==="DROP_ANIMATING"&&n(dC({completed:u.completed})),r().phase!=="IDLE"&&ke(),n(cC()),n(Zge({draggableId:l,movementMode:d}));var h={shouldPublishImmediately:d==="SNAP"},f={draggableId:l,scrollOptions:h},p=e.startPublishing(f),m=p.critical,x=p.dimensions,b=p.viewport;n(e0e({critical:m,dimensions:x,clientSelection:c,movementMode:d,viewport:b}))}}}},m0e=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},uC={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},af={opacity:{drop:0,combining:.7},scale:{drop:.75}},hC={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Qo=hC.outOfTheWay+"s "+uC.outOfTheWay,lh={fluid:"opacity "+Qo,snap:"transform "+Qo+", opacity "+Qo,drop:function(t){var r=t+"s "+uC.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+Qo,placeholder:"height "+Qo+", width "+Qo+", margin "+Qo},$P=function(t){return ko(t,Dr)?null:"translate("+t.x+"px, "+t.y+"px)"},Ok={moveTo:$P,drop:function(t,r){var n=$P(t);return n?r?n+" scale("+af.scale.drop+")":n:null}},$k=hC.minDropTime,M7=hC.maxDropTime,g0e=M7-$k,DP=1500,x0e=.6,b0e=function(e){var t=e.current,r=e.destination,n=e.reason,s=rf(t,r);if(s<=0)return $k;if(s>=DP)return M7;var a=s/DP,o=$k+g0e*a,l=n==="CANCEL"?o*x0e:o;return Number(l.toFixed(2))},y0e=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,s=e.viewport,a=e.afterCritical,o=n.draggables,l=n.droppables,c=ss(t),d=c?l[c]:null,u=l[r.descriptor.droppableId],h=C7({impact:t,draggable:r,draggables:o,afterCritical:a,droppable:d||u,viewport:s}),f=ts(h,r.client.borderBox.center);return f},v0e=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,s=e.home,a=e.viewport,o=e.onLiftImpact;if(!n.at||r!=="DROP"){var l=S7({draggables:t,impact:o,destination:s,viewport:a,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=ze({},n,{displaced:nf});return{impact:c,didDropInsideDroppable:!0}},w0e=function(e){var t=e.getState,r=e.dispatch;return function(n){return function(s){if(s.type!=="DROP"){n(s);return}var a=t(),o=s.payload.reason;if(a.phase==="COLLECTING"){r(f0e({reason:o}));return}if(a.phase!=="IDLE"){var l=a.phase==="DROP_PENDING"&&a.isWaiting;l&&ke(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||ke();var c=a.critical,d=a.dimensions,u=d.draggables[a.critical.draggable.id],h=v0e({reason:o,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),f=h.impact,p=h.didDropInsideDroppable,m=p?nC(f):null,x=p?Xb(f):null,b={index:c.draggable.index,droppableId:c.droppable.id},y={draggableId:u.descriptor.id,type:u.descriptor.type,source:b,reason:o,mode:a.movementMode,destination:m,combine:x},v=y0e({impact:f,draggable:u,dimensions:d,viewport:a.viewport,afterCritical:a.afterCritical}),w={critical:a.critical,afterCritical:a.afterCritical,result:y,impact:f},j=!ko(a.current.client.offset,v)||!!y.combine;if(!j){r(dC({completed:w}));return}var N=b0e({current:a.current.client.offset,destination:v,reason:o}),k={newHomeClientOffset:v,dropDuration:N,completed:w};r(h0e(k))}}}},O7=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function k0e(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function j0e(e){var t=e.onWindowScroll;function r(){t(O7())}var n=tf(r),s=k0e(n),a=wo;function o(){return a!==wo}function l(){o()&&ke(),a=Ms(window,[s])}function c(){o()||ke(),n.cancel(),a(),a=wo}return{start:l,stop:c,isActive:o}}var N0e=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},S0e=function(e){var t=j0e({onWindowScroll:function(n){e.dispatch(i0e({newScroll:n}))}});return function(r){return function(n){!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&N0e(n)&&t.stop(),r(n)}}},C0e=function(e){var t=!1,r=!1,n=setTimeout(function(){r=!0}),s=function(o){t||r||(t=!0,e(o),clearTimeout(n))};return s.wasCalled=function(){return t},s},_0e=function(){var e=[],t=function(a){var o=rC(e,function(d){return d.timerId===a});o===-1&&ke();var l=e.splice(o,1),c=l[0];c.callback()},r=function(a){var o=setTimeout(function(){return t(o)}),l={timerId:o,callback:a};e.push(l)},n=function(){if(e.length){var a=[].concat(e);e.length=0,a.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:n}},E0e=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},A0e=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},T0e=function(t,r){if(t===r)return!0;var n=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,s=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return n&&s},Pu=function(t,r){r()},tm=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},Rv=function(t,r,n,s){if(!t){n(s(r));return}var a=C0e(n),o={announce:a};t(r,o),a.wasCalled()||n(s(r))},P0e=function(e,t){var r=_0e(),n=null,s=function(f,p){n&&ke(),Pu("onBeforeCapture",function(){var m=e().onBeforeCapture;if(m){var x={draggableId:f,mode:p};m(x)}})},a=function(f,p){n&&ke(),Pu("onBeforeDragStart",function(){var m=e().onBeforeDragStart;m&&m(tm(f,p))})},o=function(f,p){n&&ke();var m=tm(f,p);n={mode:p,lastCritical:f,lastLocation:m.source,lastCombine:null},r.add(function(){Pu("onDragStart",function(){return Rv(e().onDragStart,m,t,Bm.onDragStart)})})},l=function(f,p){var m=nC(p),x=Xb(p);n||ke();var b=!T0e(f,n.lastCritical);b&&(n.lastCritical=f);var y=!E0e(n.lastLocation,m);y&&(n.lastLocation=m);var v=!A0e(n.lastCombine,x);if(v&&(n.lastCombine=x),!(!b&&!y&&!v)){var w=ze({},tm(f,n.mode),{combine:x,destination:m});r.add(function(){Pu("onDragUpdate",function(){return Rv(e().onDragUpdate,w,t,Bm.onDragUpdate)})})}},c=function(){n||ke(),r.flush()},d=function(f){n||ke(),n=null,Pu("onDragEnd",function(){return Rv(e().onDragEnd,f,t,Bm.onDragEnd)})},u=function(){if(n){var f=ze({},tm(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});d(f)}};return{beforeCapture:s,beforeStart:a,start:o,update:l,flush:c,drop:d,abort:u}},M0e=function(e,t){var r=P0e(e,t);return function(n){return function(s){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var o=a.payload.critical;r.beforeStart(o,a.payload.movementMode),s(a),r.start(o,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var l=a.payload.completed.result;r.flush(),s(a),r.drop(l);return}if(s(a),a.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},O0e=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&ke(),e.dispatch(dC({completed:n.completed}))}}},$0e=function(e){var t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(s){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&n(),s(a),a.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(P7())}};r=requestAnimationFrame(function(){r=null,t=Ms(window,[o])})}}}},D0e=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},I0e=function(e){var t=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;var s=n.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},L0e=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},R0e=function(e){return function(t){return function(r){return function(n){if(L0e(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var s=t.getState();s.phase!=="DRAGGING"&&ke(),e.start(s);return}r(n),e.scroll(t.getState())}}}},B0e=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(T7({reason:n.reason})))}}}},z0e=B8,F0e=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,n=e.styleMarshal,s=e.getResponders,a=e.announce,o=e.autoScroller;return R8(Jge,z0e(Ape(m0e(n),D0e(t),p0e(t),w0e,O0e,$0e,B0e,R0e(o),S0e,I0e(r),M0e(s,a))))},Bv=function(){return{additions:{},removals:{},modified:{}}};function H0e(e){var t=e.registry,r=e.callbacks,n=Bv(),s=null,a=function(){s||(r.collectionStarting(),s=requestAnimationFrame(function(){s=null;var u=n,h=u.additions,f=u.removals,p=u.modified,m=Object.keys(h).map(function(y){return t.draggable.getById(y).getDimension(Dr)}).sort(function(y,v){return y.descriptor.index-v.descriptor.index}),x=Object.keys(p).map(function(y){var v=t.droppable.getById(y),w=v.callbacks.getScrollWhileDragging();return{droppableId:y,scroll:w}}),b={additions:m,removals:Object.keys(f),modified:x};n=Bv(),r.publish(b)}))},o=function(u){var h=u.descriptor.id;n.additions[h]=u,n.modified[u.descriptor.droppableId]=!0,n.removals[h]&&delete n.removals[h],a()},l=function(u){var h=u.descriptor;n.removals[h.id]=!0,n.modified[h.droppableId]=!0,n.additions[h.id]&&delete n.additions[h.id],a()},c=function(){s&&(cancelAnimationFrame(s),s=null,n=Bv())};return{add:o,remove:l,stop:c}}var $7=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,s=e.width,a=ts({x:r,y:t},{x:s,y:n}),o={x:Math.max(0,a.x),y:Math.max(0,a.y)};return o},D7=function(){var e=document.documentElement;return e||ke(),e},I7=function(){var e=D7(),t=$7({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},U0e=function(){var e=O7(),t=I7(),r=e.y,n=e.x,s=D7(),a=s.clientWidth,o=s.clientHeight,l=n+a,c=r+o,d=aa({top:r,left:n,right:l,bottom:c}),u={frame:d,scroll:{initial:e,current:e,max:t,diff:{value:Dr,displacement:Dr}}};return u},W0e=function(e){var t=e.critical,r=e.scrollOptions,n=e.registry,s=U0e(),a=s.scroll.current,o=t.droppable,l=n.droppable.getAllByType(o.type).map(function(h){return h.callbacks.getDimensionAndWatchScroll(a,r)}),c=n.draggable.getAllByType(t.draggable.type).map(function(h){return h.getDimension(a)}),d={draggables:u7(c),droppables:d7(l)},u={dimensions:d,critical:t,viewport:s};return u};function IP(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var n=e.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var V0e=function(e,t){var r=null,n=H0e({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=function(p,m){e.droppable.exists(p)||ke(),r&&t.updateDroppableIsEnabled({id:p,isEnabled:m})},a=function(p,m){r&&(e.droppable.exists(p)||ke(),t.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:m}))},o=function(p,m){r&&(e.droppable.exists(p)||ke(),t.updateDroppableScroll({id:p,newScroll:m}))},l=function(p,m){r&&e.droppable.getById(p).callbacks.scroll(m)},c=function(){if(r){n.stop();var p=r.critical.droppable;e.droppable.getAllByType(p.type).forEach(function(m){return m.callbacks.dragStopped()}),r.unsubscribe(),r=null}},d=function(p){r||ke();var m=r.critical.draggable;p.type==="ADDITION"&&IP(e,m,p.value)&&n.add(p.value),p.type==="REMOVAL"&&IP(e,m,p.value)&&n.remove(p.value)},u=function(p){r&&ke();var m=e.draggable.getById(p.draggableId),x=e.droppable.getById(m.descriptor.droppableId),b={draggable:m.descriptor,droppable:x.descriptor},y=e.subscribe(d);return r={critical:b,unsubscribe:y},W0e({critical:b,registry:e,scrollOptions:p.scrollOptions})},h={updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:o,startPublishing:u,stopPublishing:c};return h},L7=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},q0e=function(e){window.scrollBy(e.x,e.y)},G0e=Pr(function(e){return Yb(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),K0e=function(t,r){var n=Go(G0e(r),function(s){return s.frame||ke(),w7(s.frame.pageMarginBox)(t)});return n},Y0e=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var s=n[r];return s.frame?s:null}var a=K0e(t,n);return a},jo={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},X0e=function(e,t){var r=e[t.size]*jo.startFromPercentage,n=e[t.size]*jo.maxScrollAtPercentage,s={startScrollingFrom:r,maxScrollValueAt:n};return s},R7=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,s=r-t;if(s===0)return 0;var a=n-t,o=a/s;return o},fC=1,J0e=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return jo.maxPixelScroll;if(e===t.startScrollingFrom)return fC;var r=R7({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=1-r,s=jo.maxPixelScroll*jo.ease(n);return Math.ceil(s)},LP=jo.durationDampening.accelerateAt,RP=jo.durationDampening.stopDampeningAt,Z0e=function(e,t){var r=t,n=RP,s=Date.now(),a=s-r;if(a>=RP)return e;if(a<LP)return fC;var o=R7({startOfRange:LP,endOfRange:n,current:a}),l=e*jo.ease(o);return Math.ceil(l)},BP=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,s=e.shouldUseTimeDampening,a=J0e(t,r);return a===0?0:s?Math.max(Z0e(a,n),fC):a},zP=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,s=e.axis,a=e.shouldUseTimeDampening,o=X0e(t,s),l=r[s.end]<r[s.start];return l?BP({distanceToEdge:r[s.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:a}):-1*BP({distanceToEdge:r[s.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:a})},Q0e=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,s=r.height>t.height,a=r.width>t.width;return!a&&!s?n:a&&s?null:{x:a?0:n.x,y:s?0:n.y}},exe=l7(function(e){return e===0?0:e}),B7=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,s=e.center,a=e.shouldUseTimeDampening,o={top:s.y-r.top,right:r.right-s.x,bottom:r.bottom-s.y,left:s.x-r.left},l=zP({container:r,distanceToEdges:o,dragStartTime:t,axis:sC,shouldUseTimeDampening:a}),c=zP({container:r,distanceToEdges:o,dragStartTime:t,axis:p7,shouldUseTimeDampening:a}),d=exe({x:c,y:l});if(ko(d,Dr))return null;var u=Q0e({container:r,subject:n,proposedScroll:d});return u?ko(u,Dr)?null:u:null},txe=l7(function(e){return e===0?0:e>0?1:-1}),pC=function(){var e=function(r,n){return r<0?r:r>n?r-n:0};return function(t){var r=t.current,n=t.max,s=t.change,a=qr(r,s),o={x:e(a.x,n.x),y:e(a.y,n.y)};return ko(o,Dr)?null:o}}(),z7=function(t){var r=t.max,n=t.current,s=t.change,a={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},o=txe(s),l=pC({max:a,current:n,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},mC=function(t,r){return z7({current:t.scroll.current,max:t.scroll.max,change:r})},rxe=function(t,r){if(!mC(t,r))return null;var n=t.scroll.max,s=t.scroll.current;return pC({current:s,max:n,change:r})},gC=function(t,r){var n=t.frame;return n?z7({current:n.scroll.current,max:n.scroll.max,change:r}):!1},nxe=function(t,r){var n=t.frame;return!n||!gC(t,r)?null:pC({current:n.scroll.current,max:n.scroll.max,change:r})},sxe=function(e){var t=e.viewport,r=e.subject,n=e.center,s=e.dragStartTime,a=e.shouldUseTimeDampening,o=B7({dragStartTime:s,container:t.frame,subject:r,center:n,shouldUseTimeDampening:a});return o&&mC(t,o)?o:null},axe=function(e){var t=e.droppable,r=e.subject,n=e.center,s=e.dragStartTime,a=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var l=B7({dragStartTime:s,container:o.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:a});return l&&gC(t,l)?l:null},FP=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,s=e.scrollWindow,a=e.scrollDroppable,o=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id],c=l.page.marginBox;if(t.isWindowScrollAllowed){var d=t.viewport,u=sxe({dragStartTime:r,viewport:d,subject:c,center:o,shouldUseTimeDampening:n});if(u){s(u);return}}var h=Y0e({center:o,destination:ss(t.impact),droppables:t.dimensions.droppables});if(h){var f=axe({dragStartTime:r,droppable:h,subject:c,center:o,shouldUseTimeDampening:n});f&&a(h.descriptor.id,f)}},ixe=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=tf(t),s=tf(r),a=null,o=function(u){a||ke();var h=a,f=h.shouldUseTimeDampening,p=h.dragStartTime;FP({state:u,scrollWindow:n,scrollDroppable:s,dragStartTime:p,shouldUseTimeDampening:f})},l=function(u){a&&ke();var h=Date.now(),f=!1,p=function(){f=!0};FP({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p}),a={dragStartTime:h,shouldUseTimeDampening:f},f&&o(u)},c=function(){a&&(n.cancel(),s.cancel(),a=null)};return{start:l,stop:c,scroll:o}},oxe=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,s=function(d,u){var h=qr(d.current.client.selection,u);t({client:h})},a=function(d,u){if(!gC(d,u))return u;var h=nxe(d,u);if(!h)return r(d.descriptor.id,u),null;var f=ts(u,h);r(d.descriptor.id,f);var p=ts(u,f);return p},o=function(d,u,h){if(!d||!mC(u,h))return h;var f=rxe(u,h);if(!f)return n(h),null;var p=ts(h,f);n(p);var m=ts(h,p);return m},l=function(d){var u=d.scrollJumpRequest;if(u){var h=ss(d.impact);h||ke();var f=a(d.dimensions.droppables[h],u);if(f){var p=d.viewport,m=o(d.isWindowScrollAllowed,p,f);m&&s(d,m)}}};return l},lxe=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,s=ixe({scrollWindow:r,scrollDroppable:t}),a=oxe({move:n,scrollWindow:r,scrollDroppable:t}),o=function(d){if(d.phase==="DRAGGING"){if(d.movementMode==="FLUID"){s.scroll(d);return}d.scrollJumpRequest&&a(d)}},l={scroll:o,start:s.start,stop:s.stop};return l},kd="data-rbd",jd=function(){var e=kd+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Dk=function(){var e=kd+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),cxe=function(){var e=kd+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),HP={contextId:kd+"-scroll-container-context-id"},dxe=function(t){return function(r){return"["+r+'="'+t+'"]'}},Mu=function(t,r){return t.map(function(n){var s=n.styles[r];return s?n.selector+" { "+s+" }":""}).join(" ")},uxe="pointer-events: none;",hxe=function(e){var t=dxe(e),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(jd.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:uxe,dropAnimating:l}}}(),n=function(){var l=`
      transition: `+lh.outOfTheWay+`;
    `;return{selector:t(Dk.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),s={selector:t(cxe.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[n,r,s,a];return{always:Mu(o,"always"),resting:Mu(o,"resting"),dragging:Mu(o,"dragging"),dropAnimating:Mu(o,"dropAnimating"),userCancel:Mu(o,"userCancel")}},as=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?g.useLayoutEffect:g.useEffect,zv=function(){var t=document.querySelector("head");return t||ke(),t},UP=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function fxe(e,t){var r=ot(function(){return hxe(e)},[e]),n=g.useRef(null),s=g.useRef(null),a=De(Pr(function(h){var f=s.current;f||ke(),f.textContent=h}),[]),o=De(function(h){var f=n.current;f||ke(),f.textContent=h},[]);as(function(){!n.current&&!s.current||ke();var h=UP(t),f=UP(t);return n.current=h,s.current=f,h.setAttribute(kd+"-always",e),f.setAttribute(kd+"-dynamic",e),zv().appendChild(h),zv().appendChild(f),o(r.always),a(r.resting),function(){var p=function(x){var b=x.current;b||ke(),zv().removeChild(b),x.current=null};p(n),p(s)}},[t,o,a,r.always,r.resting,e]);var l=De(function(){return a(r.dragging)},[a,r.dragging]),c=De(function(h){if(h==="DROP"){a(r.dropAnimating);return}a(r.userCancel)},[a,r.dropAnimating,r.userCancel]),d=De(function(){s.current&&a(r.resting)},[a,r.resting]),u=ot(function(){return{dragging:l,dropping:c,resting:d}},[l,c,d]);return u}var F7=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Qb(e){return e instanceof F7(e).HTMLElement}function pxe(e,t){var r="["+jd.contextId+'="'+e+'"]',n=c7(document.querySelectorAll(r));if(!n.length)return null;var s=Go(n,function(a){return a.getAttribute(jd.draggableId)===t});return!s||!Qb(s)?null:s}function mxe(e){var t=g.useRef({}),r=g.useRef(null),n=g.useRef(null),s=g.useRef(!1),a=De(function(f,p){var m={id:f,focus:p};return t.current[f]=m,function(){var b=t.current,y=b[f];y!==m&&delete b[f]}},[]),o=De(function(f){var p=pxe(e,f);p&&p!==document.activeElement&&p.focus()},[e]),l=De(function(f,p){r.current===f&&(r.current=p)},[]),c=De(function(){n.current||s.current&&(n.current=requestAnimationFrame(function(){n.current=null;var f=r.current;f&&o(f)}))},[o]),d=De(function(f){r.current=null;var p=document.activeElement;p&&p.getAttribute(jd.draggableId)===f&&(r.current=f)},[]);as(function(){return s.current=!0,function(){s.current=!1;var f=n.current;f&&cancelAnimationFrame(f)}},[]);var u=ot(function(){return{register:a,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[a,d,c,l]);return u}function gxe(){var e={draggables:{},droppables:{}},t=[];function r(h){return t.push(h),function(){var p=t.indexOf(h);p!==-1&&t.splice(p,1)}}function n(h){t.length&&t.forEach(function(f){return f(h)})}function s(h){return e.draggables[h]||null}function a(h){var f=s(h);return f||ke(),f}var o={register:function(f){e.draggables[f.descriptor.id]=f,n({type:"ADDITION",value:f})},update:function(f,p){var m=e.draggables[p.descriptor.id];m&&m.uniqueId===f.uniqueId&&(delete e.draggables[p.descriptor.id],e.draggables[f.descriptor.id]=f)},unregister:function(f){var p=f.descriptor.id,m=s(p);m&&f.uniqueId===m.uniqueId&&(delete e.draggables[p],n({type:"REMOVAL",value:f}))},getById:a,findById:s,exists:function(f){return!!s(f)},getAllByType:function(f){return b0(e.draggables).filter(function(p){return p.descriptor.type===f})}};function l(h){return e.droppables[h]||null}function c(h){var f=l(h);return f||ke(),f}var d={register:function(f){e.droppables[f.descriptor.id]=f},unregister:function(f){var p=l(f.descriptor.id);p&&f.uniqueId===p.uniqueId&&delete e.droppables[f.descriptor.id]},getById:c,findById:l,exists:function(f){return!!l(f)},getAllByType:function(f){return b0(e.droppables).filter(function(p){return p.descriptor.type===f})}};function u(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:d,subscribe:r,clean:u}}function xxe(){var e=ot(gxe,[]);return g.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var xC=Ge.createContext(null),v0=function(){var e=document.body;return e||ke(),e},bxe={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},yxe=function(t){return"rbd-announcement-"+t};function vxe(e){var t=ot(function(){return yxe(e)},[e]),r=g.useRef(null);g.useEffect(function(){var a=document.createElement("div");return r.current=a,a.id=t,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),ze(a.style,bxe),v0().appendChild(a),function(){setTimeout(function(){var c=v0();c.contains(a)&&c.removeChild(a),a===r.current&&(r.current=null)})}},[t]);var n=De(function(s){var a=r.current;if(a){a.textContent=s;return}},[]);return n}var wxe=0,kxe={separator:"::"};function bC(e,t){return t===void 0&&(t=kxe),ot(function(){return""+e+t.separator+wxe++},[t.separator,e])}function jxe(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function Nxe(e){var t=e.contextId,r=e.text,n=bC("hidden-text",{separator:"-"}),s=ot(function(){return jxe({contextId:t,uniqueId:n})},[n,t]);return g.useEffect(function(){var o=document.createElement("div");return o.id=s,o.textContent=r,o.style.display="none",v0().appendChild(o),function(){var c=v0();c.contains(o)&&c.removeChild(o)}},[s,r]),s}var ey=Ge.createContext(null);function H7(e){var t=g.useRef(e);return g.useEffect(function(){t.current=e}),t}function Sxe(){var e=null;function t(){return!!e}function r(o){return o===e}function n(o){e&&ke();var l={abandon:o};return e=l,l}function s(){e||ke(),e=null}function a(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:r,claim:n,release:s,tryAbandon:a}}var Cxe=9,_xe=13,yC=27,U7=32,Exe=33,Axe=34,Txe=35,Pxe=36,Mxe=37,Oxe=38,$xe=39,Dxe=40,rm,Ixe=(rm={},rm[_xe]=!0,rm[Cxe]=!0,rm),W7=function(e){Ixe[e.keyCode]&&e.preventDefault()},ty=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=Go(t,function(n){return"on"+n in document});return r||e}(),V7=0,WP=5;function Lxe(e,t){return Math.abs(t.x-e.x)>=WP||Math.abs(t.y-e.y)>=WP}var VP={type:"IDLE"};function Rxe(e){var t=e.cancel,r=e.completed,n=e.getPhase,s=e.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,c=o.clientX,d=o.clientY;if(l===V7){var u={x:c,y:d},h=n();if(h.type==="DRAGGING"){o.preventDefault(),h.actions.move(u);return}h.type!=="PENDING"&&ke();var f=h.point;if(Lxe(f,u)){o.preventDefault();var p=h.actions.fluidLift(u);s({type:"DRAGGING",actions:p})}}}},{eventName:"mouseup",fn:function(o){var l=n();if(l.type!=="DRAGGING"){t();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){n().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var l=n();if(l.type==="PENDING"){t();return}if(o.keyCode===yC){o.preventDefault(),t();return}W7(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=n();if(l.type==="IDLE"&&ke(),l.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:ty,fn:t}]}function Bxe(e){var t=g.useRef(VP),r=g.useRef(wo),n=ot(function(){return{eventName:"mousedown",fn:function(h){if(!h.defaultPrevented&&h.button===V7&&!(h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)){var f=e.findClosestDraggableId(h);if(f){var p=e.tryGetLock(f,o,{sourceEvent:h});if(p){h.preventDefault();var m={x:h.clientX,y:h.clientY};r.current(),d(p,m)}}}}}},[e]),s=ot(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(h){if(!h.defaultPrevented){var f=e.findClosestDraggableId(h);if(f){var p=e.findOptionsForDraggable(f);p&&(p.shouldRespectForcePress||e.canGetLock(f)&&h.preventDefault())}}}}},[e]),a=De(function(){var h={passive:!1,capture:!0};r.current=Ms(window,[s,n],h)},[s,n]),o=De(function(){var u=t.current;u.type!=="IDLE"&&(t.current=VP,r.current(),a())},[a]),l=De(function(){var u=t.current;o(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[o]),c=De(function(){var h={capture:!0,passive:!1},f=Rxe({cancel:l,completed:o,getPhase:function(){return t.current},setPhase:function(m){t.current=m}});r.current=Ms(window,f,h)},[l,o]),d=De(function(h,f){t.current.type!=="IDLE"&&ke(),t.current={type:"PENDING",point:f,actions:h},c()},[c]);as(function(){return a(),function(){r.current()}},[a])}var vc;function zxe(){}var Fxe=(vc={},vc[Axe]=!0,vc[Exe]=!0,vc[Pxe]=!0,vc[Txe]=!0,vc);function Hxe(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===yC){a.preventDefault(),r();return}if(a.keyCode===U7){a.preventDefault(),n();return}if(a.keyCode===Dxe){a.preventDefault(),e.moveDown();return}if(a.keyCode===Oxe){a.preventDefault(),e.moveUp();return}if(a.keyCode===$xe){a.preventDefault(),e.moveRight();return}if(a.keyCode===Mxe){a.preventDefault(),e.moveLeft();return}if(Fxe[a.keyCode]){a.preventDefault();return}W7(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:ty,fn:r}]}function Uxe(e){var t=g.useRef(zxe),r=ot(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==U7)return;var o=e.findClosestDraggableId(a);if(!o)return;var l=e.tryGetLock(o,u,{sourceEvent:a});if(!l)return;a.preventDefault();var c=!0,d=l.snapLift();t.current();function u(){c||ke(),c=!1,t.current(),n()}t.current=Ms(window,Hxe(d,u),{capture:!0,passive:!1})}}},[e]),n=De(function(){var a={passive:!1,capture:!0};t.current=Ms(window,[r],a)},[r]);as(function(){return n(),function(){t.current()}},[n])}var Fv={type:"IDLE"},Wxe=120,Vxe=.15;function qxe(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(s){s.preventDefault()}},{eventName:"keydown",fn:function(s){if(r().type!=="DRAGGING"){t();return}s.keyCode===yC&&s.preventDefault(),t()}},{eventName:ty,fn:t}]}function Gxe(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var o=n();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var l=a.touches[0],c=l.clientX,d=l.clientY,u={x:c,y:d};a.preventDefault(),o.actions.move(u)}},{eventName:"touchend",fn:function(a){var o=n();if(o.type!=="DRAGGING"){t();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(a){if(n().type!=="DRAGGING"){t();return}a.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(a){var o=n();o.type==="IDLE"&&ke();var l=a.touches[0];if(l){var c=l.force>=Vxe;if(c){var d=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){d&&t();return}if(d){if(o.hasMoved){a.preventDefault();return}t();return}a.preventDefault()}}}},{eventName:ty,fn:t}]}function Kxe(e){var t=g.useRef(Fv),r=g.useRef(wo),n=De(function(){return t.current},[]),s=De(function(p){t.current=p},[]),a=ot(function(){return{eventName:"touchstart",fn:function(p){if(!p.defaultPrevented){var m=e.findClosestDraggableId(p);if(m){var x=e.tryGetLock(m,l,{sourceEvent:p});if(x){var b=p.touches[0],y=b.clientX,v=b.clientY,w={x:y,y:v};r.current(),h(x,w)}}}}}},[e]),o=De(function(){var p={capture:!0,passive:!1};r.current=Ms(window,[a],p)},[a]),l=De(function(){var f=t.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),s(Fv),r.current(),o())},[o,s]),c=De(function(){var f=t.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),d=De(function(){var p={capture:!0,passive:!1},m={cancel:c,completed:l,getPhase:n},x=Ms(window,Gxe(m),p),b=Ms(window,qxe(m),p);r.current=function(){x(),b()}},[c,n,l]),u=De(function(){var p=n();p.type!=="PENDING"&&ke();var m=p.actions.fluidLift(p.point);s({type:"DRAGGING",actions:m,hasMoved:!1})},[n,s]),h=De(function(p,m){n().type!=="IDLE"&&ke();var x=setTimeout(u,Wxe);s({type:"PENDING",point:m,actions:p,longPressTimerId:x}),d()},[d,n,s,u]);as(function(){return o(),function(){r.current();var m=n();m.type==="PENDING"&&(clearTimeout(m.longPressTimerId),s(Fv))}},[n,o,s]),as(function(){var p=Ms(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return p},[])}var Yxe={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function q7(e,t){if(t==null)return!1;var r=!!Yxe[t.tagName.toLowerCase()];if(r)return!0;var n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:q7(e,t.parentElement)}function Xxe(e,t){var r=t.target;return Qb(r)?q7(e,r):!1}var Jxe=function(e){return aa(e.getBoundingClientRect()).center};function Zxe(e){return e instanceof F7(e).Element}var Qxe=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=Go(t,function(n){return n in Element.prototype});return r||e}();function G7(e,t){return e==null?null:e[Qxe](t)?e:G7(e.parentElement,t)}function ebe(e,t){return e.closest?e.closest(t):G7(e,t)}function tbe(e){return"["+jd.contextId+'="'+e+'"]'}function rbe(e,t){var r=t.target;if(!Zxe(r))return null;var n=tbe(e),s=ebe(r,n);return!s||!Qb(s)?null:s}function nbe(e,t){var r=rbe(e,t);return r?r.getAttribute(jd.draggableId):null}function sbe(e,t){var r="["+Dk.contextId+'="'+e+'"]',n=c7(document.querySelectorAll(r)),s=Go(n,function(a){return a.getAttribute(Dk.id)===t});return!s||!Qb(s)?null:s}function abe(e){e.preventDefault()}function nm(e){var t=e.expected,r=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||t!==r)}function K7(e){var t=e.lockAPI,r=e.store,n=e.registry,s=e.draggableId;if(t.isClaimed())return!1;var a=n.draggable.findById(s);return!(!a||!a.options.isEnabled||!L7(r.getState(),s))}function ibe(e){var t=e.lockAPI,r=e.contextId,n=e.store,s=e.registry,a=e.draggableId,o=e.forceSensorStop,l=e.sourceEvent,c=K7({lockAPI:t,store:n,registry:s,draggableId:a});if(!c)return null;var d=s.draggable.getById(a),u=sbe(r,d.descriptor.id);if(!u||l&&!d.options.canDragInteractiveElements&&Xxe(u,l))return null;var h=t.claim(o||wo),f="PRE_DRAG";function p(){return d.options.shouldRespectForcePress}function m(){return t.isActive(h)}function x(k,S){nm({expected:k,phase:f,isLockActive:m,shouldWarn:!0})&&n.dispatch(S())}var b=x.bind(null,"DRAGGING");function y(k){function S(){t.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(S(),f!=="PRE_DRAG"&&ke()),n.dispatch(Qge(k.liftActionArgs)),f="DRAGGING";function C(P,E){if(E===void 0&&(E={shouldBlockNextClick:!1}),k.cleanup(),E.shouldBlockNextClick){var O=Ms(window,[{eventName:"click",fn:abe,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(O)}S(),n.dispatch(T7({reason:P}))}return ze({isActive:function(){return nm({expected:"DRAGGING",phase:f,isLockActive:m,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(E){return C("DROP",E)},cancel:function(E){return C("CANCEL",E)}},k.actions)}function v(k){var S=tf(function(P){b(function(){return A7({client:P})})}),C=y({liftActionArgs:{id:a,clientSelection:k,movementMode:"FLUID"},cleanup:function(){return S.cancel()},actions:{move:S}});return ze({},C,{move:S})}function w(){var k={moveUp:function(){return b(l0e)},moveRight:function(){return b(d0e)},moveDown:function(){return b(c0e)},moveLeft:function(){return b(u0e)}};return y({liftActionArgs:{id:a,clientSelection:Jxe(u),movementMode:"SNAP"},cleanup:wo,actions:k})}function j(){var k=nm({expected:"PRE_DRAG",phase:f,isLockActive:m,shouldWarn:!0});k&&t.release()}var N={isActive:function(){return nm({expected:"PRE_DRAG",phase:f,isLockActive:m,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:v,snapLift:w,abort:j};return N}var obe=[Bxe,Uxe,Kxe];function lbe(e){var t=e.contextId,r=e.store,n=e.registry,s=e.customSensors,a=e.enableDefaultSensors,o=[].concat(a?obe:[],s||[]),l=g.useState(function(){return Sxe()})[0],c=De(function(v,w){v.isDragging&&!w.isDragging&&l.tryAbandon()},[l]);as(function(){var v=r.getState(),w=r.subscribe(function(){var j=r.getState();c(v,j),v=j});return w},[l,r,c]),as(function(){return l.tryAbandon},[l.tryAbandon]);for(var d=De(function(y){return K7({lockAPI:l,registry:n,store:r,draggableId:y})},[l,n,r]),u=De(function(y,v,w){return ibe({lockAPI:l,registry:n,contextId:t,store:r,draggableId:y,forceSensorStop:v,sourceEvent:w&&w.sourceEvent?w.sourceEvent:null})},[t,l,n,r]),h=De(function(y){return nbe(t,y)},[t]),f=De(function(y){var v=n.draggable.findById(y);return v?v.options:null},[n.draggable]),p=De(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(cC()))},[l,r]),m=De(l.isClaimed,[l]),x=ot(function(){return{canGetLock:d,tryGetLock:u,findClosestDraggableId:h,findOptionsForDraggable:f,tryReleaseLock:p,isLockClaimed:m}},[d,u,h,f,p,m]),b=0;b<o.length;b++)o[b](x)}var cbe=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Ou(e){return e.current||ke(),e.current}function dbe(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,s=e.nonce,a=e.dragHandleUsageInstructions,o=g.useRef(null),l=H7(e),c=De(function(){return cbe(l.current)},[l]),d=vxe(t),u=Nxe({contextId:t,text:a}),h=fxe(t,s),f=De(function(P){Ou(o).dispatch(P)},[]),p=ot(function(){return pP({publishWhileDragging:t0e,updateDroppableScroll:n0e,updateDroppableIsEnabled:s0e,updateDroppableIsCombineEnabled:a0e,collectionStarting:r0e},f)},[f]),m=xxe(),x=ot(function(){return V0e(m,p)},[m,p]),b=ot(function(){return lxe(ze({scrollWindow:q0e,scrollDroppable:x.scrollDroppable},pP({move:A7},f)))},[x.scrollDroppable,f]),y=mxe(t),v=ot(function(){return F0e({announce:d,autoScroller:b,dimensionMarshal:x,focusMarshal:y,getResponders:c,styleMarshal:h})},[d,b,x,y,c,h]);o.current=v;var w=De(function(){var P=Ou(o),E=P.getState();E.phase!=="IDLE"&&P.dispatch(cC())},[]),j=De(function(){var P=Ou(o).getState();return P.isDragging||P.phase==="DROP_ANIMATING"},[]),N=ot(function(){return{isDragging:j,tryAbort:w}},[j,w]);r(N);var k=De(function(P){return L7(Ou(o).getState(),P)},[]),S=De(function(){return il(Ou(o).getState())},[]),C=ot(function(){return{marshal:x,focus:y,contextId:t,canLift:k,isMovementAllowed:S,dragHandleUsageInstructionsId:u,registry:m}},[t,x,u,y,k,S,m]);return lbe({contextId:t,store:v,registry:m,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),g.useEffect(function(){return w},[w]),Ge.createElement(ey.Provider,{value:C},Ge.createElement($pe,{context:xC,store:v},e.children))}var ube=0;function hbe(){return ot(function(){return""+ube++},[])}function fbe(e){var t=hbe(),r=e.dragHandleUsageInstructions||Bm.dragHandleUsageInstructions;return Ge.createElement(Ume,null,function(n){return Ge.createElement(dbe,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Y7=function(t){return function(r){return t===r}},pbe=Y7("scroll"),mbe=Y7("auto"),qP=function(t,r){return r(t.overflowX)||r(t.overflowY)},gbe=function(t){var r=window.getComputedStyle(t),n={overflowX:r.overflowX,overflowY:r.overflowY};return qP(n,pbe)||qP(n,mbe)},xbe=function(){return!1},bbe=function e(t){return t==null?null:t===document.body?xbe()?t:null:t===document.documentElement?null:gbe(t)?t:e(t.parentElement)},Ik=function(e){return{x:e.scrollLeft,y:e.scrollTop}},ybe=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},vbe=function(e){var t=bbe(e),r=ybe(e);return{closestScrollable:t,isFixedOnPage:r}},wbe=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,s=e.isFixedOnPage,a=e.direction,o=e.client,l=e.page,c=e.closest,d=function(){if(!c)return null;var p=c.scrollSize,m=c.client,x=$7({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:m,scrollSize:p,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:x,diff:{value:Dr,displacement:Dr}}}}(),u=a==="vertical"?sC:p7,h=wd({page:l,withPlaceholder:null,axis:u,frame:d}),f={descriptor:t,isCombineEnabled:n,isFixedOnPage:s,axis:u,isEnabled:r,client:o,page:l,frame:d,subject:h};return f},kbe=function(t,r){var n=s7(t);if(!r||t!==r)return n;var s=n.paddingBox.top-r.scrollTop,a=n.paddingBox.left-r.scrollLeft,o=s+r.scrollHeight,l=a+r.scrollWidth,c={top:s,right:l,bottom:o,left:a},d=QS(c,n.border),u=eC({borderBox:d,margin:n.margin,border:n.border,padding:n.padding});return u},jbe=function(e){var t=e.ref,r=e.descriptor,n=e.env,s=e.windowScroll,a=e.direction,o=e.isDropDisabled,l=e.isCombineEnabled,c=e.shouldClipSubject,d=n.closestScrollable,u=kbe(t,d),h=m0(u,s),f=function(){if(!d)return null;var m=s7(d),x={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:m,page:m0(m,s),scroll:Ik(d),scrollSize:x,shouldClipSubject:c}}(),p=wbe({descriptor:r,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:n.isFixedOnPage,direction:a,client:u,page:h,closest:f});return p},Nbe={passive:!1},Sbe={passive:!0},GP=function(e){return e.shouldPublishImmediately?Nbe:Sbe};function w0(e){var t=g.useContext(e);return t||ke(),t}var sm=function(t){return t&&t.env.closestScrollable||null};function Cbe(e){var t=g.useRef(null),r=w0(ey),n=bC("droppable"),s=r.registry,a=r.marshal,o=H7(e),l=ot(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=g.useRef(l),d=ot(function(){return Pr(function(j,N){t.current||ke();var k={x:j,y:N};a.updateDroppableScroll(l.id,k)})},[l.id,a]),u=De(function(){var j=t.current;return!j||!j.env.closestScrollable?Dr:Ik(j.env.closestScrollable)},[]),h=De(function(){var j=u();d(j.x,j.y)},[u,d]),f=ot(function(){return tf(h)},[h]),p=De(function(){var j=t.current,N=sm(j);j&&N||ke();var k=j.scrollOptions;if(k.shouldPublishImmediately){h();return}f()},[f,h]),m=De(function(j,N){t.current&&ke();var k=o.current,S=k.getDroppableRef();S||ke();var C=vbe(S),P={ref:S,descriptor:l,env:C,scrollOptions:N};t.current=P;var E=jbe({ref:S,descriptor:l,env:C,windowScroll:j,direction:k.direction,isDropDisabled:k.isDropDisabled,isCombineEnabled:k.isCombineEnabled,shouldClipSubject:!k.ignoreContainerClipping}),O=C.closestScrollable;return O&&(O.setAttribute(HP.contextId,r.contextId),O.addEventListener("scroll",p,GP(P.scrollOptions))),E},[r.contextId,l,p,o]),x=De(function(){var j=t.current,N=sm(j);return j&&N||ke(),Ik(N)},[]),b=De(function(){var j=t.current;j||ke();var N=sm(j);t.current=null,N&&(f.cancel(),N.removeAttribute(HP.contextId),N.removeEventListener("scroll",p,GP(j.scrollOptions)))},[p,f]),y=De(function(j){var N=t.current;N||ke();var k=sm(N);k||ke(),k.scrollTop+=j.y,k.scrollLeft+=j.x},[]),v=ot(function(){return{getDimensionAndWatchScroll:m,getScrollWhileDragging:x,dragStopped:b,scroll:y}},[b,m,x,y]),w=ot(function(){return{uniqueId:n,descriptor:l,callbacks:v}},[v,l,n]);as(function(){return c.current=w.descriptor,s.droppable.register(w),function(){t.current&&b(),s.droppable.unregister(w)}},[v,l,b,w,a,s.droppable]),as(function(){t.current&&a.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),as(function(){t.current&&a.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function Hv(){}var KP={width:0,height:0,margin:Yme},_be=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,s=t.animate;return r||s==="close"?KP:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},Ebe=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,s=t.animate,a=_be({isAnimatingOpenOnMount:r,placeholder:n,animate:s});return{display:n.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:s!=="none"?lh.placeholder:null}};function Abe(e){var t=g.useRef(null),r=De(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=e.animate,s=e.onTransitionEnd,a=e.onClose,o=e.contextId,l=g.useState(e.animate==="open"),c=l[0],d=l[1];g.useEffect(function(){return c?n!=="open"?(r(),d(!1),Hv):t.current?Hv:(t.current=setTimeout(function(){t.current=null,d(!1)}),r):Hv},[n,c,r]);var u=De(function(f){f.propertyName==="height"&&(s(),n==="close"&&a())},[n,a,s]),h=Ebe({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return Ge.createElement(e.placeholder.tagName,{style:h,"data-rbd-placeholder-context-id":o,onTransitionEnd:u,ref:e.innerRef})}var Tbe=Ge.memo(Abe),vC=Ge.createContext(null),Pbe=function(e){L8(t,e);function t(){for(var n,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}t.getDerivedStateFromProps=function(s,a){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)},t}(Ge.PureComponent),YP={dragging:5e3,dropAnimating:4500},Mbe=function(t,r){return r?lh.drop(r.duration):t?lh.snap:lh.fluid},Obe=function(t,r){return t?r?af.opacity.drop:af.opacity.combining:null},$be=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function Dbe(e){var t=e.dimension,r=t.client,n=e.offset,s=e.combineWith,a=e.dropping,o=!!s,l=$be(e),c=!!a,d=c?Ok.drop(n,o):Ok.moveTo(n),u={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Mbe(l,a),transform:d,opacity:Obe(o,c),zIndex:c?YP.dropAnimating:YP.dragging,pointerEvents:"none"};return u}function Ibe(e){return{transform:Ok.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function Lbe(e){return e.type==="DRAGGING"?Dbe(e):Ibe(e)}function Rbe(e,t,r){r===void 0&&(r=Dr);var n=window.getComputedStyle(t),s=t.getBoundingClientRect(),a=n7(s,n),o=m0(a,r),l={client:a,tagName:t.tagName.toLowerCase(),display:n.display},c={x:a.marginBox.width,y:a.marginBox.height},d={descriptor:e,placeholder:l,displaceBy:c,client:a,page:o};return d}function Bbe(e){var t=bC("draggable"),r=e.descriptor,n=e.registry,s=e.getDraggableRef,a=e.canDragInteractiveElements,o=e.shouldRespectForcePress,l=e.isEnabled,c=ot(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}},[a,l,o]),d=De(function(p){var m=s();return m||ke(),Rbe(r,m,p)},[r,s]),u=ot(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:d}},[r,d,c,t]),h=g.useRef(u),f=g.useRef(!0);as(function(){return n.draggable.register(h.current),function(){return n.draggable.unregister(h.current)}},[n.draggable]),as(function(){if(f.current){f.current=!1;return}var p=h.current;h.current=u,n.draggable.update(u,p)},[u,n.draggable])}function zbe(e){e.preventDefault()}function Fbe(e){var t=g.useRef(null),r=De(function(P){t.current=P},[]),n=De(function(){return t.current},[]),s=w0(ey),a=s.contextId,o=s.dragHandleUsageInstructionsId,l=s.registry,c=w0(vC),d=c.type,u=c.droppableId,h=ot(function(){return{id:e.draggableId,index:e.index,type:d,droppableId:u}},[e.draggableId,e.index,d,u]),f=e.children,p=e.draggableId,m=e.isEnabled,x=e.shouldRespectForcePress,b=e.canDragInteractiveElements,y=e.isClone,v=e.mapped,w=e.dropAnimationFinished;if(!y){var j=ot(function(){return{descriptor:h,registry:l,getDraggableRef:n,canDragInteractiveElements:b,shouldRespectForcePress:x,isEnabled:m}},[h,l,n,b,x,m]);Bbe(j)}var N=ot(function(){return m?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:zbe}:null},[a,o,p,m]),k=De(function(P){v.type==="DRAGGING"&&v.dropping&&P.propertyName==="transform"&&w()},[w,v]),S=ot(function(){var P=Lbe(v),E=v.type==="DRAGGING"&&v.dropping?k:null,O={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":p,style:P,onTransitionEnd:E},dragHandleProps:N};return O},[a,N,p,v,k,r]),C=ot(function(){return{draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}},[h.droppableId,h.id,h.index,h.type]);return f(S,v.snapshot,C)}var X7=function(e,t){return e===t},J7=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},Hbe=function(t){return t.combine?t.combine.draggableId:null},Ube=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function Wbe(){var e=Pr(function(s,a){return{x:s,y:a}}),t=Pr(function(s,a,o,l,c){return{isDragging:!0,isClone:a,isDropAnimating:!!c,dropAnimation:c,mode:s,draggingOver:o,combineWith:l,combineTargetFor:null}}),r=Pr(function(s,a,o,l,c,d,u){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:a,offset:s,dimension:o,forceShouldAnimate:u,snapshot:t(a,l,c,d,null)}}}),n=function(a,o){if(a.isDragging){if(a.critical.draggable.id!==o.draggableId)return null;var l=a.current.client.offset,c=a.dimensions.draggables[o.draggableId],d=ss(a.impact),u=Ube(a.impact),h=a.forceShouldAnimate;return r(e(l.x,l.y),a.movementMode,c,o.isClone,d,u,h)}if(a.phase==="DROP_ANIMATING"){var f=a.completed;if(f.result.draggableId!==o.draggableId)return null;var p=o.isClone,m=a.dimensions.draggables[o.draggableId],x=f.result,b=x.mode,y=J7(x),v=Hbe(x),w=a.dropDuration,j={duration:w,curve:uC.drop,moveTo:a.newHomeClientOffset,opacity:v?af.opacity.drop:null,scale:v?af.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:m,dropping:j,draggingOver:y,combineWith:v,mode:b,forceShouldAnimate:null,snapshot:t(b,p,y,v,j)}}}return null};return n}function Z7(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Vbe={mapped:{type:"SECONDARY",offset:Dr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Z7(null)}};function qbe(){var e=Pr(function(o,l){return{x:o,y:l}}),t=Pr(Z7),r=Pr(function(o,l,c){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}}}),n=function(l){return l?r(Dr,l,!0):null},s=function(l,c,d,u){var h=d.displaced.visible[l],f=!!(u.inVirtualList&&u.effected[l]),p=Xb(d),m=p&&p.draggableId===l?c:null;if(!h){if(!f)return n(m);if(d.displaced.invisible[l])return null;var x=Jd(u.displacedBy.point),b=e(x.x,x.y);return r(b,m,!0)}if(f)return n(m);var y=d.displacedBy.point,v=e(y.x,y.y);return r(v,m,h.shouldAnimate)},a=function(l,c){if(l.isDragging)return l.critical.draggable.id===c.draggableId?null:s(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var d=l.completed;return d.result.draggableId===c.draggableId?null:s(c.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null};return a}var Gbe=function(){var t=Wbe(),r=qbe(),n=function(a,o){return t(a,o)||r(a,o)||Vbe};return n},Kbe={dropAnimationFinished:P7},Ybe=t7(Gbe,Kbe,null,{context:xC,pure:!0,areStatePropsEqual:X7})(Fbe);function Q7(e){var t=w0(vC),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:Ge.createElement(Ybe,e)}function Xbe(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return Ge.createElement(Q7,ze({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function Jbe(e){var t=g.useContext(ey);t||ke();var r=t.contextId,n=t.isMovementAllowed,s=g.useRef(null),a=g.useRef(null),o=e.children,l=e.droppableId,c=e.type,d=e.mode,u=e.direction,h=e.ignoreContainerClipping,f=e.isDropDisabled,p=e.isCombineEnabled,m=e.snapshot,x=e.useClone,b=e.updateViewportMaxScroll,y=e.getContainerForClone,v=De(function(){return s.current},[]),w=De(function(O){s.current=O},[]);De(function(){return a.current},[]);var j=De(function(O){a.current=O},[]),N=De(function(){n()&&b({maxScroll:I7()})},[n,b]);Cbe({droppableId:l,type:c,mode:d,direction:u,isDropDisabled:f,isCombineEnabled:p,ignoreContainerClipping:h,getDroppableRef:v});var k=Ge.createElement(Pbe,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(O){var A=O.onClose,_=O.data,I=O.animate;return Ge.createElement(Tbe,{placeholder:_,onClose:A,innerRef:j,animate:I,contextId:r,onTransitionEnd:N})}),S=ot(function(){return{innerRef:w,placeholder:k,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,k,w]),C=x?x.dragging.draggableId:null,P=ot(function(){return{droppableId:l,type:c,isUsingCloneFor:C}},[l,C,c]);function E(){if(!x)return null;var O=x.dragging,A=x.render,_=Ge.createElement(Q7,{draggableId:O.draggableId,index:O.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(I,D){return A(I,D,O)});return B5.createPortal(_,y())}return Ge.createElement(vC.Provider,{value:P},o(S,m),E())}var Uv=function(t,r){return t===r.droppable.type},XP=function(t,r){return r.draggables[t.draggable.id]},Zbe=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=ze({},t,{shouldAnimatePlaceholder:!1}),n=Pr(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),s=Pr(function(o,l,c,d,u,h){var f=u.descriptor.id,p=u.descriptor.droppableId===o;if(p){var m=h?{render:h,dragging:n(u.descriptor)}:null,x={isDraggingOver:c,draggingOverWith:c?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:m}}if(!l)return r;if(!d)return t;var b={isDraggingOver:c,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:b,useClone:null}}),a=function(l,c){var d=c.droppableId,u=c.type,h=!c.isDropDisabled,f=c.renderClone;if(l.isDragging){var p=l.critical;if(!Uv(u,p))return r;var m=XP(p,l.dimensions),x=ss(l.impact)===d;return s(d,h,x,x,m,f)}if(l.phase==="DROP_ANIMATING"){var b=l.completed;if(!Uv(u,b.critical))return r;var y=XP(b.critical,l.dimensions);return s(d,h,J7(b.result)===d,ss(b.impact)===d,y,f)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var v=l.completed;if(!Uv(u,v.critical))return r;var w=ss(v.impact)===d,j=!!(v.impact.at&&v.impact.at.type==="COMBINE"),N=v.critical.droppable.id===d;return w?j?t:r:N?t:r}return r};return a},Qbe={updateViewportMaxScroll:o0e};function eye(){return document.body||ke(),document.body}var tye={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:eye},eB=t7(Zbe,Qbe,null,{context:xC,pure:!0,areStatePropsEqual:X7})(Jbe);eB.defaultProps=tye;const Wv={title:"",description:"",icon:"",link:"",display_order:0,is_active:!0};function rye(){const[e,t]=g.useState([]),[r,n]=g.useState(!0),[s,a]=g.useState(""),[o,l]=g.useState(""),[c,d]=g.useState(!1),[u,h]=g.useState(null),[f,p]=g.useState(Wv),[m,x]=g.useState(!1);g.useEffect(()=>{b()},[]);const b=async()=>{try{const C=await(await fetch("/api/homepage/tools.php")).json();C.success&&t(C.tools||[])}catch{a("Failed to load tools")}finally{n(!1)}},y=()=>{h(null),p({...Wv,display_order:e.length}),d(!0)},v=S=>{h(S),p({title:S.title,description:S.description||"",icon:S.icon||"",link:S.link||"",display_order:S.display_order,is_active:S.is_active}),d(!0)},w=()=>{d(!1),h(null),p(Wv)},j=async()=>{if(!f.title.trim()){a("Title is required");return}x(!0),a("");try{const S=u?"PUT":"POST",C=u?{...f,id:u.id}:f,E=await(await fetch("/api/homepage/tools.php",{method:S,headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(C)})).json();E.success?(l(u?"Tool updated!":"Tool created!"),setTimeout(()=>l(""),3e3),w(),b()):a(E.error||"Failed to save tool")}catch{a("Network error occurred")}finally{x(!1)}},N=async S=>{if(confirm("Delete this tool?"))try{const P=await(await fetch("/api/homepage/tools.php",{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:S})})).json();P.success?(l("Tool deleted!"),setTimeout(()=>l(""),3e3),b()):a(P.error||"Failed to delete tool")}catch{a("Network error occurred")}},k=async S=>{if(!S.destination)return;const C=Array.from(e),[P]=C.splice(S.source.index,1);C.splice(S.destination.index,0,P);const E=C.map((O,A)=>({...O,display_order:A}));t(E);try{const O=E[S.destination.index];await fetch("/api/homepage/tools.php",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:O.id,title:O.title,description:O.description,icon:O.icon,link:O.link,display_order:O.display_order,is_active:O.is_active})})}catch{a("Failed to save order"),b()}};return r?i.jsx("div",{className:"text-center py-8",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"Homepage Tools"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Drag to reorder  Manage tools section"})]}),i.jsx("button",{onClick:y,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"+ Add Tool"})]}),s&&i.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/20 border border-red-400 text-red-700 dark:text-red-400 rounded",children:s}),o&&i.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 border border-green-400 text-green-700 dark:text-green-400 rounded",children:o}),i.jsx(fbe,{onDragEnd:k,children:i.jsx(eB,{droppableId:"tools",children:S=>i.jsxs("div",{...S.droppableProps,ref:S.innerRef,className:"space-y-2",children:[e.length===0?i.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-700 rounded-lg",children:"No tools yet. Add your first tool!"}):e.map((C,P)=>i.jsx(Xbe,{draggableId:String(C.id),index:P,children:(E,O)=>i.jsxs("div",{ref:E.innerRef,...E.draggableProps,className:`flex items-center gap-4 p-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg ${O.isDragging?"shadow-lg":""}`,children:[i.jsx("div",{...E.dragHandleProps,className:"cursor-grab text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""}),i.jsx("span",{className:"text-2xl",children:C.icon}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:C.title}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:C.description}),C.link&&i.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 truncate",children:C.link})]}),i.jsx("span",{className:`px-2 py-1 text-xs rounded ${C.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-600 dark:text-gray-400"}`,children:C.is_active?"Active":"Hidden"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>v(C),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),i.jsx("button",{onClick:()=>N(C.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]})},C.id)),S.placeholder]})})}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:w,children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-lg mx-4",onClick:S=>S.stopPropagation(),children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:u?"Edit Tool":"Add Tool"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Icon"}),i.jsx("input",{type:"text",value:f.icon,onChange:S=>p({...f,icon:S.target.value}),className:"w-full px-3 py-2 text-2xl text-center border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700",placeholder:""})]}),i.jsxs("div",{className:"col-span-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title *"}),i.jsx("input",{type:"text",value:f.title,onChange:S=>p({...f,title:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"LitRPG Tools"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),i.jsx("textarea",{value:f.description,onChange:S=>p({...f,description:S.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"Brief description..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Link"}),i.jsx("input",{type:"text",value:f.link,onChange:S=>p({...f,link:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"/litrpg or https://..."})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:S=>p({...f,is_active:S.target.checked}),className:"h-4 w-4 rounded border-gray-300 text-blue-600"}),i.jsx("label",{htmlFor:"is_active",className:"text-sm text-gray-700 dark:text-gray-300",children:"Active (visible on homepage)"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[i.jsx("button",{onClick:w,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",children:"Cancel"}),i.jsx("button",{onClick:j,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:m?"Saving...":u?"Update":"Create"})]})]})})]})}function nye(){const[e,t]=g.useState("hero"),r=[{id:"hero",label:"Hero Settings",icon:""},{id:"activity",label:"Activity Feed",icon:""},{id:"tools",label:"Tools",icon:""}];return i.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:[i.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsx("nav",{className:"flex -mb-px",children:r.map(n=>i.jsxs("button",{onClick:()=>t(n.id),className:`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${e===n.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[i.jsx("span",{className:"mr-2",children:n.icon}),n.label]},n.id))})}),i.jsxs("div",{className:"p-6",children:[e==="hero"&&i.jsx(jpe,{}),e==="activity"&&i.jsx(Npe,{}),e==="tools"&&i.jsx(rye,{})]})]})}const sye="modulepreload",aye=function(e){return"/"+e},JP={},iye=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=aye(c),c in JP)return;JP[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":sye,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};function Hr(e){this.content=e}Hr.prototype={constructor:Hr,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,r){var n=r&&r!=e?this.remove(r):this,s=n.find(e),a=n.content.slice();return s==-1?a.push(r||e,t):(a[s+1]=t,r&&(a[s]=r)),new Hr(a)},remove:function(e){var t=this.find(e);if(t==-1)return this;var r=this.content.slice();return r.splice(t,2),new Hr(r)},addToStart:function(e,t){return new Hr([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var r=this.remove(e).content.slice();return r.push(e,t),new Hr(r)},addBefore:function(e,t,r){var n=this.remove(t),s=n.content.slice(),a=n.find(e);return s.splice(a==-1?s.length:a,0,t,r),new Hr(s)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Hr.from(e),e.size?new Hr(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Hr.from(e),e.size?new Hr(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Hr.from(e);for(var r=0;r<e.content.length;r+=2)t=t.remove(e.content[r]);return t},toObject:function(){var e={};return this.forEach(function(t,r){e[t]=r}),e},get size(){return this.content.length>>1}};Hr.from=function(e){if(e instanceof Hr)return e;var t=[];if(e)for(var r in e)t.push(r,e[r]);return new Hr(t)};function tB(e,t,r){for(let n=0;;n++){if(n==e.childCount||n==t.childCount)return e.childCount==t.childCount?null:r;let s=e.child(n),a=t.child(n);if(s==a){r+=s.nodeSize;continue}if(!s.sameMarkup(a))return r;if(s.isText&&s.text!=a.text){for(let o=0;s.text[o]==a.text[o];o++)r++;return r}if(s.content.size||a.content.size){let o=tB(s.content,a.content,r+1);if(o!=null)return o}r+=s.nodeSize}}function rB(e,t,r,n){for(let s=e.childCount,a=t.childCount;;){if(s==0||a==0)return s==a?null:{a:r,b:n};let o=e.child(--s),l=t.child(--a),c=o.nodeSize;if(o==l){r-=c,n-=c;continue}if(!o.sameMarkup(l))return{a:r,b:n};if(o.isText&&o.text!=l.text){let d=0,u=Math.min(o.text.length,l.text.length);for(;d<u&&o.text[o.text.length-d-1]==l.text[l.text.length-d-1];)d++,r--,n--;return{a:r,b:n}}if(o.content.size||l.content.size){let d=rB(o.content,l.content,r-1,n-1);if(d)return d}r-=c,n-=c}}class ce{constructor(t,r){if(this.content=t,this.size=r||0,r==null)for(let n=0;n<t.length;n++)this.size+=t[n].nodeSize}nodesBetween(t,r,n,s=0,a){for(let o=0,l=0;l<r;o++){let c=this.content[o],d=l+c.nodeSize;if(d>t&&n(c,s+l,a||null,o)!==!1&&c.content.size){let u=l+1;c.nodesBetween(Math.max(0,t-u),Math.min(c.content.size,r-u),n,s+u)}l=d}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,r,n,s){let a="",o=!0;return this.nodesBetween(t,r,(l,c)=>{let d=l.isText?l.text.slice(Math.max(t,c)-c,r-c):l.isLeaf?s?typeof s=="function"?s(l):s:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&n&&(o?o=!1:a+=n),a+=d},0),a}append(t){if(!t.size)return this;if(!this.size)return t;let r=this.lastChild,n=t.firstChild,s=this.content.slice(),a=0;for(r.isText&&r.sameMarkup(n)&&(s[s.length-1]=r.withText(r.text+n.text),a=1);a<t.content.length;a++)s.push(t.content[a]);return new ce(s,this.size+t.size)}cut(t,r=this.size){if(t==0&&r==this.size)return this;let n=[],s=0;if(r>t)for(let a=0,o=0;o<r;a++){let l=this.content[a],c=o+l.nodeSize;c>t&&((o<t||c>r)&&(l.isText?l=l.cut(Math.max(0,t-o),Math.min(l.text.length,r-o)):l=l.cut(Math.max(0,t-o-1),Math.min(l.content.size,r-o-1))),n.push(l),s+=l.nodeSize),o=c}return new ce(n,s)}cutByIndex(t,r){return t==r?ce.empty:t==0&&r==this.content.length?this:new ce(this.content.slice(t,r))}replaceChild(t,r){let n=this.content[t];if(n==r)return this;let s=this.content.slice(),a=this.size+r.nodeSize-n.nodeSize;return s[t]=r,new ce(s,a)}addToStart(t){return new ce([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new ce(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(t.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let r=this.content[t];if(!r)throw new RangeError("Index "+t+" out of range for "+this);return r}maybeChild(t){return this.content[t]||null}forEach(t){for(let r=0,n=0;r<this.content.length;r++){let s=this.content[r];t(s,n,r),n+=s.nodeSize}}findDiffStart(t,r=0){return tB(this,t,r)}findDiffEnd(t,r=this.size,n=t.size){return rB(this,t,r,n)}findIndex(t){if(t==0)return am(0,t);if(t==this.size)return am(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let r=0,n=0;;r++){let s=this.child(r),a=n+s.nodeSize;if(a>=t)return a==t?am(r+1,a):am(r,n);n=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,r){if(!r)return ce.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new ce(r.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return ce.empty;let r,n=0;for(let s=0;s<t.length;s++){let a=t[s];n+=a.nodeSize,s&&a.isText&&t[s-1].sameMarkup(a)?(r||(r=t.slice(0,s)),r[r.length-1]=a.withText(r[r.length-1].text+a.text)):r&&r.push(a)}return new ce(r||t,n)}static from(t){if(!t)return ce.empty;if(t instanceof ce)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new ce([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ce.empty=new ce([],0);const Vv={index:0,offset:0};function am(e,t){return Vv.index=e,Vv.offset=t,Vv}function k0(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let r=Array.isArray(e);if(Array.isArray(t)!=r)return!1;if(r){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!k0(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!k0(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}let vt=class Lk{constructor(t,r){this.type=t,this.attrs=r}addToSet(t){let r,n=!1;for(let s=0;s<t.length;s++){let a=t[s];if(this.eq(a))return t;if(this.type.excludes(a.type))r||(r=t.slice(0,s));else{if(a.type.excludes(this.type))return t;!n&&a.type.rank>this.type.rank&&(r||(r=t.slice(0,s)),r.push(this),n=!0),r&&r.push(a)}}return r||(r=t.slice()),n||r.push(this),r}removeFromSet(t){for(let r=0;r<t.length;r++)if(this.eq(t[r]))return t.slice(0,r).concat(t.slice(r+1));return t}isInSet(t){for(let r=0;r<t.length;r++)if(this.eq(t[r]))return!0;return!1}eq(t){return this==t||this.type==t.type&&k0(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let r in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=t.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let s=n.create(r.attrs);return n.checkAttrs(s.attrs),s}static sameSet(t,r){if(t==r)return!0;if(t.length!=r.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].eq(r[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return Lk.none;if(t instanceof Lk)return[t];let r=t.slice();return r.sort((n,s)=>n.type.rank-s.type.rank),r}};vt.none=[];class j0 extends Error{}class _e{constructor(t,r,n){this.content=t,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,r){let n=sB(this.content,t+this.openStart,r);return n&&new _e(n,this.openStart,this.openEnd)}removeBetween(t,r){return new _e(nB(this.content,t+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,r){if(!r)return _e.empty;let n=r.openStart||0,s=r.openEnd||0;if(typeof n!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new _e(ce.fromJSON(t,r.content),n,s)}static maxOpen(t,r=!0){let n=0,s=0;for(let a=t.firstChild;a&&!a.isLeaf&&(r||!a.type.spec.isolating);a=a.firstChild)n++;for(let a=t.lastChild;a&&!a.isLeaf&&(r||!a.type.spec.isolating);a=a.lastChild)s++;return new _e(t,n,s)}}_e.empty=new _e(ce.empty,0,0);function nB(e,t,r){let{index:n,offset:s}=e.findIndex(t),a=e.maybeChild(n),{index:o,offset:l}=e.findIndex(r);if(s==t||a.isText){if(l!=r&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(n,a.copy(nB(a.content,t-s-1,r-s-1)))}function sB(e,t,r,n){let{index:s,offset:a}=e.findIndex(t),o=e.maybeChild(s);if(a==t||o.isText)return n&&!n.canReplace(s,s,r)?null:e.cut(0,t).append(r).append(e.cut(t));let l=sB(o.content,t-a-1,r,o);return l&&e.replaceChild(s,o.copy(l))}function oye(e,t,r){if(r.openStart>e.depth)throw new j0("Inserted content deeper than insertion position");if(e.depth-r.openStart!=t.depth-r.openEnd)throw new j0("Inconsistent open depths");return aB(e,t,r,0)}function aB(e,t,r,n){let s=e.index(n),a=e.node(n);if(s==t.index(n)&&n<e.depth-r.openStart){let o=aB(e,t,r,n+1);return a.copy(a.content.replaceChild(s,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&e.depth==n&&t.depth==n){let o=e.parent,l=o.content;return El(o,l.cut(0,e.parentOffset).append(r.content).append(l.cut(t.parentOffset)))}else{let{start:o,end:l}=lye(r,e);return El(a,oB(e,o,l,t,n))}else return El(a,N0(e,t,n))}function iB(e,t){if(!t.type.compatibleContent(e.type))throw new j0("Cannot join "+t.type.name+" onto "+e.type.name)}function Rk(e,t,r){let n=e.node(r);return iB(n,t.node(r)),n}function _l(e,t){let r=t.length-1;r>=0&&e.isText&&e.sameMarkup(t[r])?t[r]=e.withText(t[r].text+e.text):t.push(e)}function ch(e,t,r,n){let s=(t||e).node(r),a=0,o=t?t.index(r):s.childCount;e&&(a=e.index(r),e.depth>r?a++:e.textOffset&&(_l(e.nodeAfter,n),a++));for(let l=a;l<o;l++)_l(s.child(l),n);t&&t.depth==r&&t.textOffset&&_l(t.nodeBefore,n)}function El(e,t){return e.type.checkContent(t),e.copy(t)}function oB(e,t,r,n,s){let a=e.depth>s&&Rk(e,t,s+1),o=n.depth>s&&Rk(r,n,s+1),l=[];return ch(null,e,s,l),a&&o&&t.index(s)==r.index(s)?(iB(a,o),_l(El(a,oB(e,t,r,n,s+1)),l)):(a&&_l(El(a,N0(e,t,s+1)),l),ch(t,r,s,l),o&&_l(El(o,N0(r,n,s+1)),l)),ch(n,null,s,l),new ce(l)}function N0(e,t,r){let n=[];if(ch(null,e,r,n),e.depth>r){let s=Rk(e,t,r+1);_l(El(s,N0(e,t,r+1)),n)}return ch(t,null,r,n),new ce(n)}function lye(e,t){let r=t.depth-e.openStart,s=t.node(r).copy(e.content);for(let a=r-1;a>=0;a--)s=t.node(a).copy(ce.from(s));return{start:s.resolveNoCache(e.openStart+r),end:s.resolveNoCache(s.content.size-e.openEnd-r)}}class of{constructor(t,r,n){this.pos=t,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,r=this.index(this.depth);if(r==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],s=t.child(r);return n?t.child(r).cut(n):s}get nodeBefore(){let t=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(t).cut(0,r):t==0?null:this.parent.child(t-1)}posAtIndex(t,r){r=this.resolveDepth(r);let n=this.path[r*3],s=r==0?0:this.path[r*3-1]+1;for(let a=0;a<t;a++)s+=n.child(a).nodeSize;return s}marks(){let t=this.parent,r=this.index();if(t.content.size==0)return vt.none;if(this.textOffset)return t.child(r).marks;let n=t.maybeChild(r-1),s=t.maybeChild(r);if(!n){let l=n;n=s,s=l}let a=n.marks;for(var o=0;o<a.length;o++)a[o].type.spec.inclusive===!1&&(!s||!a[o].isInSet(s.marks))&&(a=a[o--].removeFromSet(a));return a}marksAcross(t){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,s=t.parent.maybeChild(t.index());for(var a=0;a<n.length;a++)n[a].type.spec.inclusive===!1&&(!s||!n[a].isInSet(s.marks))&&(n=n[a--].removeFromSet(n));return n}sharedDepth(t){for(let r=this.depth;r>0;r--)if(this.start(r)<=t&&this.end(r)>=t)return r;return 0}blockRange(t=this,r){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!r||r(this.node(n))))return new S0(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let r=1;r<=this.depth;r++)t+=(t?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return t+":"+this.parentOffset}static resolve(t,r){if(!(r>=0&&r<=t.content.size))throw new RangeError("Position "+r+" out of range");let n=[],s=0,a=r;for(let o=t;;){let{index:l,offset:c}=o.content.findIndex(a),d=a-c;if(n.push(o,l,s+c),!d||(o=o.child(l),o.isText))break;a=d-1,s+=c+1}return new of(r,n,a)}static resolveCached(t,r){let n=ZP.get(t);if(n)for(let a=0;a<n.elts.length;a++){let o=n.elts[a];if(o.pos==r)return o}else ZP.set(t,n=new cye);let s=n.elts[n.i]=of.resolve(t,r);return n.i=(n.i+1)%dye,s}}class cye{constructor(){this.elts=[],this.i=0}}const dye=12,ZP=new WeakMap;class S0{constructor(t,r,n){this.$from=t,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const uye=Object.create(null);class ha{constructor(t,r,n,s=vt.none){this.type=t,this.attrs=r,this.marks=s,this.content=n||ce.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,r,n,s=0){this.content.nodesBetween(t,r,n,s,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,r,n,s){return this.content.textBetween(t,r,n,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,r,n){return this.type==t&&k0(this.attrs,r||t.defaultAttrs||uye)&&vt.sameSet(this.marks,n||vt.none)}copy(t=null){return t==this.content?this:new ha(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new ha(this.type,this.attrs,this.content,t)}cut(t,r=this.content.size){return t==0&&r==this.content.size?this:this.copy(this.content.cut(t,r))}slice(t,r=this.content.size,n=!1){if(t==r)return _e.empty;let s=this.resolve(t),a=this.resolve(r),o=n?0:s.sharedDepth(r),l=s.start(o),d=s.node(o).content.cut(s.pos-l,a.pos-l);return new _e(d,s.depth-o,a.depth-o)}replace(t,r,n){return oye(this.resolve(t),this.resolve(r),n)}nodeAt(t){for(let r=this;;){let{index:n,offset:s}=r.content.findIndex(t);if(r=r.maybeChild(n),!r)return null;if(s==t||r.isText)return r;t-=s+1}}childAfter(t){let{index:r,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(r),index:r,offset:n};let s=this.content.child(r-1);return{node:s,index:r-1,offset:n-s.nodeSize}}resolve(t){return of.resolveCached(this,t)}resolveNoCache(t){return of.resolve(this,t)}rangeHasMark(t,r,n){let s=!1;return r>t&&this.nodesBetween(t,r,a=>(n.isInSet(a.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),lB(this.marks,t)}contentMatchAt(t){let r=this.type.contentMatch.matchFragment(this.content,0,t);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(t,r,n=ce.empty,s=0,a=n.childCount){let o=this.contentMatchAt(t).matchFragment(n,s,a),l=o&&o.matchFragment(this.content,r);if(!l||!l.validEnd)return!1;for(let c=s;c<a;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0}canReplaceWith(t,r,n,s){if(s&&!this.type.allowsMarks(s))return!1;let a=this.contentMatchAt(t).matchType(n),o=a&&a.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=vt.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),t=n.addToSet(t)}if(!vt.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let t={type:this.type.name};for(let r in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(r=>r.toJSON())),t}static fromJSON(t,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(t.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(r.text,n)}let s=ce.fromJSON(t,r.content),a=t.nodeType(r.type).create(r.attrs,s,n);return a.type.checkAttrs(a.attrs),a}}ha.prototype.text=void 0;class C0 extends ha{constructor(t,r,n,s){if(super(t,r,null,s),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):lB(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,r){return this.text.slice(t,r)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new C0(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new C0(this.type,this.attrs,t,this.marks)}cut(t=0,r=this.text.length){return t==0&&r==this.text.length?this:this.withText(this.text.slice(t,r))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function lB(e,t){for(let r=e.length-1;r>=0;r--)t=e[r].type.name+"("+t+")";return t}class Xl{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,r){let n=new hye(t,r);if(n.next==null)return Xl.empty;let s=cB(n);n.next&&n.err("Unexpected trailing text");let a=yye(bye(s));return vye(a,n),a}matchType(t){for(let r=0;r<this.next.length;r++)if(this.next[r].type==t)return this.next[r].next;return null}matchFragment(t,r=0,n=t.childCount){let s=this;for(let a=r;s&&a<n;a++)s=s.matchType(t.child(a).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:r}=this.next[t];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(t){for(let r=0;r<this.next.length;r++)for(let n=0;n<t.next.length;n++)if(this.next[r].type==t.next[n].type)return!0;return!1}fillBefore(t,r=!1,n=0){let s=[this];function a(o,l){let c=o.matchFragment(t,n);if(c&&(!r||c.validEnd))return ce.from(l.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:u,next:h}=o.next[d];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(h)==-1){s.push(h);let f=a(h,l.concat(u));if(f)return f}}return null}return a(this,[])}findWrapping(t){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];let r=this.computeWrapping(t);return this.wrapCache.push(t,r),r}computeWrapping(t){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let s=n.shift(),a=s.match;if(a.matchType(t)){let o=[];for(let l=s;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<a.next.length;o++){let{type:l,next:c}=a.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in r)&&(!s.type||c.validEnd)&&(n.push({match:l.contentMatch,type:l,via:s}),r[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function r(n){t.push(n);for(let s=0;s<n.next.length;s++)t.indexOf(n.next[s].next)==-1&&r(n.next[s].next)}return r(this),t.map((n,s)=>{let a=s+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)a+=(o?", ":"")+n.next[o].type.name+"->"+t.indexOf(n.next[o].next);return a}).join(`
`)}}Xl.empty=new Xl(!0);class hye{constructor(t,r){this.string=t,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function cB(e){let t=[];do t.push(fye(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function fye(e){let t=[];do t.push(pye(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function pye(e){let t=xye(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=mye(e,t);else break;return t}function QP(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function mye(e,t){let r=QP(e),n=r;return e.eat(",")&&(e.next!="}"?n=QP(e):n=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:t}}function gye(e,t){let r=e.nodeTypes,n=r[t];if(n)return[n];let s=[];for(let a in r){let o=r[a];o.isInGroup(t)&&s.push(o)}return s.length==0&&e.err("No node type or group '"+t+"' found"),s}function xye(e){if(e.eat("(")){let t=cB(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=gye(e,e.next).map(r=>(e.inline==null?e.inline=r.isInline:e.inline!=r.isInline&&e.err("Mixing inline and block content"),{type:"name",value:r}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function bye(e){let t=[[]];return s(a(e,0),r()),t;function r(){return t.push([])-1}function n(o,l,c){let d={term:c,to:l};return t[o].push(d),d}function s(o,l){o.forEach(c=>c.to=l)}function a(o,l){if(o.type=="choice")return o.exprs.reduce((c,d)=>c.concat(a(d,l)),[]);if(o.type=="seq")for(let c=0;;c++){let d=a(o.exprs[c],l);if(c==o.exprs.length-1)return d;s(d,l=r())}else if(o.type=="star"){let c=r();return n(l,c),s(a(o.expr,c),c),[n(c)]}else if(o.type=="plus"){let c=r();return s(a(o.expr,l),c),s(a(o.expr,c),c),[n(c)]}else{if(o.type=="opt")return[n(l)].concat(a(o.expr,l));if(o.type=="range"){let c=l;for(let d=0;d<o.min;d++){let u=r();s(a(o.expr,c),u),c=u}if(o.max==-1)s(a(o.expr,c),c);else for(let d=o.min;d<o.max;d++){let u=r();n(c,u),s(a(o.expr,c),u),c=u}return[n(c)]}else{if(o.type=="name")return[n(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function dB(e,t){return t-e}function e4(e,t){let r=[];return n(t),r.sort(dB);function n(s){let a=e[s];if(a.length==1&&!a[0].term)return n(a[0].to);r.push(s);for(let o=0;o<a.length;o++){let{term:l,to:c}=a[o];!l&&r.indexOf(c)==-1&&n(c)}}}function yye(e){let t=Object.create(null);return r(e4(e,0));function r(n){let s=[];n.forEach(o=>{e[o].forEach(({term:l,to:c})=>{if(!l)return;let d;for(let u=0;u<s.length;u++)s[u][0]==l&&(d=s[u][1]);e4(e,c).forEach(u=>{d||s.push([l,d=[]]),d.indexOf(u)==-1&&d.push(u)})})});let a=t[n.join(",")]=new Xl(n.indexOf(e.length-1)>-1);for(let o=0;o<s.length;o++){let l=s[o][1].sort(dB);a.next.push({type:s[o][0],next:t[l.join(",")]||r(l)})}return a}}function vye(e,t){for(let r=0,n=[e];r<n.length;r++){let s=n[r],a=!s.validEnd,o=[];for(let l=0;l<s.next.length;l++){let{type:c,next:d}=s.next[l];o.push(c.name),a&&!(c.isText||c.hasRequiredAttrs())&&(a=!1),n.indexOf(d)==-1&&n.push(d)}a&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function uB(e){let t=Object.create(null);for(let r in e){let n=e[r];if(!n.hasDefault)return null;t[r]=n.default}return t}function hB(e,t){let r=Object.create(null);for(let n in e){let s=t&&t[n];if(s===void 0){let a=e[n];if(a.hasDefault)s=a.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=s}return r}function fB(e,t,r,n){for(let s in t)if(!(s in e))throw new RangeError(`Unsupported attribute ${s} for ${r} of type ${s}`);for(let s in e){let a=e[s];a.validate&&a.validate(t[s])}}function pB(e,t){let r=Object.create(null);if(t)for(let n in t)r[n]=new kye(e,n,t[n]);return r}let t4=class mB{constructor(t,r,n){this.name=t,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=pB(t,n.attrs),this.defaultAttrs=uB(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Xl.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:hB(this.attrs,t)}create(t=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ha(this,this.computeAttrs(t),ce.from(r),vt.setFrom(n))}createChecked(t=null,r,n){return r=ce.from(r),this.checkContent(r),new ha(this,this.computeAttrs(t),r,vt.setFrom(n))}createAndFill(t=null,r,n){if(t=this.computeAttrs(t),r=ce.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let s=this.contentMatch.matchFragment(r),a=s&&s.fillBefore(ce.empty,!0);return a?new ha(this,t,r.append(a),vt.setFrom(n)):null}validContent(t){let r=this.contentMatch.matchFragment(t);if(!r||!r.validEnd)return!1;for(let n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){fB(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let r=0;r<t.length;r++)if(!this.allowsMarkType(t[r].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let r;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?r&&r.push(t[n]):r||(r=t.slice(0,n));return r?r.length?r:vt.none:t}static compile(t,r){let n=Object.create(null);t.forEach((a,o)=>n[a]=new mB(a,r,o));let s=r.spec.topNode||"doc";if(!n[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let a in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function wye(e,t,r){let n=r.split("|");return s=>{let a=s===null?"null":typeof s;if(n.indexOf(a)<0)throw new RangeError(`Expected value of type ${n} for attribute ${t} on type ${e}, got ${a}`)}}class kye{constructor(t,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?wye(t,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class ry{constructor(t,r,n,s){this.name=t,this.rank=r,this.schema=n,this.spec=s,this.attrs=pB(t,s.attrs),this.excluded=null;let a=uB(this.attrs);this.instance=a?new vt(this,a):null}create(t=null){return!t&&this.instance?this.instance:new vt(this,hB(this.attrs,t))}static compile(t,r){let n=Object.create(null),s=0;return t.forEach((a,o)=>n[a]=new ry(a,s++,r,o)),n}removeFromSet(t){for(var r=0;r<t.length;r++)t[r].type==this&&(t=t.slice(0,r).concat(t.slice(r+1)),r--);return t}isInSet(t){for(let r=0;r<t.length;r++)if(t[r].type==this)return t[r]}checkAttrs(t){fB(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class gB{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let s in t)r[s]=t[s];r.nodes=Hr.from(t.nodes),r.marks=Hr.from(t.marks||{}),this.nodes=t4.compile(this.spec.nodes,this),this.marks=ry.compile(this.spec.marks,this);let n=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let a=this.nodes[s],o=a.spec.content||"",l=a.spec.marks;if(a.contentMatch=n[o]||(n[o]=Xl.parse(o,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=l=="_"?null:l?r4(this,l.split(" ")):l==""||!a.inlineContent?[]:null}for(let s in this.marks){let a=this.marks[s],o=a.spec.excludes;a.excluded=o==null?[a]:o==""?[]:r4(this,o.split(" "))}this.nodeFromJSON=s=>ha.fromJSON(this,s),this.markFromJSON=s=>vt.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,r=null,n,s){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof t4){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(r,n,s)}text(t,r){let n=this.nodes.text;return new C0(n,n.defaultAttrs,t,vt.setFrom(r))}mark(t,r){return typeof t=="string"&&(t=this.marks[t]),t.create(r)}nodeType(t){let r=this.nodes[t];if(!r)throw new RangeError("Unknown node type: "+t);return r}}function r4(e,t){let r=[];for(let n=0;n<t.length;n++){let s=t[n],a=e.marks[s],o=a;if(a)r.push(a);else for(let l in e.marks){let c=e.marks[l];(s=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(s)>-1)&&r.push(o=c)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[n]+"'")}return r}function jye(e){return e.tag!=null}function Nye(e){return e.style!=null}let dh=class Bk{constructor(t,r){this.schema=t,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(s=>{if(jye(s))this.tags.push(s);else if(Nye(s)){let a=/[^=]*/.exec(s.style)[0];n.indexOf(a)<0&&n.push(a),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let a=t.nodes[s.node];return a.contentMatch.matchType(a)})}parse(t,r={}){let n=new s4(this,r,!1);return n.addAll(t,vt.none,r.from,r.to),n.finish()}parseSlice(t,r={}){let n=new s4(this,r,!0);return n.addAll(t,vt.none,r.from,r.to),_e.maxOpen(n.finish())}matchTag(t,r,n){for(let s=n?this.tags.indexOf(n)+1:0;s<this.tags.length;s++){let a=this.tags[s];if(_ye(t,a.tag)&&(a.namespace===void 0||t.namespaceURI==a.namespace)&&(!a.context||r.matchesContext(a.context))){if(a.getAttrs){let o=a.getAttrs(t);if(o===!1)continue;a.attrs=o||void 0}return a}}}matchStyle(t,r,n,s){for(let a=s?this.styles.indexOf(s)+1:0;a<this.styles.length;a++){let o=this.styles[a],l=o.style;if(!(l.indexOf(t)!=0||o.context&&!n.matchesContext(o.context)||l.length>t.length&&(l.charCodeAt(t.length)!=61||l.slice(t.length+1)!=r))){if(o.getAttrs){let c=o.getAttrs(r);if(c===!1)continue;o.attrs=c||void 0}return o}}}static schemaRules(t){let r=[];function n(s){let a=s.priority==null?50:s.priority,o=0;for(;o<r.length;o++){let l=r[o];if((l.priority==null?50:l.priority)<a)break}r.splice(o,0,s)}for(let s in t.marks){let a=t.marks[s].spec.parseDOM;a&&a.forEach(o=>{n(o=a4(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in t.nodes){let a=t.nodes[s].spec.parseDOM;a&&a.forEach(o=>{n(o=a4(o)),o.node||o.ignore||o.mark||(o.node=s)})}return r}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Bk(t,Bk.schemaRules(t)))}};const xB={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Sye={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},bB={ol:!0,ul:!0},lf=1,zk=2,uh=4;function n4(e,t,r){return t!=null?(t?lf:0)|(t==="full"?zk:0):e&&e.whitespace=="pre"?lf|zk:r&~uh}class im{constructor(t,r,n,s,a,o){this.type=t,this.attrs=r,this.marks=n,this.solid=s,this.options=o,this.content=[],this.activeMarks=vt.none,this.match=a||(o&uh?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(ce.from(t));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,s;return(s=n.findWrapping(t.type))?(this.match=n,s):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&lf)){let n=this.content[this.content.length-1],s;if(n&&n.isText&&(s=/[ \t\r\n\u000c]+$/.exec(n.text))){let a=n;n.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-s[0].length))}}let r=ce.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(ce.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!xB.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class s4{constructor(t,r,n){this.parser=t,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let s=r.topNode,a,o=n4(null,r.preserveWhitespace,0)|(n?uh:0);s?a=new im(s.type,s.attrs,vt.none,!0,r.topMatch||s.type.contentMatch,o):n?a=new im(null,null,vt.none,!0,null,o):a=new im(t.schema.topNodeType,null,vt.none,!0,null,o),this.nodes=[a],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,r){t.nodeType==3?this.addTextNode(t,r):t.nodeType==1&&this.addElement(t,r)}addTextNode(t,r){let n=t.nodeValue,s=this.top,a=s.options&zk?"full":this.localPreserveWS||(s.options&lf)>0,{schema:o}=this.parser;if(a==="full"||s.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(a)if(a==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let l=n.split(/\r?\n|\r/);for(let c=0;c<l.length;c++)c&&this.insertNode(o.linebreakReplacement.create(),r,!0),l[c]&&this.insertNode(o.text(l[c]),r,!/\S/.test(l[c]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let l=s.content[s.content.length-1],c=t.previousSibling;(!l||c&&c.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(t)}else this.findInside(t)}addElement(t,r,n){let s=this.localPreserveWS,a=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),l;bB.hasOwnProperty(o)&&this.parser.normalizeLists&&Cye(t);let c=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(l=this.parser.matchTag(t,this,n));e:if(c?c.ignore:Sye.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,r);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(t=c.skip);let d,u=this.needsBlock;if(xB.hasOwnProperty(o))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),d=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,r);break e}let h=c&&c.skip?r:this.readStyles(t,r);h&&this.addAll(t,h),d&&this.sync(a),this.needsBlock=u}else{let d=this.readStyles(t,r);d&&this.addElementByRule(t,c,d,c.consuming===!1?l:void 0)}this.localPreserveWS=s}leafFallback(t,r){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),r)}ignoreFallback(t,r){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(t,r){let n=t.style;if(n&&n.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let a=this.parser.matchedStyles[s],o=n.getPropertyValue(a);if(o)for(let l=void 0;;){let c=this.parser.matchStyle(a,o,this,l);if(!c)break;if(c.ignore)return null;if(c.clearMark?r=r.filter(d=>!c.clearMark(d)):r=r.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)l=c;else break}}return r}addElementByRule(t,r,n,s){let a,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,t.nodeName=="BR")||this.leafFallback(t,n);else{let c=this.enter(o,r.attrs||null,n,r.preserveWhitespace);c&&(a=!0,n=c)}else{let c=this.parser.schema.marks[r.mark];n=n.concat(c.create(r.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(t);else if(s)this.addElement(t,n,s);else if(r.getContent)this.findInside(t),r.getContent(t,this.parser.schema).forEach(c=>this.insertNode(c,n,!1));else{let c=t;typeof r.contentElement=="string"?c=t.querySelector(r.contentElement):typeof r.contentElement=="function"?c=r.contentElement(t):r.contentElement&&(c=r.contentElement),this.findAround(t,c,!0),this.addAll(c,n),this.findAround(t,c,!1)}a&&this.sync(l)&&this.open--}addAll(t,r,n,s){let a=n||0;for(let o=n?t.childNodes[n]:t.firstChild,l=s==null?null:t.childNodes[s];o!=l;o=o.nextSibling,++a)this.findAtPoint(t,a),this.addDOM(o,r);this.findAtPoint(t,a)}findPlace(t,r,n){let s,a;for(let o=this.open,l=0;o>=0;o--){let c=this.nodes[o],d=c.findWrapping(t);if(d&&(!s||s.length>d.length+l)&&(s=d,a=c,!d.length))break;if(c.solid){if(n)break;l+=2}}if(!s)return null;this.sync(a);for(let o=0;o<s.length;o++)r=this.enterInner(s[o],null,r,!1);return r}insertNode(t,r,n){if(t.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(r=this.enterInner(a,null,r))}let s=this.findPlace(t,r,n);if(s){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(t.type));let o=vt.none;for(let l of s.concat(t.marks))(a.type?a.type.allowsMarkType(l.type):i4(l.type,t.type))&&(o=l.addToSet(o));return a.content.push(t.mark(o)),!0}return!1}enter(t,r,n,s){let a=this.findPlace(t.create(r),n,!1);return a&&(a=this.enterInner(t,r,n,!0,s)),a}enterInner(t,r,n,s=!1,a){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let l=n4(t,a,o.options);o.options&uh&&o.content.length==0&&(l|=uh);let c=vt.none;return n=n.filter(d=>(o.type?o.type.allowsMarkType(d.type):i4(d.type,t))?(c=d.addToSet(c),!1):!0),this.nodes.push(new im(t,r,c,s,null,l)),this.open++,n}closeExtra(t=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let r=this.open;r>=0;r--){if(this.nodes[r]==t)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=lf)}return!1}get currentPos(){this.closeExtra();let t=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let s=n.length-1;s>=0;s--)t+=n[s].nodeSize;r&&t++}return t}findAtPoint(t,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&t.nodeType==1&&t.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(t,r,n){if(t!=r&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&t.nodeType==1&&t.contains(this.find[s].node)&&r.compareDocumentPosition(this.find[s].node)&(n?2:4)&&(this.find[s].pos=this.currentPos)}findInText(t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&(this.find[r].pos=this.currentPos-(t.nodeValue.length-this.find[r].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let r=t.split("/"),n=this.options.context,s=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),a=-(n?n.depth+1:0)+(s?0:1),o=(l,c)=>{for(;l>=0;l--){let d=r[l];if(d==""){if(l==r.length-1||l==0)continue;for(;c>=a;c--)if(o(l-1,c))return!0;return!1}else{let u=c>0||c==0&&s?this.nodes[c].type:n&&c>=a?n.node(c-a).type:null;if(!u||u.name!=d&&!u.isInGroup(d))return!1;c--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let r=t.depth;r>=0;r--){let n=t.node(r).contentMatchAt(t.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function Cye(e){for(let t=e.firstChild,r=null;t;t=t.nextSibling){let n=t.nodeType==1?t.nodeName.toLowerCase():null;n&&bB.hasOwnProperty(n)&&r?(r.appendChild(t),t=r):n=="li"?r=t:n&&(r=null)}}function _ye(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function a4(e){let t={};for(let r in e)t[r]=e[r];return t}function i4(e,t){let r=t.schema.nodes;for(let n in r){let s=r[n];if(!s.allowsMarkType(e))continue;let a=[],o=l=>{a.push(l);for(let c=0;c<l.edgeCount;c++){let{type:d,next:u}=l.edge(c);if(d==t||a.indexOf(u)<0&&o(u))return!0}};if(o(s.contentMatch))return!0}}class cc{constructor(t,r){this.nodes=t,this.marks=r}serializeFragment(t,r={},n){n||(n=qv(r).createDocumentFragment());let s=n,a=[];return t.forEach(o=>{if(a.length||o.marks.length){let l=0,c=0;for(;l<a.length&&c<o.marks.length;){let d=o.marks[c];if(!this.marks[d.type.name]){c++;continue}if(!d.eq(a[l][0])||d.type.spec.spanning===!1)break;l++,c++}for(;l<a.length;)s=a.pop()[1];for(;c<o.marks.length;){let d=o.marks[c++],u=this.serializeMark(d,o.isInline,r);u&&(a.push([d,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(t,r){let{dom:n,contentDOM:s}=zm(qv(r),this.nodes[t.type.name](t),null,t.attrs);if(s){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,r,s)}return n}serializeNode(t,r={}){let n=this.serializeNodeInner(t,r);for(let s=t.marks.length-1;s>=0;s--){let a=this.serializeMark(t.marks[s],t.isInline,r);a&&((a.contentDOM||a.dom).appendChild(n),n=a.dom)}return n}serializeMark(t,r,n={}){let s=this.marks[t.type.name];return s&&zm(qv(n),s(t,r),null,t.attrs)}static renderSpec(t,r,n=null,s){return zm(t,r,n,s)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new cc(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let r=o4(t.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(t){return o4(t.marks)}}function o4(e){let t={};for(let r in e){let n=e[r].spec.toDOM;n&&(t[r]=n)}return t}function qv(e){return e.document||window.document}const l4=new WeakMap;function Eye(e){let t=l4.get(e);return t===void 0&&l4.set(e,t=Aye(e)),t}function Aye(e){let t=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")t||(t=[]),t.push(n);else for(let s=0;s<n.length;s++)r(n[s]);else for(let s in n)r(n[s])}return r(e),t}function zm(e,t,r,n){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let s=t[0],a;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(a=Eye(n))&&a.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(r=s.slice(0,o),s=s.slice(o+1));let l,c=r?e.createElementNS(r,s):e.createElement(s),d=t[1],u=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){u=2;for(let h in d)if(d[h]!=null){let f=h.indexOf(" ");f>0?c.setAttributeNS(h.slice(0,f),h.slice(f+1),d[h]):h=="style"&&c.style?c.style.cssText=d[h]:c.setAttribute(h,d[h])}}for(let h=u;h<t.length;h++){let f=t[h];if(f===0){if(h<t.length-1||h>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:p,contentDOM:m}=zm(e,f,r,n);if(c.appendChild(p),m){if(l)throw new RangeError("Multiple content holes");l=m}}}return{dom:c,contentDOM:l}}const yB=65535,vB=Math.pow(2,16);function Tye(e,t){return e+t*vB}function c4(e){return e&yB}function Pye(e){return(e-(e&yB))/vB}const wB=1,kB=2,Fm=4,jB=8;class Fk{constructor(t,r,n){this.pos=t,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&jB)>0}get deletedBefore(){return(this.delInfo&(wB|Fm))>0}get deletedAfter(){return(this.delInfo&(kB|Fm))>0}get deletedAcross(){return(this.delInfo&Fm)>0}}class Qn{constructor(t,r=!1){if(this.ranges=t,this.inverted=r,!t.length&&Qn.empty)return Qn.empty}recover(t){let r=0,n=c4(t);if(!this.inverted)for(let s=0;s<n;s++)r+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[n*3]+r+Pye(t)}mapResult(t,r=1){return this._map(t,r,!1)}map(t,r=1){return this._map(t,r,!0)}_map(t,r,n){let s=0,a=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?s:0);if(c>t)break;let d=this.ranges[l+a],u=this.ranges[l+o],h=c+d;if(t<=h){let f=d?t==c?-1:t==h?1:r:r,p=c+s+(f<0?0:u);if(n)return p;let m=t==(r<0?c:h)?null:Tye(l/3,t-c),x=t==c?kB:t==h?wB:Fm;return(r<0?t!=c:t!=h)&&(x|=jB),new Fk(p,x,m)}s+=u-d}return n?t+s:new Fk(t+s,0,null)}touches(t,r){let n=0,s=c4(r),a=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?n:0);if(c>t)break;let d=this.ranges[l+a],u=c+d;if(t<=u&&l==s*3)return!0;n+=this.ranges[l+o]-d}return!1}forEach(t){let r=this.inverted?2:1,n=this.inverted?1:2;for(let s=0,a=0;s<this.ranges.length;s+=3){let o=this.ranges[s],l=o-(this.inverted?a:0),c=o+(this.inverted?0:a),d=this.ranges[s+r],u=this.ranges[s+n];t(l,l+d,c,c+u),a+=u-d}}invert(){return new Qn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Qn.empty:new Qn(t<0?[0,-t,0]:[0,0,t])}}Qn.empty=new Qn([]);class cf{constructor(t,r,n=0,s=t?t.length:0){this.mirror=r,this.from=n,this.to=s,this._maps=t||[],this.ownData=!(t||r)}get maps(){return this._maps}slice(t=0,r=this.maps.length){return new cf(this._maps,this.mirror,t,r)}appendMap(t,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(t){for(let r=0,n=this._maps.length;r<t._maps.length;r++){let s=t.getMirror(r);this.appendMap(t._maps[r],s!=null&&s<r?n+s:void 0)}}getMirror(t){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==t)return this.mirror[r+(r%2?-1:1)]}}setMirror(t,r){this.mirror||(this.mirror=[]),this.mirror.push(t,r)}appendMappingInverted(t){for(let r=t.maps.length-1,n=this._maps.length+t._maps.length;r>=0;r--){let s=t.getMirror(r);this.appendMap(t._maps[r].invert(),s!=null&&s>r?n-s-1:void 0)}}invert(){let t=new cf;return t.appendMappingInverted(this),t}map(t,r=1){if(this.mirror)return this._map(t,r,!0);for(let n=this.from;n<this.to;n++)t=this._maps[n].map(t,r);return t}mapResult(t,r=1){return this._map(t,r,!1)}_map(t,r,n){let s=0;for(let a=this.from;a<this.to;a++){let o=this._maps[a],l=o.mapResult(t,r);if(l.recover!=null){let c=this.getMirror(a);if(c!=null&&c>a&&c<this.to){a=c,t=this._maps[c].recover(l.recover);continue}}s|=l.delInfo,t=l.pos}return n?t:new Fk(t,s,null)}}const Gv=Object.create(null);class un{getMap(){return Qn.empty}merge(t){return null}static fromJSON(t,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Gv[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(t,r)}static jsonID(t,r){if(t in Gv)throw new RangeError("Duplicate use of step JSON ID "+t);return Gv[t]=r,r.prototype.jsonID=t,r}}class dr{constructor(t,r){this.doc=t,this.failed=r}static ok(t){return new dr(t,null)}static fail(t){return new dr(null,t)}static fromReplace(t,r,n,s){try{return dr.ok(t.replace(r,n,s))}catch(a){if(a instanceof j0)return dr.fail(a.message);throw a}}}function wC(e,t,r){let n=[];for(let s=0;s<e.childCount;s++){let a=e.child(s);a.content.size&&(a=a.copy(wC(a.content,t,a))),a.isInline&&(a=t(a,r,s)),n.push(a)}return ce.fromArray(n)}class io extends un{constructor(t,r,n){super(),this.from=t,this.to=r,this.mark=n}apply(t){let r=t.slice(this.from,this.to),n=t.resolve(this.from),s=n.node(n.sharedDepth(this.to)),a=new _e(wC(r.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),r.openStart,r.openEnd);return dr.fromReplace(t,this.from,this.to,a)}invert(){return new ia(this.from,this.to,this.mark)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new io(r.pos,n.pos,this.mark)}merge(t){return t instanceof io&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new io(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new io(r.from,r.to,t.markFromJSON(r.mark))}}un.jsonID("addMark",io);class ia extends un{constructor(t,r,n){super(),this.from=t,this.to=r,this.mark=n}apply(t){let r=t.slice(this.from,this.to),n=new _e(wC(r.content,s=>s.mark(this.mark.removeFromSet(s.marks)),t),r.openStart,r.openEnd);return dr.fromReplace(t,this.from,this.to,n)}invert(){return new io(this.from,this.to,this.mark)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new ia(r.pos,n.pos,this.mark)}merge(t){return t instanceof ia&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new ia(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ia(r.from,r.to,t.markFromJSON(r.mark))}}un.jsonID("removeMark",ia);class oo extends un{constructor(t,r){super(),this.pos=t,this.mark=r}apply(t){let r=t.nodeAt(this.pos);if(!r)return dr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return dr.fromReplace(t,this.pos,this.pos+1,new _e(ce.from(n),0,r.isLeaf?0:1))}invert(t){let r=t.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let s=0;s<r.marks.length;s++)if(!r.marks[s].isInSet(n))return new oo(this.pos,r.marks[s]);return new oo(this.pos,this.mark)}}return new Jl(this.pos,this.mark)}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new oo(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new oo(r.pos,t.markFromJSON(r.mark))}}un.jsonID("addNodeMark",oo);class Jl extends un{constructor(t,r){super(),this.pos=t,this.mark=r}apply(t){let r=t.nodeAt(this.pos);if(!r)return dr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return dr.fromReplace(t,this.pos,this.pos+1,new _e(ce.from(n),0,r.isLeaf?0:1))}invert(t){let r=t.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new oo(this.pos,this.mark)}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new Jl(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Jl(r.pos,t.markFromJSON(r.mark))}}un.jsonID("removeNodeMark",Jl);class Cr extends un{constructor(t,r,n,s=!1){super(),this.from=t,this.to=r,this.slice=n,this.structure=s}apply(t){return this.structure&&Hk(t,this.from,this.to)?dr.fail("Structure replace would overwrite content"):dr.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Qn([this.from,this.to-this.from,this.slice.size])}invert(t){return new Cr(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new Cr(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(t){if(!(t instanceof Cr)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let r=this.slice.size+t.slice.size==0?_e.empty:new _e(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Cr(this.from,this.to+(t.to-t.from),r,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let r=this.slice.size+t.slice.size==0?_e.empty:new _e(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Cr(t.from,this.to,r,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Cr(r.from,r.to,_e.fromJSON(t,r.slice),!!r.structure)}}un.jsonID("replace",Cr);class Mr extends un{constructor(t,r,n,s,a,o,l=!1){super(),this.from=t,this.to=r,this.gapFrom=n,this.gapTo=s,this.slice=a,this.insert=o,this.structure=l}apply(t){if(this.structure&&(Hk(t,this.from,this.gapFrom)||Hk(t,this.gapTo,this.to)))return dr.fail("Structure gap-replace would overwrite content");let r=t.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return dr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?dr.fromReplace(t,this.from,this.to,n):dr.fail("Content does not fit in gap")}getMap(){return new Qn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let r=this.gapTo-this.gapFrom;return new Mr(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),s=this.from==this.gapFrom?r.pos:t.map(this.gapFrom,-1),a=this.to==this.gapTo?n.pos:t.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||s<r.pos||a>n.pos?null:new Mr(r.pos,n.pos,s,a,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Mr(r.from,r.to,r.gapFrom,r.gapTo,_e.fromJSON(t,r.slice),r.insert,!!r.structure)}}un.jsonID("replaceAround",Mr);function Hk(e,t,r){let n=e.resolve(t),s=r-t,a=n.depth;for(;s>0&&a>0&&n.indexAfter(a)==n.node(a).childCount;)a--,s--;if(s>0){let o=n.node(a).maybeChild(n.indexAfter(a));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function Mye(e,t,r,n){let s=[],a=[],o,l;e.doc.nodesBetween(t,r,(c,d,u)=>{if(!c.isInline)return;let h=c.marks;if(!n.isInSet(h)&&u.type.allowsMarkType(n.type)){let f=Math.max(d,t),p=Math.min(d+c.nodeSize,r),m=n.addToSet(h);for(let x=0;x<h.length;x++)h[x].isInSet(m)||(o&&o.to==f&&o.mark.eq(h[x])?o.to=p:s.push(o=new ia(f,p,h[x])));l&&l.to==f?l.to=p:a.push(l=new io(f,p,n))}}),s.forEach(c=>e.step(c)),a.forEach(c=>e.step(c))}function Oye(e,t,r,n){let s=[],a=0;e.doc.nodesBetween(t,r,(o,l)=>{if(!o.isInline)return;a++;let c=null;if(n instanceof ry){let d=o.marks,u;for(;u=n.isInSet(d);)(c||(c=[])).push(u),d=u.removeFromSet(d)}else n?n.isInSet(o.marks)&&(c=[n]):c=o.marks;if(c&&c.length){let d=Math.min(l+o.nodeSize,r);for(let u=0;u<c.length;u++){let h=c[u],f;for(let p=0;p<s.length;p++){let m=s[p];m.step==a-1&&h.eq(s[p].style)&&(f=m)}f?(f.to=d,f.step=a):s.push({style:h,from:Math.max(l,t),to:d,step:a})}}}),s.forEach(o=>e.step(new ia(o.from,o.to,o.style)))}function kC(e,t,r,n=r.contentMatch,s=!0){let a=e.doc.nodeAt(t),o=[],l=t+1;for(let c=0;c<a.childCount;c++){let d=a.child(c),u=l+d.nodeSize,h=n.matchType(d.type);if(!h)o.push(new Cr(l,u,_e.empty));else{n=h;for(let f=0;f<d.marks.length;f++)r.allowsMarkType(d.marks[f].type)||e.step(new ia(l,u,d.marks[f]));if(s&&d.isText&&r.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(d.text);)m||(m=new _e(ce.from(r.schema.text(" ",r.allowedMarks(d.marks))),0,0)),o.push(new Cr(l+f.index,l+f.index+f[0].length,m))}}l=u}if(!n.validEnd){let c=n.fillBefore(ce.empty,!0);e.replace(l,l,new _e(c,0,0))}for(let c=o.length-1;c>=0;c--)e.step(o[c])}function $ye(e,t,r){return(t==0||e.canReplace(t,e.childCount))&&(r==e.childCount||e.canReplace(0,r))}function eu(e){let r=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth,s=0,a=0;;--n){let o=e.$from.node(n),l=e.$from.index(n)+s,c=e.$to.indexAfter(n)-a;if(n<e.depth&&o.canReplace(l,c,r))return n;if(n==0||o.type.spec.isolating||!$ye(o,l,c))break;l&&(s=1),c<o.childCount&&(a=1)}return null}function Dye(e,t,r){let{$from:n,$to:s,depth:a}=t,o=n.before(a+1),l=s.after(a+1),c=o,d=l,u=ce.empty,h=0;for(let m=a,x=!1;m>r;m--)x||n.index(m)>0?(x=!0,u=ce.from(n.node(m).copy(u)),h++):c--;let f=ce.empty,p=0;for(let m=a,x=!1;m>r;m--)x||s.after(m+1)<s.end(m)?(x=!0,f=ce.from(s.node(m).copy(f)),p++):d++;e.step(new Mr(c,d,o,l,new _e(u.append(f),h,p),u.size-h,!0))}function jC(e,t,r=null,n=e){let s=Iye(e,t),a=s&&Lye(n,t);return a?s.map(d4).concat({type:t,attrs:r}).concat(a.map(d4)):null}function d4(e){return{type:e,attrs:null}}function Iye(e,t){let{parent:r,startIndex:n,endIndex:s}=e,a=r.contentMatchAt(n).findWrapping(t);if(!a)return null;let o=a.length?a[0]:t;return r.canReplaceWith(n,s,o)?a:null}function Lye(e,t){let{parent:r,startIndex:n,endIndex:s}=e,a=r.child(n),o=t.contentMatch.findWrapping(a.type);if(!o)return null;let c=(o.length?o[o.length-1]:t).contentMatch;for(let d=n;c&&d<s;d++)c=c.matchType(r.child(d).type);return!c||!c.validEnd?null:o}function Rye(e,t,r){let n=ce.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let l=r[o].type.contentMatch.matchFragment(n);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=ce.from(r[o].type.create(r[o].attrs,n))}let s=t.start,a=t.end;e.step(new Mr(s,a,s,a,new _e(n,0,0),r.length,!0))}function Bye(e,t,r,n,s){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=e.steps.length;e.doc.nodesBetween(t,r,(o,l)=>{let c=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(n,c)&&zye(e.doc,e.mapping.slice(a).map(l),n)){let d=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",m=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!m?d=!1:!p&&m&&(d=!0)}d===!1&&SB(e,o,l,a),kC(e,e.mapping.slice(a).map(l,1),n,void 0,d===null);let u=e.mapping.slice(a),h=u.map(l,1),f=u.map(l+o.nodeSize,1);return e.step(new Mr(h,f,h+1,f-1,new _e(ce.from(n.create(c,null,o.marks)),0,0),1,!0)),d===!0&&NB(e,o,l,a),!1}})}function NB(e,t,r,n){t.forEach((s,a)=>{if(s.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(s.text);){let c=e.mapping.slice(n).map(r+1+a+o.index);e.replaceWith(c,c+1,t.type.schema.linebreakReplacement.create())}}})}function SB(e,t,r,n){t.forEach((s,a)=>{if(s.type==s.type.schema.linebreakReplacement){let o=e.mapping.slice(n).map(r+1+a);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function zye(e,t,r){let n=e.resolve(t),s=n.index();return n.parent.canReplaceWith(s,s+1,r)}function Fye(e,t,r,n,s){let a=e.doc.nodeAt(t);if(!a)throw new RangeError("No node at given position");r||(r=a.type);let o=r.create(n,null,s||a.marks);if(a.isLeaf)return e.replaceWith(t,t+a.nodeSize,o);if(!r.validContent(a.content))throw new RangeError("Invalid content for node type "+r.name);e.step(new Mr(t,t+a.nodeSize,t+1,t+a.nodeSize-1,new _e(ce.from(o),0,0),1,!0))}function di(e,t,r=1,n){let s=e.resolve(t),a=s.depth-r,o=n&&n[n.length-1]||s.parent;if(a<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let d=s.depth-1,u=r-2;d>a;d--,u--){let h=s.node(d),f=s.index(d);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),m=n&&n[u+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let x=n&&n[u]||h;if(!h.canReplace(f+1,h.childCount)||!x.type.validContent(p))return!1}let l=s.indexAfter(a),c=n&&n[0];return s.node(a).canReplaceWith(l,l,c?c.type:s.node(a+1).type)}function Hye(e,t,r=1,n){let s=e.doc.resolve(t),a=ce.empty,o=ce.empty;for(let l=s.depth,c=s.depth-r,d=r-1;l>c;l--,d--){a=ce.from(s.node(l).copy(a));let u=n&&n[d];o=ce.from(u?u.type.create(u.attrs,o):s.node(l).copy(o))}e.step(new Cr(t,t,new _e(a.append(o),r,r),!0))}function Ko(e,t){let r=e.resolve(t),n=r.index();return CB(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function Uye(e,t){t.content.size||e.type.compatibleContent(t.type);let r=e.contentMatchAt(e.childCount),{linebreakReplacement:n}=e.type.schema;for(let s=0;s<t.childCount;s++){let a=t.child(s),o=a.type==n?e.type.schema.nodes.text:a.type;if(r=r.matchType(o),!r||!e.type.allowsMarks(a.marks))return!1}return r.validEnd}function CB(e,t){return!!(e&&t&&!e.isLeaf&&Uye(e,t))}function ny(e,t,r=-1){let n=e.resolve(t);for(let s=n.depth;;s--){let a,o,l=n.index(s);if(s==n.depth?(a=n.nodeBefore,o=n.nodeAfter):r>0?(a=n.node(s+1),l++,o=n.node(s).maybeChild(l)):(a=n.node(s).maybeChild(l-1),o=n.node(s+1)),a&&!a.isTextblock&&CB(a,o)&&n.node(s).canReplace(l,l+1))return t;if(s==0)break;t=r<0?n.before(s):n.after(s)}}function Wye(e,t,r){let n=null,{linebreakReplacement:s}=e.doc.type.schema,a=e.doc.resolve(t-r),o=a.node().type;if(s&&o.inlineContent){let u=o.whitespace=="pre",h=!!o.contentMatch.matchType(s);u&&!h?n=!1:!u&&h&&(n=!0)}let l=e.steps.length;if(n===!1){let u=e.doc.resolve(t+r);SB(e,u.node(),u.before(),l)}o.inlineContent&&kC(e,t+r-1,o,a.node().contentMatchAt(a.index()),n==null);let c=e.mapping.slice(l),d=c.map(t-r);if(e.step(new Cr(d,c.map(t+r,-1),_e.empty,!0)),n===!0){let u=e.doc.resolve(d);NB(e,u.node(),u.before(),e.steps.length)}return e}function Vye(e,t,r){let n=e.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),r))return t;if(n.parentOffset==0)for(let s=n.depth-1;s>=0;s--){let a=n.index(s);if(n.node(s).canReplaceWith(a,a,r))return n.before(s+1);if(a>0)return null}if(n.parentOffset==n.parent.content.size)for(let s=n.depth-1;s>=0;s--){let a=n.indexAfter(s);if(n.node(s).canReplaceWith(a,a,r))return n.after(s+1);if(a<n.node(s).childCount)return null}return null}function _B(e,t,r){let n=e.resolve(t);if(!r.content.size)return t;let s=r.content;for(let a=0;a<r.openStart;a++)s=s.firstChild.content;for(let a=1;a<=(r.openStart==0&&r.size?2:1);a++)for(let o=n.depth;o>=0;o--){let l=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,c=n.index(o)+(l>0?1:0),d=n.node(o),u=!1;if(a==1)u=d.canReplace(c,c,s);else{let h=d.contentMatchAt(c).findWrapping(s.firstChild.type);u=h&&d.canReplaceWith(c,c,h[0])}if(u)return l==0?n.pos:l<0?n.before(o+1):n.after(o+1)}return null}function sy(e,t,r=t,n=_e.empty){if(t==r&&!n.size)return null;let s=e.resolve(t),a=e.resolve(r);return EB(s,a,n)?new Cr(t,r,n):new qye(s,a,n).fit()}function EB(e,t,r){return!r.openStart&&!r.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),r.content)}class qye{constructor(t,r,n){this.$from=t,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=ce.empty;for(let s=0;s<=t.depth;s++){let a=t.node(s);this.frontier.push({type:a.type,match:a.contentMatchAt(t.indexAfter(s))})}for(let s=t.depth;s>0;s--)this.placed=ce.from(t.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,s=this.close(t<0?this.$to:n.doc.resolve(t));if(!s)return null;let a=this.placed,o=n.depth,l=s.depth;for(;o&&l&&a.childCount==1;)a=a.firstChild.content,o--,l--;let c=new _e(a,o,l);return t>-1?new Mr(n.pos,t,this.$to.pos,this.$to.end(),c,r):c.size||n.pos!=this.$to.pos?new Cr(n.pos,s.pos,c):null}findFittable(){let t=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,s=this.unplaced.openEnd;n<t;n++){let a=r.firstChild;if(r.childCount>1&&(s=0),a.type.spec.isolating&&s<=n){t=n;break}r=a.content}for(let r=1;r<=2;r++)for(let n=r==1?t:this.unplaced.openStart;n>=0;n--){let s,a=null;n?(a=Kv(this.unplaced.content,n-1).firstChild,s=a.content):s=this.unplaced.content;let o=s.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:d}=this.frontier[l],u,h=null;if(r==1&&(o?d.matchType(o.type)||(h=d.fillBefore(ce.from(o),!1)):a&&c.compatibleContent(a.type)))return{sliceDepth:n,frontierDepth:l,parent:a,inject:h};if(r==2&&o&&(u=d.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:l,parent:a,wrap:u};if(a&&d.matchType(a.type))break}}}openMore(){let{content:t,openStart:r,openEnd:n}=this.unplaced,s=Kv(t,r);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new _e(t,r+1,Math.max(n,s.size+r>=t.size-n?r+1:0)),!0)}dropNode(){let{content:t,openStart:r,openEnd:n}=this.unplaced,s=Kv(t,r);if(s.childCount<=1&&r>0){let a=t.size-r<=r+s.size;this.unplaced=new _e(Vu(t,r-1,1),r-1,a?r-1:n)}else this.unplaced=new _e(Vu(t,r,1),r,n)}placeNodes({sliceDepth:t,frontierDepth:r,parent:n,inject:s,wrap:a}){for(;this.depth>r;)this.closeFrontierNode();if(a)for(let x=0;x<a.length;x++)this.openFrontierNode(a[x]);let o=this.unplaced,l=n?n.content:o.content,c=o.openStart-t,d=0,u=[],{match:h,type:f}=this.frontier[r];if(s){for(let x=0;x<s.childCount;x++)u.push(s.child(x));h=h.matchFragment(s)}let p=l.size+t-(o.content.size-o.openEnd);for(;d<l.childCount;){let x=l.child(d),b=h.matchType(x.type);if(!b)break;d++,(d>1||c==0||x.content.size)&&(h=b,u.push(AB(x.mark(f.allowedMarks(x.marks)),d==1?c:0,d==l.childCount?p:-1)))}let m=d==l.childCount;m||(p=-1),this.placed=qu(this.placed,r,ce.from(u)),this.frontier[r].match=h,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,b=l;x<p;x++){let y=b.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),b=y.content}this.unplaced=m?t==0?_e.empty:new _e(Vu(o.content,t-1,1),t-1,p<0?o.openEnd:t-1):new _e(Vu(o.content,t,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],r;if(!t.type.isTextblock||!Yv(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,s=this.$to.after(n);for(;n>1&&s==this.$to.end(--n);)++s;return s}findCloseLevel(t){e:for(let r=Math.min(this.depth,t.depth);r>=0;r--){let{match:n,type:s}=this.frontier[r],a=r<t.depth&&t.end(r+1)==t.pos+(t.depth-(r+1)),o=Yv(t,r,s,n,a);if(o){for(let l=r-1;l>=0;l--){let{match:c,type:d}=this.frontier[l],u=Yv(t,l,d,c,!0);if(!u||u.childCount)continue e}return{depth:r,fit:o,move:a?t.doc.resolve(t.after(r+1)):t}}}}close(t){let r=this.findCloseLevel(t);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=qu(this.placed,r.depth,r.fit)),t=r.move;for(let n=r.depth+1;n<=t.depth;n++){let s=t.node(n),a=s.type.contentMatch.fillBefore(s.content,!0,t.index(n));this.openFrontierNode(s.type,s.attrs,a)}return t}openFrontierNode(t,r=null,n){let s=this.frontier[this.depth];s.match=s.match.matchType(t),this.placed=qu(this.placed,this.depth,ce.from(t.create(r,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(ce.empty,!0);r.childCount&&(this.placed=qu(this.placed,this.frontier.length,r))}}function Vu(e,t,r){return t==0?e.cutByIndex(r,e.childCount):e.replaceChild(0,e.firstChild.copy(Vu(e.firstChild.content,t-1,r)))}function qu(e,t,r){return t==0?e.append(r):e.replaceChild(e.childCount-1,e.lastChild.copy(qu(e.lastChild.content,t-1,r)))}function Kv(e,t){for(let r=0;r<t;r++)e=e.firstChild.content;return e}function AB(e,t,r){if(t<=0)return e;let n=e.content;return t>1&&(n=n.replaceChild(0,AB(n.firstChild,t-1,n.childCount==1?r-1:0))),t>0&&(n=e.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(e.type.contentMatch.matchFragment(n).fillBefore(ce.empty,!0)))),e.copy(n)}function Yv(e,t,r,n,s){let a=e.node(t),o=s?e.indexAfter(t):e.index(t);if(o==a.childCount&&!r.compatibleContent(a.type))return null;let l=n.fillBefore(a.content,!0,o);return l&&!Gye(r,a.content,o)?l:null}function Gye(e,t,r){for(let n=r;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return!0;return!1}function Kye(e){return e.spec.defining||e.spec.definingForContent}function Yye(e,t,r,n){if(!n.size)return e.deleteRange(t,r);let s=e.doc.resolve(t),a=e.doc.resolve(r);if(EB(s,a,n))return e.step(new Cr(t,r,n));let o=PB(s,a);o[o.length-1]==0&&o.pop();let l=-(s.depth+1);o.unshift(l);for(let f=s.depth,p=s.pos-1;f>0;f--,p--){let m=s.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?l=f:s.before(f)==p&&o.splice(1,0,-f)}let c=o.indexOf(l),d=[],u=n.openStart;for(let f=n.content,p=0;;p++){let m=f.firstChild;if(d.push(m),p==n.openStart)break;f=m.content}for(let f=u-1;f>=0;f--){let p=d[f],m=Kye(p.type);if(m&&!p.sameMarkup(s.node(Math.abs(l)-1)))u=f;else if(m||!p.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let p=(f+u+1)%(n.openStart+1),m=d[p];if(m)for(let x=0;x<o.length;x++){let b=o[(x+c)%o.length],y=!0;b<0&&(y=!1,b=-b);let v=s.node(b-1),w=s.index(b-1);if(v.canReplaceWith(w,w,m.type,m.marks))return e.replace(s.before(b),y?a.after(b):r,new _e(TB(n.content,0,n.openStart,p),p,n.openEnd))}}let h=e.steps.length;for(let f=o.length-1;f>=0&&(e.replace(t,r,n),!(e.steps.length>h));f--){let p=o[f];p<0||(t=s.before(p),r=a.after(p))}}function TB(e,t,r,n,s){if(t<r){let a=e.firstChild;e=e.replaceChild(0,a.copy(TB(a.content,t+1,r,n,a)))}if(t>n){let a=s.contentMatchAt(0),o=a.fillBefore(e).append(e);e=o.append(a.matchFragment(o).fillBefore(ce.empty,!0))}return e}function Xye(e,t,r,n){if(!n.isInline&&t==r&&e.doc.resolve(t).parent.content.size){let s=Vye(e.doc,t,n.type);s!=null&&(t=r=s)}e.replaceRange(t,r,new _e(ce.from(n),0,0))}function Jye(e,t,r){let n=e.doc.resolve(t),s=e.doc.resolve(r),a=PB(n,s);for(let o=0;o<a.length;o++){let l=a[o],c=o==a.length-1;if(c&&l==0||n.node(l).type.contentMatch.validEnd)return e.delete(n.start(l),s.end(l));if(l>0&&(c||n.node(l-1).canReplace(n.index(l-1),s.indexAfter(l-1))))return e.delete(n.before(l),s.after(l))}for(let o=1;o<=n.depth&&o<=s.depth;o++)if(t-n.start(o)==n.depth-o&&r>n.end(o)&&s.end(o)-r!=s.depth-o&&n.start(o-1)==s.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),s.index(o-1)))return e.delete(n.before(o),r);e.delete(t,r)}function PB(e,t){let r=[],n=Math.min(e.depth,t.depth);for(let s=n;s>=0;s--){let a=e.start(s);if(a<e.pos-(e.depth-s)||t.end(s)>t.pos+(t.depth-s)||e.node(s).type.spec.isolating||t.node(s).type.spec.isolating)break;(a==t.start(s)||s==e.depth&&s==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&s&&t.start(s-1)==a-1)&&r.push(s)}return r}class Jc extends un{constructor(t,r,n){super(),this.pos=t,this.attr=r,this.value=n}apply(t){let r=t.nodeAt(this.pos);if(!r)return dr.fail("No node at attribute step's position");let n=Object.create(null);for(let a in r.attrs)n[a]=r.attrs[a];n[this.attr]=this.value;let s=r.type.create(n,null,r.marks);return dr.fromReplace(t,this.pos,this.pos+1,new _e(ce.from(s),0,r.isLeaf?0:1))}getMap(){return Qn.empty}invert(t){return new Jc(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new Jc(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Jc(r.pos,r.attr,r.value)}}un.jsonID("attr",Jc);class df extends un{constructor(t,r){super(),this.attr=t,this.value=r}apply(t){let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let n=t.type.create(r,t.content,t.marks);return dr.ok(n)}getMap(){return Qn.empty}invert(t){return new df(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new df(r.attr,r.value)}}un.jsonID("docAttr",df);let Nd=class extends Error{};Nd=function e(t){let r=Error.call(this,t);return r.__proto__=e.prototype,r};Nd.prototype=Object.create(Error.prototype);Nd.prototype.constructor=Nd;Nd.prototype.name="TransformError";class MB{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new cf}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let r=this.maybeStep(t);if(r.failed)throw new Nd(r.failed);return this}maybeStep(t){let r=t.apply(this.doc);return r.failed||this.addStep(t,r.doc),r}get docChanged(){return this.steps.length>0}addStep(t,r){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=r}replace(t,r=t,n=_e.empty){let s=sy(this.doc,t,r,n);return s&&this.step(s),this}replaceWith(t,r,n){return this.replace(t,r,new _e(ce.from(n),0,0))}delete(t,r){return this.replace(t,r,_e.empty)}insert(t,r){return this.replaceWith(t,t,r)}replaceRange(t,r,n){return Yye(this,t,r,n),this}replaceRangeWith(t,r,n){return Xye(this,t,r,n),this}deleteRange(t,r){return Jye(this,t,r),this}lift(t,r){return Dye(this,t,r),this}join(t,r=1){return Wye(this,t,r),this}wrap(t,r){return Rye(this,t,r),this}setBlockType(t,r=t,n,s=null){return Bye(this,t,r,n,s),this}setNodeMarkup(t,r,n=null,s){return Fye(this,t,r,n,s),this}setNodeAttribute(t,r,n){return this.step(new Jc(t,r,n)),this}setDocAttribute(t,r){return this.step(new df(t,r)),this}addNodeMark(t,r){return this.step(new oo(t,r)),this}removeNodeMark(t,r){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(r instanceof vt)r.isInSet(n.marks)&&this.step(new Jl(t,r));else{let s=n.marks,a,o=[];for(;a=r.isInSet(s);)o.push(new Jl(t,a)),s=a.removeFromSet(s);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(t,r=1,n){return Hye(this,t,r,n),this}addMark(t,r,n){return Mye(this,t,r,n),this}removeMark(t,r,n){return Oye(this,t,r,n),this}clearIncompatible(t,r,n){return kC(this,t,r,n),this}}const Xv=Object.create(null);class Je{constructor(t,r,n){this.$anchor=t,this.$head=r,this.ranges=n||[new Zye(t.min(r),t.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let r=0;r<t.length;r++)if(t[r].$from.pos!=t[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,r=_e.empty){let n=r.content.lastChild,s=null;for(let l=0;l<r.openEnd;l++)s=n,n=n.lastChild;let a=t.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:c,$to:d}=o[l],u=t.mapping.slice(a);t.replaceRange(u.map(c.pos),u.map(d.pos),l?_e.empty:r),l==0&&f4(t,a,(n?n.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(t,r){let n=t.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:o,$to:l}=s[a],c=t.mapping.slice(n),d=c.map(o.pos),u=c.map(l.pos);a?t.deleteRange(d,u):(t.replaceRangeWith(d,u,r),f4(t,n,r.isInline?-1:1))}}static findFrom(t,r,n=!1){let s=t.parent.inlineContent?new Ue(t):jc(t.node(0),t.parent,t.pos,t.index(),r,n);if(s)return s;for(let a=t.depth-1;a>=0;a--){let o=r<0?jc(t.node(0),t.node(a),t.before(a+1),t.index(a),r,n):jc(t.node(0),t.node(a),t.after(a+1),t.index(a)+1,r,n);if(o)return o}return null}static near(t,r=1){return this.findFrom(t,r)||this.findFrom(t,-r)||new is(t.node(0))}static atStart(t){return jc(t,t,0,0,1)||new is(t)}static atEnd(t){return jc(t,t,t.content.size,t.childCount,-1)||new is(t)}static fromJSON(t,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Xv[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(t,r)}static jsonID(t,r){if(t in Xv)throw new RangeError("Duplicate use of selection JSON ID "+t);return Xv[t]=r,r.prototype.jsonID=t,r}getBookmark(){return Ue.between(this.$anchor,this.$head).getBookmark()}}Je.prototype.visible=!0;class Zye{constructor(t,r){this.$from=t,this.$to=r}}let u4=!1;function h4(e){!u4&&!e.parent.inlineContent&&(u4=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ue extends Je{constructor(t,r=t){h4(t),h4(r),super(t,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,r){let n=t.resolve(r.map(this.head));if(!n.parent.inlineContent)return Je.near(n);let s=t.resolve(r.map(this.anchor));return new Ue(s.parent.inlineContent?s:n,n)}replace(t,r=_e.empty){if(super.replace(t,r),r==_e.empty){let n=this.$from.marksAcross(this.$to);n&&t.ensureMarks(n)}}eq(t){return t instanceof Ue&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new ay(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ue(t.resolve(r.anchor),t.resolve(r.head))}static create(t,r,n=r){let s=t.resolve(r);return new this(s,n==r?s:t.resolve(n))}static between(t,r,n){let s=t.pos-r.pos;if((!n||s)&&(n=s>=0?1:-1),!r.parent.inlineContent){let a=Je.findFrom(r,n,!0)||Je.findFrom(r,-n,!0);if(a)r=a.$head;else return Je.near(r,n)}return t.parent.inlineContent||(s==0?t=r:(t=(Je.findFrom(t,-n,!0)||Je.findFrom(t,n,!0)).$anchor,t.pos<r.pos!=s<0&&(t=r))),new Ue(t,r)}}Je.jsonID("text",Ue);class ay{constructor(t,r){this.anchor=t,this.head=r}map(t){return new ay(t.map(this.anchor),t.map(this.head))}resolve(t){return Ue.between(t.resolve(this.anchor),t.resolve(this.head))}}class Re extends Je{constructor(t){let r=t.nodeAfter,n=t.node(0).resolve(t.pos+r.nodeSize);super(t,n),this.node=r}map(t,r){let{deleted:n,pos:s}=r.mapResult(this.anchor),a=t.resolve(s);return n?Je.near(a):new Re(a)}content(){return new _e(ce.from(this.node),0,0)}eq(t){return t instanceof Re&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NC(this.anchor)}static fromJSON(t,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Re(t.resolve(r.anchor))}static create(t,r){return new Re(t.resolve(r))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Re.prototype.visible=!1;Je.jsonID("node",Re);class NC{constructor(t){this.anchor=t}map(t){let{deleted:r,pos:n}=t.mapResult(this.anchor);return r?new ay(n,n):new NC(n)}resolve(t){let r=t.resolve(this.anchor),n=r.nodeAfter;return n&&Re.isSelectable(n)?new Re(r):Je.near(r)}}class is extends Je{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,r=_e.empty){if(r==_e.empty){t.delete(0,t.doc.content.size);let n=Je.atStart(t.doc);n.eq(t.selection)||t.setSelection(n)}else super.replace(t,r)}toJSON(){return{type:"all"}}static fromJSON(t){return new is(t)}map(t){return new is(t)}eq(t){return t instanceof is}getBookmark(){return Qye}}Je.jsonID("all",is);const Qye={map(){return this},resolve(e){return new is(e)}};function jc(e,t,r,n,s,a=!1){if(t.inlineContent)return Ue.create(e,r);for(let o=n-(s>0?0:1);s>0?o<t.childCount:o>=0;o+=s){let l=t.child(o);if(l.isAtom){if(!a&&Re.isSelectable(l))return Re.create(e,r-(s<0?l.nodeSize:0))}else{let c=jc(e,l,r+s,s<0?l.childCount:0,s,a);if(c)return c}r+=l.nodeSize*s}return null}function f4(e,t,r){let n=e.steps.length-1;if(n<t)return;let s=e.steps[n];if(!(s instanceof Cr||s instanceof Mr))return;let a=e.mapping.maps[n],o;a.forEach((l,c,d,u)=>{o==null&&(o=u)}),e.setSelection(Je.near(e.doc.resolve(o),r))}const p4=1,om=2,m4=4;class eve extends MB{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|p4)&~om,this.storedMarks=null,this}get selectionSet(){return(this.updated&p4)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=om,this}ensureMarks(t){return vt.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&om)>0}addStep(t,r){super.addStep(t,r),this.updated=this.updated&~om,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,r=!0){let n=this.selection;return r&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||vt.none))),n.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,r,n){let s=this.doc.type.schema;if(r==null)return t?this.replaceSelectionWith(s.text(t),!0):this.deleteSelection();{if(n==null&&(n=r),!t)return this.deleteRange(r,n);let a=this.storedMarks;if(!a){let o=this.doc.resolve(r);a=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,s.text(t,a)),!this.selection.empty&&this.selection.to==r+t.length&&this.setSelection(Je.near(this.selection.$to)),this}}setMeta(t,r){return this.meta[typeof t=="string"?t:t.key]=r,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=m4,this}get scrolledIntoView(){return(this.updated&m4)>0}}function g4(e,t){return!t||!e?e:e.bind(t)}class Gu{constructor(t,r,n){this.name=t,this.init=g4(r.init,n),this.apply=g4(r.apply,n)}}const tve=[new Gu("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Gu("selection",{init(e,t){return e.selection||Je.atStart(t.doc)},apply(e){return e.selection}}),new Gu("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,r,n){return n.selection.$cursor?e.storedMarks:null}}),new Gu("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class Jv{constructor(t,r){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=tve.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Gu(n.key,n.spec.state,n))})}}class zc{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let s=this.config.plugins[n];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let r=[t],n=this.applyInner(t),s=null;for(;;){let a=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let c=s?s[o].n:0,d=s?s[o].state:this,u=c<r.length&&l.spec.appendTransaction.call(l,c?r.slice(c):r,d,n);if(u&&n.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",t),!s){s=[];for(let h=0;h<this.config.plugins.length;h++)s.push(h<o?{state:n,n:r.length}:{state:this,n:0})}r.push(u),n=n.applyInner(u),a=!0}s&&(s[o]={state:n,n:r.length})}}if(!a)return{state:n,transactions:r}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new zc(this.config),n=this.config.fields;for(let s=0;s<n.length;s++){let a=n[s];r[a.name]=a.apply(t,this[a.name],this,r)}return r}get tr(){return new eve(this)}static create(t){let r=new Jv(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new zc(r);for(let s=0;s<r.fields.length;s++)n[r.fields[s].name]=r.fields[s].init(t,n);return n}reconfigure(t){let r=new Jv(this.schema,t.plugins),n=r.fields,s=new zc(r);for(let a=0;a<n.length;a++){let o=n[a].name;s[o]=this.hasOwnProperty(o)?this[o]:n[a].init(t,s)}return s}toJSON(t){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),t&&typeof t=="object")for(let n in t){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=t[n],a=s.spec.state;a&&a.toJSON&&(r[n]=a.toJSON.call(s,this[s.key]))}return r}static fromJSON(t,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let s=new Jv(t.schema,t.plugins),a=new zc(s);return s.fields.forEach(o=>{if(o.name=="doc")a.doc=ha.fromJSON(t.schema,r.doc);else if(o.name=="selection")a.selection=Je.fromJSON(a.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(a.storedMarks=r.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let l in n){let c=n[l],d=c.spec.state;if(c.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(r,l)){a[o.name]=d.fromJSON.call(c,t,r[l],a);return}}a[o.name]=o.init(t,a)}}),a}}function OB(e,t,r){for(let n in e){let s=e[n];s instanceof Function?s=s.bind(t):n=="handleDOMEvents"&&(s=OB(s,t,{})),r[n]=s}return r}class qt{constructor(t){this.spec=t,this.props={},t.props&&OB(t.props,this,this.props),this.key=t.key?t.key.key:$B("plugin")}getState(t){return t[this.key]}}const Zv=Object.create(null);function $B(e){return e in Zv?e+"$"+ ++Zv[e]:(Zv[e]=0,e+"$")}class kr{constructor(t="key"){this.key=$B(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const SC=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function DB(e,t){let{$cursor:r}=e.selection;return!r||(t?!t.endOfTextblock("backward",e):r.parentOffset>0)?null:r}const IB=(e,t,r)=>{let n=DB(e,r);if(!n)return!1;let s=CC(n);if(!s){let o=n.blockRange(),l=o&&eu(o);return l==null?!1:(t&&t(e.tr.lift(o,l).scrollIntoView()),!0)}let a=s.nodeBefore;if(VB(e,s,t,-1))return!0;if(n.parent.content.size==0&&(Sd(a,"end")||Re.isSelectable(a)))for(let o=n.depth;;o--){let l=sy(e.doc,n.before(o),n.after(o),_e.empty);if(l&&l.slice.size<l.to-l.from){if(t){let c=e.tr.step(l);c.setSelection(Sd(a,"end")?Je.findFrom(c.doc.resolve(c.mapping.map(s.pos,-1)),-1):Re.create(c.doc,s.pos-a.nodeSize)),t(c.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return a.isAtom&&s.depth==n.depth-1?(t&&t(e.tr.delete(s.pos-a.nodeSize,s.pos).scrollIntoView()),!0):!1},rve=(e,t,r)=>{let n=DB(e,r);if(!n)return!1;let s=CC(n);return s?LB(e,s,t):!1},nve=(e,t,r)=>{let n=BB(e,r);if(!n)return!1;let s=_C(n);return s?LB(e,s,t):!1};function LB(e,t,r){let n=t.nodeBefore,s=n,a=t.pos-1;for(;!s.isTextblock;a--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let o=t.nodeAfter,l=o,c=t.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let d=sy(e.doc,a,c,_e.empty);if(!d||d.from!=a||d instanceof Cr&&d.slice.size>=c-a)return!1;if(r){let u=e.tr.step(d);u.setSelection(Ue.create(u.doc,a)),r(u.scrollIntoView())}return!0}function Sd(e,t,r=!1){for(let n=e;n;n=t=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const RB=(e,t,r)=>{let{$head:n,empty:s}=e.selection,a=n;if(!s)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",e):n.parentOffset>0)return!1;a=CC(n)}let o=a&&a.nodeBefore;return!o||!Re.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Re.create(e.doc,a.pos-o.nodeSize)).scrollIntoView()),!0)};function CC(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function BB(e,t){let{$cursor:r}=e.selection;return!r||(t?!t.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)?null:r}const zB=(e,t,r)=>{let n=BB(e,r);if(!n)return!1;let s=_C(n);if(!s)return!1;let a=s.nodeAfter;if(VB(e,s,t,1))return!0;if(n.parent.content.size==0&&(Sd(a,"start")||Re.isSelectable(a))){let o=sy(e.doc,n.before(),n.after(),_e.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(Sd(a,"start")?Je.findFrom(l.doc.resolve(l.mapping.map(s.pos)),1):Re.create(l.doc,l.mapping.map(s.pos))),t(l.scrollIntoView())}return!0}}return a.isAtom&&s.depth==n.depth-1?(t&&t(e.tr.delete(s.pos,s.pos+a.nodeSize).scrollIntoView()),!0):!1},FB=(e,t,r)=>{let{$head:n,empty:s}=e.selection,a=n;if(!s)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)return!1;a=_C(n)}let o=a&&a.nodeAfter;return!o||!Re.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Re.create(e.doc,a.pos)).scrollIntoView()),!0)};function _C(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let r=e.node(t);if(e.index(t)+1<r.childCount)return e.doc.resolve(e.after(t+1));if(r.type.spec.isolating)break}return null}const sve=(e,t)=>{let r=e.selection,n=r instanceof Re,s;if(n){if(r.node.isTextblock||!Ko(e.doc,r.from))return!1;s=r.from}else if(s=ny(e.doc,r.from,-1),s==null)return!1;if(t){let a=e.tr.join(s);n&&a.setSelection(Re.create(a.doc,s-e.doc.resolve(s).nodeBefore.nodeSize)),t(a.scrollIntoView())}return!0},ave=(e,t)=>{let r=e.selection,n;if(r instanceof Re){if(r.node.isTextblock||!Ko(e.doc,r.to))return!1;n=r.to}else if(n=ny(e.doc,r.to,1),n==null)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0},ive=(e,t)=>{let{$from:r,$to:n}=e.selection,s=r.blockRange(n),a=s&&eu(s);return a==null?!1:(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)},HB=(e,t)=>{let{$head:r,$anchor:n}=e.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function EC(e){for(let t=0;t<e.edgeCount;t++){let{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const ove=(e,t)=>{let{$head:r,$anchor:n}=e.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let s=r.node(-1),a=r.indexAfter(-1),o=EC(s.contentMatchAt(a));if(!o||!s.canReplaceWith(a,a,o))return!1;if(t){let l=r.after(),c=e.tr.replaceWith(l,l,o.createAndFill());c.setSelection(Je.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0},UB=(e,t)=>{let r=e.selection,{$from:n,$to:s}=r;if(r instanceof is||n.parent.inlineContent||s.parent.inlineContent)return!1;let a=EC(s.parent.contentMatchAt(s.indexAfter()));if(!a||!a.isTextblock)return!1;if(t){let o=(!n.parentOffset&&s.index()<s.parent.childCount?n:s).pos,l=e.tr.insert(o,a.createAndFill());l.setSelection(Ue.create(l.doc,o+1)),t(l.scrollIntoView())}return!0},WB=(e,t)=>{let{$cursor:r}=e.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let a=r.before();if(di(e.doc,a))return t&&t(e.tr.split(a).scrollIntoView()),!0}let n=r.blockRange(),s=n&&eu(n);return s==null?!1:(t&&t(e.tr.lift(n,s).scrollIntoView()),!0)};function lve(e){return(t,r)=>{let{$from:n,$to:s}=t.selection;if(t.selection instanceof Re&&t.selection.node.isBlock)return!n.parentOffset||!di(t.doc,n.pos)?!1:(r&&r(t.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let a=[],o,l,c=!1,d=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){c=n.end(p)==n.pos+(n.depth-p),d=n.start(p)==n.pos-(n.depth-p),l=EC(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),a.unshift(c&&l?{type:l}:null),o=p;break}else{if(p==1)return!1;a.unshift(null)}let u=t.tr;(t.selection instanceof Ue||t.selection instanceof is)&&u.deleteSelection();let h=u.mapping.map(n.pos),f=di(u.doc,h,a.length,a);if(f||(a[0]=l?{type:l}:null,f=di(u.doc,h,a.length,a)),!f)return!1;if(u.split(h,a.length,a),!c&&d&&n.node(o).type!=l){let p=u.mapping.map(n.before(o)),m=u.doc.resolve(p);l&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,l)&&u.setNodeMarkup(u.mapping.map(n.before(o)),l)}return r&&r(u.scrollIntoView()),!0}}const cve=lve(),dve=(e,t)=>{let{$from:r,to:n}=e.selection,s,a=r.sharedDepth(n);return a==0?!1:(s=r.before(a),t&&t(e.tr.setSelection(Re.create(e.doc,s))),!0)};function uve(e,t,r){let n=t.nodeBefore,s=t.nodeAfter,a=t.index();return!n||!s||!n.type.compatibleContent(s.type)?!1:!n.content.size&&t.parent.canReplace(a-1,a)?(r&&r(e.tr.delete(t.pos-n.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(a,a+1)||!(s.isTextblock||Ko(e.doc,t.pos))?!1:(r&&r(e.tr.join(t.pos).scrollIntoView()),!0)}function VB(e,t,r,n){let s=t.nodeBefore,a=t.nodeAfter,o,l,c=s.type.spec.isolating||a.type.spec.isolating;if(!c&&uve(e,t,r))return!0;let d=!c&&t.parent.canReplace(t.index(),t.index()+1);if(d&&(o=(l=s.contentMatchAt(s.childCount)).findWrapping(a.type))&&l.matchType(o[0]||a.type).validEnd){if(r){let p=t.pos+a.nodeSize,m=ce.empty;for(let y=o.length-1;y>=0;y--)m=ce.from(o[y].create(null,m));m=ce.from(s.copy(m));let x=e.tr.step(new Mr(t.pos-1,p,t.pos,p,new _e(m,1,0),o.length,!0)),b=x.doc.resolve(p+2*o.length);b.nodeAfter&&b.nodeAfter.type==s.type&&Ko(x.doc,b.pos)&&x.join(b.pos),r(x.scrollIntoView())}return!0}let u=a.type.spec.isolating||n>0&&c?null:Je.findFrom(t,1),h=u&&u.$from.blockRange(u.$to),f=h&&eu(h);if(f!=null&&f>=t.depth)return r&&r(e.tr.lift(h,f).scrollIntoView()),!0;if(d&&Sd(a,"start",!0)&&Sd(s,"end")){let p=s,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let x=a,b=1;for(;!x.isTextblock;x=x.firstChild)b++;if(p.canReplace(p.childCount,p.childCount,x.content)){if(r){let y=ce.empty;for(let w=m.length-1;w>=0;w--)y=ce.from(m[w].copy(y));let v=e.tr.step(new Mr(t.pos-m.length,t.pos+a.nodeSize,t.pos+b,t.pos+a.nodeSize-b,new _e(y,m.length,0),0,!0));r(v.scrollIntoView())}return!0}}return!1}function qB(e){return function(t,r){let n=t.selection,s=e<0?n.$from:n.$to,a=s.depth;for(;s.node(a).isInline;){if(!a)return!1;a--}return s.node(a).isTextblock?(r&&r(t.tr.setSelection(Ue.create(t.doc,e<0?s.start(a):s.end(a)))),!0):!1}}const hve=qB(-1),fve=qB(1);function pve(e,t=null){return function(r,n){let{$from:s,$to:a}=r.selection,o=s.blockRange(a),l=o&&jC(o,e,t);return l?(n&&n(r.tr.wrap(o,l).scrollIntoView()),!0):!1}}function x4(e,t=null){return function(r,n){let s=!1;for(let a=0;a<r.selection.ranges.length&&!s;a++){let{$from:{pos:o},$to:{pos:l}}=r.selection.ranges[a];r.doc.nodesBetween(o,l,(c,d)=>{if(s)return!1;if(!(!c.isTextblock||c.hasMarkup(e,t)))if(c.type==e)s=!0;else{let u=r.doc.resolve(d),h=u.index();s=u.parent.canReplaceWith(h,h+1,e)}})}if(!s)return!1;if(n){let a=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:c}}=r.selection.ranges[o];a.setBlockType(l,c,e,t)}n(a.scrollIntoView())}return!0}}function AC(...e){return function(t,r,n){for(let s=0;s<e.length;s++)if(e[s](t,r,n))return!0;return!1}}AC(SC,IB,RB);AC(SC,zB,FB);AC(HB,UB,WB,cve);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function mve(e,t=null){return function(r,n){let{$from:s,$to:a}=r.selection,o=s.blockRange(a);if(!o)return!1;let l=n?r.tr:null;return gve(l,o,e,t)?(n&&n(l.scrollIntoView()),!0):!1}}function gve(e,t,r,n=null){let s=!1,a=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(r)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let c=o.resolve(t.start-2);a=new S0(c,c,t.depth),t.endIndex<t.parent.childCount&&(t=new S0(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),s=!0}let l=jC(a,r,n,t);return l?(e&&xve(e,t,l,s,r),!0):!1}function xve(e,t,r,n,s){let a=ce.empty;for(let u=r.length-1;u>=0;u--)a=ce.from(r[u].type.create(r[u].attrs,a));e.step(new Mr(t.start-(n?2:0),t.end,t.start,t.end,new _e(a,0,0),r.length,!0));let o=0;for(let u=0;u<r.length;u++)r[u].type==s&&(o=u+1);let l=r.length-o,c=t.start+r.length-(n?2:0),d=t.parent;for(let u=t.startIndex,h=t.endIndex,f=!0;u<h;u++,f=!1)!f&&di(e.doc,c,l)&&(e.split(c,l),c+=2*l),c+=d.child(u).nodeSize;return e}function bve(e){return function(t,r){let{$from:n,$to:s}=t.selection,a=n.blockRange(s,o=>o.childCount>0&&o.firstChild.type==e);return a?r?n.node(a.depth-1).type==e?yve(t,r,e,a):vve(t,r,a):!0:!1}}function yve(e,t,r,n){let s=e.tr,a=n.end,o=n.$to.end(n.depth);a<o&&(s.step(new Mr(a-1,o,a,o,new _e(ce.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new S0(s.doc.resolve(n.$from.pos),s.doc.resolve(o),n.depth));const l=eu(n);if(l==null)return!1;s.lift(n,l);let c=s.doc.resolve(s.mapping.map(a,-1)-1);return Ko(s.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&s.join(c.pos),t(s.scrollIntoView()),!0}function vve(e,t,r){let n=e.tr,s=r.parent;for(let p=r.end,m=r.endIndex-1,x=r.startIndex;m>x;m--)p-=s.child(m).nodeSize,n.delete(p-1,p+1);let a=n.doc.resolve(r.start),o=a.nodeAfter;if(n.mapping.map(r.end)!=r.start+a.nodeAfter.nodeSize)return!1;let l=r.startIndex==0,c=r.endIndex==s.childCount,d=a.node(-1),u=a.index(-1);if(!d.canReplace(u+(l?0:1),u+1,o.content.append(c?ce.empty:ce.from(s))))return!1;let h=a.pos,f=h+o.nodeSize;return n.step(new Mr(h-(l?1:0),f+(c?1:0),h+1,f-1,new _e((l?ce.empty:ce.from(s.copy(ce.empty))).append(c?ce.empty:ce.from(s.copy(ce.empty))),l?0:1,c?0:1),l?0:1)),t(n.scrollIntoView()),!0}function wve(e){return function(t,r){let{$from:n,$to:s}=t.selection,a=n.blockRange(s,d=>d.childCount>0&&d.firstChild.type==e);if(!a)return!1;let o=a.startIndex;if(o==0)return!1;let l=a.parent,c=l.child(o-1);if(c.type!=e)return!1;if(r){let d=c.lastChild&&c.lastChild.type==l.type,u=ce.from(d?e.create():null),h=new _e(ce.from(e.create(null,ce.from(l.type.create(null,u)))),d?3:1,0),f=a.start,p=a.end;r(t.tr.step(new Mr(f-(d?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const Wr=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Cd=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let Uk=null;const Ya=function(e,t,r){let n=Uk||(Uk=document.createRange());return n.setEnd(e,r??e.nodeValue.length),n.setStart(e,t||0),n},kve=function(){Uk=null},Zl=function(e,t,r,n){return r&&(b4(e,t,r,n,-1)||b4(e,t,r,n,1))},jve=/^(img|br|input|textarea|hr)$/i;function b4(e,t,r,n,s){for(var a;;){if(e==r&&t==n)return!0;if(t==(s<0?0:As(e))){let o=e.parentNode;if(!o||o.nodeType!=1||ap(e)||jve.test(e.nodeName)||e.contentEditable=="false")return!1;t=Wr(e)+(s<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(s<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((a=o.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)t+=s;else return!1;else e=o,t=s<0?As(e):0}else return!1}}function As(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Nve(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=As(e)}else if(e.parentNode&&!ap(e))t=Wr(e),e=e.parentNode;else return null}}function Sve(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!ap(e))t=Wr(e)+1,e=e.parentNode;else return null}}function Cve(e,t,r){for(let n=t==0,s=t==As(e);n||s;){if(e==r)return!0;let a=Wr(e);if(e=e.parentNode,!e)return!1;n=n&&a==0,s=s&&a==As(e)}}function ap(e){let t;for(let r=e;r&&!(t=r.pmViewDesc);r=r.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const iy=function(e){return e.focusNode&&Zl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function ol(e,t){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=e,r.key=r.code=t,r}function _ve(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function Eve(e,t,r){if(e.caretPositionFromPoint)try{let n=e.caretPositionFromPoint(t,r);if(n)return{node:n.offsetNode,offset:Math.min(As(n.offsetNode),n.offset)}}catch{}if(e.caretRangeFromPoint){let n=e.caretRangeFromPoint(t,r);if(n)return{node:n.startContainer,offset:Math.min(As(n.startContainer),n.startOffset)}}}const La=typeof navigator<"u"?navigator:null,y4=typeof document<"u"?document:null,Yo=La&&La.userAgent||"",Wk=/Edge\/(\d+)/.exec(Yo),GB=/MSIE \d/.exec(Yo),Vk=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Yo),Wn=!!(GB||Vk||Wk),No=GB?document.documentMode:Vk?+Vk[1]:Wk?+Wk[1]:0,Ds=!Wn&&/gecko\/(\d+)/i.test(Yo);Ds&&+(/Firefox\/(\d+)/.exec(Yo)||[0,0])[1];const qk=!Wn&&/Chrome\/(\d+)/.exec(Yo),Er=!!qk,KB=qk?+qk[1]:0,dn=!Wn&&!!La&&/Apple Computer/.test(La.vendor),_d=dn&&(/Mobile\/\w+/.test(Yo)||!!La&&La.maxTouchPoints>2),Ss=_d||(La?/Mac/.test(La.platform):!1),YB=La?/Win/.test(La.platform):!1,ai=/Android \d/.test(Yo),ip=!!y4&&"webkitFontSmoothing"in y4.documentElement.style,Ave=ip?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Tve(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Ha(e,t){return typeof e=="number"?e:e[t]}function Pve(e){let t=e.getBoundingClientRect(),r=t.width/e.offsetWidth||1,n=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*r,top:t.top,bottom:t.top+e.clientHeight*n}}function v4(e,t,r){let n=e.someProp("scrollThreshold")||0,s=e.someProp("scrollMargin")||5,a=e.dom.ownerDocument;for(let o=r||e.dom;o;){if(o.nodeType!=1){o=Cd(o);continue}let l=o,c=l==a.body,d=c?Tve(a):Pve(l),u=0,h=0;if(t.top<d.top+Ha(n,"top")?h=-(d.top-t.top+Ha(s,"top")):t.bottom>d.bottom-Ha(n,"bottom")&&(h=t.bottom-t.top>d.bottom-d.top?t.top+Ha(s,"top")-d.top:t.bottom-d.bottom+Ha(s,"bottom")),t.left<d.left+Ha(n,"left")?u=-(d.left-t.left+Ha(s,"left")):t.right>d.right-Ha(n,"right")&&(u=t.right-d.right+Ha(s,"right")),u||h)if(c)a.defaultView.scrollBy(u,h);else{let p=l.scrollLeft,m=l.scrollTop;h&&(l.scrollTop+=h),u&&(l.scrollLeft+=u);let x=l.scrollLeft-p,b=l.scrollTop-m;t={left:t.left-x,top:t.top-b,right:t.right-x,bottom:t.bottom-b}}let f=c?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:Cd(o)}}function Mve(e){let t=e.dom.getBoundingClientRect(),r=Math.max(0,t.top),n,s;for(let a=(t.left+t.right)/2,o=r+1;o<Math.min(innerHeight,t.bottom);o+=5){let l=e.root.elementFromPoint(a,o);if(!l||l==e.dom||!e.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=r-20){n=l,s=c.top;break}}return{refDOM:n,refTop:s,stack:XB(e.dom)}}function XB(e){let t=[],r=e.ownerDocument;for(let n=e;n&&(t.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),e!=r);n=Cd(n));return t}function Ove({refDOM:e,refTop:t,stack:r}){let n=e?e.getBoundingClientRect().top:0;JB(r,n==0?0:n-t)}function JB(e,t){for(let r=0;r<e.length;r++){let{dom:n,top:s,left:a}=e[r];n.scrollTop!=s+t&&(n.scrollTop=s+t),n.scrollLeft!=a&&(n.scrollLeft=a)}}let wc=null;function $ve(e){if(e.setActive)return e.setActive();if(wc)return e.focus(wc);let t=XB(e);e.focus(wc==null?{get preventScroll(){return wc={preventScroll:!0},!0}}:void 0),wc||(wc=!1,JB(t,0))}function ZB(e,t){let r,n=2e8,s,a=0,o=t.top,l=t.top,c,d;for(let u=e.firstChild,h=0;u;u=u.nextSibling,h++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=Ya(u).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=l){o=Math.max(m.bottom,o),l=Math.min(m.top,l);let x=m.left>t.left?m.left-t.left:m.right<t.left?t.left-m.right:0;if(x<n){r=u,n=x,s=x&&r.nodeType==3?{left:m.right<t.left?m.right:m.left,top:t.top}:t,u.nodeType==1&&x&&(a=h+(t.left>=(m.left+m.right)/2?1:0));continue}}else m.top>t.top&&!c&&m.left<=t.left&&m.right>=t.left&&(c=u,d={left:Math.max(m.left,Math.min(m.right,t.left)),top:m.top});!r&&(t.left>=m.right&&t.top>=m.top||t.left>=m.left&&t.top>=m.bottom)&&(a=h+1)}}return!r&&c&&(r=c,s=d,n=0),r&&r.nodeType==3?Dve(r,s):!r||n&&r.nodeType==1?{node:e,offset:a}:ZB(r,s)}function Dve(e,t){let r=e.nodeValue.length,n=document.createRange(),s;for(let a=0;a<r;a++){n.setEnd(e,a+1),n.setStart(e,a);let o=Fi(n,1);if(o.top!=o.bottom&&TC(t,o)){s={node:e,offset:a+(t.left>=(o.left+o.right)/2?1:0)};break}}return n.detach(),s||{node:e,offset:0}}function TC(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Ive(e,t){let r=e.parentNode;return r&&/^li$/i.test(r.nodeName)&&t.left<e.getBoundingClientRect().left?r:e}function Lve(e,t,r){let{node:n,offset:s}=ZB(t,r),a=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();a=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(n,s,a)}function Rve(e,t,r,n){let s=-1;for(let a=t,o=!1;a!=e.dom;){let l=e.docView.nearestDesc(a,!0),c;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((c=l.dom.getBoundingClientRect()).width||c.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&c.left>n.left||c.top>n.top?s=l.posBefore:(!o&&c.right<n.left||c.bottom<n.top)&&(s=l.posAfter),o=!0),!l.contentDOM&&s<0&&!l.node.isText))return(l.node.isBlock?n.top<(c.top+c.bottom)/2:n.left<(c.left+c.right)/2)?l.posBefore:l.posAfter;a=l.dom.parentNode}return s>-1?s:e.docView.posFromDOM(t,r,-1)}function QB(e,t,r){let n=e.childNodes.length;if(n&&r.top<r.bottom)for(let s=Math.max(0,Math.min(n-1,Math.floor(n*(t.top-r.top)/(r.bottom-r.top))-2)),a=s;;){let o=e.childNodes[a];if(o.nodeType==1){let l=o.getClientRects();for(let c=0;c<l.length;c++){let d=l[c];if(TC(t,d))return QB(o,t,d)}}if((a=(a+1)%n)==s)break}return e}function Bve(e,t){let r=e.dom.ownerDocument,n,s=0,a=Eve(r,t.left,t.top);a&&({node:n,offset:s}=a);let o=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top),l;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=e.dom.getBoundingClientRect();if(!TC(t,d)||(o=QB(e.dom,t,d),!o))return null}if(dn)for(let d=o;n&&d;d=Cd(d))d.draggable&&(n=void 0);if(o=Ive(o,t),n){if(Ds&&n.nodeType==1&&(s=Math.min(s,n.childNodes.length),s<n.childNodes.length)){let u=n.childNodes[s],h;u.nodeName=="IMG"&&(h=u.getBoundingClientRect()).right<=t.left&&h.bottom>t.top&&s++}let d;ip&&s&&n.nodeType==1&&(d=n.childNodes[s-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=t.top&&s--,n==e.dom&&s==n.childNodes.length-1&&n.lastChild.nodeType==1&&t.top>n.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:(s==0||n.nodeType!=1||n.childNodes[s-1].nodeName!="BR")&&(l=Rve(e,n,s,t))}l==null&&(l=Lve(e,o,t));let c=e.docView.nearestDesc(o,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function w4(e){return e.top<e.bottom||e.left<e.right}function Fi(e,t){let r=e.getClientRects();if(r.length){let n=r[t<0?0:r.length-1];if(w4(n))return n}return Array.prototype.find.call(r,w4)||e.getBoundingClientRect()}const zve=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ez(e,t,r){let{node:n,offset:s,atom:a}=e.docView.domFromPos(t,r<0?-1:1),o=ip||Ds;if(n.nodeType==3)if(o&&(zve.test(n.nodeValue)||(r<0?!s:s==n.nodeValue.length))){let c=Fi(Ya(n,s,s),r);if(Ds&&s&&/\s/.test(n.nodeValue[s-1])&&s<n.nodeValue.length){let d=Fi(Ya(n,s-1,s-1),-1);if(d.top==c.top){let u=Fi(Ya(n,s,s+1),-1);if(u.top!=c.top)return $u(u,u.left<d.left)}}return c}else{let c=s,d=s,u=r<0?1:-1;return r<0&&!s?(d++,u=-1):r>=0&&s==n.nodeValue.length?(c--,u=1):r<0?c--:d++,$u(Fi(Ya(n,c,d),u),u<0)}if(!e.state.doc.resolve(t-(a||0)).parent.inlineContent){if(a==null&&s&&(r<0||s==As(n))){let c=n.childNodes[s-1];if(c.nodeType==1)return Qv(c.getBoundingClientRect(),!1)}if(a==null&&s<As(n)){let c=n.childNodes[s];if(c.nodeType==1)return Qv(c.getBoundingClientRect(),!0)}return Qv(n.getBoundingClientRect(),r>=0)}if(a==null&&s&&(r<0||s==As(n))){let c=n.childNodes[s-1],d=c.nodeType==3?Ya(c,As(c)-(o?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(d)return $u(Fi(d,1),!1)}if(a==null&&s<As(n)){let c=n.childNodes[s];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let d=c?c.nodeType==3?Ya(c,0,o?0:1):c.nodeType==1?c:null:null;if(d)return $u(Fi(d,-1),!0)}return $u(Fi(n.nodeType==3?Ya(n):n,-r),r>=0)}function $u(e,t){if(e.width==0)return e;let r=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:r,right:r}}function Qv(e,t){if(e.height==0)return e;let r=t?e.top:e.bottom;return{top:r,bottom:r,left:e.left,right:e.right}}function tz(e,t,r){let n=e.state,s=e.root.activeElement;n!=t&&e.updateState(t),s!=e.dom&&e.focus();try{return r()}finally{n!=t&&e.updateState(n),s!=e.dom&&s&&s.focus()}}function Fve(e,t,r){let n=t.selection,s=r=="up"?n.$from:n.$to;return tz(e,t,()=>{let{node:a}=e.docView.domFromPos(s.pos,r=="up"?-1:1);for(;;){let l=e.docView.nearestDesc(a,!0);if(!l)break;if(l.node.isBlock){a=l.contentDOM||l.dom;break}a=l.dom.parentNode}let o=ez(e,s.pos,1);for(let l=a.firstChild;l;l=l.nextSibling){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=Ya(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<c.length;d++){let u=c[d];if(u.bottom>u.top+1&&(r=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const Hve=/[\u0590-\u08ac]/;function Uve(e,t,r){let{$head:n}=t.selection;if(!n.parent.isTextblock)return!1;let s=n.parentOffset,a=!s,o=s==n.parent.content.size,l=e.domSelection();return l?!Hve.test(n.parent.textContent)||!l.modify?r=="left"||r=="backward"?a:o:tz(e,t,()=>{let{focusNode:c,focusOffset:d,anchorNode:u,anchorOffset:h}=e.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",r,"character");let p=n.depth?e.docView.domAfterPos(n.before()):e.dom,{focusNode:m,focusOffset:x}=e.domSelectionRange(),b=m&&!p.contains(m.nodeType==1?m:m.parentNode)||c==m&&d==x;try{l.collapse(u,h),c&&(c!=u||d!=h)&&l.extend&&l.extend(c,d)}catch{}return f!=null&&(l.caretBidiLevel=f),b}):n.pos==n.start()||n.pos==n.end()}let k4=null,j4=null,N4=!1;function Wve(e,t,r){return k4==t&&j4==r?N4:(k4=t,j4=r,N4=r=="up"||r=="down"?Fve(e,t,r):Uve(e,t,r))}const Is=0,S4=1,pl=2,Ra=3;class op{constructor(t,r,n,s){this.parent=t,this.children=r,this.dom=n,this.contentDOM=s,this.dirty=Is,n.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,r,n){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let r=0;r<this.children.length;r++)t+=this.children[r].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let r=0,n=this.posAtStart;;r++){let s=this.children[r];if(s==t)return n;n+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,r,n){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(n<0){let a,o;if(t==this.contentDOM)a=t.childNodes[r-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;a=t.previousSibling}for(;a&&!((o=a.pmViewDesc)&&o.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(o)+o.size:this.posAtStart}else{let a,o;if(t==this.contentDOM)a=t.childNodes[r];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;a=t.nextSibling}for(;a&&!((o=a.pmViewDesc)&&o.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(o):this.posAtEnd}let s;if(t==this.dom&&this.contentDOM)s=r>Wr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let a=t;;a=a.parentNode){if(a==this.dom){s=!1;break}if(a.previousSibling)break}if(s==null&&r==t.childNodes.length)for(let a=t;;a=a.parentNode){if(a==this.dom){s=!0;break}if(a.nextSibling)break}}return s??n>0?this.posAtEnd:this.posAtStart}nearestDesc(t,r=!1){for(let n=!0,s=t;s;s=s.parentNode){let a=this.getDesc(s),o;if(a&&(!r||a.node))if(n&&(o=a.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))n=!1;else return a}}getDesc(t){let r=t.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(t,r,n){for(let s=t;s;s=s.parentNode){let a=this.getDesc(s);if(a)return a.localPosFromDOM(t,r,n)}return-1}descAt(t){for(let r=0,n=0;r<this.children.length;r++){let s=this.children[r],a=n+s.size;if(n==t&&a!=n){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let l=s.children[o];if(l.size){s=l;break}}return s}if(t<a)return s.descAt(t-n-s.border);n=a}}domFromPos(t,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let n=0,s=0;for(let a=0;n<this.children.length;n++){let o=this.children[n],l=a+o.size;if(l>t||o instanceof nz){s=t-a;break}a=l}if(s)return this.children[n].domFromPos(s-this.children[n].border,r);for(let a;n&&!(a=this.children[n-1]).size&&a instanceof rz&&a.side>=0;n--);if(r<=0){let a,o=!0;for(;a=n?this.children[n-1]:null,!(!a||a.dom.parentNode==this.contentDOM);n--,o=!1);return a&&r&&o&&!a.border&&!a.domAtom?a.domFromPos(a.size,r):{node:this.contentDOM,offset:a?Wr(a.dom)+1:0}}else{let a,o=!0;for(;a=n<this.children.length?this.children[n]:null,!(!a||a.dom.parentNode==this.contentDOM);n++,o=!1);return a&&o&&!a.border&&!a.domAtom?a.domFromPos(0,r):{node:this.contentDOM,offset:a?Wr(a.dom):this.contentDOM.childNodes.length}}}parseRange(t,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,a=-1;for(let o=n,l=0;;l++){let c=this.children[l],d=o+c.size;if(s==-1&&t<=d){let u=o+c.border;if(t>=u&&r<=d-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(t,r,u);t=o;for(let h=l;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){s=Wr(f.dom)+1;break}t-=f.size}s==-1&&(s=0)}if(s>-1&&(d>r||l==this.children.length-1)){r=d;for(let u=l+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){a=Wr(h.dom);break}r+=h.size}a==-1&&(a=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:t,to:r,fromOffset:s,toOffset:a}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[t<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(t)}domAfterPos(t){let{node:r,offset:n}=this.domFromPos(t,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+t);return r.childNodes[n]}setSelection(t,r,n,s=!1){let a=Math.min(t,r),o=Math.max(t,r);for(let p=0,m=0;p<this.children.length;p++){let x=this.children[p],b=m+x.size;if(a>m&&o<b)return x.setSelection(t-m-x.border,r-m-x.border,n,s);m=b}let l=this.domFromPos(t,t?-1:1),c=r==t?l:this.domFromPos(r,r?-1:1),d=n.root.getSelection(),u=n.domSelectionRange(),h=!1;if((Ds||dn)&&t==r){let{node:p,offset:m}=l;if(p.nodeType==3){if(h=!!(m&&p.nodeValue[m-1]==`
`),h&&m==p.nodeValue.length)for(let x=p,b;x;x=x.parentNode){if(b=x.nextSibling){b.nodeName=="BR"&&(l=c={node:b.parentNode,offset:Wr(b)+1});break}let y=x.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let x=p.childNodes[m-1];h=x&&(x.nodeName=="BR"||x.contentEditable=="false")}}if(Ds&&u.focusNode&&u.focusNode!=c.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(s=!0)}if(!(s||h&&dn)&&Zl(l.node,l.offset,u.anchorNode,u.anchorOffset)&&Zl(c.node,c.offset,u.focusNode,u.focusOffset))return;let f=!1;if((d.extend||t==r)&&!(h&&Ds)){d.collapse(l.node,l.offset);try{t!=r&&d.extend(c.node,c.offset),f=!0}catch{}}if(!f){if(t>r){let m=l;l=c,c=m}let p=document.createRange();p.setEnd(c.node,c.offset),p.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(p)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,r){for(let n=0,s=0;s<this.children.length;s++){let a=this.children[s],o=n+a.size;if(n==o?t<=o&&r>=n:t<o&&r>n){let l=n+a.border,c=o-a.border;if(t>=l&&r<=c){this.dirty=t==n||r==o?pl:S4,t==l&&r==c&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=Ra:a.markDirty(t-l,r-l);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?pl:Ra}n=o}this.dirty=pl}markParentsDirty(){let t=1;for(let r=this.parent;r;r=r.parent,t++){let n=t==1?pl:S4;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class rz extends op{constructor(t,r,n,s){let a,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)})),!r.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=r,this.widget=r,a=this}matchesWidget(t){return this.dirty==Is&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let r=this.widget.spec.stopEvent;return r?r(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Vve extends op{constructor(t,r,n,s){super(t,[],r,null),this.textDOM=n,this.text=s}get size(){return this.text.length}localPosFromDOM(t,r){return t!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Ql extends op{constructor(t,r,n,s,a){super(t,[],n,s),this.mark=r,this.spec=a}static create(t,r,n,s){let a=s.nodeViews[r.type.name],o=a&&a(r,s,n);return(!o||!o.dom)&&(o=cc.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new Ql(t,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Ra||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=Ra&&this.mark.eq(t)}markDirty(t,r){if(super.markDirty(t,r),this.dirty!=Is){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Is}}slice(t,r,n){let s=Ql.create(this.parent,this.mark,!0,n),a=this.children,o=this.size;r<o&&(a=Kk(a,r,o,n)),t>0&&(a=Kk(a,0,t,n));for(let l=0;l<a.length;l++)a[l].parent=s;return s.children=a,s}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class So extends op{constructor(t,r,n,s,a,o,l,c,d){super(t,[],a,o),this.node=r,this.outerDeco=n,this.innerDeco=s,this.nodeDOM=l}static create(t,r,n,s,a,o){let l=a.nodeViews[r.type.name],c,d=l&&l(r,a,()=>{if(!c)return o;if(c.parent)return c.parent.posBeforeChild(c)},n,s),u=d&&d.dom,h=d&&d.contentDOM;if(r.isText){if(!u)u=document.createTextNode(r.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:h}=cc.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!h&&!r.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),r.type.spec.draggable&&(u.draggable=!0));let f=u;return u=iz(u,n,r),d?c=new qve(t,r,n,s,u,h||null,f,d,a,o+1):r.isText?new oy(t,r,n,s,u,f,a):new So(t,r,n,s,u,h||null,f,a,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){t.contentElement=n.dom.parentNode;break}}t.contentElement||(t.getContent=()=>ce.empty)}return t}matchesNode(t,r,n){return this.dirty==Is&&t.eq(this.node)&&_0(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,r){let n=this.node.inlineContent,s=r,a=t.composing?this.localCompositionInfo(t,r):null,o=a&&a.pos>-1?a:null,l=a&&a.pos<0,c=new Kve(this,o&&o.node,t);Jve(this.node,this.innerDeco,(d,u,h)=>{d.spec.marks?c.syncToMarks(d.spec.marks,n,t):d.type.side>=0&&!h&&c.syncToMarks(u==this.node.childCount?vt.none:this.node.child(u).marks,n,t),c.placeWidget(d,t,s)},(d,u,h,f)=>{c.syncToMarks(d.marks,n,t);let p;c.findNodeMatch(d,u,h,f)||l&&t.state.selection.from>s&&t.state.selection.to<s+d.nodeSize&&(p=c.findIndexWithChild(a.node))>-1&&c.updateNodeAt(d,u,h,p,t)||c.updateNextNode(d,u,h,t,f,s)||c.addNode(d,u,h,t,s),s+=d.nodeSize}),c.syncToMarks([],n,t),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==pl)&&(o&&this.protectLocalComposition(t,o),sz(this.contentDOM,this.children,t),_d&&Zve(this.dom))}localCompositionInfo(t,r){let{from:n,to:s}=t.state.selection;if(!(t.state.selection instanceof Ue)||n<r||s>r+this.node.content.size)return null;let a=t.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let o=a.nodeValue,l=Qve(this.node.content,o,n-r,s-r);return l<0?null:{node:a,pos:l,text:o}}else return{node:a,pos:-1,text:""}}protectLocalComposition(t,{node:r,pos:n,text:s}){if(this.getDesc(r))return;let a=r;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let o=new Vve(this,a,r,s);t.input.compositionNodes.push(o),this.children=Kk(this.children,n,n+s.length,t,o)}update(t,r,n,s){return this.dirty==Ra||!t.sameMarkup(this.node)?!1:(this.updateInner(t,r,n,s),!0)}updateInner(t,r,n,s){this.updateOuterDeco(r),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Is}updateOuterDeco(t){if(_0(t,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=az(this.dom,this.nodeDOM,Gk(this.outerDeco,this.node,r),Gk(t,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function C4(e,t,r,n,s){iz(n,t,e);let a=new So(void 0,e,t,r,n,n,n,s,0);return a.contentDOM&&a.updateChildren(s,0),a}class oy extends So{constructor(t,r,n,s,a,o,l){super(t,r,n,s,a,null,o,l,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,r,n,s){return this.dirty==Ra||this.dirty!=Is&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Is||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=t,this.dirty=Is,!0)}inParent(){let t=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,r,n){return t==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(t,r,n)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,r,n){let s=this.node.cut(t,r),a=document.createTextNode(s.text);return new oy(this.parent,s,this.outerDeco,this.innerDeco,a,a,n)}markDirty(t,r){super.markDirty(t,r),this.dom!=this.nodeDOM&&(t==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=Ra)}get domAtom(){return!1}isText(t){return this.node.text==t}}class nz extends op{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Is&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class qve extends So{constructor(t,r,n,s,a,o,l,c,d,u){super(t,r,n,s,a,o,l,d,u),this.spec=c}update(t,r,n,s){if(this.dirty==Ra)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let a=this.spec.update(t,r,n);return a&&this.updateInner(t,r,n,s),a}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,r,n,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,r,n,s){this.spec.setSelection?this.spec.setSelection(t,r,n.root):super.setSelection(t,r,n,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function sz(e,t,r){let n=e.firstChild,s=!1;for(let a=0;a<t.length;a++){let o=t[a],l=o.dom;if(l.parentNode==e){for(;l!=n;)n=_4(n),s=!0;n=n.nextSibling}else s=!0,e.insertBefore(l,n);if(o instanceof Ql){let c=n?n.previousSibling:e.lastChild;sz(o.contentDOM,o.children,r),n=c?c.nextSibling:e.firstChild}}for(;n;)n=_4(n),s=!0;s&&r.trackWrites==e&&(r.trackWrites=null)}const hh=function(e){e&&(this.nodeName=e)};hh.prototype=Object.create(null);const ml=[new hh];function Gk(e,t,r){if(e.length==0)return ml;let n=r?ml[0]:new hh,s=[n];for(let a=0;a<e.length;a++){let o=e[a].type.attrs;if(o){o.nodeName&&s.push(n=new hh(o.nodeName));for(let l in o){let c=o[l];c!=null&&(r&&s.length==1&&s.push(n=new hh(t.isInline?"span":"div")),l=="class"?n.class=(n.class?n.class+" ":"")+c:l=="style"?n.style=(n.style?n.style+";":"")+c:l!="nodeName"&&(n[l]=c))}}}return s}function az(e,t,r,n){if(r==ml&&n==ml)return t;let s=t;for(let a=0;a<n.length;a++){let o=n[a],l=r[a];if(a){let c;l&&l.nodeName==o.nodeName&&s!=e&&(c=s.parentNode)&&c.nodeName.toLowerCase()==o.nodeName||(c=document.createElement(o.nodeName),c.pmIsDeco=!0,c.appendChild(s),l=ml[0]),s=c}Gve(s,l||ml[0],o)}return s}function Gve(e,t,r){for(let n in t)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&e.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=t[n]&&e.setAttribute(n,r[n]);if(t.class!=r.class){let n=t.class?t.class.split(" ").filter(Boolean):[],s=r.class?r.class.split(" ").filter(Boolean):[];for(let a=0;a<n.length;a++)s.indexOf(n[a])==-1&&e.classList.remove(n[a]);for(let a=0;a<s.length;a++)n.indexOf(s[a])==-1&&e.classList.add(s[a]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=r.style){if(t.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=n.exec(t.style);)e.style.removeProperty(s[1])}r.style&&(e.style.cssText+=r.style)}}function iz(e,t,r){return az(e,e,ml,Gk(t,r,e.nodeType!=1))}function _0(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].type.eq(t[r].type))return!1;return!0}function _4(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class Kve{constructor(t,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=Yve(t.node.content,t)}destroyBetween(t,r){if(t!=r){for(let n=t;n<r;n++)this.top.children[n].destroy();this.top.children.splice(t,r-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,r,n){let s=0,a=this.stack.length>>1,o=Math.min(a,t.length);for(;s<o&&(s==a-1?this.top:this.stack[s+1<<1]).matchesMark(t[s])&&t[s].type.spec.spanning!==!1;)s++;for(;s<a;)this.destroyRest(),this.top.dirty=Is,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<t.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let d=this.top.children[c];if(d.matchesMark(t[a])&&!this.isLocked(d.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=Ql.create(this.top,t[a],r,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,a++}}findNodeMatch(t,r,n,s){let a=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(t,r,n))a=this.top.children.indexOf(o,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let d=this.top.children[l];if(d.matchesNode(t,r,n)&&!this.preMatch.matched.has(d)){a=l;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(t,r,n,s,a){let o=this.top.children[s];return o.dirty==Ra&&o.dom==o.contentDOM&&(o.dirty=pl),o.update(t,r,n,a)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(t){for(;;){let r=t.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=t.pmViewDesc;if(n){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==n)return s}return-1}t=r}}updateNextNode(t,r,n,s,a,o){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof So){let d=this.preMatch.matched.get(c);if(d!=null&&d!=a)return!1;let u=c.dom,h,f=this.isLocked(u)&&!(t.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==t.text&&c.dirty!=Ra&&_0(r,c.outerDeco));if(!f&&c.update(t,r,n,s))return this.destroyBetween(this.index,l),c.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(c,t,r,n,s,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=pl,h.updateChildren(s,o+1),h.dirty=Is),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,r,n,s,a,o){if(t.dirty||r.isAtom||!t.children.length||!t.node.content.eq(r.content)||!_0(n,t.outerDeco)||!s.eq(t.innerDeco))return null;let l=So.create(this.top,r,n,s,a,o);if(l.contentDOM){l.children=t.children,t.children=[];for(let c of l.children)c.parent=l}return t.destroy(),l}addNode(t,r,n,s,a){let o=So.create(this.top,t,r,n,s,a);o.contentDOM&&o.updateChildren(s,a+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,r,n){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(t)&&(t==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let a=new rz(this.top,t,r,n);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],r=this.top;for(;t instanceof Ql;)r=t,t=r.children[r.children.length-1];(!t||!(t instanceof oy)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((dn||Er)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(t,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(t))this.index++;else{let n=document.createElement(t);t=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),t=="BR"&&(n.className="ProseMirror-trailingBreak");let s=new nz(this.top,[],n,null);r!=this.top?r.children.push(s):r.children.splice(this.index++,0,s),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function Yve(e,t){let r=t,n=r.children.length,s=e.childCount,a=new Map,o=[];e:for(;s>0;){let l;for(;;)if(n){let d=r.children[n-1];if(d instanceof Ql)r=d,n=d.children.length;else{l=d,n--;break}}else{if(r==t)break e;n=r.parent.children.indexOf(r),r=r.parent}let c=l.node;if(c){if(c!=e.child(s-1))break;--s,a.set(l,s),o.push(l)}}return{index:s,matched:a,matches:o.reverse()}}function Xve(e,t){return e.type.side-t.type.side}function Jve(e,t,r,n){let s=t.locals(e),a=0;if(s.length==0){for(let d=0;d<e.childCount;d++){let u=e.child(d);n(u,s,t.forChild(a,u),d),a+=u.nodeSize}return}let o=0,l=[],c=null;for(let d=0;;){let u,h;for(;o<s.length&&s[o].to==a;){let b=s[o++];b.widget&&(u?(h||(h=[u])).push(b):u=b)}if(u)if(h){h.sort(Xve);for(let b=0;b<h.length;b++)r(h[b],d,!!c)}else r(u,d,!!c);let f,p;if(c)p=-1,f=c,c=null;else if(d<e.childCount)p=d,f=e.child(d++);else break;for(let b=0;b<l.length;b++)l[b].to<=a&&l.splice(b--,1);for(;o<s.length&&s[o].from<=a&&s[o].to>a;)l.push(s[o++]);let m=a+f.nodeSize;if(f.isText){let b=m;o<s.length&&s[o].from<b&&(b=s[o].from);for(let y=0;y<l.length;y++)l[y].to<b&&(b=l[y].to);b<m&&(c=f.cut(b-a),f=f.cut(0,b-a),m=b,p=-1)}else for(;o<s.length&&s[o].to<m;)o++;let x=f.isInline&&!f.isLeaf?l.filter(b=>!b.inline):l.slice();n(f,x,t.forChild(a,f),p),a=m}}function Zve(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function Qve(e,t,r,n){for(let s=0,a=0;s<e.childCount&&a<=n;){let o=e.child(s++),l=a;if(a+=o.nodeSize,!o.isText)continue;let c=o.text;for(;s<e.childCount;){let d=e.child(s++);if(a+=d.nodeSize,!d.isText)break;c+=d.text}if(a>=r){if(a>=n&&c.slice(n-t.length-l,n-l)==t)return n-t.length;let d=l<n?c.lastIndexOf(t,n-l-1):-1;if(d>=0&&d+t.length+l>=r)return l+d;if(r==n&&c.length>=n+t.length-l&&c.slice(n-l,n-l+t.length)==t)return n}}return-1}function Kk(e,t,r,n,s){let a=[];for(let o=0,l=0;o<e.length;o++){let c=e[o],d=l,u=l+=c.size;d>=r||u<=t?a.push(c):(d<t&&a.push(c.slice(0,t-d,n)),s&&(a.push(s),s=void 0),u>r&&a.push(c.slice(r-d,c.size,n)))}return a}function PC(e,t=null){let r=e.domSelectionRange(),n=e.state.doc;if(!r.focusNode)return null;let s=e.docView.nearestDesc(r.focusNode),a=s&&s.size==0,o=e.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let l=n.resolve(o),c,d;if(iy(r)){for(c=o;s&&!s.node;)s=s.parent;let h=s.node;if(s&&h.isAtom&&Re.isSelectable(h)&&s.parent&&!(h.isInline&&Cve(r.focusNode,r.focusOffset,s.dom))){let f=s.posBefore;d=new Re(o==f?l:n.resolve(f))}}else{if(r instanceof e.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let h=o,f=o;for(let p=0;p<r.rangeCount;p++){let m=r.getRangeAt(p);h=Math.min(h,e.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,e.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(h<0)return null;[c,o]=f==e.state.selection.anchor?[f,h]:[h,f],l=n.resolve(o)}else c=e.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(c<0)return null}let u=n.resolve(c);if(!d){let h=t=="pointer"||e.state.selection.head<l.pos&&!a?1:-1;d=MC(e,u,l,h)}return d}function oz(e){return e.editable?e.hasFocus():cz(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function ui(e,t=!1){let r=e.state.selection;if(lz(e,r),!!oz(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Er){let n=e.domSelectionRange(),s=e.domObserver.currentSelection;if(n.anchorNode&&s.anchorNode&&Zl(n.anchorNode,n.anchorOffset,s.anchorNode,s.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)twe(e);else{let{anchor:n,head:s}=r,a,o;E4&&!(r instanceof Ue)&&(r.$from.parent.inlineContent||(a=A4(e,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=A4(e,r.to))),e.docView.setSelection(n,s,e,t),E4&&(a&&T4(a),o&&T4(o)),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&ewe(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const E4=dn||Er&&KB<63;function A4(e,t){let{node:r,offset:n}=e.docView.domFromPos(t,0),s=n<r.childNodes.length?r.childNodes[n]:null,a=n?r.childNodes[n-1]:null;if(dn&&s&&s.contentEditable=="false")return ew(s);if((!s||s.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(s)return ew(s);if(a)return ew(a)}}function ew(e){return e.contentEditable="true",dn&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function T4(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function ewe(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let r=e.domSelectionRange(),n=r.anchorNode,s=r.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=s)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!oz(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function twe(e){let t=e.domSelection();if(!t)return;let r=e.cursorWrapper.dom,n=r.nodeName=="IMG";n?t.collapse(r.parentNode,Wr(r)+1):t.collapse(r,0),!n&&!e.state.selection.visible&&Wn&&No<=11&&(r.disabled=!0,r.disabled=!1)}function lz(e,t){if(t instanceof Re){let r=e.docView.descAt(t.from);r!=e.lastSelectedViewDesc&&(P4(e),r&&r.selectNode(),e.lastSelectedViewDesc=r)}else P4(e)}function P4(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function MC(e,t,r,n){return e.someProp("createSelectionBetween",s=>s(e,t,r))||Ue.between(t,r,n)}function M4(e){return e.editable&&!e.hasFocus()?!1:cz(e)}function cz(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function rwe(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),r=e.domSelectionRange();return Zl(t.node,t.offset,r.anchorNode,r.anchorOffset)}function Yk(e,t){let{$anchor:r,$head:n}=e.selection,s=t>0?r.max(n):r.min(n),a=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return a&&Je.findFrom(a,t)}function Gi(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function O4(e,t,r){let n=e.state.selection;if(n instanceof Ue)if(r.indexOf("s")>-1){let{$head:s}=n,a=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let o=e.state.doc.resolve(s.pos+a.nodeSize*(t<0?-1:1));return Gi(e,new Ue(n.$anchor,o))}else if(n.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let s=Yk(e.state,t);return s&&s instanceof Re?Gi(e,s):!1}else if(!(Ss&&r.indexOf("m")>-1)){let s=n.$head,a=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter,o;if(!a||a.isText)return!1;let l=t<0?s.pos-a.nodeSize:s.pos;return a.isAtom||(o=e.docView.descAt(l))&&!o.contentDOM?Re.isSelectable(a)?Gi(e,new Re(t<0?e.state.doc.resolve(s.pos-a.nodeSize):s)):ip?Gi(e,new Ue(e.state.doc.resolve(t<0?l:l+a.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Re&&n.node.isInline)return Gi(e,new Ue(t>0?n.$to:n.$from));{let s=Yk(e.state,t);return s?Gi(e,s):!1}}}function E0(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function fh(e,t){let r=e.pmViewDesc;return r&&r.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function kc(e,t){return t<0?nwe(e):swe(e)}function nwe(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let s,a,o=!1;for(Ds&&r.nodeType==1&&n<E0(r)&&fh(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let l=r.childNodes[n-1];if(fh(l,-1))s=r,a=--n;else if(l.nodeType==3)r=l,n=r.nodeValue.length;else break}}else{if(dz(r))break;{let l=r.previousSibling;for(;l&&fh(l,-1);)s=r.parentNode,a=Wr(l),l=l.previousSibling;if(l)r=l,n=E0(r);else{if(r=r.parentNode,r==e.dom)break;n=0}}}o?Xk(e,r,n):s&&Xk(e,s,a)}function swe(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let s=E0(r),a,o;for(;;)if(n<s){if(r.nodeType!=1)break;let l=r.childNodes[n];if(fh(l,1))a=r,o=++n;else break}else{if(dz(r))break;{let l=r.nextSibling;for(;l&&fh(l,1);)a=l.parentNode,o=Wr(l)+1,l=l.nextSibling;if(l)r=l,n=0,s=E0(r);else{if(r=r.parentNode,r==e.dom)break;n=s=0}}}a&&Xk(e,a,o)}function dz(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function awe(e,t){for(;e&&t==e.childNodes.length&&!ap(e);)t=Wr(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let r=e.childNodes[t];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;e=r,t=0}}function iwe(e,t){for(;e&&!t&&!ap(e);)t=Wr(e),e=e.parentNode;for(;e&&t;){let r=e.childNodes[t-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;e=r,t=e.childNodes.length}}function Xk(e,t,r){if(t.nodeType!=3){let a,o;(o=awe(t,r))?(t=o,r=0):(a=iwe(t,r))&&(t=a,r=a.nodeValue.length)}let n=e.domSelection();if(!n)return;if(iy(n)){let a=document.createRange();a.setEnd(t,r),a.setStart(t,r),n.removeAllRanges(),n.addRange(a)}else n.extend&&n.extend(t,r);e.domObserver.setCurSelection();let{state:s}=e;setTimeout(()=>{e.state==s&&ui(e)},50)}function $4(e,t){let r=e.state.doc.resolve(t);if(!(Er||YB)&&r.parent.inlineContent){let s=e.coordsAtPos(t);if(t>r.start()){let a=e.coordsAtPos(t-1),o=(a.top+a.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(a.left-s.left)>1)return a.left<s.left?"ltr":"rtl"}if(t<r.end()){let a=e.coordsAtPos(t+1),o=(a.top+a.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(a.left-s.left)>1)return a.left>s.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function D4(e,t,r){let n=e.state.selection;if(n instanceof Ue&&!n.empty||r.indexOf("s")>-1||Ss&&r.indexOf("m")>-1)return!1;let{$from:s,$to:a}=n;if(!s.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=Yk(e.state,t);if(o&&o instanceof Re)return Gi(e,o)}if(!s.parent.inlineContent){let o=t<0?s:a,l=n instanceof is?Je.near(o,t):Je.findFrom(o,t);return l?Gi(e,l):!1}return!1}function I4(e,t){if(!(e.state.selection instanceof Ue))return!0;let{$head:r,$anchor:n,empty:s}=e.state.selection;if(!r.sameParent(n))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){let o=e.state.tr;return t<0?o.delete(r.pos-a.nodeSize,r.pos):o.delete(r.pos,r.pos+a.nodeSize),e.dispatch(o),!0}return!1}function L4(e,t,r){e.domObserver.stop(),t.contentEditable=r,e.domObserver.start()}function owe(e){if(!dn||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:r}=e.domSelectionRange();if(t&&t.nodeType==1&&r==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let n=t.firstChild;L4(e,n,"true"),setTimeout(()=>L4(e,n,"false"),20)}return!1}function lwe(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function cwe(e,t){let r=t.keyCode,n=lwe(t);if(r==8||Ss&&r==72&&n=="c")return I4(e,-1)||kc(e,-1);if(r==46&&!t.shiftKey||Ss&&r==68&&n=="c")return I4(e,1)||kc(e,1);if(r==13||r==27)return!0;if(r==37||Ss&&r==66&&n=="c"){let s=r==37?$4(e,e.state.selection.from)=="ltr"?-1:1:-1;return O4(e,s,n)||kc(e,s)}else if(r==39||Ss&&r==70&&n=="c"){let s=r==39?$4(e,e.state.selection.from)=="ltr"?1:-1:1;return O4(e,s,n)||kc(e,s)}else{if(r==38||Ss&&r==80&&n=="c")return D4(e,-1,n)||kc(e,-1);if(r==40||Ss&&r==78&&n=="c")return owe(e)||D4(e,1,n)||kc(e,1);if(n==(Ss?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function OC(e,t){e.someProp("transformCopied",p=>{t=p(t,e)});let r=[],{content:n,openStart:s,openEnd:a}=t;for(;s>1&&a>1&&n.childCount==1&&n.firstChild.childCount==1;){s--,a--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=e.someProp("clipboardSerializer")||cc.fromSchema(e.state.schema),l=gz(),c=l.createElement("div");c.appendChild(o.serializeFragment(n,{document:l}));let d=c.firstChild,u,h=0;for(;d&&d.nodeType==1&&(u=mz[d.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let m=l.createElement(u[p]);for(;c.firstChild;)m.appendChild(c.firstChild);c.appendChild(m),h++}d=c.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${s} ${a}${h?` -${h}`:""} ${JSON.stringify(r)}`);let f=e.someProp("clipboardTextSerializer",p=>p(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:c,text:f,slice:t}}function uz(e,t,r,n,s){let a=s.parent.type.spec.code,o,l;if(!r&&!t)return null;let c=!!t&&(n||a||!r);if(c){if(e.someProp("transformPastedText",f=>{t=f(t,a||n,e)}),a)return l=new _e(ce.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",f=>{l=f(l,e,!0)}),l;let h=e.someProp("clipboardTextParser",f=>f(t,s,n,e));if(h)l=h;else{let f=s.marks(),{schema:p}=e.state,m=cc.fromSchema(p);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(x=>{let b=o.appendChild(document.createElement("p"));x&&b.appendChild(m.serializeNode(p.text(x,f)))})}}else e.someProp("transformPastedHTML",h=>{r=h(r,e)}),o=fwe(r),ip&&pwe(o);let d=o&&o.querySelector("[data-pm-slice]"),u=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(l||(l=(e.someProp("clipboardParser")||e.someProp("domParser")||dh.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(c||u),context:s,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!dwe.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)l=mwe(R4(l,+u[1],+u[2]),u[4]);else if(l=_e.maxOpen(uwe(l.content,s),!0),l.openStart||l.openEnd){let h=0,f=0;for(let p=l.content.firstChild;h<l.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=l.content.lastChild;f<l.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);l=R4(l,h,f)}return e.someProp("transformPasted",h=>{l=h(l,e,c)}),l}const dwe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function uwe(e,t){if(e.childCount<2)return e;for(let r=t.depth;r>=0;r--){let s=t.node(r).contentMatchAt(t.index(r)),a,o=[];if(e.forEach(l=>{if(!o)return;let c=s.findWrapping(l.type),d;if(!c)return o=null;if(d=o.length&&a.length&&fz(c,a,l,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=pz(o[o.length-1],a.length));let u=hz(l,c);o.push(u),s=s.matchType(u.type),a=c}}),o)return ce.from(o)}return e}function hz(e,t,r=0){for(let n=t.length-1;n>=r;n--)e=t[n].create(null,ce.from(e));return e}function fz(e,t,r,n,s){if(s<e.length&&s<t.length&&e[s]==t[s]){let a=fz(e,t,r,n.lastChild,s+1);if(a)return n.copy(n.content.replaceChild(n.childCount-1,a));if(n.contentMatchAt(n.childCount).matchType(s==e.length-1?r.type:e[s+1]))return n.copy(n.content.append(ce.from(hz(r,e,s+1))))}}function pz(e,t){if(t==0)return e;let r=e.content.replaceChild(e.childCount-1,pz(e.lastChild,t-1)),n=e.contentMatchAt(e.childCount).fillBefore(ce.empty,!0);return e.copy(r.append(n))}function Jk(e,t,r,n,s,a){let o=t<0?e.firstChild:e.lastChild,l=o.content;return e.childCount>1&&(a=0),s<n-1&&(l=Jk(l,t,r,n,s+1,a)),s>=r&&(l=t<0?o.contentMatchAt(0).fillBefore(l,a<=s).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(ce.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(l))}function R4(e,t,r){return t<e.openStart&&(e=new _e(Jk(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),r<e.openEnd&&(e=new _e(Jk(e.content,1,r,e.openEnd,0,0),e.openStart,r)),e}const mz={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let B4=null;function gz(){return B4||(B4=document.implementation.createHTMLDocument("title"))}let tw=null;function hwe(e){let t=window.trustedTypes;return t?(tw||(tw=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),tw.createHTML(e)):e}function fwe(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let r=gz().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(e),s;if((s=n&&mz[n[1].toLowerCase()])&&(e=s.map(a=>"<"+a+">").join("")+e+s.map(a=>"</"+a+">").reverse().join("")),r.innerHTML=hwe(e),s)for(let a=0;a<s.length;a++)r=r.querySelector(s[a])||r;return r}function pwe(e){let t=e.querySelectorAll(Er?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<t.length;r++){let n=t[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),n)}}function mwe(e,t){if(!e.size)return e;let r=e.content.firstChild.type.schema,n;try{n=JSON.parse(t)}catch{return e}let{content:s,openStart:a,openEnd:o}=e;for(let l=n.length-2;l>=0;l-=2){let c=r.nodes[n[l]];if(!c||c.hasRequiredAttrs())break;s=ce.from(c.create(n[l+1],s)),a++,o++}return new _e(s,a,o)}const Nn={},Sn={},gwe={touchstart:!0,touchmove:!0};class xwe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function bwe(e){for(let t in Nn){let r=Nn[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=n=>{vwe(e,n)&&!$C(e,n)&&(e.editable||!(n.type in Sn))&&r(e,n)},gwe[t]?{passive:!0}:void 0)}dn&&e.dom.addEventListener("input",()=>null),Zk(e)}function lo(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function ywe(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function Zk(e){e.someProp("handleDOMEvents",t=>{for(let r in t)e.input.eventHandlers[r]||e.dom.addEventListener(r,e.input.eventHandlers[r]=n=>$C(e,n))})}function $C(e,t){return e.someProp("handleDOMEvents",r=>{let n=r[t.type];return n?n(e,t)||t.defaultPrevented:!1})}function vwe(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let r=t.target;r!=e.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(t))return!1;return!0}function wwe(e,t){!$C(e,t)&&Nn[t.type]&&(e.editable||!(t.type in Sn))&&Nn[t.type](e,t)}Sn.keydown=(e,t)=>{let r=t;if(e.input.shiftKey=r.keyCode==16||r.shiftKey,!bz(e,r)&&(e.input.lastKeyCode=r.keyCode,e.input.lastKeyCodeTime=Date.now(),!(ai&&Er&&r.keyCode==13)))if(r.keyCode!=229&&e.domObserver.forceFlush(),_d&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();e.input.lastIOSEnter=n,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==n&&(e.someProp("handleKeyDown",s=>s(e,ol(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",n=>n(e,r))||cwe(e,r)?r.preventDefault():lo(e,"key")};Sn.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Sn.keypress=(e,t)=>{let r=t;if(bz(e,r)||!r.charCode||r.ctrlKey&&!r.altKey||Ss&&r.metaKey)return;if(e.someProp("handleKeyPress",s=>s(e,r))){r.preventDefault();return}let n=e.state.selection;if(!(n instanceof Ue)||!n.$from.sameParent(n.$to)){let s=String.fromCharCode(r.charCode),a=()=>e.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!e.someProp("handleTextInput",o=>o(e,n.$from.pos,n.$to.pos,s,a))&&e.dispatch(a()),r.preventDefault()}};function ly(e){return{left:e.clientX,top:e.clientY}}function kwe(e,t){let r=t.x-e.clientX,n=t.y-e.clientY;return r*r+n*n<100}function DC(e,t,r,n,s){if(n==-1)return!1;let a=e.state.doc.resolve(n);for(let o=a.depth+1;o>0;o--)if(e.someProp(t,l=>o>a.depth?l(e,r,a.nodeAfter,a.before(o),s,!0):l(e,r,a.node(o),a.before(o),s,!1)))return!0;return!1}function Zc(e,t,r){if(e.focused||e.focus(),e.state.selection.eq(t))return;let n=e.state.tr.setSelection(t);n.setMeta("pointer",!0),e.dispatch(n)}function jwe(e,t){if(t==-1)return!1;let r=e.state.doc.resolve(t),n=r.nodeAfter;return n&&n.isAtom&&Re.isSelectable(n)?(Zc(e,new Re(r)),!0):!1}function Nwe(e,t){if(t==-1)return!1;let r=e.state.selection,n,s;r instanceof Re&&(n=r.node);let a=e.state.doc.resolve(t);for(let o=a.depth+1;o>0;o--){let l=o>a.depth?a.nodeAfter:a.node(o);if(Re.isSelectable(l)){n&&r.$from.depth>0&&o>=r.$from.depth&&a.before(r.$from.depth+1)==r.$from.pos?s=a.before(r.$from.depth):s=a.before(o);break}}return s!=null?(Zc(e,Re.create(e.state.doc,s)),!0):!1}function Swe(e,t,r,n,s){return DC(e,"handleClickOn",t,r,n)||e.someProp("handleClick",a=>a(e,t,n))||(s?Nwe(e,r):jwe(e,r))}function Cwe(e,t,r,n){return DC(e,"handleDoubleClickOn",t,r,n)||e.someProp("handleDoubleClick",s=>s(e,t,n))}function _we(e,t,r,n){return DC(e,"handleTripleClickOn",t,r,n)||e.someProp("handleTripleClick",s=>s(e,t,n))||Ewe(e,r,n)}function Ewe(e,t,r){if(r.button!=0)return!1;let n=e.state.doc;if(t==-1)return n.inlineContent?(Zc(e,Ue.create(n,0,n.content.size)),!0):!1;let s=n.resolve(t);for(let a=s.depth+1;a>0;a--){let o=a>s.depth?s.nodeAfter:s.node(a),l=s.before(a);if(o.inlineContent)Zc(e,Ue.create(n,l+1,l+1+o.content.size));else if(Re.isSelectable(o))Zc(e,Re.create(n,l));else continue;return!0}}function IC(e){return A0(e)}const xz=Ss?"metaKey":"ctrlKey";Nn.mousedown=(e,t)=>{let r=t;e.input.shiftKey=r.shiftKey;let n=IC(e),s=Date.now(),a="singleClick";s-e.input.lastClick.time<500&&kwe(r,e.input.lastClick)&&!r[xz]&&e.input.lastClick.button==r.button&&(e.input.lastClick.type=="singleClick"?a="doubleClick":e.input.lastClick.type=="doubleClick"&&(a="tripleClick")),e.input.lastClick={time:s,x:r.clientX,y:r.clientY,type:a,button:r.button};let o=e.posAtCoords(ly(r));o&&(a=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Awe(e,o,r,!!n)):(a=="doubleClick"?Cwe:_we)(e,o.pos,o.inside,r)?r.preventDefault():lo(e,"pointer"))};class Awe{constructor(t,r,n,s){this.view=t,this.pos=r,this.event=n,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!n[xz],this.allowDefault=n.shiftKey;let a,o;if(r.inside>-1)a=t.state.doc.nodeAt(r.inside),o=r.inside;else{let u=t.state.doc.resolve(r.pos);a=u.parent,o=u.depth?u.before():0}const l=s?null:n.target,c=l?t.docView.nearestDesc(l,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:d}=t.state;(n.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||d instanceof Re&&d.from<=o&&d.to>o)&&(this.mightDrag={node:a,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ds&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),lo(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ui(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(ly(t))),this.updateAllowDefault(t),this.allowDefault||!r?lo(this.view,"pointer"):Swe(this.view,r.pos,r.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||dn&&this.mightDrag&&!this.mightDrag.node.isAtom||Er&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(Zc(this.view,Je.near(this.view.state.doc.resolve(r.pos))),t.preventDefault()):lo(this.view,"pointer")}move(t){this.updateAllowDefault(t),lo(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Nn.touchstart=e=>{e.input.lastTouch=Date.now(),IC(e),lo(e,"pointer")};Nn.touchmove=e=>{e.input.lastTouch=Date.now(),lo(e,"pointer")};Nn.contextmenu=e=>IC(e);function bz(e,t){return e.composing?!0:dn&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const Twe=ai?5e3:-1;Sn.compositionstart=Sn.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,r=t.selection.$to;if(t.selection instanceof Ue&&(t.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||Er&&YB&&Pwe(e)))e.markCursor=e.state.storedMarks||r.marks(),A0(e,!0),e.markCursor=null;else if(A0(e,!t.selection.empty),Ds&&t.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=e.domSelectionRange();for(let s=n.focusNode,a=n.focusOffset;s&&s.nodeType==1&&a!=0;){let o=a<0?s.lastChild:s.childNodes[a-1];if(!o)break;if(o.nodeType==3){let l=e.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else s=o,a=-1}}e.input.composing=!0}yz(e,Twe)};function Pwe(e){let{focusNode:t,focusOffset:r}=e.domSelectionRange();if(!t||t.nodeType!=1||r>=t.childNodes.length)return!1;let n=t.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}Sn.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,yz(e,20))};function yz(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>A0(e),t))}function vz(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=Owe());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function Mwe(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let r=Nve(t.focusNode,t.focusOffset),n=Sve(t.focusNode,t.focusOffset);if(r&&n&&r!=n){let s=n.pmViewDesc,a=e.domObserver.lastChangedTextNode;if(r==a||n==a)return a;if(!s||!s.isText(n.nodeValue))return n;if(e.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function Owe(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function A0(e,t=!1){if(!(ai&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),vz(e),t||e.docView&&e.docView.dirty){let r=PC(e),n=e.state.selection;return r&&!r.eq(n)?e.dispatch(e.state.tr.setSelection(r)):(e.markCursor||t)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function $we(e,t){if(!e.dom.parentNode)return;let r=e.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),s=document.createRange();s.selectNodeContents(t),e.dom.blur(),n.removeAllRanges(),n.addRange(s),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),e.focus()},50)}const uf=Wn&&No<15||_d&&Ave<604;Nn.copy=Sn.cut=(e,t)=>{let r=t,n=e.state.selection,s=r.type=="cut";if(n.empty)return;let a=uf?null:r.clipboardData,o=n.content(),{dom:l,text:c}=OC(e,o);a?(r.preventDefault(),a.clearData(),a.setData("text/html",l.innerHTML),a.setData("text/plain",c)):$we(e,l),s&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Dwe(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function Iwe(e,t){if(!e.dom.parentNode)return;let r=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,n=e.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let s=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),n.parentNode&&n.parentNode.removeChild(n),r?hf(e,n.value,null,s,t):hf(e,n.textContent,n.innerHTML,s,t)},50)}function hf(e,t,r,n,s){let a=uz(e,t,r,n,e.state.selection.$from);if(e.someProp("handlePaste",c=>c(e,s,a||_e.empty)))return!0;if(!a)return!1;let o=Dwe(a),l=o?e.state.tr.replaceSelectionWith(o,n):e.state.tr.replaceSelection(a);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function wz(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let r=e.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Sn.paste=(e,t)=>{let r=t;if(e.composing&&!ai)return;let n=uf?null:r.clipboardData,s=e.input.shiftKey&&e.input.lastKeyCode!=45;n&&hf(e,wz(n),n.getData("text/html"),s,r)?r.preventDefault():Iwe(e,r)};class kz{constructor(t,r,n){this.slice=t,this.move=r,this.node=n}}const Lwe=Ss?"altKey":"ctrlKey";function jz(e,t){let r=e.someProp("dragCopies",n=>!n(t));return r??!t[Lwe]}Nn.dragstart=(e,t)=>{let r=t,n=e.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let s=e.state.selection,a=s.empty?null:e.posAtCoords(ly(r)),o;if(!(a&&a.pos>=s.from&&a.pos<=(s instanceof Re?s.to-1:s.to))){if(n&&n.mightDrag)o=Re.create(e.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let h=e.docView.nearestDesc(r.target,!0);h&&h.node.type.spec.draggable&&h!=e.docView&&(o=Re.create(e.state.doc,h.posBefore))}}let l=(o||e.state.selection).content(),{dom:c,text:d,slice:u}=OC(e,l);(!r.dataTransfer.files.length||!Er||KB>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(uf?"Text":"text/html",c.innerHTML),r.dataTransfer.effectAllowed="copyMove",uf||r.dataTransfer.setData("text/plain",d),e.dragging=new kz(u,jz(e,r),o)};Nn.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Sn.dragover=Sn.dragenter=(e,t)=>t.preventDefault();Sn.drop=(e,t)=>{try{Rwe(e,t,e.dragging)}finally{e.dragging=null}};function Rwe(e,t,r){if(!t.dataTransfer)return;let n=e.posAtCoords(ly(t));if(!n)return;let s=e.state.doc.resolve(n.pos),a=r&&r.slice;a?e.someProp("transformPasted",p=>{a=p(a,e,!1)}):a=uz(e,wz(t.dataTransfer),uf?null:t.dataTransfer.getData("text/html"),!1,s);let o=!!(r&&jz(e,t));if(e.someProp("handleDrop",p=>p(e,t,a||_e.empty,o))){t.preventDefault();return}if(!a)return;t.preventDefault();let l=a?_B(e.state.doc,s.pos,a):s.pos;l==null&&(l=s.pos);let c=e.state.tr;if(o){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let d=c.mapping.map(l),u=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,h=c.doc;if(u?c.replaceRangeWith(d,d,a.content.firstChild):c.replaceRange(d,d,a),c.doc.eq(h))return;let f=c.doc.resolve(d);if(u&&Re.isSelectable(a.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(a.content.firstChild))c.setSelection(new Re(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,x,b,y)=>p=y),c.setSelection(MC(e,f,c.doc.resolve(p)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))}Nn.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&ui(e)},20))};Nn.blur=(e,t)=>{let r=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),r.relatedTarget&&e.dom.contains(r.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Nn.beforeinput=(e,t)=>{if(Er&&ai&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:n}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=n||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",a=>a(e,ol(8,"Backspace")))))return;let{$cursor:s}=e.state.selection;s&&s.pos>0&&e.dispatch(e.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let e in Sn)Nn[e]=Sn[e];function ff(e,t){if(e==t)return!0;for(let r in e)if(e[r]!==t[r])return!1;for(let r in t)if(!(r in e))return!1;return!0}class T0{constructor(t,r){this.toDOM=t,this.spec=r||Al,this.side=this.spec.side||0}map(t,r,n,s){let{pos:a,deleted:o}=t.mapResult(r.from+s,this.side<0?-1:1);return o?null:new yn(a-n,a-n,this)}valid(){return!0}eq(t){return this==t||t instanceof T0&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&ff(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Co{constructor(t,r){this.attrs=t,this.spec=r||Al}map(t,r,n,s){let a=t.map(r.from+s,this.spec.inclusiveStart?-1:1)-n,o=t.map(r.to+s,this.spec.inclusiveEnd?1:-1)-n;return a>=o?null:new yn(a,o,this)}valid(t,r){return r.from<r.to}eq(t){return this==t||t instanceof Co&&ff(this.attrs,t.attrs)&&ff(this.spec,t.spec)}static is(t){return t.type instanceof Co}destroy(){}}class LC{constructor(t,r){this.attrs=t,this.spec=r||Al}map(t,r,n,s){let a=t.mapResult(r.from+s,1);if(a.deleted)return null;let o=t.mapResult(r.to+s,-1);return o.deleted||o.pos<=a.pos?null:new yn(a.pos-n,o.pos-n,this)}valid(t,r){let{index:n,offset:s}=t.content.findIndex(r.from),a;return s==r.from&&!(a=t.child(n)).isText&&s+a.nodeSize==r.to}eq(t){return this==t||t instanceof LC&&ff(this.attrs,t.attrs)&&ff(this.spec,t.spec)}destroy(){}}class yn{constructor(t,r,n){this.from=t,this.to=r,this.type=n}copy(t,r){return new yn(t,r,this.type)}eq(t,r=0){return this.type.eq(t.type)&&this.from+r==t.from&&this.to+r==t.to}map(t,r,n){return this.type.map(t,this,r,n)}static widget(t,r,n){return new yn(t,t,new T0(r,n))}static inline(t,r,n,s){return new yn(t,r,new Co(n,s))}static node(t,r,n,s){return new yn(t,r,new LC(n,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Co}get widget(){return this.type instanceof T0}}const Nc=[],Al={};class Ft{constructor(t,r){this.local=t.length?t:Nc,this.children=r.length?r:Nc}static create(t,r){return r.length?P0(r,t,0,Al):rn}find(t,r,n){let s=[];return this.findInner(t??0,r??1e9,s,0,n),s}findInner(t,r,n,s,a){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=r&&l.to>=t&&(!a||a(l.spec))&&n.push(l.copy(l.from+s,l.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>t){let l=this.children[o]+1;this.children[o+2].findInner(t-l,r-l,n,s+l,a)}}map(t,r,n){return this==rn||t.maps.length==0?this:this.mapInner(t,r,0,0,n||Al)}mapInner(t,r,n,s,a){let o;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(t,n,s);c&&c.type.valid(r,c)?(o||(o=[])).push(c):a.onRemove&&a.onRemove(this.local[l].spec)}return this.children.length?Bwe(this.children,o||[],t,r,n,s,a):o?new Ft(o.sort(Tl),Nc):rn}add(t,r){return r.length?this==rn?Ft.create(t,r):this.addInner(t,r,0):this}addInner(t,r,n){let s,a=0;t.forEach((l,c)=>{let d=c+n,u;if(u=Sz(r,l,d)){for(s||(s=this.children.slice());a<s.length&&s[a]<c;)a+=3;s[a]==c?s[a+2]=s[a+2].addInner(l,u,d+1):s.splice(a,0,c,c+l.nodeSize,P0(u,l,d+1,Al)),a+=3}});let o=Nz(a?Cz(r):r,-n);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||o.splice(l--,1);return new Ft(o.length?this.local.concat(o).sort(Tl):this.local,s||this.children)}remove(t){return t.length==0||this==rn?this:this.removeInner(t,0)}removeInner(t,r){let n=this.children,s=this.local;for(let a=0;a<n.length;a+=3){let o,l=n[a]+r,c=n[a+1]+r;for(let u=0,h;u<t.length;u++)(h=t[u])&&h.from>l&&h.to<c&&(t[u]=null,(o||(o=[])).push(h));if(!o)continue;n==this.children&&(n=this.children.slice());let d=n[a+2].removeInner(o,l+1);d!=rn?n[a+2]=d:(n.splice(a,3),a-=3)}if(s.length){for(let a=0,o;a<t.length;a++)if(o=t[a])for(let l=0;l<s.length;l++)s[l].eq(o,r)&&(s==this.local&&(s=this.local.slice()),s.splice(l--,1))}return n==this.children&&s==this.local?this:s.length||n.length?new Ft(s,n):rn}forChild(t,r){if(this==rn)return this;if(r.isLeaf)return Ft.empty;let n,s;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=t){this.children[l]==t&&(n=this.children[l+2]);break}let a=t+1,o=a+r.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<o&&c.to>a&&c.type instanceof Co){let d=Math.max(a,c.from)-a,u=Math.min(o,c.to)-a;d<u&&(s||(s=[])).push(c.copy(d,u))}}if(s){let l=new Ft(s.sort(Tl),Nc);return n?new Qi([l,n]):l}return n||rn}eq(t){if(this==t)return!0;if(!(t instanceof Ft)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(t.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0}locals(t){return RC(this.localsInner(t))}localsInner(t){if(this==rn)return Nc;if(t.inlineContent||!this.local.some(Co.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Co||r.push(this.local[n]);return r}forEachSet(t){t(this)}}Ft.empty=new Ft([],[]);Ft.removeOverlap=RC;const rn=Ft.empty;class Qi{constructor(t){this.members=t}map(t,r){const n=this.members.map(s=>s.map(t,r,Al));return Qi.from(n)}forChild(t,r){if(r.isLeaf)return Ft.empty;let n=[];for(let s=0;s<this.members.length;s++){let a=this.members[s].forChild(t,r);a!=rn&&(a instanceof Qi?n=n.concat(a.members):n.push(a))}return Qi.from(n)}eq(t){if(!(t instanceof Qi)||t.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(t.members[r]))return!1;return!0}locals(t){let r,n=!0;for(let s=0;s<this.members.length;s++){let a=this.members[s].localsInner(t);if(a.length)if(!r)r=a;else{n&&(r=r.slice(),n=!1);for(let o=0;o<a.length;o++)r.push(a[o])}}return r?RC(n?r:r.sort(Tl)):Nc}static from(t){switch(t.length){case 0:return rn;case 1:return t[0];default:return new Qi(t.every(r=>r instanceof Ft)?t:t.reduce((r,n)=>r.concat(n instanceof Ft?n:n.members),[]))}}forEachSet(t){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(t)}}function Bwe(e,t,r,n,s,a,o){let l=e.slice();for(let d=0,u=a;d<r.maps.length;d++){let h=0;r.maps[d].forEach((f,p,m,x)=>{let b=x-m-(p-f);for(let y=0;y<l.length;y+=3){let v=l[y+1];if(v<0||f>v+u-h)continue;let w=l[y]+u-h;p>=w?l[y+1]=f<=w?-2:-1:f>=u&&b&&(l[y]+=b,l[y+1]+=b)}h+=b}),u=r.maps[d].map(u,-1)}let c=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){c=!0,l[d+1]=-1;continue}let u=r.map(e[d]+a),h=u-s;if(h<0||h>=n.content.size){c=!0;continue}let f=r.map(e[d+1]+a,-1),p=f-s,{index:m,offset:x}=n.content.findIndex(h),b=n.maybeChild(m);if(b&&x==h&&x+b.nodeSize==p){let y=l[d+2].mapInner(r,b,u+1,e[d]+a+1,o);y!=rn?(l[d]=h,l[d+1]=p,l[d+2]=y):(l[d+1]=-2,c=!0)}else c=!0}if(c){let d=zwe(l,e,t,r,s,a,o),u=P0(d,n,0,o);t=u.local;for(let h=0;h<l.length;h+=3)l[h+1]<0&&(l.splice(h,3),h-=3);for(let h=0,f=0;h<u.children.length;h+=3){let p=u.children[h];for(;f<l.length&&l[f]<p;)f+=3;l.splice(f,0,u.children[h],u.children[h+1],u.children[h+2])}}return new Ft(t.sort(Tl),l)}function Nz(e,t){if(!t||!e.length)return e;let r=[];for(let n=0;n<e.length;n++){let s=e[n];r.push(new yn(s.from+t,s.to+t,s.type))}return r}function zwe(e,t,r,n,s,a,o){function l(c,d){for(let u=0;u<c.local.length;u++){let h=c.local[u].map(n,s,d);h?r.push(h):o.onRemove&&o.onRemove(c.local[u].spec)}for(let u=0;u<c.children.length;u+=3)l(c.children[u+2],c.children[u]+d+1)}for(let c=0;c<e.length;c+=3)e[c+1]==-1&&l(e[c+2],t[c]+a+1);return r}function Sz(e,t,r){if(t.isLeaf)return null;let n=r+t.nodeSize,s=null;for(let a=0,o;a<e.length;a++)(o=e[a])&&o.from>r&&o.to<n&&((s||(s=[])).push(o),e[a]=null);return s}function Cz(e){let t=[];for(let r=0;r<e.length;r++)e[r]!=null&&t.push(e[r]);return t}function P0(e,t,r,n){let s=[],a=!1;t.forEach((l,c)=>{let d=Sz(e,l,c+r);if(d){a=!0;let u=P0(d,l,r+c+1,n);u!=rn&&s.push(c,c+l.nodeSize,u)}});let o=Nz(a?Cz(e):e,-r).sort(Tl);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||(n.onRemove&&n.onRemove(o[l].spec),o.splice(l--,1));return o.length||s.length?new Ft(o,s):rn}function Tl(e,t){return e.from-t.from||e.to-t.to}function RC(e){let t=e;for(let r=0;r<t.length-1;r++){let n=t[r];if(n.from!=n.to)for(let s=r+1;s<t.length;s++){let a=t[s];if(a.from==n.from){a.to!=n.to&&(t==e&&(t=e.slice()),t[s]=a.copy(a.from,n.to),z4(t,s+1,a.copy(n.to,a.to)));continue}else{a.from<n.to&&(t==e&&(t=e.slice()),t[r]=n.copy(n.from,a.from),z4(t,s,n.copy(a.from,n.to)));break}}}return t}function z4(e,t,r){for(;t<e.length&&Tl(r,e[t])>0;)t++;e.splice(t,0,r)}function rw(e){let t=[];return e.someProp("decorations",r=>{let n=r(e.state);n&&n!=rn&&t.push(n)}),e.cursorWrapper&&t.push(Ft.create(e.state.doc,[e.cursorWrapper.deco])),Qi.from(t)}const Fwe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Hwe=Wn&&No<=11;class Uwe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class Wwe{constructor(t,r){this.view=t,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Uwe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let s=0;s<n.length;s++)this.queue.push(n[s]);Wn&&No<=11&&n.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),Hwe&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Fwe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let r=0;r<t.length;r++)this.queue.push(t[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(M4(this.view)){if(this.suppressingSelectionUpdates)return ui(this.view);if(Wn&&No<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&Zl(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let r=new Set,n;for(let a=t.focusNode;a;a=Cd(a))r.add(a);for(let a=t.anchorNode;a;a=Cd(a))if(r.has(a)){n=a;break}let s=n&&this.view.docView.nearestDesc(n);if(s&&s.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=t.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&M4(t)&&!this.ignoreSelectionChange(n),a=-1,o=-1,l=!1,c=[];if(t.editable)for(let u=0;u<r.length;u++){let h=this.registerMutation(r[u],c);h&&(a=a<0?h.from:Math.min(h.from,a),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(l=!0))}if(Ds&&c.length){let u=c.filter(h=>h.nodeName=="BR");if(u.length==2){let[h,f]=u;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of u){let p=f.parentNode;p&&p.nodeName=="LI"&&(!h||Gwe(t,h)!=p)&&f.remove()}}}else if((Er||dn)&&c.some(u=>u.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let u of c)if(u.nodeName=="BR"&&u.parentNode){let h=u.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&u.parentNode.removeChild(u)}}let d=null;a<0&&s&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&iy(n)&&(d=PC(t))&&d.eq(Je.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,ui(t),this.currentSelection.set(n),t.scrollToSelection()):(a>-1||s)&&(a>-1&&(t.docView.markDirty(a,o),Vwe(t)),this.handleDOMChange(a,o,l,c),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||ui(t),this.currentSelection.set(n))}registerMutation(t,r){if(r.indexOf(t.target)>-1)return null;let n=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(n==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!n||n.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++){let h=t.addedNodes[u];r.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};let s=t.previousSibling,a=t.nextSibling;if(Wn&&No<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:h,nextSibling:f}=t.addedNodes[u];(!h||Array.prototype.indexOf.call(t.addedNodes,h)<0)&&(s=h),(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(a=f)}let o=s&&s.parentNode==t.target?Wr(s)+1:0,l=n.localPosFromDOM(t.target,o,-1),c=a&&a.parentNode==t.target?Wr(a):t.target.childNodes.length,d=n.localPosFromDOM(t.target,c,1);return{from:l,to:d}}else return t.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=t.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let F4=new WeakMap,H4=!1;function Vwe(e){if(!F4.has(e)&&(F4.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Ds,H4)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),H4=!0}}function U4(e,t){let r=t.startContainer,n=t.startOffset,s=t.endContainer,a=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return Zl(o.node,o.offset,s,a)&&([r,n,s,a]=[s,a,r,n]),{anchorNode:r,anchorOffset:n,focusNode:s,focusOffset:a}}function qwe(e,t){if(t.getComposedRanges){let s=t.getComposedRanges(e.root)[0];if(s)return U4(e,s)}let r;function n(s){s.preventDefault(),s.stopImmediatePropagation(),r=s.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0),r?U4(e,r):null}function Gwe(e,t){for(let r=t.parentNode;r&&r!=e.dom;r=r.parentNode){let n=e.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function Kwe(e,t,r){let{node:n,fromOffset:s,toOffset:a,from:o,to:l}=e.docView.parseRange(t,r),c=e.domSelectionRange(),d,u=c.anchorNode;if(u&&e.dom.contains(u.nodeType==1?u:u.parentNode)&&(d=[{node:u,offset:c.anchorOffset}],iy(c)||d.push({node:c.focusNode,offset:c.focusOffset})),Er&&e.input.lastKeyCode===8)for(let b=a;b>s;b--){let y=n.childNodes[b-1],v=y.pmViewDesc;if(y.nodeName=="BR"&&!v){a=b;break}if(!v||v.size)break}let h=e.state.doc,f=e.someProp("domParser")||dh.fromSchema(e.state.schema),p=h.resolve(o),m=null,x=f.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:a,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:Ywe,context:p});if(d&&d[0].pos!=null){let b=d[0].pos,y=d[1]&&d[1].pos;y==null&&(y=b),m={anchor:b+o,head:y+o}}return{doc:x,sel:m,from:o,to:l}}function Ywe(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(dn&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(e.parentNode.lastChild==e||dn&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Xwe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Jwe(e,t,r,n,s){let a=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let S=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,C=PC(e,S);if(C&&!e.state.selection.eq(C)){if(Er&&ai&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",E=>E(e,ol(13,"Enter"))))return;let P=e.state.tr.setSelection(C);S=="pointer"?P.setMeta("pointer",!0):S=="key"&&P.scrollIntoView(),a&&P.setMeta("composition",a),e.dispatch(P)}return}let o=e.state.doc.resolve(t),l=o.sharedDepth(r);t=o.before(l+1),r=e.state.doc.resolve(r).after(l+1);let c=e.state.selection,d=Kwe(e,t,r),u=e.state.doc,h=u.slice(d.from,d.to),f,p;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(f=e.state.selection.to,p="end"):(f=e.state.selection.from,p="start"),e.input.lastKeyCode=null;let m=e1e(h.content,d.doc.content,d.from,f,p);if(m&&e.input.domChangeCount++,(_d&&e.input.lastIOSEnter>Date.now()-225||ai)&&s.some(S=>S.nodeType==1&&!Xwe.test(S.nodeName))&&(!m||m.endA>=m.endB)&&e.someProp("handleKeyDown",S=>S(e,ol(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!m)if(n&&c instanceof Ue&&!c.empty&&c.$head.sameParent(c.$anchor)&&!e.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))m={start:c.from,endA:c.to,endB:c.to};else{if(d.sel){let S=W4(e,e.state.doc,d.sel);if(S&&!S.eq(e.state.selection)){let C=e.state.tr.setSelection(S);a&&C.setMeta("composition",a),e.dispatch(C)}}return}e.state.selection.from<e.state.selection.to&&m.start==m.endB&&e.state.selection instanceof Ue&&(m.start>e.state.selection.from&&m.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?m.start=e.state.selection.from:m.endA<e.state.selection.to&&m.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(m.endB+=e.state.selection.to-m.endA,m.endA=e.state.selection.to)),Wn&&No<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>d.from&&d.doc.textBetween(m.start-d.from-1,m.start-d.from+1)==" "&&(m.start--,m.endA--,m.endB--);let x=d.doc.resolveNoCache(m.start-d.from),b=d.doc.resolveNoCache(m.endB-d.from),y=u.resolve(m.start),v=x.sameParent(b)&&x.parent.inlineContent&&y.end()>=m.endA;if((_d&&e.input.lastIOSEnter>Date.now()-225&&(!v||s.some(S=>S.nodeName=="DIV"||S.nodeName=="P"))||!v&&x.pos<d.doc.content.size&&(!x.sameParent(b)||!x.parent.inlineContent)&&x.pos<b.pos&&!/\S/.test(d.doc.textBetween(x.pos,b.pos,"","")))&&e.someProp("handleKeyDown",S=>S(e,ol(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>m.start&&Qwe(u,m.start,m.endA,x,b)&&e.someProp("handleKeyDown",S=>S(e,ol(8,"Backspace")))){ai&&Er&&e.domObserver.suppressSelectionUpdates();return}Er&&m.endB==m.start&&(e.input.lastChromeDelete=Date.now()),ai&&!v&&x.start()!=b.start()&&b.parentOffset==0&&x.depth==b.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==m.endA&&(m.endB-=2,b=d.doc.resolveNoCache(m.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(S){return S(e,ol(13,"Enter"))})},20));let w=m.start,j=m.endA,N=S=>{let C=S||e.state.tr.replace(w,j,d.doc.slice(m.start-d.from,m.endB-d.from));if(d.sel){let P=W4(e,C.doc,d.sel);P&&!(Er&&e.composing&&P.empty&&(m.start!=m.endB||e.input.lastChromeDelete<Date.now()-100)&&(P.head==w||P.head==C.mapping.map(j)-1)||Wn&&P.empty&&P.head==w)&&C.setSelection(P)}return a&&C.setMeta("composition",a),C.scrollIntoView()},k;if(v)if(x.pos==b.pos){Wn&&No<=11&&x.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>ui(e),20));let S=N(e.state.tr.delete(w,j)),C=u.resolve(m.start).marksAcross(u.resolve(m.endA));C&&S.ensureMarks(C),e.dispatch(S)}else if(m.endA==m.endB&&(k=Zwe(x.parent.content.cut(x.parentOffset,b.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let S=N(e.state.tr);k.type=="add"?S.addMark(w,j,k.mark):S.removeMark(w,j,k.mark),e.dispatch(S)}else if(x.parent.child(x.index()).isText&&x.index()==b.index()-(b.textOffset?0:1)){let S=x.parent.textBetween(x.parentOffset,b.parentOffset),C=()=>N(e.state.tr.insertText(S,w,j));e.someProp("handleTextInput",P=>P(e,w,j,S,C))||e.dispatch(C())}else e.dispatch(N());else e.dispatch(N())}function W4(e,t,r){return Math.max(r.anchor,r.head)>t.content.size?null:MC(e,t.resolve(r.anchor),t.resolve(r.head))}function Zwe(e,t){let r=e.firstChild.marks,n=t.firstChild.marks,s=r,a=n,o,l,c;for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);for(let u=0;u<r.length;u++)a=r[u].removeFromSet(a);if(s.length==1&&a.length==0)l=s[0],o="add",c=u=>u.mark(l.addToSet(u.marks));else if(s.length==0&&a.length==1)l=a[0],o="remove",c=u=>u.mark(l.removeFromSet(u.marks));else return null;let d=[];for(let u=0;u<t.childCount;u++)d.push(c(t.child(u)));if(ce.from(d).eq(e))return{mark:l,type:o}}function Qwe(e,t,r,n,s){if(r-t<=s.pos-n.pos||nw(n,!0,!1)<s.pos)return!1;let a=e.resolve(t);if(!n.parent.isTextblock){let l=a.nodeAfter;return l!=null&&r==t+l.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let o=e.resolve(nw(a,!0,!0));return!o.parent.isTextblock||o.pos>r||nw(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function nw(e,t,r){let n=e.depth,s=t?e.end():e.pos;for(;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,s++,t=!1;if(r){let a=e.node(n).maybeChild(e.indexAfter(n));for(;a&&!a.isLeaf;)a=a.firstChild,s++}return s}function e1e(e,t,r,n,s){let a=e.findDiffStart(t,r);if(a==null)return null;let{a:o,b:l}=e.findDiffEnd(t,r+e.size,r+t.size);if(s=="end"){let c=Math.max(0,a-Math.min(o,l));n-=o+c-a}if(o<a&&e.size<t.size){let c=n<=a&&n>=o?a-n:0;a-=c,a&&a<t.size&&V4(t.textBetween(a-1,a+1))&&(a+=c?1:-1),l=a+(l-o),o=a}else if(l<a){let c=n<=a&&n>=l?a-n:0;a-=c,a&&a<e.size&&V4(e.textBetween(a-1,a+1))&&(a+=c?1:-1),o=a+(o-l),l=a}return{start:a,endA:o,endB:l}}function V4(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),r=e.charCodeAt(1);return t>=56320&&t<=57343&&r>=55296&&r<=56319}class _z{constructor(t,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new xwe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(X4),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=K4(this),G4(this),this.nodeViews=Y4(this),this.docView=C4(this.state.doc,q4(this),rw(this),this.dom,this),this.domObserver=new Wwe(this,(n,s,a,o)=>Jwe(this,n,s,a,o)),this.domObserver.start(),bwe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let r in t)this._props[r]=t[r];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Zk(this);let r=this._props;this._props=t,t.plugins&&(t.plugins.forEach(X4),this.directPlugins=t.plugins),this.updateStateInner(t.state,r)}setProps(t){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in t)r[n]=t[n];this.update(r)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,r){var n;let s=this.state,a=!1,o=!1;t.storedMarks&&this.composing&&(vz(this),o=!0),this.state=t;let l=s.plugins!=t.plugins||this._props.plugins!=r.plugins;if(l||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=Y4(this);r1e(p,this.nodeViews)&&(this.nodeViews=p,a=!0)}(l||r.handleDOMEvents!=this._props.handleDOMEvents)&&Zk(this),this.editable=K4(this),G4(this);let c=rw(this),d=q4(this),u=s.plugins!=t.plugins&&!s.doc.eq(t.doc)?"reset":t.scrollToSelection>s.scrollToSelection?"to selection":"preserve",h=a||!this.docView.matchesNode(t.doc,d,c);(h||!t.selection.eq(s.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Mve(this);if(o){this.domObserver.stop();let p=h&&(Wn||Er)&&!this.composing&&!s.selection.empty&&!t.selection.empty&&t1e(s.selection,t.selection);if(h){let m=Er?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Mwe(this)),(a||!this.docView.update(t.doc,d,c,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=C4(t.doc,d,c,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&rwe(this))?ui(this,p):(lz(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((n=this.dragging)===null||n===void 0)&&n.node&&!s.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&Ove(f)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof Re){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&v4(this,r.getBoundingClientRect(),t)}else v4(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,t)}}updateDraggedNode(t,r){let n=t.node,s=-1;if(this.state.doc.nodeAt(n.from)==n.node)s=n.from;else{let a=n.from+(this.state.doc.content.size-r.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==n.node&&(s=a)}this.dragging=new kz(t.slice,t.move,s<0?void 0:Re.create(this.state.doc,s))}someProp(t,r){let n=this._props&&this._props[t],s;if(n!=null&&(s=r?r(n):n))return s;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[t];if(l!=null&&(s=r?r(l):l))return s}let a=this.state.plugins;if(a)for(let o=0;o<a.length;o++){let l=a[o].props[t];if(l!=null&&(s=r?r(l):l))return s}}hasFocus(){if(Wn){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&$ve(this.dom),ui(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return t||document}updateRoot(){this._root=null}posAtCoords(t){return Bve(this,t)}coordsAtPos(t,r=1){return ez(this,t,r)}domAtPos(t,r=0){return this.docView.domFromPos(t,r)}nodeDOM(t){let r=this.docView.descAt(t);return r?r.nodeDOM:null}posAtDOM(t,r,n=-1){let s=this.docView.posFromDOM(t,r,n);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(t,r){return Wve(this,r||this.state,t)}pasteHTML(t,r){return hf(this,"",t,!1,r||new ClipboardEvent("paste"))}pasteText(t,r){return hf(this,t,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(t){return OC(this,t)}destroy(){this.docView&&(ywe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],rw(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,kve())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return wwe(this,t)}domSelectionRange(){let t=this.domSelection();return t?dn&&this.root.nodeType===11&&_ve(this.dom.ownerDocument)==this.dom&&qwe(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}_z.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function q4(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(e.state)),r)for(let n in r)n=="class"?t.class+=" "+r[n]:n=="style"?t.style=(t.style?t.style+";":"")+r[n]:!t[n]&&n!="contenteditable"&&n!="nodeName"&&(t[n]=String(r[n]))}),t.translate||(t.translate="no"),[yn.node(0,e.state.doc.content.size,t)]}function G4(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:yn.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function K4(e){return!e.someProp("editable",t=>t(e.state)===!1)}function t1e(e,t){let r=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(r)!=t.$anchor.start(r)}function Y4(e){let t=Object.create(null);function r(n){for(let s in n)Object.prototype.hasOwnProperty.call(t,s)||(t[s]=n[s])}return e.someProp("nodeViews",r),e.someProp("markViews",r),t}function r1e(e,t){let r=0,n=0;for(let s in e){if(e[s]!=t[s])return!0;r++}for(let s in t)n++;return r!=n}function X4(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Do={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},M0={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},n1e=typeof navigator<"u"&&/Mac/.test(navigator.platform),s1e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Vr=0;Vr<10;Vr++)Do[48+Vr]=Do[96+Vr]=String(Vr);for(var Vr=1;Vr<=24;Vr++)Do[Vr+111]="F"+Vr;for(var Vr=65;Vr<=90;Vr++)Do[Vr]=String.fromCharCode(Vr+32),M0[Vr]=String.fromCharCode(Vr);for(var sw in Do)M0.hasOwnProperty(sw)||(M0[sw]=Do[sw]);function a1e(e){var t=n1e&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||s1e&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",r=!t&&e.key||(e.shiftKey?M0:Do)[e.keyCode]||e.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const i1e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),o1e=typeof navigator<"u"&&/Win/.test(navigator.platform);function l1e(e){let t=e.split(/-(?!$)/),r=t[t.length-1];r=="Space"&&(r=" ");let n,s,a,o;for(let l=0;l<t.length-1;l++){let c=t[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))a=!0;else if(/^mod$/i.test(c))i1e?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return n&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function c1e(e){let t=Object.create(null);for(let r in e)t[l1e(r)]=e[r];return t}function aw(e,t,r=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),r&&t.shiftKey&&(e="Shift-"+e),e}function d1e(e){return new qt({props:{handleKeyDown:Ez(e)}})}function Ez(e){let t=c1e(e);return function(r,n){let s=a1e(n),a,o=t[aw(s,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(s.length==1&&s!=" "){if(n.shiftKey){let l=t[aw(s,n,!1)];if(l&&l(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(o1e&&n.ctrlKey&&n.altKey)&&(a=Do[n.keyCode])&&a!=s){let l=t[aw(a,n)];if(l&&l(r.state,r.dispatch,r))return!0}}return!1}}var u1e=Object.defineProperty,BC=(e,t)=>{for(var r in t)u1e(e,r,{get:t[r],enumerable:!0})};function cy(e){const{state:t,transaction:r}=e;let{selection:n}=r,{doc:s}=r,{storedMarks:a}=r;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return a},get selection(){return n},get doc(){return s},get tr(){return n=r.selection,s=r.doc,a=r.storedMarks,r}}}var dy=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:n}=t,{tr:s}=r,a=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([o,l])=>[o,(...d)=>{const u=l(...d)(a);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:n,state:s}=this,{view:a}=n,o=[],l=!!e,c=e||s.tr,d=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(c),o.every(h=>h===!0)),u={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...m)=>{const x=this.buildProps(c,t),b=f(...m)(x);return o.push(b),u}])),run:d};return u}createCan(e){const{rawCommands:t,state:r}=this,n=!1,s=e||r.tr,a=this.buildProps(s,n);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...d)=>c(...d)({...a,dispatch:void 0})])),chain:()=>this.createChain(s,n)}}buildProps(e,t=!0){const{rawCommands:r,editor:n,state:s}=this,{view:a}=n,o={tr:e,editor:n,view:a,state:cy({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...d)=>c(...d)(o)]))}};return o}},Az={};BC(Az,{blur:()=>h1e,clearContent:()=>f1e,clearNodes:()=>p1e,command:()=>m1e,createParagraphNear:()=>g1e,cut:()=>x1e,deleteCurrentNode:()=>b1e,deleteNode:()=>y1e,deleteRange:()=>v1e,deleteSelection:()=>w1e,enter:()=>k1e,exitCode:()=>j1e,extendMarkRange:()=>N1e,first:()=>S1e,focus:()=>_1e,forEach:()=>E1e,insertContent:()=>A1e,insertContentAt:()=>M1e,joinBackward:()=>D1e,joinDown:()=>$1e,joinForward:()=>I1e,joinItemBackward:()=>L1e,joinItemForward:()=>R1e,joinTextblockBackward:()=>B1e,joinTextblockForward:()=>z1e,joinUp:()=>O1e,keyboardShortcut:()=>H1e,lift:()=>U1e,liftEmptyBlock:()=>W1e,liftListItem:()=>V1e,newlineInCode:()=>q1e,resetAttributes:()=>G1e,scrollIntoView:()=>K1e,selectAll:()=>Y1e,selectNodeBackward:()=>X1e,selectNodeForward:()=>J1e,selectParentNode:()=>Z1e,selectTextblockEnd:()=>Q1e,selectTextblockStart:()=>eke,setContent:()=>tke,setMark:()=>wke,setMeta:()=>kke,setNode:()=>jke,setNodeSelection:()=>Nke,setTextDirection:()=>Ske,setTextSelection:()=>Cke,sinkListItem:()=>_ke,splitBlock:()=>Eke,splitListItem:()=>Ake,toggleList:()=>Tke,toggleMark:()=>Pke,toggleNode:()=>Mke,toggleWrap:()=>Oke,undoInputRule:()=>$ke,unsetAllMarks:()=>Dke,unsetMark:()=>Ike,unsetTextDirection:()=>Lke,updateAttributes:()=>Rke,wrapIn:()=>Bke,wrapInList:()=>zke});var h1e=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var r;e.isDestroyed||(t.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),f1e=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),p1e=()=>({state:e,tr:t,dispatch:r})=>{const{selection:n}=t,{ranges:s}=n;return r&&s.forEach(({$from:a,$to:o})=>{e.doc.nodesBetween(a.pos,o.pos,(l,c)=>{if(l.type.isText)return;const{doc:d,mapping:u}=t,h=d.resolve(u.map(c)),f=d.resolve(u.map(c+l.nodeSize)),p=h.blockRange(f);if(!p)return;const m=eu(p);if(l.type.isTextblock){const{defaultType:x}=h.parent.contentMatchAt(h.index());t.setNodeMarkup(p.start,x)}(m||m===0)&&t.lift(p,m)})}),!0},m1e=e=>t=>e(t),g1e=()=>({state:e,dispatch:t})=>UB(e,t),x1e=(e,t)=>({editor:r,tr:n})=>{const{state:s}=r,a=s.doc.slice(e.from,e.to);n.deleteRange(e.from,e.to);const o=n.mapping.map(t);return n.insert(o,a.content),n.setSelection(new Ue(n.doc.resolve(Math.max(o-1,0)))),!0},b1e=()=>({tr:e,dispatch:t})=>{const{selection:r}=e,n=r.$anchor.node();if(n.content.size>0)return!1;const s=e.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===n.type){if(t){const l=s.before(a),c=s.after(a);e.delete(l,c).scrollIntoView()}return!0}return!1};function hr(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var y1e=e=>({tr:t,state:r,dispatch:n})=>{const s=hr(e,r.schema),a=t.selection.$anchor;for(let o=a.depth;o>0;o-=1)if(a.node(o).type===s){if(n){const c=a.before(o),d=a.after(o);t.delete(c,d).scrollIntoView()}return!0}return!1},v1e=e=>({tr:t,dispatch:r})=>{const{from:n,to:s}=e;return r&&t.delete(n,s),!0},w1e=()=>({state:e,dispatch:t})=>SC(e,t),k1e=()=>({commands:e})=>e.keyboardShortcut("Enter"),j1e=()=>({state:e,dispatch:t})=>ove(e,t);function zC(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function O0(e,t,r={strict:!0}){const n=Object.keys(t);return n.length?n.every(s=>r.strict?t[s]===e[s]:zC(t[s])?t[s].test(e[s]):t[s]===e[s]):!0}function Tz(e,t,r={}){return e.find(n=>n.type===t&&O0(Object.fromEntries(Object.keys(r).map(s=>[s,n.attrs[s]])),r))}function J4(e,t,r={}){return!!Tz(e,t,r)}function FC(e,t,r){var n;if(!e||!t)return;let s=e.parent.childAfter(e.parentOffset);if((!s.node||!s.node.marks.some(u=>u.type===t))&&(s=e.parent.childBefore(e.parentOffset)),!s.node||!s.node.marks.some(u=>u.type===t)||(r=r||((n=s.node.marks[0])==null?void 0:n.attrs),!Tz([...s.node.marks],t,r)))return;let o=s.index,l=e.start()+s.offset,c=o+1,d=l+s.node.nodeSize;for(;o>0&&J4([...e.parent.child(o-1).marks],t,r);)o-=1,l-=e.parent.child(o).nodeSize;for(;c<e.parent.childCount&&J4([...e.parent.child(c).marks],t,r);)d+=e.parent.child(c).nodeSize,c+=1;return{from:l,to:d}}function Pi(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var N1e=(e,t={})=>({tr:r,state:n,dispatch:s})=>{const a=Pi(e,n.schema),{doc:o,selection:l}=r,{$from:c,from:d,to:u}=l;if(s){const h=FC(c,a,t);if(h&&h.from<=d&&h.to>=u){const f=Ue.create(o,h.from,h.to);r.setSelection(f)}}return!0},S1e=e=>t=>{const r=typeof e=="function"?e(t):e;for(let n=0;n<r.length;n+=1)if(r[n](t))return!0;return!1};function Pz(e){return e instanceof Ue}function gl(e=0,t=0,r=0){return Math.min(Math.max(e,t),r)}function Mz(e,t=null){if(!t)return null;const r=Je.atStart(e),n=Je.atEnd(e);if(t==="start"||t===!0)return r;if(t==="end")return n;const s=r.from,a=n.to;return t==="all"?Ue.create(e,gl(0,s,a),gl(e.content.size,s,a)):Ue.create(e,gl(t,s,a),gl(t,s,a))}function C1e(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function HC(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var _1e=(e=null,t={})=>({editor:r,view:n,tr:s,dispatch:a})=>{t={scrollIntoView:!0,...t};const o=()=>{(HC()||C1e())&&n.dom.focus(),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),t!=null&&t.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&e===null||e===!1)return!0;if(a&&e===null&&!Pz(r.state.selection))return o(),!0;const l=Mz(s.doc,e)||r.state.selection,c=r.state.selection.eq(l);return a&&(c||s.setSelection(l),c&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},E1e=(e,t)=>r=>e.every((n,s)=>t(n,{...r,index:s})),A1e=(e,t)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},e,t),Oz=e=>{const t=e.childNodes;for(let r=t.length-1;r>=0;r-=1){const n=t[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?e.removeChild(n):n.nodeType===1&&Oz(n)}return e};function lm(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,r=new window.DOMParser().parseFromString(t,"text/html").body;return Oz(r)}function pf(e,t,r){if(e instanceof ha||e instanceof ce)return e;r={slice:!0,parseOptions:{},...r};const n=typeof e=="object"&&e!==null,s=typeof e=="string";if(n)try{if(Array.isArray(e)&&e.length>0)return ce.fromArray(e.map(l=>t.nodeFromJSON(l)));const o=t.nodeFromJSON(e);return r.errorOnInvalidContent&&o.check(),o}catch(a){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",a),pf("",t,r)}if(s){if(r.errorOnInvalidContent){let o=!1,l="";const c=new gB({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(o=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(r.slice?dh.fromSchema(c).parseSlice(lm(e),r.parseOptions):dh.fromSchema(c).parse(lm(e),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const a=dh.fromSchema(t);return r.slice?a.parseSlice(lm(e),r.parseOptions).content:a.parse(lm(e),r.parseOptions)}return pf("",t,r)}function T1e(e,t,r){const n=e.steps.length-1;if(n<t)return;const s=e.steps[n];if(!(s instanceof Cr||s instanceof Mr))return;const a=e.mapping.maps[n];let o=0;a.forEach((l,c,d,u)=>{o===0&&(o=u)}),e.setSelection(Je.near(e.doc.resolve(o),r))}var P1e=e=>!("type"in e),M1e=(e,t,r)=>({tr:n,dispatch:s,editor:a})=>{var o;if(s){r={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let l;const c=b=>{a.emit("contentError",{editor:a,error:b,disableCollaboration:()=>{"collaboration"in a.storage&&typeof a.storage.collaboration=="object"&&a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{pf(t,a.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(b){c(b)}try{l=pf(t,a.schema,{parseOptions:d,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:a.options.enableContentCheck})}catch(b){return c(b),!1}let{from:u,to:h}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},f=!0,p=!0;if((P1e(l)?l:[l]).forEach(b=>{b.check(),f=f?b.isText&&b.marks.length===0:!1,p=p?b.isBlock:!1}),u===h&&p){const{parent:b}=n.doc.resolve(u);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(u-=1,h+=1)}let x;if(f){if(Array.isArray(t))x=t.map(b=>b.text||"").join("");else if(t instanceof ce){let b="";t.forEach(y=>{y.text&&(b+=y.text)}),x=b}else typeof t=="object"&&t&&t.text?x=t.text:x=t;n.insertText(x,u,h)}else{x=l;const b=n.doc.resolve(u),y=b.node(),v=b.parentOffset===0,w=y.isText||y.isTextblock,j=y.content.size>0;v&&w&&j&&(u=Math.max(0,u-1)),n.replaceWith(u,h,x)}r.updateSelection&&T1e(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:u,text:x}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:u,text:x})}return!0},O1e=()=>({state:e,dispatch:t})=>sve(e,t),$1e=()=>({state:e,dispatch:t})=>ave(e,t),D1e=()=>({state:e,dispatch:t})=>IB(e,t),I1e=()=>({state:e,dispatch:t})=>zB(e,t),L1e=()=>({state:e,dispatch:t,tr:r})=>{try{const n=ny(e.doc,e.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),t&&t(r),!0)}catch{return!1}},R1e=()=>({state:e,dispatch:t,tr:r})=>{try{const n=ny(e.doc,e.selection.$from.pos,1);return n==null?!1:(r.join(n,2),t&&t(r),!0)}catch{return!1}},B1e=()=>({state:e,dispatch:t})=>rve(e,t),z1e=()=>({state:e,dispatch:t})=>nve(e,t);function $z(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function F1e(e){const t=e.split(/-(?!$)/);let r=t[t.length-1];r==="Space"&&(r=" ");let n,s,a,o;for(let l=0;l<t.length-1;l+=1){const c=t[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))a=!0;else if(/^mod$/i.test(c))HC()||$z()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return n&&(r=`Alt-${r}`),s&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),a&&(r=`Shift-${r}`),r}var H1e=e=>({editor:t,view:r,tr:n,dispatch:s})=>{const a=F1e(e).split(/-(?!$)/),o=a.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),c=t.captureTransaction(()=>{r.someProp("handleKeyDown",d=>d(r,l))});return c==null||c.steps.forEach(d=>{const u=d.map(n.mapping);u&&s&&n.maybeStep(u)}),!0};function Io(e,t,r={}){const{from:n,to:s,empty:a}=e.selection,o=t?hr(t,e.schema):null,l=[];e.doc.nodesBetween(n,s,(h,f)=>{if(h.isText)return;const p=Math.max(n,f),m=Math.min(s,f+h.nodeSize);l.push({node:h,from:p,to:m})});const c=s-n,d=l.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>O0(h.node.attrs,r,{strict:!1}));return a?!!d.length:d.reduce((h,f)=>h+f.to-f.from,0)>=c}var U1e=(e,t={})=>({state:r,dispatch:n})=>{const s=hr(e,r.schema);return Io(r,s,t)?ive(r,n):!1},W1e=()=>({state:e,dispatch:t})=>WB(e,t),V1e=e=>({state:t,dispatch:r})=>{const n=hr(e,t.schema);return bve(n)(t,r)},q1e=()=>({state:e,dispatch:t})=>HB(e,t);function uy(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Z4(e,t){const r=typeof t=="string"?[t]:t;return Object.keys(e).reduce((n,s)=>(r.includes(s)||(n[s]=e[s]),n),{})}var G1e=(e,t)=>({tr:r,state:n,dispatch:s})=>{let a=null,o=null;const l=uy(typeof e=="string"?e:e.name,n.schema);if(!l)return!1;l==="node"&&(a=hr(e,n.schema)),l==="mark"&&(o=Pi(e,n.schema));let c=!1;return r.selection.ranges.forEach(d=>{n.doc.nodesBetween(d.$from.pos,d.$to.pos,(u,h)=>{a&&a===u.type&&(c=!0,s&&r.setNodeMarkup(h,void 0,Z4(u.attrs,t))),o&&u.marks.length&&u.marks.forEach(f=>{o===f.type&&(c=!0,s&&r.addMark(h,h+u.nodeSize,o.create(Z4(f.attrs,t))))})})}),c},K1e=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),Y1e=()=>({tr:e,dispatch:t})=>{if(t){const r=new is(e.doc);e.setSelection(r)}return!0},X1e=()=>({state:e,dispatch:t})=>RB(e,t),J1e=()=>({state:e,dispatch:t})=>FB(e,t),Z1e=()=>({state:e,dispatch:t})=>dve(e,t),Q1e=()=>({state:e,dispatch:t})=>fve(e,t),eke=()=>({state:e,dispatch:t})=>hve(e,t);function Qk(e,t,r={},n={}){return pf(e,t,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var tke=(e,{errorOnInvalidContent:t,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:s,tr:a,dispatch:o,commands:l})=>{const{doc:c}=a;if(n.preserveWhitespace!=="full"){const d=Qk(e,s.schema,n,{errorOnInvalidContent:t??s.options.enableContentCheck});return o&&a.replaceWith(0,c.content.size,d).setMeta("preventUpdate",!r),!0}return o&&a.setMeta("preventUpdate",!r),l.insertContentAt({from:0,to:c.content.size},e,{parseOptions:n,errorOnInvalidContent:t??s.options.enableContentCheck})};function Dz(e,t){const r=Pi(t,e.schema),{from:n,to:s,empty:a}=e.selection,o=[];a?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(n,s,c=>{o.push(...c.marks)});const l=o.find(c=>c.type.name===r.name);return l?{...l.attrs}:{}}function Iz(e,t){const r=new MB(e);return t.forEach(n=>{n.steps.forEach(s=>{r.step(s)})}),r}function rke(e){for(let t=0;t<e.edgeCount;t+=1){const{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function nke(e,t,r){const n=[];return e.nodesBetween(t.from,t.to,(s,a)=>{r(s)&&n.push({node:s,pos:a})}),n}function ske(e,t){for(let r=e.depth;r>0;r-=1){const n=e.node(r);if(t(n))return{pos:r>0?e.before(r):0,start:e.start(r),depth:r,node:n}}}function hy(e){return t=>ske(t.$from,e)}function Le(e,t,r){return e.config[t]===void 0&&e.parent?Le(e.parent,t,r):typeof e.config[t]=="function"?e.config[t].bind({...r,parent:e.parent?Le(e.parent,t,r):null}):e.config[t]}function UC(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},n=Le(t,"addExtensions",r);return n?[t,...UC(n())]:t}).flat(10)}function WC(e,t){const r=cc.fromSchema(t).serializeFragment(e),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(r),s.innerHTML}function Lz(e){return typeof e=="function"}function mt(e,t=void 0,...r){return Lz(e)?t?e.bind(t)(...r):e(...r):e}function ake(e={}){return Object.keys(e).length===0&&e.constructor===Object}function Ed(e){const t=e.filter(s=>s.type==="extension"),r=e.filter(s=>s.type==="node"),n=e.filter(s=>s.type==="mark");return{baseExtensions:t,nodeExtensions:r,markExtensions:n}}function Rz(e){const t=[],{nodeExtensions:r,markExtensions:n}=Ed(e),s=[...r,...n],a={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:s},c=Le(o,"addGlobalAttributes",l);if(!c)return;c().forEach(u=>{u.types.forEach(h=>{Object.entries(u.attributes).forEach(([f,p])=>{t.push({type:h,name:f,attribute:{...a,...p}})})})})}),s.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},c=Le(o,"addAttributes",l);if(!c)return;const d=c();Object.entries(d).forEach(([u,h])=>{const f={...a,...h};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,t.push({type:o.name,name:u,attribute:f})})}),t}function Mt(...e){return e.filter(t=>!!t).reduce((t,r)=>{const n={...t};return Object.entries(r).forEach(([s,a])=>{if(!n[s]){n[s]=a;return}if(s==="class"){const l=a?String(a).split(" "):[],c=n[s]?n[s].split(" "):[],d=l.filter(u=>!c.includes(u));n[s]=[...c,...d].join(" ")}else if(s==="style"){const l=a?a.split(";").map(u=>u.trim()).filter(Boolean):[],c=n[s]?n[s].split(";").map(u=>u.trim()).filter(Boolean):[],d=new Map;c.forEach(u=>{const[h,f]=u.split(":").map(p=>p.trim());d.set(h,f)}),l.forEach(u=>{const[h,f]=u.split(":").map(p=>p.trim());d.set(h,f)}),n[s]=Array.from(d.entries()).map(([u,h])=>`${u}: ${h}`).join("; ")}else n[s]=a}),n},{})}function $0(e,t){return t.filter(r=>r.type===e.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(e.attrs)||{}:{[r.name]:e.attrs[r.name]}).reduce((r,n)=>Mt(r,n),{})}function ike(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function Q4(e,t){return"style"in e?e:{...e,getAttrs:r=>{const n=e.getAttrs?e.getAttrs(r):e.attrs;if(n===!1)return!1;const s=t.reduce((a,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(r):ike(r.getAttribute(o.name));return l==null?a:{...a,[o.name]:l}},{});return{...n,...s}}}}function eM(e){return Object.fromEntries(Object.entries(e).filter(([t,r])=>t==="attrs"&&ake(r)?!1:r!=null))}function tM(e){var t,r;const n={};return!((t=e==null?void 0:e.attribute)!=null&&t.isRequired)&&"default"in((e==null?void 0:e.attribute)||{})&&(n.default=e.attribute.default),((r=e==null?void 0:e.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=e.attribute.validate),[e.name,n]}function oke(e,t){var r;const n=Rz(e),{nodeExtensions:s,markExtensions:a}=Ed(e),o=(r=s.find(d=>Le(d,"topNode")))==null?void 0:r.name,l=Object.fromEntries(s.map(d=>{const u=n.filter(y=>y.type===d.name),h={name:d.name,options:d.options,storage:d.storage,editor:t},f=e.reduce((y,v)=>{const w=Le(v,"extendNodeSchema",h);return{...y,...w?w(d):{}}},{}),p=eM({...f,content:mt(Le(d,"content",h)),marks:mt(Le(d,"marks",h)),group:mt(Le(d,"group",h)),inline:mt(Le(d,"inline",h)),atom:mt(Le(d,"atom",h)),selectable:mt(Le(d,"selectable",h)),draggable:mt(Le(d,"draggable",h)),code:mt(Le(d,"code",h)),whitespace:mt(Le(d,"whitespace",h)),linebreakReplacement:mt(Le(d,"linebreakReplacement",h)),defining:mt(Le(d,"defining",h)),isolating:mt(Le(d,"isolating",h)),attrs:Object.fromEntries(u.map(tM))}),m=mt(Le(d,"parseHTML",h));m&&(p.parseDOM=m.map(y=>Q4(y,u)));const x=Le(d,"renderHTML",h);x&&(p.toDOM=y=>x({node:y,HTMLAttributes:$0(y,u)}));const b=Le(d,"renderText",h);return b&&(p.toText=b),[d.name,p]})),c=Object.fromEntries(a.map(d=>{const u=n.filter(b=>b.type===d.name),h={name:d.name,options:d.options,storage:d.storage,editor:t},f=e.reduce((b,y)=>{const v=Le(y,"extendMarkSchema",h);return{...b,...v?v(d):{}}},{}),p=eM({...f,inclusive:mt(Le(d,"inclusive",h)),excludes:mt(Le(d,"excludes",h)),group:mt(Le(d,"group",h)),spanning:mt(Le(d,"spanning",h)),code:mt(Le(d,"code",h)),attrs:Object.fromEntries(u.map(tM))}),m=mt(Le(d,"parseHTML",h));m&&(p.parseDOM=m.map(b=>Q4(b,u)));const x=Le(d,"renderHTML",h);return x&&(p.toDOM=b=>x({mark:b,HTMLAttributes:$0(b,u)})),[d.name,p]}));return new gB({topNode:o,nodes:l,marks:c})}function lke(e){const t=e.filter((r,n)=>e.indexOf(r)!==n);return Array.from(new Set(t))}function VC(e){return e.sort((r,n)=>{const s=Le(r,"priority")||100,a=Le(n,"priority")||100;return s>a?-1:s<a?1:0})}function Bz(e){const t=VC(UC(e)),r=lke(t.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),t}function zz(e,t,r){const{from:n,to:s}=t,{blockSeparator:a=`

`,textSerializers:o={}}=r||{};let l="";return e.nodesBetween(n,s,(c,d,u,h)=>{var f;c.isBlock&&d>n&&(l+=a);const p=o==null?void 0:o[c.type.name];if(p)return u&&(l+=p({node:c,pos:d,parent:u,index:h,range:t})),!1;c.isText&&(l+=(f=c==null?void 0:c.text)==null?void 0:f.slice(Math.max(n,d)-d,s-d))}),l}function cke(e,t){const r={from:0,to:e.content.size};return zz(e,r,t)}function Fz(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,r])=>[t,r.spec.toText]))}function dke(e,t){const r=hr(t,e.schema),{from:n,to:s}=e.selection,a=[];e.doc.nodesBetween(n,s,l=>{a.push(l)});const o=a.reverse().find(l=>l.type.name===r.name);return o?{...o.attrs}:{}}function Hz(e,t){const r=uy(typeof t=="string"?t:t.name,e.schema);return r==="node"?dke(e,t):r==="mark"?Dz(e,t):{}}function uke(e,t=JSON.stringify){const r={};return e.filter(n=>{const s=t(n);return Object.prototype.hasOwnProperty.call(r,s)?!1:r[s]=!0})}function hke(e){const t=uke(e);return t.length===1?t:t.filter((r,n)=>!t.filter((a,o)=>o!==n).some(a=>r.oldRange.from>=a.oldRange.from&&r.oldRange.to<=a.oldRange.to&&r.newRange.from>=a.newRange.from&&r.newRange.to<=a.newRange.to))}function Uz(e){const{mapping:t,steps:r}=e,n=[];return t.maps.forEach((s,a)=>{const o=[];if(s.ranges.length)s.forEach((l,c)=>{o.push({from:l,to:c})});else{const{from:l,to:c}=r[a];if(l===void 0||c===void 0)return;o.push({from:l,to:c})}o.forEach(({from:l,to:c})=>{const d=t.slice(a).map(l,-1),u=t.slice(a).map(c),h=t.invert().map(d,-1),f=t.invert().map(u);n.push({oldRange:{from:h,to:f},newRange:{from:d,to:u}})})}),hke(n)}function qC(e,t,r){const n=[];return e===t?r.resolve(e).marks().forEach(s=>{const a=r.resolve(e),o=FC(a,s.type);o&&n.push({mark:s,...o})}):r.nodesBetween(e,t,(s,a)=>{!s||(s==null?void 0:s.nodeSize)===void 0||n.push(...s.marks.map(o=>({from:a,to:a+s.nodeSize,mark:o})))}),n}var fke=(e,t,r,n=20)=>{const s=e.doc.resolve(r);let a=n,o=null;for(;a>0&&o===null;){const l=s.node(a);(l==null?void 0:l.type.name)===t?o=l:a-=1}return[o,a]};function iw(e,t){return t.nodes[e]||t.marks[e]||null}function Hm(e,t,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const s=e.find(a=>a.type===t&&a.name===n);return s?s.attribute.keepOnSplit:!1}))}var pke=(e,t=500)=>{let r="";const n=e.parentOffset;return e.parent.nodesBetween(Math.max(0,n-t),n,(s,a,o,l)=>{var c,d;const u=((d=(c=s.type.spec).toText)==null?void 0:d.call(c,{node:s,pos:a,parent:o,index:l}))||s.textContent||"%leaf%";r+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,n-a))}),r};function ej(e,t,r={}){const{empty:n,ranges:s}=e.selection,a=t?Pi(t,e.schema):null;if(n)return!!(e.storedMarks||e.selection.$from.marks()).filter(h=>a?a.name===h.type.name:!0).find(h=>O0(h.attrs,r,{strict:!1}));let o=0;const l=[];if(s.forEach(({$from:h,$to:f})=>{const p=h.pos,m=f.pos;e.doc.nodesBetween(p,m,(x,b)=>{if(!x.isText&&!x.marks.length)return;const y=Math.max(p,b),v=Math.min(m,b+x.nodeSize),w=v-y;o+=w,l.push(...x.marks.map(j=>({mark:j,from:y,to:v})))})}),o===0)return!1;const c=l.filter(h=>a?a.name===h.mark.type.name:!0).filter(h=>O0(h.mark.attrs,r,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),d=l.filter(h=>a?h.mark.type!==a&&h.mark.type.excludes(a):!0).reduce((h,f)=>h+f.to-f.from,0);return(c>0?c+d:c)>=o}function mke(e,t,r={}){if(!t)return Io(e,null,r)||ej(e,null,r);const n=uy(t,e.schema);return n==="node"?Io(e,t,r):n==="mark"?ej(e,t,r):!1}var gke=(e,t)=>{const{$from:r,$to:n,$anchor:s}=e.selection;if(t){const a=hy(l=>l.type.name===t)(e.selection);if(!a)return!1;const o=e.doc.resolve(a.pos+1);return s.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},xke=e=>{const{$from:t,$to:r}=e.selection;return!(t.parentOffset>0||t.pos!==r.pos)};function rM(e,t){return Array.isArray(t)?t.some(r=>(typeof r=="string"?r:r.name)===e.name):t}function nM(e,t){const{nodeExtensions:r}=Ed(t),n=r.find(o=>o.name===e);if(!n)return!1;const s={name:n.name,options:n.options,storage:n.storage},a=mt(Le(n,"group",s));return typeof a!="string"?!1:a.split(" ").includes("list")}function fy(e,{checkChildren:t=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((n=e.text)!=null?n:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let s=!0;return e.content.forEach(a=>{s!==!1&&(fy(a,{ignoreWhitespace:r,checkChildren:t})||(s=!1))}),s}return!1}function Wz(e){return e instanceof Re}var Vz=class qz{constructor(t){this.position=t}static fromJSON(t){return new qz(t.position)}toJSON(){return{position:this.position}}};function bke(e,t){const r=t.mapping.mapResult(e.position);return{position:new Vz(r.pos),mapResult:r}}function yke(e){return new Vz(e)}function vke(e,t,r){var n;const{selection:s}=t;let a=null;if(Pz(s)&&(a=s.$cursor),a){const l=(n=e.storedMarks)!=null?n:a.marks();return a.parent.type.allowsMarkType(r)&&(!!r.isInSet(l)||!l.some(d=>d.type.excludes(r)))}const{ranges:o}=s;return o.some(({$from:l,$to:c})=>{let d=l.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(r):!1;return e.doc.nodesBetween(l.pos,c.pos,(u,h,f)=>{if(d)return!1;if(u.isInline){const p=!f||f.type.allowsMarkType(r),m=!!r.isInSet(u.marks)||!u.marks.some(x=>x.type.excludes(r));d=p&&m}return!d}),d})}var wke=(e,t={})=>({tr:r,state:n,dispatch:s})=>{const{selection:a}=r,{empty:o,ranges:l}=a,c=Pi(e,n.schema);if(s)if(o){const d=Dz(n,c);r.addStoredMark(c.create({...d,...t}))}else l.forEach(d=>{const u=d.$from.pos,h=d.$to.pos;n.doc.nodesBetween(u,h,(f,p)=>{const m=Math.max(p,u),x=Math.min(p+f.nodeSize,h);f.marks.find(y=>y.type===c)?f.marks.forEach(y=>{c===y.type&&r.addMark(m,x,c.create({...y.attrs,...t}))}):r.addMark(m,x,c.create(t))})});return vke(n,r,c)},kke=(e,t)=>({tr:r})=>(r.setMeta(e,t),!0),jke=(e,t={})=>({state:r,dispatch:n,chain:s})=>{const a=hr(e,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),a.isTextblock?s().command(({commands:l})=>x4(a,{...o,...t})(r)?!0:l.clearNodes()).command(({state:l})=>x4(a,{...o,...t})(l,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Nke=e=>({tr:t,dispatch:r})=>{if(r){const{doc:n}=t,s=gl(e,0,n.content.size),a=Re.create(n,s);t.setSelection(a)}return!0},Ske=(e,t)=>({tr:r,state:n,dispatch:s})=>{const{selection:a}=n;let o,l;return typeof t=="number"?(o=t,l=t):t&&"from"in t&&"to"in t?(o=t.from,l=t.to):(o=a.from,l=a.to),s&&r.doc.nodesBetween(o,l,(c,d)=>{c.isText||r.setNodeMarkup(d,void 0,{...c.attrs,dir:e})}),!0},Cke=e=>({tr:t,dispatch:r})=>{if(r){const{doc:n}=t,{from:s,to:a}=typeof e=="number"?{from:e,to:e}:e,o=Ue.atStart(n).from,l=Ue.atEnd(n).to,c=gl(s,o,l),d=gl(a,o,l),u=Ue.create(n,c,d);t.setSelection(u)}return!0},_ke=e=>({state:t,dispatch:r})=>{const n=hr(e,t.schema);return wve(n)(t,r)};function sM(e,t){const r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(r){const n=r.filter(s=>t==null?void 0:t.includes(s.type.name));e.tr.ensureMarks(n)}}var Eke=({keepMarks:e=!0}={})=>({tr:t,state:r,dispatch:n,editor:s})=>{const{selection:a,doc:o}=t,{$from:l,$to:c}=a,d=s.extensionManager.attributes,u=Hm(d,l.node().type.name,l.node().attrs);if(a instanceof Re&&a.node.isBlock)return!l.parentOffset||!di(o,l.pos)?!1:(n&&(e&&sM(r,s.extensionManager.splittableMarks),t.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const h=c.parentOffset===c.parent.content.size,f=l.depth===0?void 0:rke(l.node(-1).contentMatchAt(l.indexAfter(-1)));let p=h&&f?[{type:f,attrs:u}]:void 0,m=di(t.doc,t.mapping.map(l.pos),1,p);if(!p&&!m&&di(t.doc,t.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:u}]:void 0),n){if(m&&(a instanceof Ue&&t.deleteSelection(),t.split(t.mapping.map(l.pos),1,p),f&&!h&&!l.parentOffset&&l.parent.type!==f)){const x=t.mapping.map(l.before()),b=t.doc.resolve(x);l.node(-1).canReplaceWith(b.index(),b.index()+1,f)&&t.setNodeMarkup(t.mapping.map(l.before()),f)}e&&sM(r,s.extensionManager.splittableMarks),t.scrollIntoView()}return m},Ake=(e,t={})=>({tr:r,state:n,dispatch:s,editor:a})=>{var o;const l=hr(e,n.schema),{$from:c,$to:d}=n.selection,u=n.selection.node;if(u&&u.isBlock||c.depth<2||!c.sameParent(d))return!1;const h=c.node(-1);if(h.type!==l)return!1;const f=a.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(s){let y=ce.empty;const v=c.index(-1)?1:c.index(-2)?2:3;for(let C=c.depth-v;C>=c.depth-3;C-=1)y=ce.from(c.node(C).copy(y));const w=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,j={...Hm(f,c.node().type.name,c.node().attrs),...t},N=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(j))||void 0;y=y.append(ce.from(l.createAndFill(null,N)||void 0));const k=c.before(c.depth-(v-1));r.replace(k,c.after(-w),new _e(y,4-v,0));let S=-1;r.doc.nodesBetween(k,r.doc.content.size,(C,P)=>{if(S>-1)return!1;C.isTextblock&&C.content.size===0&&(S=P+1)}),S>-1&&r.setSelection(Ue.near(r.doc.resolve(S))),r.scrollIntoView()}return!0}const p=d.pos===c.end()?h.contentMatchAt(0).defaultType:null,m={...Hm(f,h.type.name,h.attrs),...t},x={...Hm(f,c.node().type.name,c.node().attrs),...t};r.delete(c.pos,d.pos);const b=p?[{type:l,attrs:m},{type:p,attrs:x}]:[{type:l,attrs:m}];if(!di(r.doc,c.pos,2))return!1;if(s){const{selection:y,storedMarks:v}=n,{splittableMarks:w}=a.extensionManager,j=v||y.$to.parentOffset&&y.$from.marks();if(r.split(c.pos,2,b).scrollIntoView(),!j||!s)return!0;const N=j.filter(k=>w.includes(k.type.name));r.ensureMarks(N)}return!0},ow=(e,t)=>{const r=hy(o=>o.type===t)(e.selection);if(!r)return!0;const n=e.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const s=e.doc.nodeAt(n);return r.node.type===(s==null?void 0:s.type)&&Ko(e.doc,r.pos)&&e.join(r.pos),!0},lw=(e,t)=>{const r=hy(o=>o.type===t)(e.selection);if(!r)return!0;const n=e.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const s=e.doc.nodeAt(n);return r.node.type===(s==null?void 0:s.type)&&Ko(e.doc,n)&&e.join(n),!0},Tke=(e,t,r,n={})=>({editor:s,tr:a,state:o,dispatch:l,chain:c,commands:d,can:u})=>{const{extensions:h,splittableMarks:f}=s.extensionManager,p=hr(e,o.schema),m=hr(t,o.schema),{selection:x,storedMarks:b}=o,{$from:y,$to:v}=x,w=y.blockRange(v),j=b||x.$to.parentOffset&&x.$from.marks();if(!w)return!1;const N=hy(k=>nM(k.type.name,h))(x);if(w.depth>=1&&N&&w.depth-N.depth<=1){if(N.node.type===p)return d.liftListItem(m);if(nM(N.node.type.name,h)&&p.validContent(N.node.content)&&l)return c().command(()=>(a.setNodeMarkup(N.pos,p),!0)).command(()=>ow(a,p)).command(()=>lw(a,p)).run()}return!r||!j||!l?c().command(()=>u().wrapInList(p,n)?!0:d.clearNodes()).wrapInList(p,n).command(()=>ow(a,p)).command(()=>lw(a,p)).run():c().command(()=>{const k=u().wrapInList(p,n),S=j.filter(C=>f.includes(C.type.name));return a.ensureMarks(S),k?!0:d.clearNodes()}).wrapInList(p,n).command(()=>ow(a,p)).command(()=>lw(a,p)).run()},Pke=(e,t={},r={})=>({state:n,commands:s})=>{const{extendEmptyMarkRange:a=!1}=r,o=Pi(e,n.schema);return ej(n,o,t)?s.unsetMark(o,{extendEmptyMarkRange:a}):s.setMark(o,t)},Mke=(e,t,r={})=>({state:n,commands:s})=>{const a=hr(e,n.schema),o=hr(t,n.schema),l=Io(n,a,r);let c;return n.selection.$anchor.sameParent(n.selection.$head)&&(c=n.selection.$anchor.parent.attrs),l?s.setNode(o,c):s.setNode(a,{...c,...r})},Oke=(e,t={})=>({state:r,commands:n})=>{const s=hr(e,r.schema);return Io(r,s,t)?n.lift(s):n.wrapIn(s,t)},$ke=()=>({state:e,dispatch:t})=>{const r=e.plugins;for(let n=0;n<r.length;n+=1){const s=r[n];let a;if(s.spec.isInputRules&&(a=s.getState(e))){if(t){const o=e.tr,l=a.transform;for(let c=l.steps.length-1;c>=0;c-=1)o.step(l.steps[c].invert(l.docs[c]));if(a.text){const c=o.doc.resolve(a.from).marks();o.replaceWith(a.from,a.to,e.schema.text(a.text,c))}else o.delete(a.from,a.to)}return!0}}return!1},Dke=()=>({tr:e,dispatch:t})=>{const{selection:r}=e,{empty:n,ranges:s}=r;return n||t&&s.forEach(a=>{e.removeMark(a.$from.pos,a.$to.pos)}),!0},Ike=(e,t={})=>({tr:r,state:n,dispatch:s})=>{var a;const{extendEmptyMarkRange:o=!1}=t,{selection:l}=r,c=Pi(e,n.schema),{$from:d,empty:u,ranges:h}=l;if(!s)return!0;if(u&&o){let{from:f,to:p}=l;const m=(a=d.marks().find(b=>b.type===c))==null?void 0:a.attrs,x=FC(d,c,m);x&&(f=x.from,p=x.to),r.removeMark(f,p,c)}else h.forEach(f=>{r.removeMark(f.$from.pos,f.$to.pos,c)});return r.removeStoredMark(c),!0},Lke=e=>({tr:t,state:r,dispatch:n})=>{const{selection:s}=r;let a,o;return typeof e=="number"?(a=e,o=e):e&&"from"in e&&"to"in e?(a=e.from,o=e.to):(a=s.from,o=s.to),n&&t.doc.nodesBetween(a,o,(l,c)=>{if(l.isText)return;const d={...l.attrs};delete d.dir,t.setNodeMarkup(c,void 0,d)}),!0},Rke=(e,t={})=>({tr:r,state:n,dispatch:s})=>{let a=null,o=null;const l=uy(typeof e=="string"?e:e.name,n.schema);if(!l)return!1;l==="node"&&(a=hr(e,n.schema)),l==="mark"&&(o=Pi(e,n.schema));let c=!1;return r.selection.ranges.forEach(d=>{const u=d.$from.pos,h=d.$to.pos;let f,p,m,x;r.selection.empty?n.doc.nodesBetween(u,h,(b,y)=>{a&&a===b.type&&(c=!0,m=Math.max(y,u),x=Math.min(y+b.nodeSize,h),f=y,p=b)}):n.doc.nodesBetween(u,h,(b,y)=>{y<u&&a&&a===b.type&&(c=!0,m=Math.max(y,u),x=Math.min(y+b.nodeSize,h),f=y,p=b),y>=u&&y<=h&&(a&&a===b.type&&(c=!0,s&&r.setNodeMarkup(y,void 0,{...b.attrs,...t})),o&&b.marks.length&&b.marks.forEach(v=>{if(o===v.type&&(c=!0,s)){const w=Math.max(y,u),j=Math.min(y+b.nodeSize,h);r.addMark(w,j,o.create({...v.attrs,...t}))}}))}),p&&(f!==void 0&&s&&r.setNodeMarkup(f,void 0,{...p.attrs,...t}),o&&p.marks.length&&p.marks.forEach(b=>{o===b.type&&s&&r.addMark(m,x,o.create({...b.attrs,...t}))}))}),c},Bke=(e,t={})=>({state:r,dispatch:n})=>{const s=hr(e,r.schema);return pve(s,t)(r,n)},zke=(e,t={})=>({state:r,dispatch:n})=>{const s=hr(e,r.schema);return mve(s,t)(r,n)},Fke=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(n=>n.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(n=>n!==t):delete this.callbacks[e]),this}once(e,t){const r=(...n)=>{this.off(e,r),t.apply(this,n)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}},py=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},Hke=(e,t)=>{if(zC(t))return t.exec(e);const r=t(e);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=e,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function cm(e){var t;const{editor:r,from:n,to:s,text:a,rules:o,plugin:l}=e,{view:c}=r;if(c.composing)return!1;const d=c.state.doc.resolve(n);if(d.parent.type.spec.code||(t=d.nodeBefore||d.nodeAfter)!=null&&t.marks.find(f=>f.type.spec.code))return!1;let u=!1;const h=pke(d)+a;return o.forEach(f=>{if(u)return;const p=Hke(h,f.find);if(!p)return;const m=c.state.tr,x=cy({state:c.state,transaction:m}),b={from:n-(p[0].length-a.length),to:s},{commands:y,chain:v,can:w}=new dy({editor:r,state:x});f.handler({state:x,range:b,match:p,commands:y,chain:v,can:w})===null||!m.steps.length||(f.undoable&&m.setMeta(l,{transform:m,from:n,to:s,text:a}),c.dispatch(m),u=!0)}),u}function Uke(e){const{editor:t,rules:r}=e,n=new qt({state:{init(){return null},apply(s,a,o){const l=s.getMeta(n);if(l)return l;const c=s.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:u}=c;typeof u=="string"?u=u:u=WC(ce.from(u),o.schema);const{from:h}=c,f=h+u.length;cm({editor:t,from:h,to:f,text:u,rules:r,plugin:n})}),s.selectionSet||s.docChanged?null:a}},props:{handleTextInput(s,a,o,l){return cm({editor:t,from:a,to:o,text:l,rules:r,plugin:n})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:a}=s.state.selection;a&&cm({editor:t,from:a.pos,to:a.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(s,a){if(a.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?cm({editor:t,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function Wke(e){return Object.prototype.toString.call(e).slice(8,-1)}function dm(e){return Wke(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Gz(e,t){const r={...e};return dm(e)&&dm(t)&&Object.keys(t).forEach(n=>{dm(t[n])&&dm(e[n])?r[n]=Gz(e[n],t[n]):r[n]=t[n]}),r}var GC=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...mt(Le(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...mt(Le(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Gz(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},Mi=class Kz extends GC{constructor(){super(...arguments),this.type="mark"}static create(t={}){const r=typeof t=="function"?t():t;return new Kz(r)}static handleExit({editor:t,mark:r}){const{tr:n}=t.state,s=t.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(d=>(d==null?void 0:d.type.name)===r.name))return!1;const c=o.find(d=>(d==null?void 0:d.type.name)===r.name);return c&&n.removeStoredMark(c),n.insertText(" ",s.pos),t.view.dispatch(n),!0}return!1}configure(t){return super.configure(t)}extend(t){const r=typeof t=="function"?t():t;return super.extend(r)}};function Vke(e){return typeof e=="number"}var qke=class{constructor(e){this.find=e.find,this.handler=e.handler}},Gke=(e,t,r)=>{if(zC(t))return[...e.matchAll(t)];const n=t(e,r);return n?n.map(s=>{const a=[s.text];return a.index=s.index,a.input=e,a.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(s.replaceWith)),a}):[]};function Kke(e){const{editor:t,state:r,from:n,to:s,rule:a,pasteEvent:o,dropEvent:l}=e,{commands:c,chain:d,can:u}=new dy({editor:t,state:r}),h=[];return r.doc.nodesBetween(n,s,(p,m)=>{var x,b,y,v,w;if((b=(x=p.type)==null?void 0:x.spec)!=null&&b.code||!(p.isText||p.isTextblock||p.isInline))return;const j=(w=(v=(y=p.content)==null?void 0:y.size)!=null?v:p.nodeSize)!=null?w:0,N=Math.max(n,m),k=Math.min(s,m+j);if(N>=k)return;const S=p.isText?p.text||"":p.textBetween(N-m,k-m,void 0,"");Gke(S,a.find,o).forEach(P=>{if(P.index===void 0)return;const E=N+P.index+1,O=E+P[0].length,A={from:r.tr.mapping.map(E),to:r.tr.mapping.map(O)},_=a.handler({state:r,range:A,match:P,commands:c,chain:d,can:u,pasteEvent:o,dropEvent:l});h.push(_)})}),h.every(p=>p!==null)}var um=null,Yke=e=>{var t;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=r.clipboardData)==null||t.setData("text/html",e),r};function Xke(e){const{editor:t,rules:r}=e;let n=null,s=!1,a=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const c=({state:u,from:h,to:f,rule:p,pasteEvt:m})=>{const x=u.tr,b=cy({state:u,transaction:x});if(!(!Kke({editor:t,state:b,from:Math.max(h-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:l})||!x.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,x}};return r.map(u=>new qt({view(h){const f=m=>{var x;n=(x=h.dom.parentElement)!=null&&x.contains(m.target)?h.dom.parentElement:null,n&&(um=t)},p=()=>{um&&(um=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(a=n===h.dom.parentElement,l=f,!a){const p=um;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(h,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,s=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(h,f,p)=>{const m=h[0],x=m.getMeta("uiEvent")==="paste"&&!s,b=m.getMeta("uiEvent")==="drop"&&!a,y=m.getMeta("applyPasteRules"),v=!!y;if(!x&&!b&&!v)return;if(v){let{text:N}=y;typeof N=="string"?N=N:N=WC(ce.from(N),p.schema);const{from:k}=y,S=k+N.length,C=Yke(N);return c({rule:u,state:p,from:k,to:{b:S},pasteEvt:C})}const w=f.doc.content.findDiffStart(p.doc.content),j=f.doc.content.findDiffEnd(p.doc.content);if(!(!Vke(w)||!j||w===j.b))return c({rule:u,state:p,from:w,to:j,pasteEvt:o})}}))}var my=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=Bz(e),this.schema=oke(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:iw(t.name,this.schema)},n=Le(t,"addCommands",r);return n?{...e,...n()}:e},{})}get plugins(){const{editor:e}=this;return VC([...this.extensions].reverse()).flatMap(n=>{const s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:iw(n.name,this.schema)},a=[],o=Le(n,"addKeyboardShortcuts",s);let l={};if(n.type==="mark"&&Le(n,"exitable",s)&&(l.ArrowRight=()=>Mi.handleExit({editor:e,mark:n})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:e})]));l={...l,...f}}const c=d1e(l);a.push(c);const d=Le(n,"addInputRules",s);if(rM(n,e.options.enableInputRules)&&d){const f=d();if(f&&f.length){const p=Uke({editor:e,rules:f}),m=Array.isArray(p)?p:[p];a.push(...m)}}const u=Le(n,"addPasteRules",s);if(rM(n,e.options.enablePasteRules)&&u){const f=u();if(f&&f.length){const p=Xke({editor:e,rules:f});a.push(...p)}}const h=Le(n,"addProseMirrorPlugins",s);if(h){const f=h();a.push(...f)}return a})}get attributes(){return Rz(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Ed(this.extensions);return Object.fromEntries(t.filter(r=>!!Le(r,"addNodeView")).map(r=>{const n=this.attributes.filter(c=>c.type===r.name),s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:hr(r.name,this.schema)},a=Le(r,"addNodeView",s);if(!a)return[];const o=a();if(!o)return[];const l=(c,d,u,h,f)=>{const p=$0(c,n);return o({node:c,view:d,getPos:u,decorations:h,innerDecorations:f,editor:e,extension:r,HTMLAttributes:p})};return[r.name,l]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=Ed(this.extensions);return Object.fromEntries(t.filter(r=>!!Le(r,"addMarkView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:Pi(r.name,this.schema)},a=Le(r,"addMarkView",s);if(!a)return[];const o=(l,c,d)=>{const u=$0(l,n);return a()({mark:l,view:c,inline:d,editor:e,extension:r,HTMLAttributes:u,updateAttributes:h=>{uje(l,e,h)}})};return[r.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var r;const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:iw(t.name,this.schema)};t.type==="mark"&&((r=mt(Le(t,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(t.name);const s=Le(t,"onBeforeCreate",n),a=Le(t,"onCreate",n),o=Le(t,"onUpdate",n),l=Le(t,"onSelectionUpdate",n),c=Le(t,"onTransaction",n),d=Le(t,"onFocus",n),u=Le(t,"onBlur",n),h=Le(t,"onDestroy",n);s&&this.editor.on("beforeCreate",s),a&&this.editor.on("create",a),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),c&&this.editor.on("transaction",c),d&&this.editor.on("focus",d),u&&this.editor.on("blur",u),h&&this.editor.on("destroy",h)})}};my.resolve=Bz;my.sort=VC;my.flatten=UC;var Jke={};BC(Jke,{ClipboardTextSerializer:()=>Xz,Commands:()=>Jz,Delete:()=>Zz,Drop:()=>Qz,Editable:()=>eF,FocusEvents:()=>rF,Keymap:()=>nF,Paste:()=>sF,Tabindex:()=>aF,TextDirection:()=>iF,focusEventsPluginKey:()=>tF});var ir=class Yz extends GC{constructor(){super(...arguments),this.type="extension"}static create(t={}){const r=typeof t=="function"?t():t;return new Yz(r)}configure(t){return super.configure(t)}extend(t){const r=typeof t=="function"?t():t;return super.extend(r)}},Xz=ir.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new qt({key:new kr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:r}=e,{doc:n,selection:s}=t,{ranges:a}=s,o=Math.min(...a.map(u=>u.$from.pos)),l=Math.max(...a.map(u=>u.$to.pos)),c=Fz(r);return zz(n,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),Jz=ir.create({name:"commands",addCommands(){return{...Az}}}),Zz=ir.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var r,n,s;const a=()=>{var o,l,c,d;if((d=(c=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:c.call(l,e))!=null?d:e.getMeta("y-sync$"))return;const u=Iz(e.before,[e,...t]);Uz(u).forEach(p=>{u.mapping.mapResult(p.oldRange.from).deletedAfter&&u.mapping.mapResult(p.oldRange.to).deletedBefore&&u.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,x)=>{const b=x+m.nodeSize-2,y=p.oldRange.from<=x&&b<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:x,to:b,newFrom:u.mapping.map(x),newTo:u.mapping.map(b),deletedRange:p.oldRange,newRange:p.newRange,partial:!y,editor:this.editor,transaction:e,combinedTransform:u})})});const f=u.mapping;u.steps.forEach((p,m)=>{var x,b;if(p instanceof ia){const y=f.slice(m).map(p.from,-1),v=f.slice(m).map(p.to),w=f.invert().map(y,-1),j=f.invert().map(v),N=(x=u.doc.nodeAt(y-1))==null?void 0:x.marks.some(S=>S.eq(p.mark)),k=(b=u.doc.nodeAt(v))==null?void 0:b.marks.some(S=>S.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:j},newRange:{from:y,to:v},partial:!!(k||N),editor:this.editor,transaction:e,combinedTransform:u})}})};(s=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||s?setTimeout(a,0):a()}}),Qz=ir.create({name:"drop",addProseMirrorPlugins(){return[new qt({key:new kr("tiptapDrop"),props:{handleDrop:(e,t,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:r,moved:n})}}})]}}),eF=ir.create({name:"editable",addProseMirrorPlugins(){return[new qt({key:new kr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),tF=new kr("focusEvents"),rF=ir.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new qt({key:tF,props:{handleDOMEvents:{focus:(t,r)=>{e.isFocused=!0;const n=e.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return t.dispatch(n),!1},blur:(t,r)=>{e.isFocused=!1;const n=e.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return t.dispatch(n),!1}}}})]}}),nF=ir.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:c,doc:d}=l,{empty:u,$anchor:h}=c,{pos:f,parent:p}=h,m=h.parent.isTextblock&&f>0?l.doc.resolve(f-1):h,x=m.parent.type.spec.isolating,b=h.pos-h.parentOffset,y=x&&m.parent.childCount===1?b===h.pos:Je.atStart(d).from===f;return!u||!p.type.isTextblock||p.textContent.length||!y||y&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},s={...n},a={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return HC()||$z()?a:s},addProseMirrorPlugins(){return[new qt({key:new kr("clearDocument"),appendTransaction:(e,t,r)=>{if(e.some(x=>x.getMeta("composition")))return;const n=e.some(x=>x.docChanged)&&!t.doc.eq(r.doc),s=e.some(x=>x.getMeta("preventClearDocument"));if(!n||s)return;const{empty:a,from:o,to:l}=t.selection,c=Je.atStart(t.doc).from,d=Je.atEnd(t.doc).to;if(a||!(o===c&&l===d)||!fy(r.doc))return;const f=r.tr,p=cy({state:r,transaction:f}),{commands:m}=new dy({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),sF=ir.create({name:"paste",addProseMirrorPlugins(){return[new qt({key:new kr("tiptapPaste"),props:{handlePaste:(e,t,r)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:r})}}})]}}),aF=ir.create({name:"tabindex",addProseMirrorPlugins(){return[new qt({key:new kr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),iF=ir.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=Ed(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const r=t.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new qt({key:new kr("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),Zke=class Sc{constructor(t,r,n=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=t,this.editor=r,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(t);return new Sc(r,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new Sc(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new Sc(t,this.editor)}get children(){const t=[];return this.node.content.forEach((r,n)=>{const s=r.isBlock&&!r.isTextblock,a=r.isAtom&&!r.isText,o=this.pos+n+(a?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!s&&l.depth<=this.depth)return;const c=new Sc(l,this.editor,s,s?r:null);s&&(c.actualDepth=this.depth+1),t.push(new Sc(l,this.editor,s,s?r:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,r={}){let n=null,s=this.parent;for(;s&&!n;){if(s.node.type.name===t)if(Object.keys(r).length>0){const a=s.node.attrs,o=Object.keys(r);for(let l=0;l<o.length;l+=1){const c=o[l];if(a[c]!==r[c])break}}else n=s;s=s.parent}return n}querySelector(t,r={}){return this.querySelectorAll(t,r,!0)[0]||null}querySelectorAll(t,r={},n=!1){let s=[];if(!this.children||this.children.length===0)return s;const a=Object.keys(r);return this.children.forEach(o=>{n&&s.length>0||(o.node.type.name===t&&a.every(c=>r[c]===o.node.attrs[c])&&s.push(o),!(n&&s.length>0)&&(s=s.concat(o.querySelectorAll(t,r,n))))}),s}setAttribute(t){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(r)}},Qke=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function eje(e,t,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const s=document.createElement("style");return t&&s.setAttribute("nonce",t),s.setAttribute("data-tiptap-style",""),s.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(s),s}var tje=class extends Fke{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:bke,createMappablePosition:yke},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:s,moved:a})=>this.options.onDrop(n,s,a)),this.on("paste",({event:n,slice:s})=>this.options.onPaste(n,s)),this.on("delete",this.options.onDelete);const t=this.createDoc(),r=Mz(t,this.options.autofocus);this.editorState=zc.create({doc:t,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=eje(Qke,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const r=Lz(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(s=>{const a=typeof s=="string"?`${s}$`:s.key;r=r.filter(o=>!o.key.startsWith(a))}),t.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var e,t;const n=[...this.options.enableCoreExtensions?[eF,Xz.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),Jz,rF,nF,aF,Qz,sF,Zz,iF.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new my(n,this)}createCommandManager(){this.commandManager=new dy({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=Qk(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),e=Qk(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new _z(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.prependClass(),this.injectCSS();const n=this.view.dom;n.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(d=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(d)});return}const{state:t,transactions:r}=this.state.applyTransaction(e),n=!this.state.selection.eq(t.selection),s=r.includes(e),a=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!s)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=r.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),l=o==null?void 0:o.getMeta("focus"),c=o==null?void 0:o.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),c&&this.emit("blur",{editor:this,event:c.event,transaction:o}),!(e.getMeta("preventUpdate")||!r.some(d=>d.docChanged)||a.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:r.slice(1)})}getAttributes(e){return Hz(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,n=typeof e=="string"?t:e;return mke(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return WC(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return cke(this.state.doc,{blockSeparator:t,textSerializers:{...Fz(this.schema),...r}})}get isEmpty(){return fy(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var r;return((r=this.$doc)==null?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Zke(t,this)}get $doc(){return this.$pos(0)}};function Ad(e){return new py({find:e.find,handler:({state:t,range:r,match:n})=>{const s=mt(e.getAttributes,void 0,n);if(s===!1||s===null)return null;const{tr:a}=t,o=n[n.length-1],l=n[0];if(o){const c=l.search(/\S/),d=r.from+l.indexOf(o),u=d+o.length;if(qC(r.from,r.to,t.doc).filter(p=>p.mark.type.excluded.find(x=>x===e.type&&x!==p.mark.type)).filter(p=>p.to>d).length)return null;u<r.to&&a.delete(u,r.to),d>r.from&&a.delete(r.from+c,d);const f=r.from+c+o.length;a.addMark(r.from+c,f,e.type.create(s||{})),a.removeStoredMark(e.type)}},undoable:e.undoable})}function oF(e){return new py({find:e.find,handler:({state:t,range:r,match:n})=>{const s=mt(e.getAttributes,void 0,n)||{},{tr:a}=t,o=r.from;let l=r.to;const c=e.type.create(s);if(n[1]){const d=n[0].lastIndexOf(n[1]);let u=o+d;u>l?u=l:l=u+n[1].length;const h=n[0][n[0].length-1];a.insertText(h,o+n[0].length-1),a.replaceWith(u,l,c)}else if(n[0]){const d=e.type.isInline?o:o-1;a.insert(d,e.type.create(s)).delete(a.mapping.map(o),a.mapping.map(l))}a.scrollIntoView()},undoable:e.undoable})}function tj(e){return new py({find:e.find,handler:({state:t,range:r,match:n})=>{const s=t.doc.resolve(r.from),a=mt(e.getAttributes,void 0,n)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e.type))return null;t.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,a)},undoable:e.undoable})}function Td(e){return new py({find:e.find,handler:({state:t,range:r,match:n,chain:s})=>{const a=mt(e.getAttributes,void 0,n)||{},o=t.tr.delete(r.from,r.to),c=o.doc.resolve(r.from).blockRange(),d=c&&jC(c,e.type,a);if(!d)return null;if(o.wrap(c,d),e.keepMarks&&e.editor){const{selection:h,storedMarks:f}=t,{splittableMarks:p}=e.editor.extensionManager,m=f||h.$to.parentOffset&&h.$from.marks();if(m){const x=m.filter(b=>p.includes(b.type.name));o.ensureMarks(x)}}if(e.keepAttributes){const h=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(h,a).run()}const u=o.doc.resolve(r.from-1).nodeBefore;u&&u.type===e.type&&Ko(o.doc,r.from-1)&&(!e.joinPredicate||e.joinPredicate(n,u))&&o.join(r.from-1)},undoable:e.undoable})}var rje=e=>"touches"in e,nje=class{constructor(e){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=l=>{if(!this.isResizing||!this.activeHandle)return;const c=l.clientX-this.startX,d=l.clientY-this.startY;this.handleResize(c,d)},this.handleTouchMove=l=>{if(!this.isResizing||!this.activeHandle)return;const c=l.touches[0];if(!c)return;const d=c.clientX-this.startX,u=c.clientY-this.startY;this.handleResize(d,u)},this.handleMouseUp=()=>{if(!this.isResizing)return;const l=this.element.offsetWidth,c=this.element.offsetHeight;this.onCommit(l,c),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=l=>{l.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=l=>{l.key==="Shift"&&(this.isShiftKeyPressed=!1)};var t,r,n,s,a,o;this.node=e.node,this.editor=e.editor,this.element=e.element,this.contentElement=e.contentElement,this.getPos=e.getPos,this.onResize=e.onResize,this.onCommit=e.onCommit,this.onUpdate=e.onUpdate,(t=e.options)!=null&&t.min&&(this.minSize={...this.minSize,...e.options.min}),(r=e.options)!=null&&r.max&&(this.maxSize=e.options.max),(n=e==null?void 0:e.options)!=null&&n.directions&&(this.directions=e.options.directions),(s=e.options)!=null&&s.preserveAspectRatio&&(this.preserveAspectRatio=e.options.preserveAspectRatio),(a=e.options)!=null&&a.className&&(this.classNames={container:e.options.className.container||"",wrapper:e.options.className.wrapper||"",handle:e.options.className.handle||"",resizing:e.options.className.resizing||""}),(o=e.options)!=null&&o.createCustomHandle&&(this.createCustomHandle=e.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const e=this.editor.isEditable;e!==this.lastEditableState&&(this.lastEditableState=e,e?e&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(e,t,r){return e.type!==this.node.type?!1:(this.node=e,this.onUpdate?this.onUpdate(e,t,r):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const e=document.createElement("div");return e.dataset.resizeContainer="",e.dataset.node=this.node.type.name,e.style.display="flex",this.classNames.container&&(e.className=this.classNames.container),e.appendChild(this.wrapper),e}createWrapper(){const e=document.createElement("div");return e.style.position="relative",e.style.display="block",e.dataset.resizeWrapper="",this.classNames.wrapper&&(e.className=this.classNames.wrapper),e.appendChild(this.element),e}createHandle(e){const t=document.createElement("div");return t.dataset.resizeHandle=e,t.style.position="absolute",this.classNames.handle&&(t.className=this.classNames.handle),t}positionHandle(e,t){const r=t.includes("top"),n=t.includes("bottom"),s=t.includes("left"),a=t.includes("right");r&&(e.style.top="0"),n&&(e.style.bottom="0"),s&&(e.style.left="0"),a&&(e.style.right="0"),(t==="top"||t==="bottom")&&(e.style.left="0",e.style.right="0"),(t==="left"||t==="right")&&(e.style.top="0",e.style.bottom="0")}attachHandles(){this.directions.forEach(e=>{let t;this.createCustomHandle?t=this.createCustomHandle(e):t=this.createHandle(e),t instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${e}") did not return an HTMLElement. Falling back to default handle.`),t=this.createHandle(e)),this.createCustomHandle||this.positionHandle(t,e),t.addEventListener("mousedown",r=>this.handleResizeStart(r,e)),t.addEventListener("touchstart",r=>this.handleResizeStart(r,e)),this.handleMap.set(e,t),this.wrapper.appendChild(t)})}removeHandles(){this.handleMap.forEach(e=>e.remove()),this.handleMap.clear()}applyInitialSize(){const e=this.node.attrs.width,t=this.node.attrs.height;e?(this.element.style.width=`${e}px`,this.initialWidth=e):this.initialWidth=this.element.offsetWidth,t?(this.element.style.height=`${t}px`,this.initialHeight=t):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(e,t){e.preventDefault(),e.stopPropagation(),this.isResizing=!0,this.activeHandle=t,rje(e)?(this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY):(this.startX=e.clientX,this.startY=e.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(e,t){if(!this.activeHandle)return;const r=this.preserveAspectRatio||this.isShiftKeyPressed,{width:n,height:s}=this.calculateNewDimensions(this.activeHandle,e,t),a=this.applyConstraints(n,s,r);this.element.style.width=`${a.width}px`,this.element.style.height=`${a.height}px`,this.onResize&&this.onResize(a.width,a.height)}calculateNewDimensions(e,t,r){let n=this.startWidth,s=this.startHeight;const a=e.includes("right"),o=e.includes("left"),l=e.includes("bottom"),c=e.includes("top");return a?n=this.startWidth+t:o&&(n=this.startWidth-t),l?s=this.startHeight+r:c&&(s=this.startHeight-r),(e==="right"||e==="left")&&(n=this.startWidth+(a?t:-t)),(e==="top"||e==="bottom")&&(s=this.startHeight+(l?r:-r)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(n,s,e):{width:n,height:s}}applyConstraints(e,t,r){var n,s,a,o;if(!r){let d=Math.max(this.minSize.width,e),u=Math.max(this.minSize.height,t);return(n=this.maxSize)!=null&&n.width&&(d=Math.min(this.maxSize.width,d)),(s=this.maxSize)!=null&&s.height&&(u=Math.min(this.maxSize.height,u)),{width:d,height:u}}let l=e,c=t;return l<this.minSize.width&&(l=this.minSize.width,c=l/this.aspectRatio),c<this.minSize.height&&(c=this.minSize.height,l=c*this.aspectRatio),(a=this.maxSize)!=null&&a.width&&l>this.maxSize.width&&(l=this.maxSize.width,c=l/this.aspectRatio),(o=this.maxSize)!=null&&o.height&&c>this.maxSize.height&&(c=this.maxSize.height,l=c*this.aspectRatio),{width:l,height:c}}applyAspectRatio(e,t,r){const n=r==="left"||r==="right",s=r==="top"||r==="bottom";return n?{width:e,height:e/this.aspectRatio}:s?{width:t*this.aspectRatio,height:t}:{width:e,height:e/this.aspectRatio}}};function sje(e,t){const{selection:r}=e,{$from:n}=r;if(r instanceof Re){const a=n.index();return n.parent.canReplaceWith(a,a+1,t)}let s=n.depth;for(;s>=0;){const a=n.index(s);if(n.node(s).contentMatchAt(a).matchType(t))return!0;s-=1}return!1}var aje={};BC(aje,{createAtomBlockMarkdownSpec:()=>ije,createBlockMarkdownSpec:()=>oje,createInlineMarkdownSpec:()=>dje,parseAttributes:()=>KC,parseIndentedBlocks:()=>rj,renderNestedMarkdownContent:()=>XC,serializeAttributes:()=>YC});function KC(e){if(!(e!=null&&e.trim()))return{};const t={},r=[],n=e.replace(/["']([^"']*)["']/g,d=>(r.push(d),`__QUOTED_${r.length-1}__`)),s=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const d=s.map(u=>u.trim().slice(1));t.class=d.join(" ")}const a=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);a&&(t.id=a[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,d,u])=>{var h;const f=parseInt(((h=u.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),p=r[f];p&&(t[d]=p.slice(1,-1))});const c=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(t[u]=!0)}),t}function YC(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(n=>t.push(`.${n}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?t.push(r):n!==!1&&n!=null&&t.push(`${r}="${String(n)}"`))}),t.join(" ")}function ije(e){const{nodeName:t,name:r,parseAttributes:n=KC,serializeAttributes:s=YC,defaultAttributes:a={},requiredAttributes:o=[],allowedAttributes:l}=e,c=r||t,d=u=>{if(!l)return u;const h={};return l.forEach(f=>{f in u&&(h[f]=u[f])}),h};return{parseMarkdown:(u,h)=>{const f={...a,...u.attributes};return h.createNode(t,f,[])},markdownTokenizer:{name:t,level:"block",start(u){var h;const f=new RegExp(`^:::${c}(?:\\s|$)`,"m"),p=(h=u.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(u,h,f){const p=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=u.match(p);if(!m)return;const x=m[1]||"",b=n(x);if(!o.find(v=>!(v in b)))return{type:t,raw:m[0],attributes:b}}},renderMarkdown:u=>{const h=d(u.attrs||{}),f=s(h),p=f?` {${f}}`:"";return`:::${c}${p} :::`}}}function oje(e){const{nodeName:t,name:r,getContent:n,parseAttributes:s=KC,serializeAttributes:a=YC,defaultAttributes:o={},content:l="block",allowedAttributes:c}=e,d=r||t,u=h=>{if(!c)return h;const f={};return c.forEach(p=>{p in h&&(f[p]=h[p])}),f};return{parseMarkdown:(h,f)=>{let p;if(n){const x=n(h);p=typeof x=="string"?[{type:"text",text:x}]:x}else l==="block"?p=f.parseChildren(h.tokens||[]):p=f.parseInline(h.tokens||[]);const m={...o,...h.attributes};return f.createNode(t,m,p)},markdownTokenizer:{name:t,level:"block",start(h){var f;const p=new RegExp(`^:::${d}`,"m"),m=(f=h.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(h,f,p){var m;const x=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),b=h.match(x);if(!b)return;const[y,v=""]=b,w=s(v);let j=1;const N=y.length;let k="";const S=/^:::([\w-]*)(\s.*)?/gm,C=h.slice(N);for(S.lastIndex=0;;){const P=S.exec(C);if(P===null)break;const E=P.index,O=P[1];if(!((m=P[2])!=null&&m.endsWith(":::"))){if(O)j+=1;else if(j-=1,j===0){const A=C.slice(0,E);k=A.trim();const _=h.slice(0,N+E+P[0].length);let I=[];if(k)if(l==="block")for(I=p.blockTokens(A),I.forEach(D=>{D.text&&(!D.tokens||D.tokens.length===0)&&(D.tokens=p.inlineTokens(D.text))});I.length>0;){const D=I[I.length-1];if(D.type==="paragraph"&&(!D.text||D.text.trim()===""))I.pop();else break}else I=p.inlineTokens(k);return{type:t,raw:_,attributes:w,content:k,tokens:I}}}}}},renderMarkdown:(h,f)=>{const p=u(h.attrs||{}),m=a(p),x=m?` {${m}}`:"",b=f.renderChildren(h.content||[],`

`);return`:::${d}${x}

${b}

:::`}}}function lje(e){if(!e.trim())return{};const t={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(e);for(;n!==null;){const[,s,a,o]=n;t[s]=a||o,n=r.exec(e)}return t}function cje(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,r])=>`${t}="${r}"`).join(" ")}function dje(e){const{nodeName:t,name:r,getContent:n,parseAttributes:s=lje,serializeAttributes:a=cje,defaultAttributes:o={},selfClosing:l=!1,allowedAttributes:c}=e,d=r||t,u=f=>{if(!c)return f;const p={};return c.forEach(m=>{const x=typeof m=="string"?m:m.name,b=typeof m=="string"?void 0:m.skipIfDefault;if(x in f){const y=f[x];if(b!==void 0&&y===b)return;p[x]=y}}),p},h=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(l)return p.createNode(t,m);const x=n?n(f):f.content||"";return x?p.createNode(t,m,[p.createTextNode(x)]):p.createNode(t,m,[])},markdownTokenizer:{name:t,level:"inline",start(f){const p=l?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),m=f.match(p),x=m==null?void 0:m.index;return x!==void 0?x:-1},tokenize(f,p,m){const x=l?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),b=f.match(x);if(!b)return;let y="",v="";if(l){const[,j]=b;v=j}else{const[,j,N]=b;v=j,y=N||""}const w=s(v.trim());return{type:t,raw:b[0],content:y.trim(),attributes:w}}},renderMarkdown:f=>{let p="";n?p=n(f):f.content&&f.content.length>0&&(p=f.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const m=u(f.attrs||{}),x=a(m),b=x?` ${x}`:"";return l?`[${d}${b}]`:`[${d}${b}]${p}[/${d}]`}}}function rj(e,t,r){var n,s,a,o;const l=e.split(`
`),c=[];let d="",u=0;const h=t.baseIndentSize||2;for(;u<l.length;){const f=l[u],p=f.match(t.itemPattern);if(!p){if(c.length>0)break;if(f.trim()===""){u+=1,d=`${d}${f}
`;continue}else return}const m=t.extractItemData(p),{indentLevel:x,mainContent:b}=m;d=`${d}${f}
`;const y=[b];for(u+=1;u<l.length;){const N=l[u];if(N.trim()===""){const S=l.slice(u+1).findIndex(E=>E.trim()!=="");if(S===-1)break;if((((s=(n=l[u+1+S].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:s.length)||0)>x){y.push(N),d=`${d}${N}
`,u+=1;continue}else break}if((((o=(a=N.match(/^(\s*)/))==null?void 0:a[1])==null?void 0:o.length)||0)>x)y.push(N),d=`${d}${N}
`,u+=1;else break}let v;const w=y.slice(1);if(w.length>0){const N=w.map(k=>k.slice(x+h)).join(`
`);N.trim()&&(t.customNestedParser?v=t.customNestedParser(N):v=r.blockTokens(N))}const j=t.createToken(m,v);c.push(j)}if(c.length!==0)return{items:c,raw:d}}function XC(e,t,r,n){if(!e||!Array.isArray(e.content))return"";const s=typeof r=="function"?r(n):r,[a,...o]=e.content,l=t.renderChildren([a]),c=[`${s}${l}`];return o&&o.length>0&&o.forEach(d=>{const u=t.renderChildren([d]);if(u){const h=u.split(`
`).map(f=>f?t.indent(f):"").join(`
`);c.push(h)}}),c.join(`
`)}function uje(e,t,r={}){const{state:n}=t,{doc:s,tr:a}=n,o=e;s.descendants((l,c)=>{const d=a.mapping.map(c),u=a.mapping.map(c)+l.nodeSize;let h=null;if(l.marks.forEach(p=>{if(p!==o)return!1;h=p}),!h)return;let f=!1;if(Object.keys(r).forEach(p=>{r[p]!==h.attrs[p]&&(f=!0)}),f){const p=e.type.create({...e.attrs,...r});a.removeMark(d,u,e.type),a.addMark(d,u,p)}}),a.docChanged&&t.view.dispatch(a)}var Tn=class lF extends GC{constructor(){super(...arguments),this.type="node"}static create(t={}){const r=typeof t=="function"?t():t;return new lF(r)}configure(t){return super.configure(t)}extend(t){const r=typeof t=="function"?t():t;return super.extend(r)}};function ec(e){return new qke({find:e.find,handler:({state:t,range:r,match:n,pasteEvent:s})=>{const a=mt(e.getAttributes,void 0,n,s);if(a===!1||a===null)return null;const{tr:o}=t,l=n[n.length-1],c=n[0];let d=r.to;if(l){const u=c.search(/\S/),h=r.from+c.indexOf(l),f=h+l.length;if(qC(r.from,r.to,t.doc).filter(m=>m.mark.type.excluded.find(b=>b===e.type&&b!==m.mark.type)).filter(m=>m.to>h).length)return null;f<r.to&&o.delete(f,r.to),h>r.from&&o.delete(r.from+u,h),d=r.from+u+l.length,o.addMark(r.from+u,d,e.type.create(a||{})),o.removeStoredMark(e.type)}}})}const{getOwnPropertyNames:hje,getOwnPropertySymbols:fje}=Object,{hasOwnProperty:pje}=Object.prototype;function cw(e,t){return function(n,s,a){return e(n,s,a)&&t(n,s,a)}}function hm(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);const{cache:a}=s,o=a.get(r),l=a.get(n);if(o&&l)return o===n&&l===r;a.set(r,n),a.set(n,r);const c=e(r,n,s);return a.delete(r),a.delete(n),c}}function mje(e){return e!=null?e[Symbol.toStringTag]:void 0}function aM(e){return hje(e).concat(fje(e))}const gje=Object.hasOwn||((e,t)=>pje.call(e,t));function dc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const xje="__v",bje="__o",yje="_owner",{getOwnPropertyDescriptor:iM,keys:oM}=Object;function vje(e,t){return e.byteLength===t.byteLength&&D0(new Uint8Array(e),new Uint8Array(t))}function wje(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function kje(e,t){return e.byteLength===t.byteLength&&D0(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function jje(e,t){return dc(e.getTime(),t.getTime())}function Nje(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Sje(e,t){return e===t}function lM(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),a=e.entries();let o,l,c=0;for(;(o=a.next())&&!o.done;){const d=t.entries();let u=!1,h=0;for(;(l=d.next())&&!l.done;){if(s[h]){h++;continue}const f=o.value,p=l.value;if(r.equals(f[0],p[0],c,h,e,t,r)&&r.equals(f[1],p[1],f[0],p[0],e,t,r)){u=s[h]=!0;break}h++}if(!u)return!1;c++}return!0}const Cje=dc;function _je(e,t,r){const n=oM(e);let s=n.length;if(oM(t).length!==s)return!1;for(;s-- >0;)if(!cF(e,t,r,n[s]))return!1;return!0}function Du(e,t,r){const n=aM(e);let s=n.length;if(aM(t).length!==s)return!1;let a,o,l;for(;s-- >0;)if(a=n[s],!cF(e,t,r,a)||(o=iM(e,a),l=iM(t,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Eje(e,t){return dc(e.valueOf(),t.valueOf())}function Aje(e,t){return e.source===t.source&&e.flags===t.flags}function cM(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),a=e.values();let o,l;for(;(o=a.next())&&!o.done;){const c=t.values();let d=!1,u=0;for(;(l=c.next())&&!l.done;){if(!s[u]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){d=s[u]=!0;break}u++}if(!d)return!1}return!0}function D0(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function Tje(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function cF(e,t,r,n){return(n===yje||n===bje||n===xje)&&(e.$$typeof||t.$$typeof)?!0:gje(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const Pje="[object ArrayBuffer]",Mje="[object Arguments]",Oje="[object Boolean]",$je="[object DataView]",Dje="[object Date]",Ije="[object Error]",Lje="[object Map]",Rje="[object Number]",Bje="[object Object]",zje="[object RegExp]",Fje="[object Set]",Hje="[object String]",Uje={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Wje="[object URL]",Vje=Object.prototype.toString;function qje({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:a,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:u,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:m}){return function(b,y,v){if(b===y)return!0;if(b==null||y==null)return!1;const w=typeof b;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?l(b,y,v):w==="function"?a(b,y,v):!1;const j=b.constructor;if(j!==y.constructor)return!1;if(j===Object)return c(b,y,v);if(Array.isArray(b))return t(b,y,v);if(j===Date)return n(b,y,v);if(j===RegExp)return u(b,y,v);if(j===Map)return o(b,y,v);if(j===Set)return h(b,y,v);const N=Vje.call(b);if(N===Dje)return n(b,y,v);if(N===zje)return u(b,y,v);if(N===Lje)return o(b,y,v);if(N===Fje)return h(b,y,v);if(N===Bje)return typeof b.then!="function"&&typeof y.then!="function"&&c(b,y,v);if(N===Wje)return p(b,y,v);if(N===Ije)return s(b,y,v);if(N===Mje)return c(b,y,v);if(Uje[N])return f(b,y,v);if(N===Pje)return e(b,y,v);if(N===$je)return r(b,y,v);if(N===Oje||N===Rje||N===Hje)return d(b,y,v);if(m){let k=m[N];if(!k){const S=mje(b);S&&(k=m[S])}if(k)return k(b,y,v)}return!1}}function Gje({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:vje,areArraysEqual:r?Du:wje,areDataViewsEqual:kje,areDatesEqual:jje,areErrorsEqual:Nje,areFunctionsEqual:Sje,areMapsEqual:r?cw(lM,Du):lM,areNumbersEqual:Cje,areObjectsEqual:r?Du:_je,arePrimitiveWrappersEqual:Eje,areRegExpsEqual:Aje,areSetsEqual:r?cw(cM,Du):cM,areTypedArraysEqual:r?cw(D0,Du):D0,areUrlsEqual:Tje,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const s=hm(n.areArraysEqual),a=hm(n.areMapsEqual),o=hm(n.areObjectsEqual),l=hm(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:l})}return n}function Kje(e){return function(t,r,n,s,a,o,l){return e(t,r,l)}}function Yje({circular:e,comparator:t,createState:r,equals:n,strict:s}){if(r)return function(l,c){const{cache:d=e?new WeakMap:void 0,meta:u}=r();return t(l,c,{cache:d,equals:n,meta:u,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const a={cache:void 0,equals:n,meta:void 0,strict:s};return function(l,c){return t(l,c,a)}}const Xje=Xo();Xo({strict:!0});Xo({circular:!0});Xo({circular:!0,strict:!0});Xo({createInternalComparator:()=>dc});Xo({strict:!0,createInternalComparator:()=>dc});Xo({circular:!0,createInternalComparator:()=>dc});Xo({circular:!0,createInternalComparator:()=>dc,strict:!0});function Xo(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:s=!1}=e,a=Gje(e),o=qje(a),l=r?r(o):Kje(o);return Yje({circular:t,comparator:o,createState:n,equals:l,strict:s})}var Jje=(...e)=>t=>{e.forEach(r=>{typeof r=="function"?r(t):r&&(r.current=t)})},Zje=({contentComponent:e})=>{const t=ZN.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return i.jsx(i.Fragment,{children:Object.values(t)})};function Qje(){const e=new Set;let t={};return{subscribe(r){return e.add(r),()=>{e.delete(r)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(r,n){t={...t,[r]:B5.createPortal(n.reactElement,n.element,r)},e.forEach(s=>s())},removeRenderer(r){const n={...t};delete n[r],t=n,e.forEach(s=>s())}}}var eNe=class extends Ge.Component{constructor(e){var t;super(e),this.editorContentRef=Ge.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=Qje(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const r=document.createElement("div");r.append(t.view.dom),t.setOptions({element:r})}catch{}}}render(){const{editor:e,innerRef:t,...r}=this.props;return i.jsxs(i.Fragment,{children:[i.jsx("div",{ref:Jje(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&i.jsx(Zje,{contentComponent:e.contentComponent})]})}},tNe=g.forwardRef((e,t)=>{const r=Ge.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Ge.createElement(eNe,{key:r,innerRef:t,...e})}),rNe=Ge.memo(tNe),nNe=typeof window<"u"?g.useLayoutEffect:g.useEffect,sNe=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}};function aNe(e){var t;const[r]=g.useState(()=>new sNe(e.editor)),n=hI.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:Xje);return nNe(()=>r.watch(e.editor),[e.editor,r]),g.useDebugValue(n),n}var iNe=!1,nj=typeof window>"u",oNe=nj||!!(typeof window<"u"&&window.next),lNe=class dF{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?nj||oNe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...n)=>{var s,a;return(a=(s=this.options.current).onBeforeCreate)==null?void 0:a.call(s,...n)},onBlur:(...n)=>{var s,a;return(a=(s=this.options.current).onBlur)==null?void 0:a.call(s,...n)},onCreate:(...n)=>{var s,a;return(a=(s=this.options.current).onCreate)==null?void 0:a.call(s,...n)},onDestroy:(...n)=>{var s,a;return(a=(s=this.options.current).onDestroy)==null?void 0:a.call(s,...n)},onFocus:(...n)=>{var s,a;return(a=(s=this.options.current).onFocus)==null?void 0:a.call(s,...n)},onSelectionUpdate:(...n)=>{var s,a;return(a=(s=this.options.current).onSelectionUpdate)==null?void 0:a.call(s,...n)},onTransaction:(...n)=>{var s,a;return(a=(s=this.options.current).onTransaction)==null?void 0:a.call(s,...n)},onUpdate:(...n)=>{var s,a;return(a=(s=this.options.current).onUpdate)==null?void 0:a.call(s,...n)},onContentError:(...n)=>{var s,a;return(a=(s=this.options.current).onContentError)==null?void 0:a.call(s,...n)},onDrop:(...n)=>{var s,a;return(a=(s=this.options.current).onDrop)==null?void 0:a.call(s,...n)},onPaste:(...n)=>{var s,a;return(a=(s=this.options.current).onPaste)==null?void 0:a.call(s,...n)},onDelete:(...n)=>{var s,a;return(a=(s=this.options.current).onDelete)==null?void 0:a.call(s,...n)}};return new tje(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,r){return Object.keys(t).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&t.extensions&&r.extensions?t.extensions.length!==r.extensions.length?!1:t.extensions.every((s,a)=>{var o;return s===((o=r.extensions)==null?void 0:o[a])}):t[n]===r[n])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?dF.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((n,s)=>n===t[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function cNe(e={},t=[]){const r=g.useRef(e);r.current=e;const[n]=g.useState(()=>new lNe(r)),s=ZN.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return g.useDebugValue(s),g.useEffect(n.onRender(t)),aNe({editor:s,selector:({transactionNumber:a})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&a===0?0:a+1}),s}var dNe=g.createContext({editor:null});dNe.Consumer;var uNe=g.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),hNe=()=>g.useContext(uNe);Ge.forwardRef((e,t)=>{const{onDragStart:r}=hNe(),n=e.as||"div";return i.jsx(n,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...e.style}})});Ge.createContext({markViewContentRef:()=>{}});var I0=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:r,...n}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,n,r]},fNe=/^\s*>\s$/,pNe=Tn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return I0("blockquote",{...Mt(this.options.HTMLAttributes,e),children:I0("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const r=">",n=[];return e.content.forEach(s=>{const l=t.renderChildren([s]).split(`
`).map(c=>c.trim()===""?r:`${r} ${c}`);n.push(l.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Td({find:fNe,type:this.type})]}}),mNe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,gNe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,xNe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,bNe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,yNe=Mi.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return I0("strong",{...Mt(this.options.HTMLAttributes,e),children:I0("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ad({find:mNe,type:this.type}),Ad({find:xNe,type:this.type})]},addPasteRules(){return[ec({find:gNe,type:this.type}),ec({find:bNe,type:this.type})]}}),vNe=/(^|[^`])`([^`]+)`(?!`)$/,wNe=/(^|[^`])`([^`]+)`(?!`)/g,kNe=Mi.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Mt(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ad({find:vNe,type:this.type})]},addPasteRules(){return[ec({find:wNe,type:this.type})]}}),dw=4,jNe=/^```([a-z]+)?[\s\n]$/,NNe=/^~~~([a-z]+)?[\s\n]$/,SNe=Tn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:dw,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:r}=this.options;if(!r)return null;const a=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Mt(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var r;return((r=e.raw)==null?void 0:r.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var r;let n="";const s=((r=e.attrs)==null?void 0:r.language)||"";return e.content?n=[`\`\`\`${s}`,t.renderChildren(e.content),"```"].join(`
`):n=`\`\`\`${s}

\`\`\``,n},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,r=t.pos===1;return!e||t.parent.type.name!==this.name?!1:r||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const r=(t=this.options.tabSize)!=null?t:dw,{state:n}=e,{selection:s}=n,{$from:a,empty:o}=s;if(a.parent.type!==this.type)return!1;const l=" ".repeat(r);return o?e.commands.insertContent(l):e.commands.command(({tr:c})=>{const{from:d,to:u}=s,p=n.doc.textBetween(d,u,`
`,`
`).split(`
`).map(m=>l+m).join(`
`);return c.replaceWith(d,u,n.schema.text(p)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const r=(t=this.options.tabSize)!=null?t:dw,{state:n}=e,{selection:s}=n,{$from:a,empty:o}=s;return a.parent.type!==this.type?!1:o?e.commands.command(({tr:l})=>{var c;const{pos:d}=a,u=a.start(),h=a.end(),p=n.doc.textBetween(u,h,`
`,`
`).split(`
`);let m=0,x=0;const b=d-u;for(let k=0;k<p.length;k+=1){if(x+p[k].length>=b){m=k;break}x+=p[k].length+1}const v=((c=p[m].match(/^ */))==null?void 0:c[0])||"",w=Math.min(v.length,r);if(w===0)return!0;let j=u;for(let k=0;k<m;k+=1)j+=p[k].length+1;return l.delete(j,j+w),d-j<=w&&l.setSelection(Ue.create(l.doc,j)),!0}):e.commands.command(({tr:l})=>{const{from:c,to:d}=s,f=n.doc.textBetween(c,d,`
`,`
`).split(`
`).map(p=>{var m;const x=((m=p.match(/^ */))==null?void 0:m[0])||"",b=Math.min(x.length,r);return p.slice(b)}).join(`
`);return l.replaceWith(c,d,n.schema.text(f)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:r}=t,{$from:n,empty:s}=r;if(!s||n.parent.type!==this.type)return!1;const a=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!a||!o?!1:e.chain().command(({tr:l})=>(l.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:r,doc:n}=t,{$from:s,empty:a}=r;if(!a||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const l=s.after();return l===void 0?!1:n.nodeAt(l)?e.commands.command(({tr:d})=>(d.setSelection(Je.near(n.resolve(l))),!0)):e.commands.exitCode()}}},addInputRules(){return[tj({find:jNe,type:this.type,getAttributes:e=>({language:e[1]})}),tj({find:NNe,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new qt({key:new kr("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const r=t.clipboardData.getData("text/plain"),n=t.clipboardData.getData("vscode-editor-data"),s=n?JSON.parse(n):void 0,a=s==null?void 0:s.mode;if(!r||!a)return!1;const{tr:o,schema:l}=e.state,c=l.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:a},c)),o.selection.$from.parent.type!==this.type&&o.setSelection(Ue.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),CNe=Tn.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),_Ne=Tn.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Mt(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:r,editor:n})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:s,storedMarks:a}=r;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=n.extensionManager,c=a||s.$to.parentOffset&&s.$from.marks();return t().insertContent({type:this.name}).command(({tr:d,dispatch:u})=>{if(u&&c&&o){const h=c.filter(f=>l.includes(f.type.name));d.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),ENe=Tn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Mt(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var r;const n=(r=e.attrs)!=null&&r.level?parseInt(e.attrs.level,10):1,s="#".repeat(n);return e.content?`${s} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>tj({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),ANe=Tn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Mt(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!sje(t,t.schema.nodes[this.name]))return!1;const{selection:r}=t,{$to:n}=r,s=e();return Wz(r)?s.insertContentAt(n.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:a,tr:o,dispatch:l})=>{if(l){const{$to:c}=o.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(Ue.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(Re.create(o.doc,c.pos)):o.setSelection(Ue.create(o.doc,c.pos));else{const u=a.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,h=u==null?void 0:u.create();h&&(o.insert(d,h),o.setSelection(Ue.create(o.doc,d+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[oF({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),TNe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,PNe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,MNe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ONe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,$Ne=Mi.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Mt(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ad({find:TNe,type:this.type}),Ad({find:MNe,type:this.type})]},addPasteRules(){return[ec({find:PNe,type:this.type}),ec({find:ONe,type:this.type})]}});const DNe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",INe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",sj="numeric",aj="ascii",ij="alpha",ph="asciinumeric",Ku="alphanumeric",oj="domain",uF="emoji",LNe="scheme",RNe="slashscheme",uw="whitespace";function BNe(e,t){return e in t||(t[e]=[]),t[e]}function xl(e,t,r){t[sj]&&(t[ph]=!0,t[Ku]=!0),t[aj]&&(t[ph]=!0,t[ij]=!0),t[ph]&&(t[Ku]=!0),t[ij]&&(t[Ku]=!0),t[Ku]&&(t[oj]=!0),t[uF]&&(t[oj]=!0);for(const n in t){const s=BNe(n,r);s.indexOf(e)<0&&s.push(e)}}function zNe(e,t){const r={};for(const n in t)t[n].indexOf(e)>=0&&(r[n]=!0);return r}function Ln(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Ln.groups={};Ln.prototype={accepts(){return!!this.t},go(e){const t=this,r=t.j[e];if(r)return r;for(let n=0;n<t.jr.length;n++){const s=t.jr[n][0],a=t.jr[n][1];if(a&&s.test(e))return a}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,r,n){for(let s=0;s<e.length;s++)this.tt(e[s],t,r,n)},tr(e,t,r,n){n=n||Ln.groups;let s;return t&&t.j?s=t:(s=new Ln(t),r&&n&&xl(t,r,n)),this.jr.push([e,s]),s},ts(e,t,r,n){let s=this;const a=e.length;if(!a)return s;for(let o=0;o<a-1;o++)s=s.tt(e[o]);return s.tt(e[a-1],t,r,n)},tt(e,t,r,n){n=n||Ln.groups;const s=this;if(t&&t.j)return s.j[e]=t,t;const a=t;let o,l=s.go(e);if(l?(o=new Ln,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Ln,a){if(n)if(o.t&&typeof o.t=="string"){const c=Object.assign(zNe(o.t,n),r);xl(a,c,n)}else r&&xl(a,r,n);o.t=a}return s.j[e]=o,o}};const Xe=(e,t,r,n,s)=>e.ta(t,r,n,s),Yt=(e,t,r,n,s)=>e.tr(t,r,n,s),dM=(e,t,r,n,s)=>e.ts(t,r,n,s),fe=(e,t,r,n,s)=>e.tt(t,r,n,s),Ga="WORD",lj="UWORD",hF="ASCIINUMERICAL",fF="ALPHANUMERICAL",mf="LOCALHOST",cj="TLD",dj="UTLD",Um="SCHEME",Cc="SLASH_SCHEME",JC="NUM",uj="WS",ZC="NL",mh="OPENBRACE",gh="CLOSEBRACE",L0="OPENBRACKET",R0="CLOSEBRACKET",B0="OPENPAREN",z0="CLOSEPAREN",F0="OPENANGLEBRACKET",H0="CLOSEANGLEBRACKET",U0="FULLWIDTHLEFTPAREN",W0="FULLWIDTHRIGHTPAREN",V0="LEFTCORNERBRACKET",q0="RIGHTCORNERBRACKET",G0="LEFTWHITECORNERBRACKET",K0="RIGHTWHITECORNERBRACKET",Y0="FULLWIDTHLESSTHAN",X0="FULLWIDTHGREATERTHAN",J0="AMPERSAND",Z0="APOSTROPHE",Q0="ASTERISK",Ki="AT",ex="BACKSLASH",tx="BACKTICK",rx="CARET",eo="COLON",QC="COMMA",nx="DOLLAR",Sa="DOT",sx="EQUALS",e_="EXCLAMATION",js="HYPHEN",xh="PERCENT",ax="PIPE",ix="PLUS",ox="POUND",bh="QUERY",t_="QUOTE",pF="FULLWIDTHMIDDLEDOT",r_="SEMI",Ca="SLASH",yh="TILDE",lx="UNDERSCORE",mF="EMOJI",cx="SYM";var gF=Object.freeze({__proto__:null,ALPHANUMERICAL:fF,AMPERSAND:J0,APOSTROPHE:Z0,ASCIINUMERICAL:hF,ASTERISK:Q0,AT:Ki,BACKSLASH:ex,BACKTICK:tx,CARET:rx,CLOSEANGLEBRACKET:H0,CLOSEBRACE:gh,CLOSEBRACKET:R0,CLOSEPAREN:z0,COLON:eo,COMMA:QC,DOLLAR:nx,DOT:Sa,EMOJI:mF,EQUALS:sx,EXCLAMATION:e_,FULLWIDTHGREATERTHAN:X0,FULLWIDTHLEFTPAREN:U0,FULLWIDTHLESSTHAN:Y0,FULLWIDTHMIDDLEDOT:pF,FULLWIDTHRIGHTPAREN:W0,HYPHEN:js,LEFTCORNERBRACKET:V0,LEFTWHITECORNERBRACKET:G0,LOCALHOST:mf,NL:ZC,NUM:JC,OPENANGLEBRACKET:F0,OPENBRACE:mh,OPENBRACKET:L0,OPENPAREN:B0,PERCENT:xh,PIPE:ax,PLUS:ix,POUND:ox,QUERY:bh,QUOTE:t_,RIGHTCORNERBRACKET:q0,RIGHTWHITECORNERBRACKET:K0,SCHEME:Um,SEMI:r_,SLASH:Ca,SLASH_SCHEME:Cc,SYM:cx,TILDE:yh,TLD:cj,UNDERSCORE:lx,UTLD:dj,UWORD:lj,WORD:Ga,WS:uj});const Ua=/[a-z]/,Iu=new RegExp("\\p{L}","u"),hw=new RegExp("\\p{Emoji}","u"),Wa=/\d/,fw=/\s/,uM="\r",pw=`
`,FNe="",HNe="",mw="";let fm=null,pm=null;function UNe(e=[]){const t={};Ln.groups=t;const r=new Ln;fm==null&&(fm=hM(DNe)),pm==null&&(pm=hM(INe)),fe(r,"'",Z0),fe(r,"{",mh),fe(r,"}",gh),fe(r,"[",L0),fe(r,"]",R0),fe(r,"(",B0),fe(r,")",z0),fe(r,"<",F0),fe(r,">",H0),fe(r,"",U0),fe(r,"",W0),fe(r,"",V0),fe(r,"",q0),fe(r,"",G0),fe(r,"",K0),fe(r,"",Y0),fe(r,"",X0),fe(r,"&",J0),fe(r,"*",Q0),fe(r,"@",Ki),fe(r,"`",tx),fe(r,"^",rx),fe(r,":",eo),fe(r,",",QC),fe(r,"$",nx),fe(r,".",Sa),fe(r,"=",sx),fe(r,"!",e_),fe(r,"-",js),fe(r,"%",xh),fe(r,"|",ax),fe(r,"+",ix),fe(r,"#",ox),fe(r,"?",bh),fe(r,'"',t_),fe(r,"/",Ca),fe(r,";",r_),fe(r,"~",yh),fe(r,"_",lx),fe(r,"\\",ex),fe(r,"",pF);const n=Yt(r,Wa,JC,{[sj]:!0});Yt(n,Wa,n);const s=Yt(n,Ua,hF,{[ph]:!0}),a=Yt(n,Iu,fF,{[Ku]:!0}),o=Yt(r,Ua,Ga,{[aj]:!0});Yt(o,Wa,s),Yt(o,Ua,o),Yt(s,Wa,s),Yt(s,Ua,s);const l=Yt(r,Iu,lj,{[ij]:!0});Yt(l,Ua),Yt(l,Wa,a),Yt(l,Iu,l),Yt(a,Wa,a),Yt(a,Ua),Yt(a,Iu,a);const c=fe(r,pw,ZC,{[uw]:!0}),d=fe(r,uM,uj,{[uw]:!0}),u=Yt(r,fw,uj,{[uw]:!0});fe(r,mw,u),fe(d,pw,c),fe(d,mw,u),Yt(d,fw,u),fe(u,uM),fe(u,pw),Yt(u,fw,u),fe(u,mw,u);const h=Yt(r,hw,mF,{[uF]:!0});fe(h,"#"),Yt(h,hw,h),fe(h,FNe,h);const f=fe(h,HNe);fe(f,"#"),Yt(f,hw,h);const p=[[Ua,o],[Wa,s]],m=[[Ua,null],[Iu,l],[Wa,a]];for(let x=0;x<fm.length;x++)Bi(r,fm[x],cj,Ga,p);for(let x=0;x<pm.length;x++)Bi(r,pm[x],dj,lj,m);xl(cj,{tld:!0,ascii:!0},t),xl(dj,{utld:!0,alpha:!0},t),Bi(r,"file",Um,Ga,p),Bi(r,"mailto",Um,Ga,p),Bi(r,"http",Cc,Ga,p),Bi(r,"https",Cc,Ga,p),Bi(r,"ftp",Cc,Ga,p),Bi(r,"ftps",Cc,Ga,p),xl(Um,{scheme:!0,ascii:!0},t),xl(Cc,{slashscheme:!0,ascii:!0},t),e=e.sort((x,b)=>x[0]>b[0]?1:-1);for(let x=0;x<e.length;x++){const b=e[x][0],v=e[x][1]?{[LNe]:!0}:{[RNe]:!0};b.indexOf("-")>=0?v[oj]=!0:Ua.test(b)?Wa.test(b)?v[ph]=!0:v[aj]=!0:v[sj]=!0,dM(r,b,b,v)}return dM(r,"localhost",mf,{ascii:!0}),r.jd=new Ln(cx),{start:r,tokens:Object.assign({groups:t},gF)}}function xF(e,t){const r=WNe(t.replace(/[A-Z]/g,l=>l.toLowerCase())),n=r.length,s=[];let a=0,o=0;for(;o<n;){let l=e,c=null,d=0,u=null,h=-1,f=-1;for(;o<n&&(c=l.go(r[o]));)l=c,l.accepts()?(h=0,f=0,u=l):h>=0&&(h+=r[o].length,f++),d+=r[o].length,a+=r[o].length,o++;a-=h,o-=f,d-=h,s.push({t:u.t,v:t.slice(a-d,a),s:a-d,e:a})}return s}function WNe(e){const t=[],r=e.length;let n=0;for(;n<r;){let s=e.charCodeAt(n),a,o=s<55296||s>56319||n+1===r||(a=e.charCodeAt(n+1))<56320||a>57343?e[n]:e.slice(n,n+2);t.push(o),n+=o.length}return t}function Bi(e,t,r,n,s){let a;const o=t.length;for(let l=0;l<o-1;l++){const c=t[l];e.j[c]?a=e.j[c]:(a=new Ln(n),a.jr=s.slice(),e.j[c]=a),e=a}return a=new Ln(r),a.jr=s.slice(),e.j[t[o-1]]=a,a}function hM(e){const t=[],r=[];let n=0,s="0123456789";for(;n<e.length;){let a=0;for(;s.indexOf(e[n+a])>=0;)a++;if(a>0){t.push(r.join(""));for(let o=parseInt(e.substring(n,n+a),10);o>0;o--)r.pop();n+=a}else r.push(e[n]),n++}return t}const gf={defaultProtocol:"http",events:null,format:fM,formatHref:fM,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function n_(e,t=null){let r=Object.assign({},gf);e&&(r=Object.assign(r,e instanceof n_?e.o:e));const n=r.ignoreTags,s=[];for(let a=0;a<n.length;a++)s.push(n[a].toUpperCase());this.o=r,t&&(this.defaultRender=t),this.ignoreTags=s}n_.prototype={o:gf,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,r){const n=t!=null;let s=this.o[e];return s&&(typeof s=="object"?(s=r.t in s?s[r.t]:gf[e],typeof s=="function"&&n&&(s=s(t,r))):typeof s=="function"&&n&&(s=s(t,r.t,r)),s)},getObj(e,t,r){let n=this.o[e];return typeof n=="function"&&t!=null&&(n=n(t,r.t,r)),n},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function fM(e){return e}function bF(e,t){this.t="token",this.v=e,this.tk=t}bF.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),r=e.get("truncate",t,this),n=e.get("format",t,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=gf.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,r=this.toHref(e.get("defaultProtocol")),n=e.get("formatHref",r,this),s=e.get("tagName",r,t),a=this.toFormattedString(e),o={},l=e.get("className",r,t),c=e.get("target",r,t),d=e.get("rel",r,t),u=e.getObj("attributes",r,t),h=e.getObj("events",r,t);return o.href=n,l&&(o.class=l),c&&(o.target=c),d&&(o.rel=d),u&&Object.assign(o,u),{tagName:s,attributes:o,content:a,eventListeners:h}}};function gy(e,t){class r extends bF{constructor(s,a){super(s,a),this.t=e}}for(const n in t)r.prototype[n]=t[n];return r.t=e,r}const pM=gy("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),mM=gy("text"),VNe=gy("nl"),mm=gy("url",{isLink:!0,toHref(e=gf.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==mf&&e[1].t===eo}}),ws=e=>new Ln(e);function qNe({groups:e}){const t=e.domain.concat([J0,Q0,Ki,ex,tx,rx,nx,sx,js,JC,xh,ax,ix,ox,Ca,cx,yh,lx]),r=[Z0,eo,QC,Sa,e_,xh,bh,t_,r_,F0,H0,mh,gh,R0,L0,B0,z0,U0,W0,V0,q0,G0,K0,Y0,X0],n=[J0,Z0,Q0,ex,tx,rx,nx,sx,js,mh,gh,xh,ax,ix,ox,bh,Ca,cx,yh,lx],s=ws(),a=fe(s,yh);Xe(a,n,a),Xe(a,e.domain,a);const o=ws(),l=ws(),c=ws();Xe(s,e.domain,o),Xe(s,e.scheme,l),Xe(s,e.slashscheme,c),Xe(o,n,a),Xe(o,e.domain,o);const d=fe(o,Ki);fe(a,Ki,d),fe(l,Ki,d),fe(c,Ki,d);const u=fe(a,Sa);Xe(u,n,a),Xe(u,e.domain,a);const h=ws();Xe(d,e.domain,h),Xe(h,e.domain,h);const f=fe(h,Sa);Xe(f,e.domain,h);const p=ws(pM);Xe(f,e.tld,p),Xe(f,e.utld,p),fe(d,mf,p);const m=fe(h,js);fe(m,js,m),Xe(m,e.domain,h),Xe(p,e.domain,h),fe(p,Sa,f),fe(p,js,m);const x=fe(p,eo);Xe(x,e.numeric,pM);const b=fe(o,js),y=fe(o,Sa);fe(b,js,b),Xe(b,e.domain,o),Xe(y,n,a),Xe(y,e.domain,o);const v=ws(mm);Xe(y,e.tld,v),Xe(y,e.utld,v),Xe(v,e.domain,o),Xe(v,n,a),fe(v,Sa,y),fe(v,js,b),fe(v,Ki,d);const w=fe(v,eo),j=ws(mm);Xe(w,e.numeric,j);const N=ws(mm),k=ws();Xe(N,t,N),Xe(N,r,k),Xe(k,t,N),Xe(k,r,k),fe(v,Ca,N),fe(j,Ca,N);const S=fe(l,eo),C=fe(c,eo),P=fe(C,Ca),E=fe(P,Ca);Xe(l,e.domain,o),fe(l,Sa,y),fe(l,js,b),Xe(c,e.domain,o),fe(c,Sa,y),fe(c,js,b),Xe(S,e.domain,N),fe(S,Ca,N),fe(S,bh,N),Xe(E,e.domain,N),Xe(E,t,N),fe(E,Ca,N);const O=[[mh,gh],[L0,R0],[B0,z0],[F0,H0],[U0,W0],[V0,q0],[G0,K0],[Y0,X0]];for(let A=0;A<O.length;A++){const[_,I]=O[A],D=fe(N,_);fe(k,_,D),fe(D,I,N);const $=ws(mm);Xe(D,t,$);const L=ws();Xe(D,r),Xe($,t,$),Xe($,r,L),Xe(L,t,$),Xe(L,r,L),fe($,I,N),fe(L,I,N)}return fe(s,mf,v),fe(s,ZC,VNe),{start:s,tokens:gF}}function GNe(e,t,r){let n=r.length,s=0,a=[],o=[];for(;s<n;){let l=e,c=null,d=null,u=0,h=null,f=-1;for(;s<n&&!(c=l.go(r[s].t));)o.push(r[s++]);for(;s<n&&(d=c||l.go(r[s].t));)c=null,l=d,l.accepts()?(f=0,h=l):f>=0&&f++,s++,u++;if(f<0)s-=u,s<n&&(o.push(r[s]),s++);else{o.length>0&&(a.push(gw(mM,t,o)),o=[]),s-=f,u-=f;const p=h.t,m=r.slice(s-u,s);a.push(gw(p,t,m))}}return o.length>0&&a.push(gw(mM,t,o)),a}function gw(e,t,r){const n=r[0].s,s=r[r.length-1].e,a=t.slice(n,s);return new e(a,r)}const KNe=typeof console<"u"&&console&&console.warn||(()=>{}),YNe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",At={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function XNe(){return Ln.groups={},At.scanner=null,At.parser=null,At.tokenQueue=[],At.pluginQueue=[],At.customSchemes=[],At.initialized=!1,At}function gM(e,t=!1){if(At.initialized&&KNe(`linkifyjs: already initialized - will not register custom scheme "${e}" ${YNe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);At.customSchemes.push([e,t])}function JNe(){At.scanner=UNe(At.customSchemes);for(let e=0;e<At.tokenQueue.length;e++)At.tokenQueue[e][1]({scanner:At.scanner});At.parser=qNe(At.scanner.tokens);for(let e=0;e<At.pluginQueue.length;e++)At.pluginQueue[e][1]({scanner:At.scanner,parser:At.parser});return At.initialized=!0,At}function s_(e){return At.initialized||JNe(),GNe(At.parser.start,e,xF(At.scanner.start,e))}s_.scan=xF;function yF(e,t=null,r=null){if(t&&typeof t=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);r=t,t=null}const n=new n_(r),s=s_(e),a=[];for(let o=0;o<s.length;o++){const l=s[o];l.isLink&&(!t||l.t===t)&&n.check(l)&&a.push(l.toFormattedObject(n))}return a}var a_="[\0- -\u2029]",ZNe=new RegExp(a_),QNe=new RegExp(`${a_}$`),e2e=new RegExp(a_,"g");function t2e(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function r2e(e){return new qt({key:new kr("autolink"),appendTransaction:(t,r,n)=>{const s=t.some(d=>d.docChanged)&&!r.doc.eq(n.doc),a=t.some(d=>d.getMeta("preventAutolink"));if(!s||a)return;const{tr:o}=n,l=Iz(r.doc,[...t]);if(Uz(l).forEach(({newRange:d})=>{const u=nke(n.doc,d,p=>p.isTextblock);let h,f;if(u.length>1)h=u[0],f=n.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(u.length){const p=n.doc.textBetween(d.from,d.to," "," ");if(!QNe.test(p))return;h=u[0],f=n.doc.textBetween(h.pos,d.to,void 0," ")}if(h&&f){const p=f.split(ZNe).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],x=h.pos+f.lastIndexOf(m);if(!m)return!1;const b=s_(m).map(y=>y.toObject(e.defaultProtocol));if(!t2e(b))return!1;b.filter(y=>y.isLink).map(y=>({...y,from:x+y.start+1,to:x+y.end+1})).filter(y=>n.schema.marks.code?!n.doc.rangeHasMark(y.from,y.to,n.schema.marks.code):!0).filter(y=>e.validate(y.value)).filter(y=>e.shouldAutoLink(y.value)).forEach(y=>{qC(y.from,y.to,n.doc).some(v=>v.mark.type===e.type)||o.addMark(y.from,y.to,e.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function n2e(e){return new qt({key:new kr("handleClickLink"),props:{handleClick:(t,r,n)=>{var s,a;if(n.button!==0||!t.editable)return!1;let o=!1;if(e.enableClickSelection&&(o=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){let l=null;if(n.target instanceof HTMLAnchorElement)l=n.target;else{let h=n.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;l=f.find(p=>p.nodeName==="A")}if(!l)return o;const c=Hz(t.state,e.type.name),d=(s=l==null?void 0:l.href)!=null?s:c.href,u=(a=l==null?void 0:l.target)!=null?a:c.target;l&&d&&(window.open(d,u),o=!0)}return o}}})}function s2e(e){return new qt({key:new kr("handlePasteLink"),props:{handlePaste:(t,r,n)=>{const{shouldAutoLink:s}=e,{state:a}=t,{selection:o}=a,{empty:l}=o;if(l)return!1;let c="";n.content.forEach(u=>{c+=u.textContent});const d=yF(c,{defaultProtocol:e.defaultProtocol}).find(u=>u.isLink&&u.value===c);return!c||!d||s!==void 0&&!s(d.href)?!1:e.editor.commands.setMark(e.type,{href:d.href})}}})}function el(e,t){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(n=>{const s=typeof n=="string"?n:n.scheme;s&&r.push(s)}),!e||e.replace(e2e,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var vF=Mi.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){gM(e);return}gM(e.scheme,e.optionalSlashes)})},onDestroy(){XNe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!el(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:r=>!!el(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!el(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Mt(this.options.HTMLAttributes,e),0]:["a",Mt(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var r;const n=((r=e.attrs)==null?void 0:r.href)||"";return`[${t.renderChildren(e)}](${n})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:r}=e;return this.options.isAllowedUri(r,{defaultValidate:n=>!!el(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:r}=e||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!el(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ec({find:e=>{const t=[];if(e){const{protocols:r,defaultProtocol:n}=this.options,s=yF(e).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:o=>!!el(o,r),protocols:r,defaultProtocol:n}));s.length&&s.forEach(a=>{this.options.shouldAutoLink(a.value)&&t.push({text:a.value,data:{href:a.href},index:a.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:r}=this.options;return this.options.autolink&&e.push(r2e({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:s=>!!el(s,t),protocols:t,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),e.push(n2e({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(s2e({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),a2e=vF,i2e=Object.defineProperty,o2e=(e,t)=>{for(var r in t)i2e(e,r,{get:t[r],enumerable:!0})},l2e="listItem",xM="textStyle",bM=/^\s*([-+*])\s$/,wF=Tn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Mt(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(l2e,this.editor.getAttributes(xM)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=Td({find:bM,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Td({find:bM,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(xM),editor:this.editor})),[e]}}),kF=Tn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Mt(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let r=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(s=>s.type==="paragraph"))r=t.parseChildren(e.tokens);else{const s=e.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(r=[{type:"paragraph",content:t.parseInline(s.tokens)}],e.tokens.length>1){const o=e.tokens.slice(1),l=t.parseChildren(o);r.push(...l)}}else r=t.parseChildren(e.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(e,t,r)=>XC(e,t,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),c2e={};o2e(c2e,{findListItemPos:()=>lp,getNextListDepth:()=>i_,handleBackspace:()=>hj,handleDelete:()=>fj,hasListBefore:()=>jF,hasListItemAfter:()=>d2e,hasListItemBefore:()=>NF,listItemHasSubList:()=>SF,nextListIsDeeper:()=>CF,nextListIsHigher:()=>_F});var lp=(e,t)=>{const{$from:r}=t.selection,n=hr(e,t.schema);let s=null,a=r.depth,o=r.pos,l=null;for(;a>0&&l===null;)s=r.node(a),s.type===n?l=a:(a-=1,o-=1);return l===null?null:{$pos:t.doc.resolve(o),depth:l}},i_=(e,t)=>{const r=lp(e,t);if(!r)return!1;const[,n]=fke(t,e,r.$pos.pos+4);return n},jF=(e,t,r)=>{const{$anchor:n}=e.selection,s=Math.max(0,n.pos-2),a=e.doc.resolve(s).node();return!(!a||!r.includes(a.type.name))},NF=(e,t)=>{var r;const{$anchor:n}=t.selection,s=t.doc.resolve(n.pos-2);return!(s.index()===0||((r=s.nodeBefore)==null?void 0:r.type.name)!==e)},SF=(e,t,r)=>{if(!r)return!1;const n=hr(e,t.schema);let s=!1;return r.descendants(a=>{a.type===n&&(s=!0)}),s},hj=(e,t,r)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!Io(e.state,t)&&jF(e.state,t,r)){const{$anchor:l}=e.state.selection,c=e.state.doc.resolve(l.before()-1),d=[];c.node().descendants((f,p)=>{f.type.name===t&&d.push({node:f,pos:p})});const u=d.at(-1);if(!u)return!1;const h=e.state.doc.resolve(c.start()+u.pos+1);return e.chain().cut({from:l.start()-1,to:l.end()+1},h.end()).joinForward().run()}if(!Io(e.state,t)||!xke(e.state))return!1;const n=lp(t,e.state);if(!n)return!1;const a=e.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=SF(t,e.state,a);return NF(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},CF=(e,t)=>{const r=i_(e,t),n=lp(e,t);return!n||!r?!1:r>n.depth},_F=(e,t)=>{const r=i_(e,t),n=lp(e,t);return!n||!r?!1:r<n.depth},fj=(e,t)=>{if(!Io(e.state,t)||!gke(e.state,t))return!1;const{selection:r}=e.state,{$from:n,$to:s}=r;return!r.empty&&n.sameParent(s)?!1:CF(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():_F(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},d2e=(e,t)=>{var r;const{$anchor:n}=t.selection,s=t.doc.resolve(n.pos-n.parentOffset-2);return!(s.index()===s.parent.childCount-1||((r=s.nodeAfter)==null?void 0:r.type.name)!==e)},EF=ir.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r})=>{e.state.schema.nodes[r]!==void 0&&fj(e,r)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r})=>{e.state.schema.nodes[r]!==void 0&&fj(e,r)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{e.state.schema.nodes[r]!==void 0&&hj(e,r,n)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{e.state.schema.nodes[r]!==void 0&&hj(e,r,n)&&(t=!0)}),t}}}}),yM=/^(\s*)(\d+)\.\s+(.*)$/,u2e=/^\s/;function h2e(e){const t=[];let r=0,n=0;for(;r<e.length;){const s=e[r],a=s.match(yM);if(!a)break;const[,o,l,c]=a,d=o.length;let u=c,h=r+1;const f=[s];for(;h<e.length;){const p=e[h];if(p.match(yM))break;if(p.trim()==="")f.push(p),u+=`
`,h+=1;else if(p.match(u2e))f.push(p),u+=`
${p.slice(d+2)}`,h+=1;else break}t.push({indent:d,number:parseInt(l,10),content:u.trim(),raw:f.join(`
`)}),n=h,r=h}return[t,n]}function AF(e,t,r){var n;const s=[];let a=0;for(;a<e.length;){const o=e[a];if(o.indent===t){const l=o.content.split(`
`),c=((n=l[0])==null?void 0:n.trim())||"",d=[];c&&d.push({type:"paragraph",raw:c,tokens:r.inlineTokens(c)});const u=l.slice(1).join(`
`).trim();if(u){const p=r.blockTokens(u);d.push(...p)}let h=a+1;const f=[];for(;h<e.length&&e[h].indent>t;)f.push(e[h]),h+=1;if(f.length>0){const p=Math.min(...f.map(x=>x.indent)),m=AF(f,p,r);d.push({type:"list",ordered:!0,start:f[0].number,items:m,raw:f.map(x=>x.raw).join(`
`)})}s.push({type:"list_item",raw:o.raw,tokens:d}),a=h}else a+=1}return s}function f2e(e,t){return e.map(r=>{if(r.type!=="list_item")return t.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")n.push(...t.parseChildren([s]));else if(s.type==="text"&&s.tokens){const a=t.parseChildren([s]);n.push({type:"paragraph",content:a})}else{const a=t.parseChildren([s]);a.length>0&&n.push(...a)}}),{type:"listItem",content:n}})}var p2e="listItem",vM="textStyle",wM=/^(\d+)\.\s$/,TF=Tn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...r}=e;return t===1?["ol",Mt(this.options.HTMLAttributes,r),0]:["ol",Mt(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const r=e.start||1,n=e.items?f2e(e.items,t):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),r=t==null?void 0:t.index;return r!==void 0?r:-1},tokenize:(e,t,r)=>{var n;const s=e.split(`
`),[a,o]=h2e(s);if(a.length===0)return;const l=AF(a,0,r);return l.length===0?void 0:{type:"list",ordered:!0,start:((n=a[0])==null?void 0:n.number)||1,items:l,raw:s.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(p2e,this.editor.getAttributes(vM)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=Td({find:wM,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,r)=>r.childCount+r.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Td({find:wM,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(vM)}),joinPredicate:(t,r)=>r.childCount+r.attrs.start===+t[1],editor:this.editor})),[e]}}),m2e=/^\s*(\[([( |x])?\])\s$/,g2e=Tn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Mt(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const r=[];if(e.tokens&&e.tokens.length>0?r.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?r.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):r.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const n=t.parseChildren(e.nestedTokens);r.push(...n)}return t.createNode("taskItem",{checked:e.checked||!1},r)},renderMarkdown:(e,t)=>{var r;const s=`- [${(r=e.attrs)!=null&&r.checked?"x":" "}] `;return XC(e,t,s)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:r,editor:n})=>{const s=document.createElement("li"),a=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),c=document.createElement("div"),d=u=>{var h,f;l.ariaLabel=((f=(h=this.options.a11y)==null?void 0:h.checkboxLabel)==null?void 0:f.call(h,u,l.checked))||`Task item checkbox for ${u.textContent||"empty task item"}`};return d(e),a.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",u=>u.preventDefault()),l.addEventListener("change",u=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:h}=u.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:f})=>{const p=r();if(typeof p!="number")return!1;const m=f.doc.nodeAt(p);return f.setNodeMarkup(p,void 0,{...m==null?void 0:m.attrs,checked:h}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,h)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,h])=>{s.setAttribute(u,h)}),s.dataset.checked=e.attrs.checked,l.checked=e.attrs.checked,a.append(l,o),s.append(a,c),Object.entries(t).forEach(([u,h])=>{s.setAttribute(u,h)}),{dom:s,contentDOM:c,update:u=>u.type!==this.type?!1:(s.dataset.checked=u.attrs.checked,l.checked=u.attrs.checked,d(u),!0)}}},addInputRules(){return[Td({find:m2e,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),x2e=Tn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Mt(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const r=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return r!==void 0?r:-1},tokenize(e,t,r){const n=a=>{const o=rj(a,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:l=>({indentLevel:l[1].length,mainContent:l[4],checked:l[3].toLowerCase()==="x"}),createToken:(l,c)=>({type:"taskItem",raw:"",mainContent:l.mainContent,indentLevel:l.indentLevel,checked:l.checked,text:l.mainContent,tokens:r.inlineTokens(l.mainContent),nestedTokens:c}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(a)},s=rj(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,o)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:o}),customNestedParser:n},r);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});ir.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(wF.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(kF.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(EF.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(TF.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(g2e.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(x2e.configure(this.options.taskList)),e}});var b2e=Tn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Mt(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const r=e.tokens||[];return r.length===1&&r[0].type==="image"?t.parseChildren([r[0]]):t.createNode("paragraph",void 0,t.parseInline(r))},renderMarkdown:(e,t)=>!e||!Array.isArray(e.content)?"":t.renderChildren(e.content),addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),y2e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,v2e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,w2e=Mi.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Mt(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ad({find:y2e,type:this.type})]},addPasteRules(){return[ec({find:v2e,type:this.type})]}}),k2e=Tn.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),j2e=Mi.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Mt(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,r){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!s)return;const a=s[2].trim();return{type:"underline",raw:s[0],text:a,tokens:r.inlineTokens(a)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function N2e(e={}){return new qt({view(t){return new S2e(t,e)}})}class S2e{constructor(t,r){var n;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let a=o=>{this[s](o)};return t.dom.addEventListener(s,a),{name:s,handler:a}})}destroy(){this.handlers.forEach(({name:t,handler:r})=>this.editorView.dom.removeEventListener(t,r))}update(t,r){this.cursorPos!=null&&r.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),r=!t.parent.inlineContent,n,s=this.editorView.dom,a=s.getBoundingClientRect(),o=a.width/s.offsetWidth,l=a.height/s.offsetHeight;if(r){let h=t.nodeBefore,f=t.nodeAfter;if(h||f){let p=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(p){let m=p.getBoundingClientRect(),x=h?m.bottom:m.top;h&&f&&(x=(x+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*l;n={left:m.left,right:m.right,top:x-b,bottom:x+b}}}}if(!n){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;n={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let d,u;if(!c||c==document.body&&getComputedStyle(c).position=="static")d=-pageXOffset,u=-pageYOffset;else{let h=c.getBoundingClientRect(),f=h.width/c.offsetWidth,p=h.height/c.offsetHeight;d=h.left-c.scrollLeft*f,u=h.top-c.scrollTop*p}this.element.style.left=(n.left-d)/o+"px",this.element.style.top=(n.top-u)/l+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/l+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),s=n&&n.type.spec.disableDropCursor,a=typeof s=="function"?s(this.editorView,r,t):s;if(r&&!a){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=_B(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class Jt extends Je{constructor(t){super(t,t)}map(t,r){let n=t.resolve(r.map(this.head));return Jt.valid(n)?new Jt(n):Je.near(n)}content(){return _e.empty}eq(t){return t instanceof Jt&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Jt(t.resolve(r.pos))}getBookmark(){return new o_(this.anchor)}static valid(t){let r=t.parent;if(r.isTextblock||!C2e(t)||!_2e(t))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let s=r.contentMatchAt(t.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(t,r,n=!1){e:for(;;){if(!n&&Jt.valid(t))return t;let s=t.pos,a=null;for(let o=t.depth;;o--){let l=t.node(o);if(r>0?t.indexAfter(o)<l.childCount:t.index(o)>0){a=l.child(r>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;s+=r;let c=t.doc.resolve(s);if(Jt.valid(c))return c}for(;;){let o=r>0?a.firstChild:a.lastChild;if(!o){if(a.isAtom&&!a.isText&&!Re.isSelectable(a)){t=t.doc.resolve(s+a.nodeSize*r),n=!1;continue e}break}a=o,s+=r;let l=t.doc.resolve(s);if(Jt.valid(l))return l}return null}}}Jt.prototype.visible=!1;Jt.findFrom=Jt.findGapCursorFrom;Je.jsonID("gapcursor",Jt);class o_{constructor(t){this.pos=t}map(t){return new o_(t.map(this.pos))}resolve(t){let r=t.resolve(this.pos);return Jt.valid(r)?new Jt(r):Je.near(r)}}function PF(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function C2e(e){for(let t=e.depth;t>=0;t--){let r=e.index(t),n=e.node(t);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let s=n.child(r-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||PF(s.type))return!0;if(s.inlineContent)return!1}}return!0}function _2e(e){for(let t=e.depth;t>=0;t--){let r=e.indexAfter(t),n=e.node(t);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let s=n.child(r);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||PF(s.type))return!0;if(s.inlineContent)return!1}}return!0}function E2e(){return new qt({props:{decorations:M2e,createSelectionBetween(e,t,r){return t.pos==r.pos&&Jt.valid(r)?new Jt(r):null},handleClick:T2e,handleKeyDown:A2e,handleDOMEvents:{beforeinput:P2e}}})}const A2e=Ez({ArrowLeft:gm("horiz",-1),ArrowRight:gm("horiz",1),ArrowUp:gm("vert",-1),ArrowDown:gm("vert",1)});function gm(e,t){const r=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(n,s,a){let o=n.selection,l=t>0?o.$to:o.$from,c=o.empty;if(o instanceof Ue){if(!a.endOfTextblock(r)||l.depth==0)return!1;c=!1,l=n.doc.resolve(t>0?l.after():l.before())}let d=Jt.findGapCursorFrom(l,t,c);return d?(s&&s(n.tr.setSelection(new Jt(d))),!0):!1}}function T2e(e,t,r){if(!e||!e.editable)return!1;let n=e.state.doc.resolve(t);if(!Jt.valid(n))return!1;let s=e.posAtCoords({left:r.clientX,top:r.clientY});return s&&s.inside>-1&&Re.isSelectable(e.state.doc.nodeAt(s.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Jt(n))),!0)}function P2e(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Jt))return!1;let{$from:r}=e.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(e.state.schema.nodes.text);if(!n)return!1;let s=ce.empty;for(let o=n.length-1;o>=0;o--)s=ce.from(n[o].createAndFill(null,s));let a=e.state.tr.replace(r.pos,r.pos,new _e(s,0,0));return a.setSelection(Ue.near(a.doc.resolve(r.pos+1))),e.dispatch(a),!1}function M2e(e){if(!(e.selection instanceof Jt))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Ft.create(e.doc,[yn.widget(e.selection.head,t,{key:"gapcursor"})])}var dx=200,Or=function(){};Or.prototype.append=function(t){return t.length?(t=Or.from(t),!this.length&&t||t.length<dx&&this.leafAppend(t)||this.length<dx&&t.leafPrepend(this)||this.appendInner(t)):this};Or.prototype.prepend=function(t){return t.length?Or.from(t).append(this):this};Or.prototype.appendInner=function(t){return new O2e(this,t)};Or.prototype.slice=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=this.length),t>=r?Or.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,r))};Or.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Or.prototype.forEach=function(t,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(t,r,n,0):this.forEachInvertedInner(t,r,n,0)};Or.prototype.map=function(t,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var s=[];return this.forEach(function(a,o){return s.push(t(a,o))},r,n),s};Or.from=function(t){return t instanceof Or?t:t&&t.length?new MF(t):Or.empty};var MF=function(e){function t(n){e.call(this),this.values=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,a){return s==0&&a==this.length?this:new t(this.values.slice(s,a))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,a,o,l){for(var c=a;c<o;c++)if(s(this.values[c],l+c)===!1)return!1},t.prototype.forEachInvertedInner=function(s,a,o,l){for(var c=a-1;c>=o;c--)if(s(this.values[c],l+c)===!1)return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=dx)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=dx)return new t(s.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(t.prototype,r),t}(Or);Or.empty=new MF([]);var O2e=function(e){function t(r,n){e.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},t.prototype.forEachInner=function(n,s,a,o){var l=this.left.length;if(s<l&&this.left.forEachInner(n,s,Math.min(a,l),o)===!1||a>l&&this.right.forEachInner(n,Math.max(s-l,0),Math.min(this.length,a)-l,o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(n,s,a,o){var l=this.left.length;if(s>l&&this.right.forEachInvertedInner(n,s-l,Math.max(a,l)-l,o+l)===!1||a<l&&this.left.forEachInvertedInner(n,Math.min(s,l),a,o)===!1)return!1},t.prototype.sliceInner=function(n,s){if(n==0&&s==this.length)return this;var a=this.left.length;return s<=a?this.left.slice(n,s):n>=a?this.right.slice(n-a,s-a):this.left.slice(n,a).append(this.right.slice(0,s-a))},t.prototype.leafAppend=function(n){var s=this.right.leafAppend(n);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(n){var s=this.left.leafPrepend(n);if(s)return new t(s,this.right)},t.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new t(this.left,new t(this.right,n)):new t(this,n)},t}(Or);const $2e=500;class na{constructor(t,r){this.items=t,this.eventCount=r}popEvent(t,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let s,a;r&&(s=this.remapping(n,this.items.length),a=s.maps.length);let o=t.tr,l,c,d=[],u=[];return this.items.forEach((h,f)=>{if(!h.step){s||(s=this.remapping(n,f+1),a=s.maps.length),a--,u.push(h);return}if(s){u.push(new _a(h.map));let p=h.step.map(s.slice(a)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],d.push(new _a(m,void 0,void 0,d.length+u.length))),a--,m&&s.appendMap(m,a)}else o.maybeStep(h.step);if(h.selection)return l=s?h.selection.map(s.slice(a)):h.selection,c=new na(this.items.slice(0,n).append(u.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:l}}addTransform(t,r,n,s){let a=[],o=this.eventCount,l=this.items,c=!s&&l.length?l.get(l.length-1):null;for(let u=0;u<t.steps.length;u++){let h=t.steps[u].invert(t.docs[u]),f=new _a(t.mapping.maps[u],h,r),p;(p=c&&c.merge(f))&&(f=p,u?a.pop():l=l.slice(0,l.length-1)),a.push(f),r&&(o++,r=void 0),s||(c=f)}let d=o-n.depth;return d>I2e&&(l=D2e(l,d),o-=d),new na(l.append(a),o)}remapping(t,r){let n=new cf;return this.items.forEach((s,a)=>{let o=s.mirrorOffset!=null&&a-s.mirrorOffset>=t?n.maps.length-s.mirrorOffset:void 0;n.appendMap(s.map,o)},t,r),n}addMaps(t){return this.eventCount==0?this:new na(this.items.append(t.map(r=>new _a(r))),this.eventCount)}rebased(t,r){if(!this.eventCount)return this;let n=[],s=Math.max(0,this.items.length-r),a=t.mapping,o=t.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},s);let c=r;this.items.forEach(f=>{let p=a.getMirror(--c);if(p==null)return;o=Math.min(o,p);let m=a.maps[p];if(f.step){let x=t.steps[p].invert(t.docs[p]),b=f.selection&&f.selection.map(a.slice(c+1,p));b&&l++,n.push(new _a(m,x,b))}else n.push(new _a(m))},s);let d=[];for(let f=r;f<o;f++)d.push(new _a(a.maps[f]));let u=this.items.slice(0,s).append(d).append(n),h=new na(u,l);return h.emptyItemCount()>$2e&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let t=0;return this.items.forEach(r=>{r.step||t++}),t}compress(t=this.items.length){let r=this.remapping(0,t),n=r.maps.length,s=[],a=0;return this.items.forEach((o,l)=>{if(l>=t)s.push(o),o.selection&&a++;else if(o.step){let c=o.step.map(r.slice(n)),d=c&&c.getMap();if(n--,d&&r.appendMap(d,n),c){let u=o.selection&&o.selection.map(r.slice(n));u&&a++;let h=new _a(d.invert(),c,u),f,p=s.length-1;(f=s.length&&s[p].merge(h))?s[p]=f:s.push(h)}}else o.map&&n--},this.items.length,0),new na(Or.from(s.reverse()),a)}}na.empty=new na(Or.empty,0);function D2e(e,t){let r;return e.forEach((n,s)=>{if(n.selection&&t--==0)return r=s,!1}),e.slice(r)}class _a{constructor(t,r,n,s){this.map=t,this.step=r,this.selection=n,this.mirrorOffset=s}merge(t){if(this.step&&t.step&&!t.selection){let r=t.step.merge(this.step);if(r)return new _a(r.getMap().invert(),r,this.selection)}}}class Yi{constructor(t,r,n,s,a){this.done=t,this.undone=r,this.prevRanges=n,this.prevTime=s,this.prevComposition=a}}const I2e=20;function L2e(e,t,r,n){let s=r.getMeta(Pl),a;if(s)return s.historyState;r.getMeta(z2e)&&(e=new Yi(e.done,e.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return e;if(o&&o.getMeta(Pl))return o.getMeta(Pl).redo?new Yi(e.done.addTransform(r,void 0,n,Wm(t)),e.undone,kM(r.mapping.maps),e.prevTime,e.prevComposition):new Yi(e.done,e.undone.addTransform(r,void 0,n,Wm(t)),null,e.prevTime,e.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=r.getMeta("composition"),c=e.prevTime==0||!o&&e.prevComposition!=l&&(e.prevTime<(r.time||0)-n.newGroupDelay||!R2e(r,e.prevRanges)),d=o?xw(e.prevRanges,r.mapping):kM(r.mapping.maps);return new Yi(e.done.addTransform(r,c?t.selection.getBookmark():void 0,n,Wm(t)),na.empty,d,r.time,l??e.prevComposition)}else return(a=r.getMeta("rebased"))?new Yi(e.done.rebased(r,a),e.undone.rebased(r,a),xw(e.prevRanges,r.mapping),e.prevTime,e.prevComposition):new Yi(e.done.addMaps(r.mapping.maps),e.undone.addMaps(r.mapping.maps),xw(e.prevRanges,r.mapping),e.prevTime,e.prevComposition)}function R2e(e,t){if(!t)return!1;if(!e.docChanged)return!0;let r=!1;return e.mapping.maps[0].forEach((n,s)=>{for(let a=0;a<t.length;a+=2)n<=t[a+1]&&s>=t[a]&&(r=!0)}),r}function kM(e){let t=[];for(let r=e.length-1;r>=0&&t.length==0;r--)e[r].forEach((n,s,a,o)=>t.push(a,o));return t}function xw(e,t){if(!e)return null;let r=[];for(let n=0;n<e.length;n+=2){let s=t.map(e[n],1),a=t.map(e[n+1],-1);s<=a&&r.push(s,a)}return r}function B2e(e,t,r){let n=Wm(t),s=Pl.get(t).spec.config,a=(r?e.undone:e.done).popEvent(t,n);if(!a)return null;let o=a.selection.resolve(a.transform.doc),l=(r?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),s,n),c=new Yi(r?l:a.remaining,r?a.remaining:l,null,0,-1);return a.transform.setSelection(o).setMeta(Pl,{redo:r,historyState:c})}let bw=!1,jM=null;function Wm(e){let t=e.plugins;if(jM!=t){bw=!1,jM=t;for(let r=0;r<t.length;r++)if(t[r].spec.historyPreserveItems){bw=!0;break}}return bw}const Pl=new kr("history"),z2e=new kr("closeHistory");function F2e(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new qt({key:Pl,state:{init(){return new Yi(na.empty,na.empty,null,0,-1)},apply(t,r,n){return L2e(r,n,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,r){let n=r.inputType,s=n=="historyUndo"?$F:n=="historyRedo"?DF:null;return!s||!t.editable?!1:(r.preventDefault(),s(t.state,t.dispatch))}}}})}function OF(e,t){return(r,n)=>{let s=Pl.getState(r);if(!s||(e?s.undone:s.done).eventCount==0)return!1;if(n){let a=B2e(s,r,e);a&&n(t?a.scrollIntoView():a)}return!0}}const $F=OF(!1,!0),DF=OF(!0,!0);var H2e=ir.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const n=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(n)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,r=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let e=!1;return[new qt({key:new kr("characterCount"),appendTransaction:(t,r,n)=>{if(e)return;const s=this.options.limit;if(s==null||s===0){e=!0;return}const a=this.storage.characters({node:n.doc});if(a>s){const o=a-s,l=0,c=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const d=n.tr.deleteRange(l,c);return e=!0,d}e=!0},filterTransaction:(t,r)=>{const n=this.options.limit;if(!t.docChanged||n===0||n===null||n===void 0)return!0;const s=this.storage.characters({node:r.doc}),a=this.storage.characters({node:t.doc});if(a<=n||s>n&&a>n&&a<=s)return!0;if(s>n&&a>n&&a>s||!t.getMeta("paste"))return!1;const l=t.selection.$head.pos,c=a-n,d=l-c,u=l;return t.deleteRange(d,u),!(this.storage.characters({node:t.doc})>n)}})]}}),U2e=ir.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[N2e(this.options)]}});ir.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new qt({key:new kr("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:s}=t,a=[];if(!r||!n)return Ft.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((c,d)=>{if(c.isText)return;if(!(s>=d&&s<=d+c.nodeSize-1))return!1;o+=1});let l=0;return e.descendants((c,d)=>{if(c.isText||!(s>=d&&s<=d+c.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";a.push(yn.node(d,d+c.nodeSize,{class:this.options.className}))}),Ft.create(e,a)}}})]}});var W2e=ir.create({name:"gapCursor",addProseMirrorPlugins(){return[E2e()]},extendNodeSchema(e){var t;const r={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=mt(Le(e,"allowGapCursor",r)))!=null?t:null}}}),V2e=ir.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new qt({key:new kr("placeholder"),props:{decorations:({doc:e,selection:t})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=t,s=[];if(!r)return null;const a=this.editor.isEmpty;return e.descendants((o,l)=>{const c=n>=l&&n<=l+o.nodeSize,d=!o.isLeaf&&fy(o);if((c||!this.options.showOnlyCurrent)&&d){const u=[this.options.emptyNodeClass];a&&u.push(this.options.emptyEditorClass);const h=yn.node(l,l+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:c}):this.options.placeholder});s.push(h)}return this.options.includeChildren}),Ft.create(e,s)}}})]}});ir.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new qt({key:new kr("selection"),props:{decorations(r){return r.selection.empty||e.isFocused||!e.isEditable||Wz(r.selection)||e.view.dragging?null:Ft.create(r.doc,[yn.inline(r.selection.from,r.selection.to,{class:t.className})])}}})]}});function NM({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var q2e=ir.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new kr(this.name),r=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(r).includes(s.name));return[new qt({key:t,appendTransaction:(s,a,o)=>{const{doc:l,tr:c,schema:d}=o,u=t.getState(o),h=l.content.size,f=d.nodes[r];if(u)return c.insert(h,f.create())},state:{init:(s,a)=>{const o=a.tr.doc.lastChild;return!NM({node:o,types:n})},apply:(s,a)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return a;const o=s.doc.lastChild;return!NM({node:o,types:n})}}})]}}),G2e=ir.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>$F(e,t),redo:()=>({state:e,dispatch:t})=>DF(e,t)}},addProseMirrorPlugins(){return[F2e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),K2e=ir.create({name:"starterKit",addExtensions(){var e,t,r,n;const s=[];return this.options.bold!==!1&&s.push(yNe.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(pNe.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(wF.configure(this.options.bulletList)),this.options.code!==!1&&s.push(kNe.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(SNe.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(CNe.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(U2e.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(W2e.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(_Ne.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(ENe.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(G2e.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(ANe.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push($Ne.configure(this.options.italic)),this.options.listItem!==!1&&s.push(kF.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(EF.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&s.push(vF.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&s.push(TF.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(b2e.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(w2e.configure(this.options.strike)),this.options.text!==!1&&s.push(k2e.configure(this.options.text)),this.options.underline!==!1&&s.push(j2e.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&s.push(q2e.configure((n=this.options)==null?void 0:n.trailingNode)),s}}),Y2e=K2e,X2e=V2e,J2e=H2e;const Z2e="/api/social";async function SM(e,t){return(await fetch(`${Z2e}/post.php`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({blog_post_id:e,...t})})).json()}async function Q2e(e){return(await fetch(`/api/blog/crosspost-settings.php?blog_post_id=${e}`,{credentials:"include"})).json()}async function eSe(e,t){return(await fetch("/api/blog/crosspost-settings.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({blog_post_id:e,settings:t})})).json()}var tSe=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,rSe=Tn.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",Mt(this.options.HTMLAttributes,e)]},parseMarkdown:(e,t)=>t.createNode("image",{src:e.href,title:e.title,alt:e.text}),renderMarkdown:e=>{var t,r,n,s,a,o;const l=(r=(t=e.attrs)==null?void 0:t.src)!=null?r:"",c=(s=(n=e.attrs)==null?void 0:n.alt)!=null?s:"",d=(o=(a=e.attrs)==null?void 0:a.title)!=null?o:"";return d?`![${c}](${l} "${d}")`:`![${c}](${l})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:e,minWidth:t,minHeight:r,alwaysPreserveAspectRatio:n}=this.options.resize;return({node:s,getPos:a,HTMLAttributes:o,editor:l})=>{const c=document.createElement("img");Object.entries(o).forEach(([h,f])=>{if(f!=null)switch(h){case"width":case"height":break;default:c.setAttribute(h,f);break}}),c.src=o.src;const d=new nje({element:c,editor:l,node:s,getPos:a,onResize:(h,f)=>{c.style.width=`${h}px`,c.style.height=`${f}px`},onCommit:(h,f)=>{const p=a();p!==void 0&&this.editor.chain().setNodeSelection(p).updateAttributes(this.name,{width:h,height:f}).run()},onUpdate:(h,f,p)=>h.type===s.type,options:{directions:e,min:{width:t,height:r},preserveAspectRatio:n===!0}}),u=d.dom;return u.style.visibility="hidden",u.style.pointerEvents="none",c.onload=()=>{u.style.visibility="",u.style.pointerEvents=""},d}},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[oF({find:tSe,type:this.type,getAttributes:e=>{const[,,t,r,n]=e;return{src:r,alt:t,title:n}}})]}}),nSe=rSe;const sSe=nSe.extend({name:"image",addAttributes(){var e;return{...(e=this.parent)==null?void 0:e.call(this),imageId:{default:null,parseHTML:t=>{const r=t.getAttribute("data-image-id");return r?parseInt(r,10):null},renderHTML:t=>t.imageId?{"data-image-id":String(t.imageId)}:{}},prompt:{default:null,parseHTML:t=>t.getAttribute("data-prompt"),renderHTML:t=>t.prompt?{"data-prompt":String(t.prompt)}:{}},checkpoint:{default:null,parseHTML:t=>t.getAttribute("data-checkpoint"),renderHTML:t=>t.checkpoint?{"data-checkpoint":String(t.checkpoint)}:{}},width:{default:null,parseHTML:t=>{const r=t.getAttribute("data-original-width");return r?parseInt(r,10):null},renderHTML:t=>t.width?{"data-original-width":String(t.width)}:{}},height:{default:null,parseHTML:t=>{const r=t.getAttribute("data-original-height");return r?parseInt(r,10):null},renderHTML:t=>t.height?{"data-original-height":String(t.height)}:{}},alignment:{default:"center",parseHTML:t=>t.getAttribute("data-alignment")||"center",renderHTML:t=>{const r=t.alignment||"center";return{"data-alignment":String(r)}}},displayWidth:{default:null,parseHTML:t=>t.style.width||t.getAttribute("data-display-width")||null,renderHTML:t=>t.displayWidth?{"data-display-width":String(t.displayWidth),style:`width: ${t.displayWidth}`}:{}}}},renderHTML({HTMLAttributes:e}){const t=e["data-alignment"]||"center",r=e["data-display-width"],n=[];return r&&n.push(`width: ${r}`),["figure",{class:`blog-image ${{left:"blog-image--left",center:"blog-image--center",right:"blog-image--right"}[t]||"blog-image--center"}`},["img",Mt(this.options.HTMLAttributes,e,{style:n.length>0?n.join("; "):void 0})]]},addCommands(){var e;return{...(e=this.parent)==null?void 0:e.call(this),setImageFromGallery:t=>({commands:r})=>r.insertContent({type:"image",attrs:{src:t.src,alt:t.alt||"",imageId:t.imageId,prompt:t.prompt,checkpoint:t.checkpoint,width:t.width,height:t.height,alignment:t.alignment||"center"}}),setImageAlignment:t=>({commands:r,state:n})=>{const{selection:s}=n,a=n.doc.nodeAt(s.from);return(a==null?void 0:a.type.name)==="image"?r.updateAttributes("image",{alignment:t}):!1},setImageDisplayWidth:t=>({commands:r,state:n})=>{const{selection:s}=n,a=n.doc.nodeAt(s.from);return(a==null?void 0:a.type.name)==="image"?r.updateAttributes("image",{displayWidth:t}):!1}}}}),aSe=Mi.create({name:"spoiler",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span[data-spoiler]"},{tag:"span.spoiler"}]},renderHTML({HTMLAttributes:e}){return["span",Mt(this.options.HTMLAttributes,e,{"data-spoiler":"true",class:"spoiler"}),0]},addCommands(){return{setSpoiler:()=>({commands:e})=>e.setMark(this.name),toggleSpoiler:()=>({commands:e})=>e.toggleMark(this.name),unsetSpoiler:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleSpoiler()}}}),iSe=Mi.create({name:"footnote",addOptions(){return{HTMLAttributes:{}}},addAttributes(){return{id:{default:null,parseHTML:e=>e.getAttribute("data-footnote-id"),renderHTML:e=>e.id?{"data-footnote-id":String(e.id)}:{}}}},parseHTML(){return[{tag:"sup[data-footnote]"},{tag:"sup.footnote-ref"}]},renderHTML({HTMLAttributes:e}){const t=e["data-footnote-id"]||"1";return["sup",Mt(this.options.HTMLAttributes,e,{"data-footnote":"true","data-footnote-id":t,class:"footnote-ref",id:`fnref-${t}`}),["a",{href:`#fn-${t}`,class:"footnote-link"},`[${t}]`]]},addCommands(){return{setFootnote:e=>({commands:t})=>t.setMark(this.name,{id:e}),unsetFootnote:()=>({commands:e})=>e.unsetMark(this.name)}}});function oSe(e){let t=0;function r(n){if(!n||typeof n!="object")return;const s=n;if(Array.isArray(s.marks))for(const a of s.marks)a&&typeof a=="object"&&a.type==="footnote"&&t++;if(Array.isArray(s.content))for(const a of s.content)r(a)}return r(e),t}function lSe(e){const t=e.match(/(?:youtube\.com\/watch\?v=|youtube\.com\/watch\?.*&v=)([^&\s]+)/);if(t)return t[1];const r=e.match(/youtu\.be\/([^?\s]+)/);if(r)return r[1];const n=e.match(/youtube\.com\/embed\/([^?\s]+)/);if(n)return n[1];const s=e.match(/youtube\.com\/shorts\/([^?\s]+)/);return s?s[1]:null}const cSe=Tn.create({name:"youtube",group:"block",atom:!0,addOptions(){return{HTMLAttributes:{}}},addAttributes(){return{videoId:{default:null,parseHTML:e=>{const t=e.getAttribute("data-youtube-id");if(t)return t;const r=e.querySelector("iframe");if(r){const s=(r.getAttribute("src")||"").match(/youtube\.com\/embed\/([^?\s]+)/);if(s)return s[1]}return null},renderHTML:e=>e.videoId?{"data-youtube-id":String(e.videoId)}:{}}}},parseHTML(){return[{tag:"div[data-youtube-video]"},{tag:"figure.youtube-embed"}]},renderHTML({HTMLAttributes:e}){const t=e["data-youtube-id"]||"";return["div",Mt(this.options.HTMLAttributes,e,{"data-youtube-video":"true","data-youtube-id":t,class:"youtube-embed"}),["iframe",{src:`https://www.youtube.com/embed/${t}`,width:"560",height:"315",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:"true"}]]},addCommands(){return{setYouTubeVideo:e=>({commands:t})=>t.insertContent({type:this.name,attrs:{videoId:e}})}}});function dSe({isOpen:e,onClose:t,onSelect:r,filter:n,title:s="Select Image",description:a}){const[o,l]=g.useState([]),[c,d]=g.useState([]),[u,h]=g.useState(!1),[f,p]=g.useState(null),[m,x]=g.useState(""),[b,y]=g.useState(null),[v,w]=g.useState(""),[j,N]=g.useState(!1),[k,S]=g.useState(1),[C,P]=g.useState(0),[E,O]=g.useState(0),[A,_]=g.useState(null),I=g.useCallback(async()=>{h(!0),p(null);try{const M={page:k,limit:24,q:m||void 0,gallery_id:b||void 0,min_width:n==null?void 0:n.minWidth,min_height:n==null?void 0:n.minHeight,aspect_ratio:v||(n==null?void 0:n.aspectRatio)||void 0,source:n!=null&&n.blogAssetsOnly?"blog-assets":"all"},T=await uD(M);T.success?(l(T.images),d(T.galleries),P(T.pages),O(T.total)):p(T.error||"Failed to load images")}catch(M){p(String(M))}finally{h(!1)}},[k,m,b,v,n]);g.useEffect(()=>{e&&I()},[e,I]),g.useEffect(()=>{e&&(x(""),S(1),y(null),w(""),_(null),N(!1))},[e]),g.useEffect(()=>{if(!e)return;const M=setTimeout(()=>{S(1),I()},300);return()=>clearTimeout(M)},[m]);const D=M=>{r(M),t()},$=M=>M?M<1024?`${M} B`:M<1024*1024?`${(M/1024).toFixed(1)} KB`:`${(M/(1024*1024)).toFixed(1)} MB`:"Unknown",L=M=>M?M>=.95&&M<=1.05?"Square":M>1.05?"Landscape":"Portrait":"Unknown";return e?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-neutral-900 rounded-xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl border border-white/10 flex flex-col",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between flex-shrink-0",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(so,{className:"w-5 h-5"}),s]}),a&&i.jsx("p",{className:"text-sm text-neutral-400 mt-1",children:a}),((n==null?void 0:n.minWidth)||(n==null?void 0:n.minHeight)||(n==null?void 0:n.aspectRatio))&&i.jsxs("p",{className:"text-xs text-emerald-400 mt-1",children:["Required:",n.minWidth&&` Min ${n.minWidth}px wide`,n.minHeight&&` Min ${n.minHeight}px tall`,n.aspectRatio&&` ${n.aspectRatio}`]})]}),i.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:i.jsx(Dt,{className:"w-5 h-5 text-neutral-400"})})]}),i.jsxs("div",{className:"px-6 py-3 border-b border-white/10 flex-shrink-0",children:[i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(gi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-500"}),i.jsx("input",{type:"text",placeholder:"Search images...",value:m,onChange:M=>x(M.target.value),className:"w-full pl-10 pr-4 py-2 bg-neutral-800 border border-white/10 rounded-lg text-white placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]}),i.jsxs("select",{value:b??"",onChange:M=>{y(M.target.value?Number(M.target.value):null),S(1)},className:"px-3 py-2 bg-neutral-800 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:[i.jsx("option",{value:"",children:"All Galleries"}),c.map(M=>i.jsxs("option",{value:M.id,children:[M.title," (",M.image_count,")"]},M.id))]}),!(n!=null&&n.aspectRatio)&&i.jsxs("select",{value:v,onChange:M=>{w(M.target.value),S(1)},className:"px-3 py-2 bg-neutral-800 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:[i.jsx("option",{value:"",children:"Any Aspect"}),i.jsx("option",{value:"square",children:"Square"}),i.jsx("option",{value:"landscape",children:"Landscape"}),i.jsx("option",{value:"portrait",children:"Portrait"})]}),i.jsx("button",{onClick:()=>N(!j),className:`p-2 rounded-lg transition-colors ${j?"bg-emerald-600 text-white":"hover:bg-white/10 text-neutral-400"}`,children:i.jsx(IG,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"mt-2 text-sm text-neutral-500",children:u?"Loading...":`${E} images found`})]}),i.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[i.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:f?i.jsxs("div",{className:"text-center py-12 text-red-400",children:[i.jsx("p",{children:f}),i.jsx("button",{onClick:I,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Retry"})]}):u?i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:Array.from({length:24}).map((M,T)=>i.jsx("div",{className:"aspect-square bg-neutral-800 rounded-lg animate-pulse"},T))}):o.length===0?i.jsxs("div",{className:"text-center py-12 text-neutral-500",children:[i.jsx(so,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No images found"}),m&&i.jsx("button",{onClick:()=>x(""),className:"mt-4 text-emerald-400 hover:underline",children:"Clear search"})]}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:o.map(M=>i.jsxs("div",{className:`group relative aspect-square bg-neutral-800 rounded-lg overflow-hidden cursor-pointer transition-all hover:ring-2 hover:ring-emerald-500 ${(A==null?void 0:A.id)===M.id?"ring-2 ring-emerald-500":""}`,onClick:()=>_(M),onDoubleClick:()=>D(M),children:[i.jsx("img",{src:M.thumbnail_path||M.original_path,alt:M.title,className:"w-full h-full object-cover",loading:"lazy"}),i.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsxs("button",{onClick:T=>{T.stopPropagation(),D(M)},className:"px-3 py-1.5 bg-emerald-600 text-white text-sm rounded-lg hover:bg-emerald-700 flex items-center gap-1",children:[i.jsx($a,{className:"w-4 h-4"}),"Select"]})}),M.width&&M.height&&i.jsxs("div",{className:"absolute bottom-1 right-1 px-1.5 py-0.5 bg-black/70 text-xs text-white rounded",children:[M.width,"",M.height]})]},M.id))})}),A&&i.jsx("div",{className:"w-80 border-l border-white/10 p-4 overflow-y-auto flex-shrink-0 bg-neutral-800/50",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"aspect-video bg-neutral-900 rounded-lg overflow-hidden",children:i.jsx("img",{src:A.original_path,alt:A.title,className:"w-full h-full object-contain"})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold text-white truncate",title:A.title,children:A.title}),i.jsxs("div",{className:"text-sm text-neutral-400 space-y-1",children:[i.jsxs("p",{className:"flex items-center gap-2",children:[i.jsx($$,{className:"w-4 h-4"}),A.gallery_title]}),A.width&&A.height&&i.jsxs("p",{children:[i.jsx("span",{className:"text-neutral-500",children:"Dimensions:"})," ",A.width,"  ",A.height]}),A.aspect_ratio&&i.jsxs("p",{children:[i.jsx("span",{className:"text-neutral-500",children:"Aspect:"})," ",L(A.aspect_ratio)]}),i.jsxs("p",{children:[i.jsx("span",{className:"text-neutral-500",children:"Size:"})," ",$(A.file_size)]})]}),A.prompt&&i.jsxs("details",{className:"text-sm",children:[i.jsx("summary",{className:"text-neutral-500 cursor-pointer hover:text-neutral-300",children:"AI Generation Info"}),i.jsxs("div",{className:"mt-2 p-2 bg-neutral-900 rounded text-neutral-400 text-xs space-y-1",children:[A.prompt&&i.jsxs("p",{children:[i.jsx("span",{className:"text-neutral-500",children:"Prompt:"})," ",A.prompt.substring(0,200),A.prompt.length>200&&"..."]}),A.checkpoint&&i.jsxs("p",{children:[i.jsx("span",{className:"text-neutral-500",children:"Model:"})," ",A.checkpoint]})]})]})]}),i.jsxs("button",{onClick:()=>D(A),className:"w-full py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2",children:[i.jsx($a,{className:"w-4 h-4"}),"Use This Image"]})]})})]}),C>1&&i.jsxs("div",{className:"px-6 py-3 border-t border-white/10 flex items-center justify-between flex-shrink-0",children:[i.jsxs("div",{className:"text-sm text-neutral-500",children:["Page ",k," of ",C]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>S(M=>Math.max(1,M-1)),disabled:k===1,className:"p-2 rounded-lg hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i.jsx(id,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>S(M=>Math.min(C,M+1)),disabled:k===C,className:"p-2 rounded-lg hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i.jsx(en,{className:"w-5 h-5"})})]})]})]})}):null}function uSe({isOpen:e,onClose:t,onSubmit:r,initialUrl:n="",initialText:s="",hasSelection:a=!1}){const[o,l]=g.useState(n),[c,d]=g.useState(s),u=g.useRef(null);g.useEffect(()=>{e&&(l(n),d(s),setTimeout(()=>{var p;return(p=u.current)==null?void 0:p.focus()},100))},[e,n,s]);const h=()=>{if(!o.trim())return;let p=o.trim();!/^https?:\/\//i.test(p)&&!/^mailto:/i.test(p)&&(p="https://"+p),r(p,c.trim()||void 0),t()},f=p=>{p.key==="Enter"&&(p.preventDefault(),h()),p.key==="Escape"&&t()};return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),i.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(D$,{className:"w-5 h-5 text-emerald-600"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add Link"})]}),i.jsx("button",{onClick:t,className:"p-1.5 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx(Dt,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-5 space-y-4",children:[!a&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Link Text"}),i.jsx("input",{type:"text",value:c,onChange:p=>d(p.target.value),onKeyDown:f,placeholder:"Click here to buy my book...",className:"w-full px-3 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"URL"}),i.jsx("input",{ref:u,type:"url",value:o,onChange:p=>l(p.target.value),onKeyDown:f,placeholder:"https://amazon.com/your-book",className:"w-full px-3 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400",children:"Quick Templates"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{onClick:()=>l("https://www.amazon.com/dp/"),className:"px-2.5 py-1 text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded-lg hover:bg-orange-200 dark:hover:bg-orange-900/50 transition-colors",children:"Amazon"}),i.jsx("button",{onClick:()=>l("https://www.royalroad.com/fiction/"),className:"px-2.5 py-1 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:"RoyalRoad"}),i.jsx("button",{onClick:()=>l("https://www.scribblehub.com/series/"),className:"px-2.5 py-1 text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors",children:"ScribbleHub"}),i.jsx("button",{onClick:()=>l("https://www.patreon.com/"),className:"px-2.5 py-1 text-xs bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:"Patreon"})]})]}),i.jsxs("div",{className:"flex items-start gap-2 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[i.jsx(wg,{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-0.5"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Links will open in a new tab for readers. External links show a  indicator."})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 px-5 py-4 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:[i.jsx("button",{onClick:t,className:"px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),i.jsx("button",{onClick:h,disabled:!o.trim(),className:"px-4 py-2 text-sm bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Add Link"})]})]})]}):null}function hSe({isOpen:e,onClose:t,onSubmit:r}){const[n,s]=g.useState(""),[a,o]=g.useState(null),[l,c]=g.useState(null),d=g.useRef(null);g.useEffect(()=>{e&&(s(""),o(null),c(null),setTimeout(()=>{var f;return(f=d.current)==null?void 0:f.focus()},100))},[e]),g.useEffect(()=>{if(!n.trim()){o(null),c(null);return}const f=lSe(n);f?(o(f),c(null)):(o(null),c("Invalid YouTube URL. Please paste a valid YouTube link."))},[n]);const u=()=>{a&&(r(a),t())},h=f=>{f.key==="Enter"&&a&&(f.preventDefault(),u()),f.key==="Escape"&&t()};return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),i.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-lg overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(A1,{className:"w-5 h-5 text-red-600"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Embed YouTube Video"})]}),i.jsx("button",{onClick:t,className:"p-1.5 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx(Dt,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-5 space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"YouTube URL"}),i.jsx("input",{ref:d,type:"url",value:n,onChange:f=>s(f.target.value),onKeyDown:h,placeholder:"https://www.youtube.com/watch?v=...",className:"w-full px-3 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-red-500 focus:border-transparent"}),l&&i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:l})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400",children:"Supported URL formats"}),i.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-500 dark:text-gray-400",children:[i.jsx("code",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:"youtube.com/watch?v=..."}),i.jsx("code",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:"youtu.be/..."}),i.jsx("code",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:"youtube.com/shorts/..."})]})]}),a&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Preview"}),i.jsxs("div",{className:"relative w-full rounded-lg overflow-hidden bg-black",style:{paddingBottom:"56.25%"},children:[i.jsx("img",{src:`https://img.youtube.com/vi/${a}/maxresdefault.jpg`,alt:"Video thumbnail",className:"absolute inset-0 w-full h-full object-cover",onError:f=>{f.target.src=`https://img.youtube.com/vi/${a}/hqdefault.jpg`}}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:i.jsx("div",{className:"w-16 h-16 flex items-center justify-center bg-red-600 rounded-full",children:i.jsx(bK,{className:"w-8 h-8 text-white ml-1",fill:"white"})})})]}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["Video ID: ",i.jsx("code",{className:"px-1 bg-gray-100 dark:bg-gray-700 rounded",children:a})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 px-5 py-4 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:[i.jsx("button",{onClick:t,className:"px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),i.jsxs("button",{onClick:u,disabled:!a,className:"px-4 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[i.jsx(A1,{className:"w-4 h-4"}),"Embed Video"]})]})]})]}):null}function fSe({onCategoriesChange:e}){const[t,r]=g.useState([]),[n,s]=g.useState(!0),[a,o]=g.useState(null),[l,c]=g.useState(""),[d,u]=g.useState(!1),[h,f]=g.useState(null),p=async()=>{s(!0);try{const b=await _f(!0);b.success?r(b.categories):o(b.error||"Failed to load categories")}catch{o("Failed to load categories")}finally{s(!1)}};g.useEffect(()=>{p()},[]);const m=async b=>{if(b.preventDefault(),!(!l.trim()||d)){u(!0),o(null);try{const y=await lD(l.trim());y.success?(c(""),p(),e==null||e()):o(y.error||"Failed to create category")}catch{o("Failed to create category")}finally{u(!1)}}},x=async(b,y)=>{if(confirm(`Delete category "${y}"? This won't remove it from existing posts.`)){f(b),o(null);try{const v=await cD(b);v.success?(p(),e==null||e()):o(v.error||"Failed to delete category")}catch{o("Failed to delete category")}finally{f(null)}}};return i.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-xl p-6 border border-gray-200 dark:border-neutral-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(F$,{className:"w-5 h-5 text-emerald-500"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Categories"})]}),a&&i.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm flex items-center gap-2",children:[i.jsx(ah,{className:"w-4 h-4 flex-shrink-0"}),a]}),i.jsxs("form",{onSubmit:m,className:"flex gap-2 mb-4",children:[i.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"New category name...",maxLength:100,className:"flex-1 px-3 py-2 rounded-lg border border-gray-300 dark:border-neutral-600 bg-white dark:bg-neutral-800 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50"}),i.jsxs("button",{type:"submit",disabled:d||!l.trim(),className:"px-4 py-2 rounded-lg bg-emerald-500 text-white font-medium text-sm hover:bg-emerald-600 disabled:opacity-50 flex items-center gap-2",children:[i.jsx(ma,{className:"w-4 h-4"}),d?"Adding...":"Add"]})]}),n?i.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-neutral-400",children:"Loading categories..."}):t.length===0?i.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-neutral-400",children:"No categories yet. Create one above!"}):i.jsx("ul",{className:"space-y-2",children:t.map(b=>i.jsxs("li",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-emerald-500 text-white uppercase",children:b.name}),i.jsxs("span",{className:"text-xs text-gray-500 dark:text-neutral-400",children:[b.post_count||0," post",b.post_count!==1?"s":""]})]}),i.jsx("button",{onClick:()=>x(b.id,b.name),disabled:h===b.id,className:"p-2 rounded-lg text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 disabled:opacity-50",title:"Delete category",children:i.jsx(oi,{className:"w-4 h-4"})})]},b.id))}),i.jsx("p",{className:"mt-4 text-xs text-gray-500 dark:text-neutral-400",children:"Note: Deleting a category won't remove it from existing posts. Posts will keep the category name."})]})}const pSe=["25%","50%","75%","100%"];function mSe({editor:e,onInsertImage:t,onInsertLink:r,onInsertYouTube:n,showCodeView:s,onToggleCodeView:a}){const[o,l]=g.useState(!1),[c,d]=g.useState("100%"),[u,h]=g.useState("center");g.useEffect(()=>{if(!e)return;const b=()=>{const{selection:y}=e.state,v=e.state.doc.nodeAt(y.from);(v==null?void 0:v.type.name)==="image"?(l(!0),d(v.attrs.displayWidth||"100%"),h(v.attrs.alignment||"center")):l(!1)};return e.on("selectionUpdate",b),e.on("transaction",b),()=>{e.off("selectionUpdate",b),e.off("transaction",b)}},[e]);const f=g.useCallback(b=>{e&&(e.chain().focus().setImageAlignment(b).run(),h(b))},[e]),p=g.useCallback(b=>{e&&(e.chain().focus().setImageDisplayWidth(b).run(),d(b))},[e]),m=g.useCallback(b=>{const y=parseInt(c)||100,v=Math.min(100,Math.max(10,y+b));p(`${v}%`)},[c,p]),x=g.useCallback(()=>{p("100%")},[p]);return e?i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex flex-wrap gap-1 p-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg",children:[i.jsx("button",{onClick:()=>e.chain().focus().toggleBold().run(),className:`p-2 rounded text-gray-700 dark:text-gray-300 ${e.isActive("bold")?"bg-gray-300 dark:bg-gray-600":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:"Bold (Ctrl+B)",children:i.jsx(qq,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>e.chain().focus().toggleItalic().run(),className:`p-2 rounded text-gray-700 dark:text-gray-300 ${e.isActive("italic")?"bg-gray-300 dark:bg-gray-600":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:"Italic (Ctrl+I)",children:i.jsx(JG,{className:"w-4 h-4"})}),i.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 mx-1"}),i.jsx("button",{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),className:`p-2 rounded text-gray-700 dark:text-gray-300 ${e.isActive("heading",{level:2})?"bg-gray-300 dark:bg-gray-600":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:"Heading 2",children:i.jsx(HG,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),className:`p-2 rounded text-gray-700 dark:text-gray-300 ${e.isActive("heading",{level:3})?"bg-gray-300 dark:bg-gray-600":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:"Heading 3",children:i.jsx(WG,{className:"w-4 h-4"})}),i.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 mx-1"}),i.jsx("button",{onClick:()=>e.chain().focus().toggleBulletList().run(),className:`p-2 rounded text-gray-700 dark:text-gray-300 ${e.isActive("bulletList")?"bg-gray-300 dark:bg-gray-600":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:"Bullet List",children:i.jsx(I$,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>e.chain().focus().toggleOrderedList().run(),className:`p-2 rounded text-gray-700 dark:text-gray-300 ${e.isActive("orderedList")?"bg-gray-300 dark:bg-gray-600":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:"Numbered List",children:i.jsx(sK,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>e.chain().focus().toggleBlockquote().run(),className:`p-2 rounded text-gray-700 dark:text-gray-300 ${e.isActive("blockquote")?"bg-gray-300 dark:bg-gray-600":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:"Quote",children:i.jsx(wK,{className:"w-4 h-4"})}),i.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 mx-1"}),i.jsx("button",{onClick:()=>e.chain().focus().toggleSpoiler().run(),className:`p-2 rounded text-gray-700 dark:text-gray-300 ${e.isActive("spoiler")?"bg-gray-300 dark:bg-gray-600":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:"Spoiler (Ctrl+Shift+S)",children:i.jsx(_N,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>{const b=String(oSe(e.getJSON())+1);e.chain().focus().setFootnote(b).run()},className:`p-2 rounded text-gray-700 dark:text-gray-300 ${e.isActive("footnote")?"bg-gray-300 dark:bg-gray-600":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:"Add Footnote",children:i.jsx($G,{className:"w-4 h-4"})}),i.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 mx-1"}),i.jsx("button",{onClick:t,className:"p-2 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",title:"Insert image from gallery",children:i.jsx(so,{className:"w-4 h-4"})}),i.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 mx-1"}),i.jsx("button",{onClick:()=>{e.isActive("link")?e.chain().focus().unsetLink().run():r()},className:`p-2 rounded text-gray-700 dark:text-gray-300 ${e.isActive("link")?"bg-blue-500 text-white":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:e.isActive("link")?"Remove Link":"Add Link",children:e.isActive("link")?i.jsx(tK,{className:"w-4 h-4"}):i.jsx(D$,{className:"w-4 h-4"})}),i.jsx("button",{onClick:n,className:"p-2 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",title:"Embed YouTube Video",children:i.jsx(A1,{className:"w-4 h-4"})}),i.jsx("div",{className:"flex-1"}),i.jsxs("button",{onClick:a,className:`p-2 rounded flex items-center gap-1.5 ${s?"bg-amber-500 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:"Toggle HTML Code View",children:[i.jsx(gG,{className:"w-4 h-4"}),i.jsx("span",{className:"text-xs font-medium",children:"HTML"})]})]}),o&&!s&&i.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg",children:[i.jsx("span",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mr-2",children:" Image Tools:"}),i.jsxs("div",{className:"flex items-center gap-0.5 bg-white dark:bg-gray-800 rounded-lg p-0.5 border border-gray-200 dark:border-gray-700",children:[i.jsx("button",{onClick:()=>f("left"),className:`p-1.5 rounded ${u==="left"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Align Left",children:i.jsx(KK,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>f("center"),className:`p-1.5 rounded ${u==="center"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Align Center",children:i.jsx(WK,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>f("right"),className:`p-1.5 rounded ${u==="right"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Align Right",children:i.jsx(qK,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600"}),i.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-800 rounded-lg p-0.5 border border-gray-200 dark:border-gray-700",children:[i.jsx("button",{onClick:()=>m(-10),className:"p-1.5 rounded text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700",title:"Decrease width",children:i.jsx(L$,{className:"w-4 h-4"})}),i.jsx("span",{className:"px-2 text-sm font-medium text-gray-700 dark:text-gray-300 min-w-[48px] text-center",children:c}),i.jsx("button",{onClick:()=>m(10),className:"p-1.5 rounded text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700",title:"Increase width",children:i.jsx(ma,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"flex items-center gap-1",children:pSe.map(b=>i.jsx("button",{onClick:()=>p(b),className:`px-2 py-1 text-xs rounded ${c===b?"bg-blue-500 text-white":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:b},b))}),i.jsx("button",{onClick:x,className:"p-1.5 rounded text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-700",title:"Reset to original size",children:i.jsx(SK,{className:"w-4 h-4"})})]})]}):null}function gSe({editor:e,isVisible:t}){const[r,n]=g.useState(""),[s,a]=g.useState(!1),[o,l]=g.useState(!1),[c,d]=g.useState(null);g.useEffect(()=>{if(t&&e){const x=u(e.getHTML());n(x),a(!1),d(null)}},[t,e]);const u=g.useCallback(x=>x.replace(/></g,`>
<`).replace(/(<\/?(p|div|h[1-6]|ul|ol|li|blockquote|figure|pre|hr)[^>]*>)/gi,`
$1
`).replace(/\n{3,}/g,`

`).trim(),[]),h=x=>{n(x.target.value),a(!0),d(null)},f=g.useCallback(()=>{if(e)try{if(new DOMParser().parseFromString(r,"text/html").querySelectorAll("parsererror").length>0){d("Invalid HTML structure detected");return}const v=NN.sanitize(r,{ADD_TAGS:["figure","figcaption","iframe"],ADD_ATTR:["data-image-id","data-prompt","data-checkpoint","data-original-width","data-original-height","data-alignment","data-display-width","data-spoiler","data-footnote","data-footnote-id","allowfullscreen","frameborder","allow","loading"],ALLOW_DATA_ATTR:!0,ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|xxx|youtube):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i});e.commands.setContent(v,{emitUpdate:!0}),a(!1),d(null)}catch(x){d(`Failed to apply HTML: ${String(x)}`)}},[e,r]),p=g.useCallback(()=>{if(!e)return;const x=u(e.getHTML());n(x),a(!1),d(null)},[e,u]),m=g.useCallback(async()=>{try{await navigator.clipboard.writeText(r),l(!0),setTimeout(()=>l(!1),2e3)}catch(x){console.error("Failed to copy:",x)}},[r]);return t?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"HTML Source"}),s&&i.jsx("span",{className:"px-2 py-0.5 text-xs bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-400 rounded-full",children:"Unsaved changes"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:m,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"Copy HTML",children:[o?i.jsx($a,{className:"w-3.5 h-3.5 text-green-500"}):i.jsx(CN,{className:"w-3.5 h-3.5"}),o?"Copied!":"Copy"]}),s&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:p,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"Discard changes and refresh from editor",children:[i.jsx(yo,{className:"w-3.5 h-3.5"}),"Discard"]}),i.jsx("button",{onClick:f,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs bg-emerald-600 text-white hover:bg-emerald-700 rounded transition-colors",title:"Apply HTML changes to editor",children:"Apply Changes"})]})]})]}),i.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[i.jsx(od,{className:"w-4 h-4 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"text-xs text-amber-700 dark:text-amber-400",children:[i.jsx("strong",{children:"Edit with caution:"})," Invalid HTML can break your content. The editor will attempt to fix malformed HTML, which may result in unexpected changes."]})]}),c&&i.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm text-red-700 dark:text-red-400",children:c}),i.jsx("div",{className:"relative",children:i.jsx("textarea",{value:r,onChange:h,className:"w-full h-[400px] p-4 font-mono text-sm bg-gray-900 text-green-400 border border-gray-700 rounded-lg resize-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",spellCheck:!1,placeholder:"<p>Your HTML content here...</p>"})}),i.jsxs("details",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i.jsx("summary",{className:"cursor-pointer hover:text-gray-700 dark:hover:text-gray-300",children:"HTML Quick Reference"}),i.jsxs("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg grid grid-cols-2 md:grid-cols-4 gap-2",children:[i.jsx("code",{children:"<p>...</p>"}),i.jsx("span",{children:"Paragraph"}),i.jsx("code",{children:"<strong>...</strong>"}),i.jsx("span",{children:"Bold"}),i.jsx("code",{children:"<em>...</em>"}),i.jsx("span",{children:"Italic"}),i.jsx("code",{children:"<h2>...</h2>"}),i.jsx("span",{children:"Heading 2"}),i.jsx("code",{children:"<h3>...</h3>"}),i.jsx("span",{children:"Heading 3"}),i.jsx("code",{children:"<blockquote>...</blockquote>"}),i.jsx("span",{children:"Quote"}),i.jsx("code",{children:"<ul><li>...</li></ul>"}),i.jsx("span",{children:"Bullet list"}),i.jsx("code",{children:"<ol><li>...</li></ol>"}),i.jsx("span",{children:"Numbered list"}),i.jsx("code",{children:'<a href="...">...</a>'}),i.jsx("span",{children:"Link"}),i.jsx("code",{children:'<figure class="blog-image"><img src="..."></figure>'}),i.jsx("span",{children:"Image"})]})]})]}):null}const xm={type:"doc",content:[{type:"paragraph"}]};function xSe(){const[e,t]=g.useState([]),[r,n]=g.useState(!0),[s,a]=g.useState(null),[o,l]=g.useState(""),[c,d]=g.useState(""),[u,h]=g.useState(1),[f,p]=g.useState(1),[m,x]=g.useState(!1),[b,y]=g.useState(null),[v,w]=g.useState(!1),[j,N]=g.useState([]),[k,S]=g.useState(""),[C,P]=g.useState(""),[E,O]=g.useState(""),[A,_]=g.useState("draft"),[I,D]=g.useState([]),[$,L]=g.useState([]),[M,T]=g.useState(""),[G,Y]=g.useState(""),[ee,R]=g.useState(null),[B,q]=g.useState(null),[X,ue]=g.useState(null),[U,V]=g.useState(null),[ge,te]=g.useState(!1),[z,le]=g.useState("featured"),[ne,be]=g.useState({instagram:!1,twitter:!1,facebook:!1,discord:!1}),[ye,Se]=g.useState({instagram:"",twitter:"",facebook:"",discord:""}),[He,st]=g.useState(""),[H,J]=g.useState(!1),[ie,we]=g.useState(!1),[re,oe]=g.useState(!1),[Fe,rt]=g.useState(!1),F=cNe({extensions:[Y2e.configure({heading:{levels:[2,3,4]}}),sSe,aSe,iSe,cSe,a2e.configure({openOnClick:!1}),X2e.configure({placeholder:"Start writing your blog post..."}),J2e],content:xm,editorProps:{attributes:{class:"prose dark:prose-invert max-w-none focus:outline-none min-h-[300px] p-4 text-gray-900 dark:text-white"}}}),ae=g.useCallback(async()=>{n(!0);try{const se=await Lx({page:u,limit:20,status:c,q:o||void 0});se.success?(t(se.posts),p(se.pages)):a(se.error||"Failed to load posts")}catch(se){a(String(se))}finally{n(!1)}},[u,c,o]),Ie=g.useCallback(async()=>{const se=await _f(!0);se.success&&N(se.categories)},[]);g.useEffect(()=>{ae(),Ie()},[ae,Ie]),g.useEffect(()=>{!b&&k&&!C&&P(O1(k))},[k,b,C]);const at=()=>{S(""),P(""),O(""),_("draft"),D([]),L([]),T(""),Y(""),R(null),q(null),ue(null),V(null),y(null),be({instagram:!1,twitter:!1,facebook:!1,discord:!1}),Se({instagram:"",twitter:"",facebook:"",discord:""}),st(""),F==null||F.commands.setContent(xm)},We=()=>{at(),x(!0)},fr=async se=>{n(!0);try{const Ke=await iye(()=>Promise.resolve().then(()=>OX),void 0).then(qe=>qe.getBlogPostById(se.id));if(Ke.success&&Ke.post){const qe=Ke.post;if(y(qe),S(qe.title),P(qe.slug),O(qe.excerpt||""),_(qe.status),D(qe.categories||[]),L(qe.tags||[]),Y(qe.meta_description||""),qe.content_json)try{const Qt=JSON.parse(qe.content_json);F==null||F.commands.setContent(Qt)}catch{F==null||F.commands.setContent(xm)}qe.featured_image&&R({id:qe.featured_image.id,title:qe.featured_image.alt_text||"Featured Image",original_path:qe.featured_image.original_path,thumbnail_path:qe.featured_image.thumbnail_path||null,width:qe.featured_image.width||null,height:qe.featured_image.height||null,aspect_ratio:null,file_size:null,mime_type:null,prompt:qe.featured_image.prompt||null,checkpoint:qe.featured_image.checkpoint||null,gallery_id:0,gallery_slug:"",gallery_title:"",created_at:""}),qe.instagram_image&&q(null),qe.twitter_image&&ue(null),qe.facebook_image&&V(null);try{const Qt=await Q2e(se.id);if(Qt.success&&Qt.settings){const er={instagram:!1,twitter:!1,facebook:!1,discord:!1},it={instagram:"",twitter:"",facebook:"",discord:""};Qt.settings.forEach(Pn=>{const or=Pn.platform;er[or]=Pn.enabled,it[or]=Pn.custom_message||""}),be(er),Se(it)}}catch(Qt){console.error("Failed to load crosspost settings:",Qt)}x(!0)}}catch(Ke){a(String(Ke))}finally{n(!1)}},ut=async()=>{if(!k.trim()){a("Title is required");return}w(!0),a(null);try{const se=JSON.stringify((F==null?void 0:F.getJSON())||xm),Ke=(F==null?void 0:F.getHTML())||"",qe={title:k,slug:C||O1(k),excerpt:E||void 0,content_json:se,content_html:Ke,status:A,categories:I,tags:$,meta_description:G||void 0,featured_image_id:ee==null?void 0:ee.id,cover_image:ee==null?void 0:ee.original_path,instagram_image_id:B==null?void 0:B.id,instagram_image:B==null?void 0:B.original_path,twitter_image_id:X==null?void 0:X.id,twitter_image:X==null?void 0:X.original_path,facebook_image_id:U==null?void 0:U.id,facebook_image:U==null?void 0:U.original_path,reading_time:$1(Ke)};let Qt;if(b?Qt=await iD({id:b.id,...qe}):Qt=await aD(qe),Qt.success){const er=(b==null?void 0:b.id)||Qt.id;if(er){const it=[];["instagram","twitter","facebook","discord"].forEach(or=>{let Fa=ye[or];(or==="instagram"||or==="twitter")&&He&&(Fa=Fa?`${Fa}

${He}`:He),it.push({platform:or,enabled:ne[or],custom_message:Fa||void 0})});try{await eSe(er,it)}catch(or){console.error("Failed to save crosspost settings:",or)}if(Qt.allow_crosspost&&A==="published")try{const or=await SM(er);or.success?console.log("Crossposted successfully:",or.results):console.warn("Crosspost had errors:",or.results)}catch(or){console.error("Failed to crosspost:",or)}}x(!1),at(),ae()}else a(Qt.error||"Failed to save post")}catch(se){a(String(se))}finally{w(!1)}},ms=async se=>{if(confirm(`Delete "${se.title}"? This cannot be undone.`))try{const Ke=await oD(se.id,!0);Ke.success?ae():a(Ke.error||"Failed to delete post")}catch(Ke){a(String(Ke))}},Oi=async se=>{if(se.status!=="published"){alert("Only published posts can be crossposted to social media.");return}if(confirm(`Post "${se.title}" to social media? This will post to all enabled platforms.`))try{const Ke=await SM(se.id);if(console.log("Crosspost result:",Ke),!Ke){alert("Error: No response from crosspost API");return}if(Ke.success&&(!Ke.results||Object.keys(Ke.results).length===0)){alert(`No platforms enabled for this post.

To enable crossposting:
1. Edit the post
2. Scroll to "Social Media Crossposting"
3. Check the platforms you want
4. Save the post`);return}if(Ke.success&&Ke.summary.success>0)alert(`Successfully posted to ${Ke.summary.success} platform(s)!`);else{const qe=Object.entries(Ke.results||{}).filter(([er,it])=>it.success).map(([er])=>er),Qt=Object.entries(Ke.results||{}).filter(([er,it])=>!it.success).map(([er,it])=>`${er}: ${it.error}`);qe.length>0?alert(`Partial success:
 Posted to: ${qe.join(", ")}
 Failed: ${Qt.join(", ")}`):alert(`Failed to post:
${Qt.join(`
`)}`)}}catch(Ke){console.error("Crosspost error:",Ke),alert(`Error: ${String(Ke)}`)}},$i=()=>{const se=M.trim();se&&!$.includes(se)&&L([...$,se]),T("")},ba=se=>{le(se),te(!0)},Di=se=>{z==="featured"?R(se):z==="instagram"?q(se):z==="twitter"?ue(se):z==="facebook"?V(se):F==null||F.chain().focus().setImageFromGallery({src:se.original_path,alt:se.title,imageId:se.id,prompt:se.prompt,checkpoint:se.checkpoint,width:se.width,height:se.height}).run()};return m?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b?"Edit Post":"New Post"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>{x(!1),at()},className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:[i.jsx(Dt,{className:"w-4 h-4 inline mr-2"}),"Cancel"]}),i.jsxs("button",{onClick:ut,disabled:v,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-colors",children:[i.jsx(Bl,{className:"w-4 h-4 inline mr-2"}),v?"Saving...":"Save"]})]})]}),s&&i.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400",children:s}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[i.jsx("input",{type:"text",placeholder:"Post title",value:k,onChange:se=>S(se.target.value),className:"w-full px-4 py-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white text-xl focus:ring-2 focus:ring-emerald-500"}),i.jsx(mSe,{editor:F,onInsertImage:()=>ba("inline"),onInsertLink:()=>oe(!0),onInsertYouTube:()=>rt(!0),showCodeView:ie,onToggleCodeView:()=>we(!ie)}),ie?i.jsx(gSe,{editor:F,isVisible:ie}):i.jsx("div",{className:"bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden blog-editor-content",children:i.jsx(rNe,{editor:F,className:"prose dark:prose-invert max-w-none"})}),i.jsxs("div",{className:"text-sm text-gray-500",children:[(F==null?void 0:F.storage.characterCount.words())||0," words "," ",$1((F==null?void 0:F.getHTML())||"")," min read"]}),i.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[i.jsx(PK,{className:"w-5 h-5"}),"Social Media Crossposting"]}),i.jsx("p",{className:"text-sm text-gray-500",children:i.jsxs("span",{className:"font-medium",children:[Object.values(ne).filter(Boolean).length," platform(s) enabled"]})})]}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Customize your message for each platform. These will be used when crossposting after publishing."}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Hashtags (shared across platforms)"}),i.jsx("input",{type:"text",value:He,onChange:se=>st(se.target.value),placeholder:"#writing #fantasy #books",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Separate with spaces. Will be added to Instagram and Twitter posts."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-3 p-4 bg-gradient-to-r from-pink-500/5 to-purple-600/5 border border-pink-200 dark:border-pink-800/30 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[i.jsx("span",{className:"text-xl",children:""})," Instagram"]}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:ne.instagram,onChange:se=>be({...ne,instagram:se.target.checked}),disabled:!B,className:"rounded border-gray-300 dark:border-gray-600 text-pink-600 focus:ring-pink-500 disabled:opacity-50"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Enable"})]})]}),!B&&i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[i.jsx(ah,{className:"w-3 h-3"})," Upload an Instagram image in sidebar to enable"]}),i.jsx("textarea",{value:ye.instagram,onChange:se=>Se({...ye,instagram:se.target.value}),placeholder:`${k||"Your post title"}

${E||"Your excerpt..."}

 Link in bio`,rows:5,maxLength:2200,disabled:!ne.instagram,className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white text-sm resize-none disabled:opacity-50"}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"Caption + hashtags"}),i.jsxs("span",{className:ye.instagram.length>2e3?"text-red-500":"",children:[ye.instagram.length,"/2,200"]})]})]}),i.jsxs("div",{className:"space-y-3 p-4 bg-gradient-to-r from-blue-400/5 to-blue-600/5 border border-blue-200 dark:border-blue-800/30 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[i.jsx("span",{className:"text-xl",children:""})," Twitter/X"]}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:ne.twitter,onChange:se=>be({...ne,twitter:se.target.checked}),disabled:!X,className:"rounded border-gray-300 dark:border-gray-600 text-blue-500 focus:ring-blue-500 disabled:opacity-50"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Enable"})]})]}),!X&&i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[i.jsx(ah,{className:"w-3 h-3"})," Upload a Twitter image in sidebar to enable"]}),i.jsx("textarea",{value:ye.twitter,onChange:se=>Se({...ye,twitter:se.target.value}),placeholder:`${k||"Your post title"}

https://yourdomain.com/blog/${C||"your-post-slug"}`,rows:5,maxLength:280,disabled:!ne.twitter,className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white text-sm resize-none disabled:opacity-50"}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"Tweet text (URL = 23 chars)"}),i.jsxs("span",{className:ye.twitter.length>257?"text-red-500":"",children:[ye.twitter.length,"/280"]})]})]}),i.jsxs("div",{className:"space-y-3 p-4 bg-gradient-to-r from-blue-600/5 to-blue-800/5 border border-blue-300 dark:border-blue-700/30 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[i.jsx("span",{className:"text-xl",children:""})," Facebook"]}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:ne.facebook,onChange:se=>be({...ne,facebook:se.target.checked}),disabled:!U&&!ee,className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-600 disabled:opacity-50"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Enable"})]})]}),!U&&!ee&&i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[i.jsx(ah,{className:"w-3 h-3"})," Upload a Facebook or Featured image to enable"]}),i.jsx("textarea",{value:ye.facebook,onChange:se=>Se({...ye,facebook:se.target.value}),placeholder:`${k||"Your post title"}

${E||"Your excerpt..."}

Read more: https://yourdomain.com/blog/${C||"your-post-slug"}`,rows:5,disabled:!ne.facebook,className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white text-sm resize-none disabled:opacity-50"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Facebook post with auto link preview"})]}),i.jsxs("div",{className:"space-y-3 p-4 bg-gradient-to-r from-indigo-500/5 to-purple-600/5 border border-indigo-200 dark:border-indigo-800/30 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[i.jsx("span",{className:"text-xl",children:""})," Discord"]}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:ne.discord,onChange:se=>be({...ne,discord:se.target.checked}),className:"rounded border-gray-300 dark:border-gray-600 text-indigo-600 focus:ring-indigo-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Enable"})]})]}),i.jsx("textarea",{value:ye.discord,onChange:se=>Se({...ye,discord:se.target.value}),placeholder:` New blog post!

**${k||"Your post title"}**

${E||"Your excerpt..."}`,rows:5,maxLength:2e3,disabled:!ne.discord,className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white text-sm resize-none disabled:opacity-50"}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"Discord embed message"}),i.jsxs("span",{className:ye.discord.length>1800?"text-amber-500":"",children:[ye.discord.length,"/2,000"]})]})]})]}),i.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700 text-sm text-gray-500",children:"Posts will be crossposted to enabled platforms when the blog post is published."})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm space-y-3",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Publishing"}),i.jsxs("select",{value:A,onChange:se=>_(se.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"}),i.jsx("option",{value:"scheduled",children:"Scheduled"})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm space-y-3",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"URL Slug"}),i.jsx("input",{type:"text",value:C,onChange:se=>P(se.target.value),placeholder:"post-url-slug",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm space-y-3",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Featured Image"}),ee?i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:ee.thumbnail_path||ee.original_path,alt:"Featured",className:"w-full h-32 object-cover rounded-lg"}),i.jsx("button",{onClick:()=>R(null),className:"absolute top-2 right-2 p-1 bg-red-600 text-white rounded hover:bg-red-700",children:i.jsx(Dt,{className:"w-4 h-4"})})]}):i.jsxs("button",{onClick:()=>ba("featured"),className:"w-full py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-emerald-500 transition-colors",children:[i.jsx(so,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-500",children:"Select image"})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm space-y-4",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[i.jsx(tA,{className:"w-4 h-4"}),"Social Media Images"]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Upload platform-specific images for crossposting. These are required for automated social media posting."}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Instagram (1080x1080 or 1080x1350)"}),B?i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:B.thumbnail_path||B.original_path,alt:"Instagram",className:"w-full h-24 object-cover rounded-lg"}),i.jsx("button",{onClick:()=>q(null),className:"absolute top-2 right-2 p-1 bg-red-600 text-white rounded hover:bg-red-700",children:i.jsx(Dt,{className:"w-3 h-3"})}),i.jsxs("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/60 text-white text-xs rounded",children:[B.width,"x",B.height]})]}):i.jsxs("button",{onClick:()=>ba("instagram"),className:"w-full py-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-pink-500 transition-colors",children:[i.jsx(so,{className:"w-6 h-6 mx-auto mb-1 text-gray-400"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Select Instagram image"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Twitter/X (1200x675)"}),X?i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:X.thumbnail_path||X.original_path,alt:"Twitter",className:"w-full h-24 object-cover rounded-lg"}),i.jsx("button",{onClick:()=>ue(null),className:"absolute top-2 right-2 p-1 bg-red-600 text-white rounded hover:bg-red-700",children:i.jsx(Dt,{className:"w-3 h-3"})}),i.jsxs("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/60 text-white text-xs rounded",children:[X.width,"x",X.height]})]}):i.jsxs("button",{onClick:()=>ba("twitter"),className:"w-full py-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-blue-500 transition-colors",children:[i.jsx(so,{className:"w-6 h-6 mx-auto mb-1 text-gray-400"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Select Twitter image"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Facebook (1200x630)"}),U?i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:U.thumbnail_path||U.original_path,alt:"Facebook",className:"w-full h-24 object-cover rounded-lg"}),i.jsx("button",{onClick:()=>V(null),className:"absolute top-2 right-2 p-1 bg-red-600 text-white rounded hover:bg-red-700",children:i.jsx(Dt,{className:"w-3 h-3"})}),i.jsxs("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/60 text-white text-xs rounded",children:[U.width,"x",U.height]})]}):i.jsxs("button",{onClick:()=>ba("facebook"),className:"w-full py-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-blue-600 transition-colors",children:[i.jsx(so,{className:"w-6 h-6 mx-auto mb-1 text-gray-400"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Select Facebook image"})]})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm space-y-3",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Excerpt"}),i.jsx("textarea",{value:E,onChange:se=>O(se.target.value),placeholder:"Brief description...",rows:3,className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white resize-none"})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[i.jsx($$,{className:"w-4 h-4"}),"Categories"]}),i.jsx("button",{onClick:()=>J(!H),className:"p-1.5 text-gray-500 hover:text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 rounded transition-colors",title:"Manage Categories",children:i.jsx(Dx,{className:"w-4 h-4"})})]}),!H&&i.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:j.length===0?i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No categories yet. Click  to add some."}):j.map(se=>i.jsxs("label",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[i.jsx("input",{type:"checkbox",checked:I.includes(se.slug),onChange:Ke=>{Ke.target.checked?D([...I,se.slug]):D(I.filter(qe=>qe!==se.slug))},className:"rounded border-gray-300 dark:border-gray-600 text-emerald-600 focus:ring-emerald-500"}),i.jsx("span",{className:"text-sm",children:se.name})]},se.id))}),H&&i.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[i.jsx(fSe,{onCategoriesChange:Ie}),i.jsx("button",{onClick:()=>J(!1),className:"mt-3 w-full px-3 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:" Back to selection"})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm space-y-3",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[i.jsx(F$,{className:"w-4 h-4"}),"Tags"]}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:$.map(se=>i.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm flex items-center gap-1",children:[se,i.jsx("button",{onClick:()=>L($.filter(Ke=>Ke!==se)),className:"hover:text-red-500",children:i.jsx(Dt,{className:"w-3 h-3"})})]},se))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:M,onChange:se=>T(se.target.value),onKeyDown:se=>se.key==="Enter"&&(se.preventDefault(),$i()),placeholder:"Add tag",className:"flex-1 px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white text-sm"}),i.jsx("button",{onClick:$i,className:"px-3 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:i.jsx(ma,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm space-y-3",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"SEO"}),i.jsx("textarea",{value:G,onChange:se=>Y(se.target.value),placeholder:"Meta description...",rows:3,maxLength:160,className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white resize-none"}),i.jsxs("div",{className:"text-xs text-gray-500",children:[G.length,"/160 characters"]})]})]})]}),i.jsx(dSe,{isOpen:ge,onClose:()=>te(!1),onSelect:Di,title:z==="featured"?"Select Featured Image":z==="instagram"?"Select Instagram Image (1080x1080 or 1080x1350)":z==="twitter"?"Select Twitter Image (1200x675)":z==="facebook"?"Select Facebook Image (1200x630)":"Insert Image",description:z==="featured"?"Choose an image for the post header":z==="instagram"?"Select a square or portrait image for Instagram crossposting":z==="twitter"?"Select a landscape image for Twitter/X crossposting":z==="facebook"?"Select a landscape image for Facebook crossposting":"Select an image to insert into your content"}),i.jsx(uSe,{isOpen:re,onClose:()=>oe(!1),onSubmit:(se,Ke)=>{F&&(Ke&&F.state.selection.empty?F.chain().focus().insertContent(`<a href="${se}" target="_blank">${Ke}</a>`).run():F.chain().focus().extendMarkRange("link").setLink({href:se,target:"_blank"}).run())},hasSelection:F?!F.state.selection.empty:!1,initialText:F!=null&&F.state.selection.empty?"":(F==null?void 0:F.state.doc.textBetween(F.state.selection.from,F.state.selection.to))||""}),i.jsx(hSe,{isOpen:Fe,onClose:()=>rt(!1),onSubmit:se=>{F&&F.chain().focus().setYouTubeVideo(se).run()}})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Blog Posts"}),i.jsxs("button",{onClick:We,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[i.jsx(ma,{className:"w-4 h-4"}),"New Post"]})]}),i.jsxs("div",{className:"flex gap-4 items-center",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(gi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search posts...",value:o,onChange:se=>l(se.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500"})]}),i.jsxs("select",{value:c,onChange:se=>d(se.target.value),className:"px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[i.jsx("option",{value:"",children:"All Status"}),i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"}),i.jsx("option",{value:"scheduled",children:"Scheduled"})]})]}),s&&i.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400",children:s}),r?i.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading..."}):e.length===0?i.jsxs("div",{className:"text-center py-12 text-gray-500",children:[i.jsx(AG,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No posts found"})]}):i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:i.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.map(se=>i.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:se.title}),i.jsxs("div",{className:"flex gap-4 text-sm text-gray-500 dark:text-gray-400 mt-1",children:[i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${se.status==="published"?"bg-green-100 dark:bg-emerald-900/50 text-green-800 dark:text-emerald-400":se.status==="scheduled"?"bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-400":"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-400"}`,children:se.status}),se.published_at&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(P$,{className:"w-3 h-3"}),new Date(se.published_at).toLocaleDateString()]}),i.jsxs("span",{children:[se.view_count," views"]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>fr(se),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:i.jsx(B$,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>window.open(`/blog/${se.slug}`,"_blank"),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"View",children:i.jsx(sc,{className:"w-4 h-4"})}),se.status==="published"&&i.jsx("button",{onClick:()=>Oi(se),className:"p-2 text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/30 rounded-lg transition-colors",title:"Post to Social Media",children:i.jsx(tA,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>ms(se),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete",children:i.jsx(oi,{className:"w-4 h-4"})})]})]},se.id))})}),f>1&&i.jsx("div",{className:"flex justify-center gap-2",children:Array.from({length:f},(se,Ke)=>i.jsx("button",{onClick:()=>h(Ke+1),className:`px-3 py-1 rounded transition-colors ${u===Ke+1?"bg-emerald-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:Ke+1},Ke))})]})}function bSe(){const[e,t]=g.useState(null),[r,n]=g.useState(!0),[s,a]=g.useState(""),[o,l]=g.useState(!1);g.useEffect(()=>{d()},[]);const c=g.useMemo(()=>e?Math.max(e.total_subscribers-e.unsubscribed,0):0,[e]),d=async()=>{n(!0),a("");try{const p=await fetch("/api/newsletter/stats.php",{credentials:"same-origin"});if(!p.ok)throw new Error("Failed to load stats");const m=await p.json();if(!m.success)throw new Error(m.error||"Failed to load stats");t(m)}catch(p){console.error(p),a("Unable to load newsletter stats")}finally{n(!1)}},u=async()=>{try{l(!0);const p=await fetch("/api/newsletter/export.php",{credentials:"same-origin"});if(!p.ok)throw new Error("Export failed");const m=await p.blob(),x=window.URL.createObjectURL(m),b=document.createElement("a");b.href=x,b.download="newsletter-subscribers.csv",document.body.appendChild(b),b.click(),b.remove(),window.URL.revokeObjectURL(x)}catch(p){console.error(p),a("Unable to export subscribers")}finally{l(!1)}},h=g.useMemo(()=>{if(!(e!=null&&e.by_source))return[];const p=Object.values(e.by_source).reduce((m,x)=>m+x,0);return Object.entries(e.by_source).map(([m,x])=>({source:m,count:x,percent:p>0?Math.round(x/p*1e3)/10:0}))},[e]),f=g.useMemo(()=>e?`${(Number.isFinite(e.confirmation_rate)?e.confirmation_rate:0).toFixed(1)}%`:"0%",[e]);return r?i.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6",children:i.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Loading newsletter stats..."})}):s?i.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6",children:[i.jsx("p",{className:"text-red-600",children:s}),i.jsxs("button",{onClick:d,className:"mt-4 inline-flex items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-white hover:bg-blue-700",children:[i.jsx(QE,{className:"w-4 h-4"}),"Retry"]})]}):i.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6",children:[i.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(kg,{className:"w-6 h-6 text-emerald-500"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Newsletter Dashboard"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Track subscribers and engagement sources."})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:d,className:"inline-flex items-center gap-2 rounded-md border border-gray-200 bg-white px-3 py-2 text-sm font-medium text-gray-800 shadow-sm transition hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-900 dark:text-white dark:hover:bg-gray-800",children:[i.jsx(QE,{className:"w-4 h-4"}),"Refresh"]}),i.jsxs("button",{onClick:u,disabled:o,className:"inline-flex items-center gap-2 rounded-md bg-emerald-500 px-3 py-2 text-sm font-semibold text-white shadow hover:bg-emerald-600 disabled:opacity-60",children:[i.jsx(O$,{className:"w-4 h-4"}),o?"Exporting...":"Export CSV"]})]})]}),e&&i.jsxs("div",{className:"mt-6 space-y-8",children:[i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[i.jsx(Lu,{label:"Total Subscribers",value:e.total_subscribers,icon:i.jsx(Ix,{className:"w-5 h-5"})}),i.jsx(Lu,{label:"Confirmed",value:e.confirmed_subscribers,accent:"text-emerald-600"}),i.jsx(Lu,{label:"Unconfirmed",value:e.unconfirmed_subscribers,accent:"text-amber-600"}),i.jsx(Lu,{label:"Unsubscribed",value:e.unsubscribed,accent:"text-red-600"}),i.jsx(Lu,{label:"Confirmation Rate",value:f,accent:"text-blue-600"})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[i.jsxs("div",{className:"rounded-lg border border-gray-200 p-4 dark:border-gray-700",children:[i.jsx("h3",{className:"mb-3 text-sm font-semibold uppercase tracking-wide text-gray-600 dark:text-gray-300",children:"Sources"}),i.jsxs("p",{className:"mb-2 text-xs text-gray-500 dark:text-gray-400",children:["Based on ",c," active subscriptions."]}),h.length===0?i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"No source data yet."}):i.jsx("div",{className:"space-y-2",children:h.map(p=>i.jsxs("div",{className:"flex items-center justify-between rounded-md bg-gray-50 px-3 py-2 text-sm dark:bg-gray-900",children:[i.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:p.source}),i.jsxs("div",{className:"flex items-center gap-3 text-gray-900 dark:text-white",children:[i.jsx("span",{className:"font-semibold",children:p.count}),i.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:[p.percent,"%"]})]})]},p.source))})]}),i.jsxs("div",{className:"rounded-lg border border-gray-200 p-4 dark:border-gray-700",children:[i.jsx("h3",{className:"mb-3 text-sm font-semibold uppercase tracking-wide text-gray-600 dark:text-gray-300",children:"Preferences"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-200",children:[i.jsx(yw,{label:"New chapters",value:e.by_preference.notify_chapters}),i.jsx(yw,{label:"Blog posts",value:e.by_preference.notify_blog}),i.jsx(yw,{label:"Image galleries",value:e.by_preference.notify_gallery})]})]})]}),i.jsxs("div",{className:"rounded-lg border border-gray-200 p-4 dark:border-gray-700",children:[i.jsx("h3",{className:"mb-3 text-sm font-semibold uppercase tracking-wide text-gray-600 dark:text-gray-300",children:"Recent signups"}),e.recent_signups.length===0?i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"No signups yet."}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Email"}),i.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Source"}),i.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Status"}),i.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Preferences"}),i.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Created"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:e.recent_signups.map(p=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-2 text-gray-900 dark:text-white",children:ySe(p.email)}),i.jsx("td",{className:"px-4 py-2 text-gray-700 dark:text-gray-200",children:p.source||"unknown"}),i.jsx("td",{className:"px-4 py-2",children:i.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ${p.is_confirmed?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-200":"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200"}`,children:p.is_confirmed?"Confirmed":"Pending"})}),i.jsx("td",{className:"px-4 py-2 text-gray-700 dark:text-gray-200",children:vSe(p)}),i.jsx("td",{className:"px-4 py-2 text-gray-700 dark:text-gray-200",children:new Date(p.created_at).toLocaleString()})]},p.id))})]})})]})]})]})}function Lu({label:e,value:t,icon:r,accent:n}){return i.jsx("div",{className:"rounded-lg border border-gray-200 p-4 shadow-sm dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e}),i.jsx("p",{className:`mt-1 text-2xl font-semibold text-gray-900 dark:text-white ${n||""}`,children:t})]}),r&&i.jsx("div",{className:"text-gray-500 dark:text-gray-300",children:r})]})})}function yw({label:e,value:t}){return i.jsxs("div",{className:"flex items-center justify-between rounded-md bg-gray-50 px-3 py-2 dark:bg-gray-900",children:[i.jsx("span",{children:e}),i.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:t})]})}function ySe(e){const[t,r]=e.split("@");return r?t.length<=2?`${t.slice(0,1)}***@${r}`:`${t.slice(0,1)}***${t.slice(-1)}@${r}`:e}function vSe(e){const t=[];return e.notify_chapters&&t.push(""),e.notify_blog&&t.push(""),e.notify_gallery&&t.push(""),t.length?t.join(" "):""}function wSe(){const e=Ba(),r=(()=>{const n=e.pathname.split("/").filter(Boolean);n[0]==="admin"&&n.shift();const s=[{label:"Dashboard",path:"/admin"}],a={author:"Author Profile",galleries:"Image Galleries",stories:"Stories & Chapters",socials:"Social Media",newsletter:"Newsletter",moderation:"Moderation",password:"Change Password",analytics:"Analytics"};let o="/admin";return n.forEach(l=>{o+=`/${l}`;const c=a[l]||l.charAt(0).toUpperCase()+l.slice(1);s.push({label:c,path:o})}),s})();return r.length<=1?null:i.jsx("nav",{className:"bg-white border-b border-gray-200 px-4 py-3",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:i.jsx("ol",{className:"flex items-center space-x-2 text-sm",children:r.map((n,s)=>i.jsxs("li",{className:"flex items-center",children:[s>0&&i.jsx("svg",{className:"w-4 h-4 text-gray-400 mx-2",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),s===r.length-1?i.jsx("span",{className:"text-gray-500 font-medium",children:n.label}):i.jsx(Me,{to:n.path,className:"text-blue-600 hover:text-blue-800 font-medium transition-colors",children:n.label})]},n.path))})})})}function kSe(){const[e,t]=g.useState(!1),[r,n]=g.useState(null),[s,a]=g.useState(!0);g.useEffect(()=>{o()},[]);const o=async()=>{try{const d=await fetch("/api/auth/me.php",{credentials:"same-origin"});if(d.ok){const u=await d.json();u.user&&(n(u.user),t(!0))}}catch(d){console.error("Auth check failed:",d)}finally{a(!1)}},l=async(d,u)=>{try{const f=await(await fetch("/api/auth/login.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({username:d,password:u})})).json();return f.success&&f.user?(n(f.user),t(!0),{success:!0}):{success:!1,error:f.error||"Login failed"}}catch{return{success:!1,error:"Network error"}}},c=async()=>{try{await fetch("/api/auth/logout.php",{method:"POST",credentials:"same-origin"})}catch(d){console.error("Logout error:",d)}finally{n(null),t(!1)}};return s?i.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:i.jsx("div",{className:"text-lg text-gray-900 dark:text-white",children:"Loading..."})}):e?i.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[i.jsx(NSe,{user:r,onLogout:c}),i.jsx(wSe,{}),i.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:i.jsxs(Ld,{children:[i.jsx(Ve,{path:"/",element:i.jsx(SSe,{})}),i.jsx(Ve,{path:"/author",element:i.jsx(VX,{})}),i.jsx(Ve,{path:"/galleries/*",element:i.jsx(qX,{})}),i.jsx(Ve,{path:"/stories/*",element:i.jsx(WX,{})}),i.jsx(Ve,{path:"/uploads",element:i.jsx(ZX,{})}),i.jsx(Ve,{path:"/socials",element:i.jsx(GX,{})}),i.jsx(Ve,{path:"/social-api",element:i.jsx(KX,{})}),i.jsx(Ve,{path:"/email",element:i.jsx(YX,{})}),i.jsx(Ve,{path:"/moderation",element:i.jsx(XX,{})}),i.jsx(Ve,{path:"/password",element:i.jsx(JX,{})}),i.jsx(Ve,{path:"/analytics",element:i.jsx(wpe,{})}),i.jsx(Ve,{path:"/newsletter",element:i.jsx(bSe,{})}),i.jsx(Ve,{path:"/litrpg",element:i.jsx(kpe,{})}),i.jsx(Ve,{path:"/homepage",element:i.jsx(nye,{})}),i.jsx(Ve,{path:"/blog",element:i.jsx(xSe,{})})]})})]}):i.jsx(jSe,{onLogin:l})}function jSe({onLogin:e}){const[t,r]=g.useState(""),[n,s]=g.useState(""),[a,o]=g.useState(""),[l,c]=g.useState(!1),d=async u=>{u.preventDefault(),c(!0),o("");const h=await e(t,n);h.success||o(h.error||"Login failed"),c(!1)};return i.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md max-w-md w-full",children:[i.jsx("h1",{className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-white",children:"Author CMS Admin"}),a&&i.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-400 rounded",children:a}),i.jsxs("form",{onSubmit:d,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2",children:"Username"}),i.jsx("input",{type:"text",value:t,onChange:u=>r(u.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter username",required:!0})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2",children:"Password"}),i.jsx("input",{type:"password",value:n,onChange:u=>s(u.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter password",required:!0})]}),i.jsx("button",{type:"submit",disabled:l,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:l?"Logging in...":"Login"})]})]})})}function NSe({user:e,onLogout:t}){return i.jsx("nav",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between h-16",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Author CMS Admin"}),e&&i.jsxs("span",{className:"ml-4 text-sm text-gray-600 dark:text-gray-400",children:["Welcome, ",e.username," (",e.role,")"]})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(jf,{}),i.jsx("a",{href:"/",className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-sm",target:"_blank",rel:"noopener noreferrer",children:"View Site"}),i.jsx("button",{onClick:t,className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",children:"Logout"})]})]})})})}function SSe(){const[e,t]=g.useState(null),[r,n]=g.useState(!0),[s,a]=g.useState(null);g.useEffect(()=>{o()},[]);const o=async()=>{try{const l=await fetch("/api/admin/quick-stats.php",{credentials:"same-origin"});if(!l.ok)throw new Error("Failed to fetch quick stats");const c=await l.json();c.success?t(c.data):a(c.error||"Failed to load stats")}catch(l){console.error("Quick stats error:",l),a("Failed to load stats")}finally{n(!1)}};return i.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-6",children:"Admin Dashboard"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx(On,{title:"Homepage Manager",href:"/admin/homepage",description:"Configure hero section, activity feed, and tools",icon:""}),i.jsx(On,{title:"Author Profile",href:"/admin/author",description:"Manage author bio, tagline, and profile images",icon:""}),i.jsx(On,{title:"Image Galleries",href:"/admin/galleries",description:"Create and manage image galleries",icon:""}),i.jsx(On,{title:"Stories & Chapters",href:"/admin/stories",description:"Write and publish stories and chapters",icon:""}),i.jsx(On,{title:"Blog Manager",href:"/admin/blog",description:"Create and manage blog posts with TipTap editor",icon:""}),i.jsx(On,{title:"Upload Manager",href:"/admin/uploads",description:"Manage uploaded images and files",icon:""}),i.jsx(On,{title:"Social Media",href:"/admin/socials",description:"Update social media links across all sites",icon:""}),i.jsx(On,{title:"Social API Credentials",href:"/admin/social-api",description:"Connect Instagram, Twitter, Facebook, Discord for blog crossposting",icon:""}),i.jsx(On,{title:"Email Settings",href:"/admin/email",description:"Configure SMTP settings for emails (shoutouts, blog, etc.)",icon:""}),i.jsx(On,{title:"Moderation",href:"/admin/moderation",description:"Moderate comments and manage user bans",icon:""}),i.jsx(On,{title:"Change Password",href:"/admin/password",description:"Update your admin account password securely",icon:""}),i.jsx(On,{title:"Analytics",href:"/admin/analytics",description:"View site statistics and engagement metrics",icon:""}),i.jsx(On,{title:"Newsletter",href:"/admin/newsletter",description:"View signups, sources, and export subscribers",icon:""}),i.jsx(On,{title:"LitRPG Manager",href:"/admin/litrpg",description:"Manage game data: characters, classes, abilities, monsters, items",icon:""})]}),i.jsxs("div",{className:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-blue-900 dark:text-blue-300 mb-2",children:"Quick Stats"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:"Galleries"}),i.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:r?"Loading...":s?"Error":(e==null?void 0:e.galleries)||0})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:"Stories"}),i.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:r?"Loading...":s?"Error":(e==null?void 0:e.stories)||0})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:"Comments"}),i.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:r?"Loading...":s?"Error":(e==null?void 0:e.comments)||0})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:"Total Likes"}),i.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:r?"Loading...":s?"Error":(e==null?void 0:e.total_likes)||0})]})]})]})]})})}function On({title:e,href:t,description:r,icon:n}){return i.jsxs(Me,{to:t,className:"block p-6 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("span",{className:"text-2xl mr-3",children:n}),i.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:e})]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:r})]})}function CSe(e){const t=new Date(e),n=Math.floor((new Date().getTime()-t.getTime())/1e3);return n<60?"Just now":n<3600?`${Math.floor(n/60)} min ago`:n<86400?`${Math.floor(n/3600)} hours ago`:n<604800?`${Math.floor(n/86400)} days ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function _Se(){var C;const{theme:e}=Wt(),[t,r]=g.useState(null),[n,s]=g.useState(!0),[a,o]=g.useState(null),l=g.useCallback(P=>{o(P),document.body.style.overflow="hidden"},[]),c=g.useCallback(()=>{o(null),document.body.style.overflow=""},[]);g.useEffect(()=>{fetch("/api/homepage/get.php").then(P=>{if(!P.ok)throw new Error("API unavailable");return P.json()}).then(P=>{P.success?r(P):(console.log("Database offline, using mock data"),r(ln.homepage))}).catch(()=>{console.log("Database offline, using mock data"),r(ln.homepage)}).finally(()=>s(!1))},[]);const d=g.useMemo(()=>t!=null&&t.profile?e==="light"?$r(t.profile.background_image_light,"/images/lofi_light_bg.webp"):$r(t.profile.background_image_dark,"/images/lofi_bg.webp"):"/images/lofi_bg.webp",[t,e]);if(n)return i.jsx("div",{className:"min-h-screen bg-neutral-950 flex items-center justify-center",children:i.jsx("div",{className:"text-white text-lg",children:"Loading..."})});if(!t)return i.jsx("div",{className:"min-h-screen bg-neutral-950 flex items-center justify-center",children:i.jsx("div",{className:"text-white text-lg",children:"Failed to load homepage data"})});const{profile:u,settings:h,featured_story:f,stories:p,activity:m,tools:x,socials:b}=t,y=e==="light"?h.brand_color||"#10b981":h.brand_color_dark||"#10b981",v=e==="light"?"bg-white/60":"bg-black/40",w=e==="light"?"text-gray-900":"text-white",j=e==="light"?"text-gray-900":"text-neutral-100",N=e==="light"?"text-gray-900":"text-neutral-200",k=e==="light"?"bg-white/40 border-gray-200 backdrop-blur-sm":"bg-neutral-900/30 border-white/10 backdrop-blur-sm",S=e==="light"?"bg-white/90":"bg-white/10";return i.jsxs("div",{className:`relative min-h-screen ${w} font-sans transition-colors duration-200`,children:[i.jsx("style",{children:`
        :root { --brand-color: ${y}; }
        .brand-bg { background-color: ${y}; }
        .brand-text { color: ${y}; }
        .brand-border { border-color: ${y}; }
      `}),i.jsx("div",{className:"fixed inset-0 z-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url('${d}')`,backgroundColor:e==="light"?"#f7f7f7":"#0a0a0a"}}),i.jsx("div",{className:`fixed inset-0 z-[1] ${v} pointer-events-none`}),a&&i.jsx(MSe,{story:a,theme:e,onClose:c}),i.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto px-4 pb-24",children:[i.jsxs("header",{className:"flex items-center justify-between py-6",children:[i.jsxs(Me,{to:"/",className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-9 w-9 rounded-full brand-bg flex items-center justify-center text-sm font-black text-white",children:((C=u.name)==null?void 0:C.slice(0,2).toUpperCase())||"OW"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold tracking-wide uppercase brand-text",children:u.name||"Author"}),i.jsx("div",{className:`text-xs ${j}`,children:u.tagline||h.hero_tagline})]})]}),i.jsxs("nav",{className:"hidden md:flex items-center gap-6 text-sm font-medium",children:[i.jsx(Me,{to:"/storytime",className:`${j} hover:${w} transition-colors`,children:"Stories"}),i.jsx(Me,{to:"/blog",className:`${j} hover:${w} transition-colors`,children:"Blog"}),i.jsx(Me,{to:"/galleries",className:`${j} hover:${w} transition-colors`,children:"Galleries"}),i.jsx(Me,{to:"/litrpg",className:`${j} hover:${w} transition-colors`,children:"Tools"}),i.jsx(jf,{}),h.newsletter_url&&i.jsx("a",{href:h.newsletter_url,target:"_blank",rel:"noopener noreferrer",className:"rounded-full brand-bg px-4 py-1.5 text-sm font-semibold text-white hover:opacity-90 transition-opacity",children:"Subscribe"})]})]}),i.jsxs("section",{className:"grid gap-10 md:grid-cols-[minmax(0,3fr)_minmax(0,2fr)] items-center pt-8 md:pt-16",children:[i.jsxs("div",{children:[i.jsx("p",{className:`inline-flex items-center gap-2 rounded-full ${S} px-3 py-1 text-xs font-medium uppercase tracking-[0.2em] brand-text border ${e==="light"?"border-gray-200":"border-white/10"}`,children:h.hero_tagline}),i.jsxs("h1",{className:"mt-5 text-4xl md:text-5xl lg:text-6xl font-extrabold tracking-tight",children:[h.hero_title,i.jsx("span",{className:"block brand-text",children:u.name})]}),i.jsx("p",{className:`mt-4 ${j} text-base md:text-lg max-w-xl`,children:h.hero_description}),i.jsxs("div",{className:"mt-8 flex flex-wrap gap-4",children:[i.jsx(Me,{to:"/storytime",className:"rounded-lg brand-bg px-6 py-3 text-sm font-semibold text-white shadow-lg hover:opacity-90 transition-opacity",children:"Start Reading"}),i.jsx(Me,{to:"/galleries",className:`rounded-lg border ${e==="light"?"border-gray-300 bg-white/50":"border-white/20 bg-white/5"} px-6 py-3 text-sm font-semibold ${w} hover:bg-white/10 transition-colors`,children:"Browse Galleries"})]}),((b==null?void 0:b.royalroad)||(b==null?void 0:b.patreon))&&i.jsxs("div",{className:`mt-6 flex flex-wrap items-center gap-4 text-xs ${N}`,children:[b.royalroad&&i.jsxs("a",{href:b.royalroad,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:opacity-80",children:[i.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-emerald-500/20 text-emerald-400 text-xs font-bold",children:"RR"}),"Live on RoyalRoad"]}),b.patreon&&i.jsxs("a",{href:b.patreon,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:opacity-80",children:[i.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-pink-500/20 text-pink-400 text-xs font-bold",children:""}),"Early chapters on Patreon"]})]})]}),h.show_featured_story&&f&&i.jsx(ESe,{story:f,theme:e,cardBg:k,textSecondary:j,onImageClick:()=>l(f)})]}),p.length>0&&i.jsxs("section",{className:"mt-12 md:mt-14",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:`text-2xl md:text-3xl font-bold ${w}`,children:"Explore the universes"}),i.jsx(Me,{to:"/storytime",className:`text-xs font-semibold uppercase tracking-[0.2em] ${N} hover:${w}`,children:"View all series"})]}),i.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:p.slice(0,4).map(P=>i.jsx(ASe,{story:P,theme:e,cardBg:k,textSecondary:j,onImageClick:()=>l(P)},P.id))})]}),(h.show_activity_feed||h.show_tools_section)&&i.jsxs("section",{className:"mt-10 md:mt-12 grid gap-8 md:grid-cols-[minmax(0,3fr)_minmax(0,2fr)]",children:[h.show_activity_feed&&m.length>0&&i.jsx(TSe,{activity:m,theme:e,cardBg:k,textSecondary:j,textMuted:N}),h.show_tools_section&&x.length>0&&i.jsx(PSe,{tools:x,theme:e,cardBg:k,textSecondary:j})]}),i.jsxs("footer",{className:`mt-12 border-t ${e==="light"?"border-gray-200":"border-white/10"} pt-6`,children:[i.jsx(ar,{variant:"footer",showCopyright:!1}),i.jsxs("div",{className:`text-center text-xs pb-4 ${N}`,children:[" ",new Date().getFullYear()," ",u.name,". All rights reserved."]}),i.jsxs("div",{className:`text-center text-xs pb-6 ${N}`,children:[i.jsx("span",{className:"opacity-60",children:"Owner of this site?"})," ",i.jsx(Me,{to:"/admin",className:"opacity-60 hover:opacity-100 transition-opacity underline-offset-2 hover:underline",children:"Admin Login"})]})]})]})]})}function ESe({story:e,theme:t,cardBg:r,textSecondary:n,onImageClick:s}){const a=t==="light"?"text-gray-900":"text-white";return i.jsxs("div",{className:`rounded-3xl ${r} border shadow-2xl backdrop-blur-xl p-6 md:p-7 flex flex-col gap-4`,children:[i.jsx("div",{className:`text-xs font-semibold uppercase tracking-[0.22em] ${t==="light"?"text-gray-500":"text-neutral-400"}`,children:"Featured Universe"}),i.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[e.cover_image?i.jsxs("button",{onClick:s,className:"relative h-40 w-28 flex-shrink-0 rounded-xl overflow-hidden cursor-zoom-in group/img focus:outline-none focus:ring-2 focus:ring-offset-2 brand-border shadow-lg","aria-label":`View ${e.title} cover art`,children:[i.jsx("img",{src:e.cover_image,alt:e.title,className:"h-full w-full object-cover group-hover/img:scale-[1.03] transition-transform duration-200"}),i.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover/img:bg-black/30 transition-colors flex items-center justify-center",children:i.jsx(W$,{className:"h-5 w-5 text-white opacity-0 group-hover/img:opacity-100 transition-opacity"})})]}):i.jsx("div",{className:"h-40 w-28 flex-shrink-0 rounded-xl bg-gradient-to-b from-emerald-400 to-sky-700 shadow-lg"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:`text-xl font-bold ${a} mb-1`,children:e.title}),e.tagline&&i.jsx("p",{className:"text-xs font-medium brand-text mb-2",children:e.tagline}),i.jsx("p",{className:`text-sm ${n}`,children:e.homepage_description||e.description}),e.genres&&e.genres.length>0&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-2 text-[0.65rem]",children:e.genres.map((o,l)=>i.jsx("span",{className:`rounded-full px-3 py-1 ${t==="light"?"bg-gray-200/80":"bg-white/10"}`,children:o},l))})]})]}),i.jsxs("div",{className:`flex flex-col gap-3 border-t ${t==="light"?"border-gray-200":"border-white/10"} pt-4`,children:[e.external_links&&e.external_links.length>0&&i.jsx("div",{className:`flex flex-col gap-2 text-xs ${n}`,children:e.external_links.map((o,l)=>i.jsxs("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between hover:opacity-80",children:[i.jsx("span",{children:o.label}),o.label.toLowerCase().includes("royal")&&e.latest_chapter_number&&i.jsxs("span",{className:"brand-text font-semibold",children:["Ch. ",e.latest_chapter_number]})]},l))}),i.jsx(Me,{to:`/storytime/story/${e.slug||e.id}`,className:"rounded-lg brand-bg px-4 py-2 text-sm font-semibold text-white text-center hover:opacity-90 transition-opacity",children:e.cta_text||"Start Reading"})]})]})}function ASe({story:e,theme:t,cardBg:r,textSecondary:n,onImageClick:s}){const a=t==="light"?"text-gray-900":"text-white";return i.jsxs("article",{className:`group rounded-3xl ${r} border p-5 sm:p-6 md:p-7 backdrop-blur-xl shadow-xl flex flex-col`,children:[i.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[e.cover_image?i.jsxs("button",{onClick:s,className:"relative h-32 w-24 flex-shrink-0 rounded-xl overflow-hidden cursor-zoom-in group/img focus:outline-none focus:ring-2 focus:ring-offset-2 brand-border","aria-label":`View ${e.title} cover art`,children:[i.jsx("img",{src:e.cover_image,alt:e.title,className:"h-full w-full object-cover group-hover/img:scale-[1.03] transition-transform duration-200"}),i.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover/img:bg-black/30 transition-colors flex items-center justify-center",children:i.jsx(W$,{className:"h-5 w-5 text-white opacity-0 group-hover/img:opacity-100 transition-opacity"})})]}):i.jsx("div",{className:"h-32 w-24 flex-shrink-0 rounded-xl bg-gradient-to-b from-slate-200/70 to-slate-800/80 group-hover:scale-[1.02] transition-transform"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:`text-lg font-semibold ${a}`,children:e.title}),e.tagline&&i.jsx("p",{className:"mt-1 text-xs font-medium brand-text",children:e.tagline}),i.jsx("p",{className:`mt-2 text-sm ${n} line-clamp-3`,children:e.homepage_description||e.description}),e.genres&&e.genres.length>0&&i.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5 text-[0.6rem]",children:e.genres.slice(0,4).map((o,l)=>i.jsx("span",{className:`rounded-full px-2.5 py-0.5 ${t==="light"?"bg-gray-200/80":"bg-white/10"}`,children:o},l))})]})]}),i.jsx("div",{className:"mt-4 flex items-center justify-end",children:i.jsx(Me,{to:`/storytime/story/${e.slug||e.id}`,className:`rounded-full px-4 py-1.5 text-xs font-semibold ${t==="light"?"bg-gray-200":"bg-white/10"} ${a} group-hover:brand-bg group-hover:text-white transition-colors`,children:e.cta_text||"Start Reading"})})]})}function TSe({activity:e,theme:t,cardBg:r,textSecondary:n,textMuted:s}){const a=t==="light"?"text-gray-900":"text-white";return i.jsxs("div",{children:[i.jsx("h2",{className:`text-2xl font-bold ${a} mb-4`,children:"Latest from the worlds"}),i.jsx("div",{className:"space-y-2.5",children:e.slice(0,4).map(o=>i.jsxs("a",{href:o.url||"#",target:o.url?"_blank":void 0,rel:"noopener noreferrer",className:`flex items-start gap-3 rounded-xl ${r} border px-3.5 py-2.5 backdrop-blur-xl hover:opacity-90 transition-opacity`,children:[i.jsx("div",{className:`mt-0.5 flex h-7 w-7 items-center justify-center rounded-full ${t==="light"?"bg-gray-200":"bg-white/10"} text-[0.6rem] font-semibold uppercase`,children:o.source.slice(0,2)}),i.jsxs("div",{className:"flex-1 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs brand-text mb-0.5",children:[i.jsx("span",{className:"font-semibold",children:o.label||o.type}),o.series_title&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:s,children:""}),i.jsx("span",{className:n,children:o.series_title})]})]}),i.jsx("div",{className:`${a} font-medium text-sm`,children:o.title}),i.jsx("div",{className:`mt-0.5 text-xs ${s}`,children:o.time_ago||CSe(o.published_at)})]})]},o.id))}),i.jsx("div",{className:`my-5 border-t ${t==="light"?"border-gray-200/60":"border-white/10"}`}),i.jsxs("div",{className:`rounded-xl ${r} border p-4`,children:[i.jsx("p",{className:`text-sm ${a} font-medium mb-3`,children:"Want updates when new worlds unlock?"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2.5 items-start sm:items-center",children:[i.jsx(pa,{variant:"button",source:"homepage-activity",buttonText:"Get chapter & art updates"}),i.jsx("a",{href:"https://www.patreon.com/cw/oc_wanderer",target:"_blank",rel:"noopener noreferrer",className:`text-sm ${n} hover:text-orange-500 transition-colors`,children:"Support on Patreon "})]})]})]})}function PSe({tools:e,theme:t,cardBg:r,textSecondary:n}){const s=t==="light"?"text-gray-900":"text-white";return i.jsxs("div",{className:`rounded-3xl ${r} border p-6 backdrop-blur-xl shadow-xl`,children:[i.jsx("h2",{className:`text-xl font-bold ${s} mb-2`,children:"Tools & Resources"}),i.jsx("p",{className:`text-sm ${n} mb-4`,children:"Explore tools built around the stories."}),i.jsx("div",{className:"space-y-3",children:e.map(a=>i.jsxs(Me,{to:a.link||"#",className:`rounded-2xl ${t==="light"?"bg-gray-100/80":"bg-white/5"} border ${t==="light"?"border-gray-200":"border-white/10"} px-4 py-3 text-sm flex flex-col gap-1 hover:opacity-80 transition-opacity block`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xl",children:a.icon}),i.jsx("span",{className:`font-semibold ${s}`,children:a.title})]}),a.description&&i.jsx("div",{className:`text-xs ${n}`,children:a.description})]},a.id))}),i.jsx(Me,{to:"/litrpg",className:`mt-5 w-full rounded-lg ${t==="light"?"bg-gray-200":"bg-white/10"} px-4 py-2.5 text-sm font-semibold ${s} hover:bg-emerald-500 hover:text-white transition-colors block text-center`,children:"Open tools hub"})]})}function MSe({story:e,theme:t,onClose:r}){const n=t==="light"?"text-gray-900":"text-white",s=t==="light"?"text-gray-700":"text-neutral-200";return g.useEffect(()=>{const a=o=>{o.key==="Escape"&&r()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[r]),i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:r,role:"dialog","aria-modal":"true","aria-labelledby":"lightbox-title",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),i.jsxs("div",{className:`relative max-w-2xl w-full ${t==="light"?"bg-white":"bg-neutral-900"} rounded-2xl shadow-2xl overflow-hidden`,onClick:a=>a.stopPropagation(),children:[i.jsx("button",{onClick:r,className:`absolute top-4 right-4 z-10 p-2 rounded-full ${t==="light"?"bg-gray-100 hover:bg-gray-200":"bg-white/10 hover:bg-white/20"} transition-colors`,"aria-label":"Close lightbox",children:i.jsx(Dt,{className:"h-5 w-5"})}),i.jsxs("div",{className:"flex flex-col md:flex-row",children:[i.jsx("div",{className:"md:w-1/2 flex-shrink-0",children:e.cover_image&&i.jsx("img",{src:e.cover_image,alt:`${e.title} cover art`,className:"w-full h-64 md:h-full object-cover"})}),i.jsxs("div",{className:"p-6 md:w-1/2 flex flex-col",children:[i.jsx("h2",{id:"lightbox-title",className:`text-2xl font-bold ${n} mb-2`,children:e.title}),e.tagline&&i.jsx("p",{className:"text-sm font-medium brand-text mb-3",children:e.tagline}),e.genres&&e.genres.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.genres.map((a,o)=>i.jsx("span",{className:`text-xs rounded-full px-3 py-1 ${t==="light"?"bg-gray-100":"bg-white/10"} ${s}`,children:a},o))}),i.jsx("p",{className:`text-sm ${s} flex-1 mb-4`,children:e.homepage_description||e.description}),i.jsx(Me,{to:`/storytime/story/${e.slug||e.id}`,onClick:r,className:"rounded-lg brand-bg px-5 py-2.5 text-sm font-semibold text-white text-center hover:opacity-90 transition-opacity",children:e.cta_text||"Start Reading"})]})]})]})]})}function OSe(){const e=Ba();return g.useEffect(()=>{Rd.trackPageView()},[e.pathname]),null}function $Se(){return i.jsxs(i.Fragment,{children:[i.jsx(OSe,{}),i.jsxs(Ld,{children:[i.jsx(Ve,{path:"/",element:i.jsx(_Se,{})}),i.jsx(Ve,{path:"/homepage-classic",element:i.jsx(XW,{})}),i.jsx(Ve,{path:"/galleries/*",element:i.jsx(hV,{})}),i.jsx(Ve,{path:"/storytime/*",element:i.jsx(Iq,{})}),i.jsx(Ve,{path:"/blog/*",element:i.jsx(UX,{})}),i.jsx(Ve,{path:"/litrpg/*",element:i.jsx(fX,{})}),i.jsx(Ve,{path:"/shoutouts/*",element:i.jsx(wX,{})}),i.jsx(Ve,{path:"/admin/*",element:i.jsx(kSe,{})}),i.jsx(Ve,{path:"*",element:i.jsx(QU,{to:"/",replace:!0})})]})]})}z5(document.getElementById("root")).render(i.jsx(g.StrictMode,{children:i.jsx(n$,{children:i.jsx(lW,{children:i.jsx(WW,{children:i.jsx($Se,{})})})})}));
